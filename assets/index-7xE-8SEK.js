var De=Object.defineProperty;var Ae=(r,t,e)=>t in r?De(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Pt=(r,t,e)=>Ae(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function nt(){}function Ne(r,t){for(const e in t)r[e]=t[e];return r}function be(r){return r()}function Qt(){return Object.create(null)}function xt(r){r.forEach(be)}function ge(r){return typeof r=="function"}function ot(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let Ct;function st(r,t){return r===t?!0:(Ct||(Ct=document.createElement("a")),Ct.href=t,r===Ct.href)}function Ge(r){return Object.keys(r).length===0}function me(r,...t){if(r==null){for(const i of t)i(void 0);return nt}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function xe(r){let t;return me(r,e=>t=e)(),t}function Ft(r,t,e){r.$$.on_destroy.push(me(t,e))}function Ce(r,t,e,i){if(r){const n=ke(r,t,e,i);return r[0](n)}}function ke(r,t,e,i){return r[1]&&i?Ne(e.ctx.slice(),r[1](i(t))):e.ctx}function Ee(r,t,e,i){if(r[2]&&i){const n=r[2](i(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const c=[],f=Math.max(t.dirty.length,n.length);for(let a=0;a<f;a+=1)c[a]=t.dirty[a]|n[a];return c}return t.dirty|n}return t.dirty}function He(r,t,e,i,n,c){if(n){const f=ke(t,e,i,c);r.p(f,n)}}function Ie(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function Xt(r){return r??""}function R(r,t){r.appendChild(t)}function P(r,t,e){r.insertBefore(t,e||null)}function B(r){r.parentNode&&r.parentNode.removeChild(r)}function jt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function z(r){return document.createElement(r)}function Z(r){return document.createTextNode(r)}function U(){return Z(" ")}function Mt(){return Z("")}function _t(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function J(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Fe(r){return Array.from(r.childNodes)}function gt(r,t){t=""+t,r.data!==t&&(r.data=t)}function Yt(r,t){r.value=t??""}function rt(r,t,e,i){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function Me(r,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:i})}function Zt(r,t){return new r(t)}let At;function Dt(r){At=r}function Be(){if(!At)throw new Error("Function called outside component initialization");return At}function Pe(){const r=Be();return(t,e,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[t];if(n){const c=Me(t,e,{cancelable:i});return n.slice().forEach(f=>{f.call(r,c)}),!c.defaultPrevented}return!0}}function Je(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const wt=[],Nt=[];let Tt=[];const Lt=[],qe=Promise.resolve();let zt=!1;function Le(){zt||(zt=!0,qe.then(we))}function Gt(r){Tt.push(r)}function $e(r){Lt.push(r)}const Jt=new Set;let kt=0;function we(){if(kt!==0)return;const r=At;do{try{for(;kt<wt.length;){const t=wt[kt];kt++,Dt(t),ze(t.$$)}}catch(t){throw wt.length=0,kt=0,t}for(Dt(null),wt.length=0,kt=0;Nt.length;)Nt.pop()();for(let t=0;t<Tt.length;t+=1){const e=Tt[t];Jt.has(e)||(Jt.add(e),e())}Tt.length=0}while(wt.length);for(;Lt.length;)Lt.pop()();zt=!1,Jt.clear(),Dt(r)}function ze(r){if(r.fragment!==null){r.update(),xt(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Gt)}}function We(r){const t=[],e=[];Tt.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),Tt=t}const Et=new Set;let bt;function dt(){bt={r:0,c:[],p:bt}}function ht(){bt.r||xt(bt.c),bt=bt.p}function q(r,t){r&&r.i&&(Et.delete(r),r.i(t))}function W(r,t,e,i){if(r&&r.o){if(Et.has(r))return;Et.add(r),bt.c.push(()=>{Et.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}function it(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Te(r,t,e){const i=r.$$.props[t];i!==void 0&&(r.$$.bound[i]=e,e(r.$$.ctx[i]))}function X(r){r&&r.c()}function V(r,t,e){const{fragment:i,after_update:n}=r.$$;i&&i.m(t,e),Gt(()=>{const c=r.$$.on_mount.map(be).filter(ge);r.$$.on_destroy?r.$$.on_destroy.push(...c):xt(c),r.$$.on_mount=[]}),n.forEach(Gt)}function Q(r,t){const e=r.$$;e.fragment!==null&&(We(e.after_update),xt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Re(r,t){r.$$.dirty[0]===-1&&(wt.push(r),Le(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function ft(r,t,e,i,n,c,f=null,a=[-1]){const p=At;Dt(r);const l=r.$$={fragment:null,ctx:[],props:c,update:nt,not_equal:n,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Qt(),dirty:a,skip_bound:!1,root:t.target||p.$$.root};f&&f(l.root);let s=!1;if(l.ctx=e?e(r,t.props||{},(d,g,...T)=>{const _=T.length?T[0]:g;return l.ctx&&n(l.ctx[d],l.ctx[d]=_)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](_),s&&Re(r,d)),g}):[],l.update(),s=!0,xt(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const d=Fe(t.target);l.fragment&&l.fragment.l(d),d.forEach(B)}else l.fragment&&l.fragment.c();t.intro&&q(r.$$.fragment),V(r,t.target,t.anchor),we()}Dt(p)}class at{constructor(){Pt(this,"$$");Pt(this,"$$set")}$destroy(){Q(this,1),this.$destroy=nt}$on(t,e){if(!ge(e))return nt;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!Ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ue);const $t=[];function je(r,t=nt){let e;const i=new Set;function n(a){if(ot(r,a)&&(r=a,e)){const p=!$t.length;for(const l of i)l[1](),$t.push(l,r);if(p){for(let l=0;l<$t.length;l+=2)$t[l][0]($t[l+1]);$t.length=0}}}function c(a){n(a(r))}function f(a,p=nt){const l=[a,p];return i.add(l),i.size===1&&(e=t(n,c)||nt),a(r),()=>{i.delete(l),i.size===0&&e&&(e(),e=null)}}return{set:n,update:c,subscribe:f}}const Ht=je(""),St=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},pt=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,te=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Ke(r){let t,e=r[0].text+"",i;return{c(){t=z("div"),i=Z(e),J(t,"class","cardText svelte-13kvtzw")},m(n,c){P(n,t,c),R(t,i)},p(n,c){c&1&&e!==(e=n[0].text+"")&&gt(i,e)},d(n){n&&B(t)}}}function Ve(r){let t,e,i;return{c(){t=z("div"),J(t,"contenteditable","true"),J(t,"class","cardText svelte-13kvtzw"),r[0].text===void 0&&Gt(()=>r[5].call(t))},m(n,c){P(n,t,c),r[0].text!==void 0&&(t.innerText=r[0].text),e||(i=_t(t,"input",r[5]),e=!0)},p(n,c){c&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&B(t),e=!1,i()}}}function Qe(r){let t,e,i,n,c=r[0].cardType.passive&&ee();return{c(){t=z("img"),i=U(),c&&c.c(),n=Mt(),st(t.src,e=pt(r[0].cardType.type))||J(t,"src",e),J(t,"alt","My Icon"),J(t,"class","cardIcon svelte-13kvtzw")},m(f,a){P(f,t,a),P(f,i,a),c&&c.m(f,a),P(f,n,a)},p(f,a){a&1&&!st(t.src,e=pt(f[0].cardType.type))&&J(t,"src",e),f[0].cardType.passive?c||(c=ee(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(f){f&&(B(t),B(i),B(n)),c&&c.d(f)}}}function ee(r){let t;return{c(){t=z("p"),t.textContent="Passive",J(t,"class","mirrored svelte-13kvtzw")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function Xe(r){let t,e;function i(f,a){return f[2]?Qe:f[3]?Ve:Ke}let n=i(r),c=n(r);return{c(){t=z("div"),e=z("div"),c.c(),J(e,"class","card svelte-13kvtzw"),rt(e,"--colour",r[4]),J(t,"class","wrapper svelte-13kvtzw"),rt(t,"--rotation",r[1]+"deg")},m(f,a){P(f,t,a),R(t,e),c.m(e,null)},p(f,[a]){n===(n=i(f))&&c?c.p(f,a):(c.d(1),c=n(f),c&&(c.c(),c.m(e,null))),a&16&&rt(e,"--colour",f[4]),a&2&&rt(t,"--rotation",f[1]+"deg")},i:nt,o:nt,d(f){f&&B(t),c.d()}}}function Ye(r,t,e){let i,{card:n}=t,{rotation:c=0}=t,{back:f=!1}=t,{editable:a=!0}=t;function p(){n.text=this.innerText,e(0,n)}return r.$$set=l=>{"card"in l&&e(0,n=l.card),"rotation"in l&&e(1,c=l.rotation),"back"in l&&e(2,f=l.back),"editable"in l&&e(3,a=l.editable)},r.$$.update=()=>{r.$$.dirty&1&&e(4,i=St(n.cardType.type))},[n,c,f,a,i,p]}class Wt extends at{constructor(t){super(),ft(this,t,Ye,Xe,ot,{card:0,rotation:1,back:2,editable:3})}}function ne(r,t,e){const i=r.slice();return i[12]=t[e],i}function re(r){let t,e,i,n,c,f,a,p,l=r[5]&&ie(r),s=!r[3]&&ue(r);return{c(){t=z("div"),e=z("img"),n=U(),l&&l.c(),c=U(),s&&s.c(),f=Mt(),st(e.src,i=pt(r[0]))||J(e,"src",i),J(e,"alt","My Icon"),J(e,"class","cardIcon svelte-lm5vvd"),J(t,"class","select svelte-lm5vvd")},m(d,g){P(d,t,g),R(t,e),R(t,n),l&&l.m(t,null),P(d,c,g),s&&s.m(d,g),P(d,f,g),a||(p=_t(e,"click",r[8]),a=!0)},p(d,g){g&1&&!st(e.src,i=pt(d[0]))&&J(e,"src",i),d[5]?l?l.p(d,g):(l=ie(d),l.c(),l.m(t,null)):l&&(l.d(1),l=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,g):(s=ue(d),s.c(),s.m(f.parentNode,f))},d(d){d&&(B(t),B(c),B(f)),l&&l.d(),s&&s.d(d),a=!1,p()}}}function ie(r){let t,e=it(r[4]),i=[];for(let n=0;n<e.length;n+=1)i[n]=oe(ne(r,e,n));return{c(){t=z("div");for(let n=0;n<i.length;n+=1)i[n].c();J(t,"class","options svelte-lm5vvd"),rt(t,"--colour",r[6])},m(n,c){P(n,t,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null)},p(n,c){if(c&49){e=it(n[4]);let f;for(f=0;f<e.length;f+=1){const a=ne(n,e,f);i[f]?i[f].p(a,c):(i[f]=oe(a),i[f].c(),i[f].m(t,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=e.length}c&64&&rt(t,"--colour",n[6])},d(n){n&&B(t),jt(i,n)}}}function oe(r){let t,e,i,n,c;function f(){return r[9](r[12])}return{c(){t=z("img"),st(t.src,e=pt(r[12]))||J(t,"src",e),J(t,"alt","My Icon"),J(t,"class",i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(a,p){P(a,t,p),n||(c=_t(t,"click",f),n=!0)},p(a,p){r=a,p&16&&!st(t.src,e=pt(r[12]))&&J(t,"src",e),p&17&&i!==(i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&J(t,"class",i)},d(a){a&&B(t),n=!1,c()}}}function ue(r){let t,e,i,n,c,f,a;return{c(){t=z("input"),e=U(),i=z("label"),n=Z("Passive"),J(t,"type","checkbox"),J(t,"id",r[7]),J(t,"class","hidden"),J(i,"for",r[7]),J(i,"class",c="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(p,l){P(p,t,l),t.checked=r[1],P(p,e,l),P(p,i,l),R(i,n),f||(a=_t(t,"change",r[10]),f=!0)},p(p,l){l&2&&(t.checked=p[1]),l&2&&c!==(c="passive no-select "+(p[1]?"":"invisible")+" svelte-lm5vvd")&&J(i,"class",c)},d(p){p&&(B(t),B(e),B(i)),f=!1,a()}}}function Ze(r){let t,e=!r[2]&&re(r);return{c(){e&&e.c(),t=Mt()},m(i,n){e&&e.m(i,n),P(i,t,n)},p(i,[n]){i[2]?e&&(e.d(1),e=null):e?e.p(i,n):(e=re(i),e.c(),e.m(t.parentNode,t))},i:nt,o:nt,d(i){i&&B(t),e&&e.d(i)}}}function tn(r,t,e){let i,{cardType:n}=t,{passive:c=!1}=t,{back:f=!1}=t,{noPassive:a=!1}=t;const p=Math.random().toString(36).substring(7),l=Pe();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const g=()=>e(5,s=!s),T=b=>{e(0,n=b),e(5,s=!1)};function _(){c=this.checked,e(1,c)}return r.$$set=b=>{"cardType"in b&&e(0,n=b.cardType),"passive"in b&&e(1,c=b.passive),"back"in b&&e(2,f=b.back),"noPassive"in b&&e(3,a=b.noPassive),"names"in b&&e(4,d=b.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,i=St(n)),r.$$.dirty&1&&l("type",n),r.$$.dirty&2&&l("passive",c)},[n,c,f,a,d,s,i,p,g,T,_]}class It extends at{constructor(t){super(),ft(this,t,tn,Ze,ot,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function en(r){let t,e;return{c(){t=z("img"),st(t.src,e=pt(r[0].cardType.type))||J(t,"src",e),J(t,"alt","My Icon"),J(t,"class","cardIcon svelte-15hk4fg")},m(i,n){P(i,t,n)},p(i,n){n&1&&!st(t.src,e=pt(i[0].cardType.type))&&J(t,"src",e)},i:nt,o:nt,d(i){i&&B(t)}}}function nn(r){let t,e,i,n,c,f,a;return e=new It({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=z("p"),X(e.$$.fragment),i=U(),n=z("div"),J(t,"class","svelte-15hk4fg"),J(n,"contenteditable","true"),J(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&Gt(()=>r[3].call(n))},m(p,l){P(p,t,l),V(e,t,null),P(p,i,l),P(p,n,l),r[0].text!==void 0&&(n.innerText=r[0].text),c=!0,f||(a=_t(n,"input",r[3]),f=!0)},p(p,l){const s={};l&1&&(s.cardType=p[0].cardType.type),l&1&&(s.passive=p[0].cardType.passive),e.$set(s),l&1&&p[0].text!==n.innerText&&(n.innerText=p[0].text)},i(p){c||(q(e.$$.fragment,p),c=!0)},o(p){W(e.$$.fragment,p),c=!1},d(p){p&&(B(t),B(i),B(n)),Q(e),f=!1,a()}}}function rn(r){let t,e,i,n;const c=[nn,en],f=[];function a(p,l){return p[1]?1:0}return e=a(r),i=f[e]=c[e](r),{c(){t=z("div"),i.c(),J(t,"class","card svelte-15hk4fg"),rt(t,"--colour",St(r[0].cardType.type))},m(p,l){P(p,t,l),f[e].m(t,null),n=!0},p(p,[l]){let s=e;e=a(p),e===s?f[e].p(p,l):(dt(),W(f[s],1,1,()=>{f[s]=null}),ht(),i=f[e],i?i.p(p,l):(i=f[e]=c[e](p),i.c()),q(i,1),i.m(t,null)),(!n||l&1)&&rt(t,"--colour",St(p[0].cardType.type))},i(p){n||(q(i),n=!0)},o(p){W(i),n=!1},d(p){p&&B(t),f[e].d()}}}function on(r,t,e){let{card:i}=t,{back:n=!1}=t;const c=({detail:a})=>e(0,i.cardType.type=a,i);function f(){i.text=this.innerText,e(0,i)}return r.$$set=a=>{"card"in a&&e(0,i=a.card),"back"in a&&e(1,n=a.back)},[i,n,c,f]}class un extends at{constructor(t){super(),ft(this,t,on,rn,ot,{card:0,back:1})}}function fn(r){let t,e;return t=new un({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){X(t.$$.fragment)},m(i,n){V(t,i,n),e=!0},p(i,n){const c={};n&1&&(c.card=i[0].cardHalf1),n&2&&(c.back=i[1]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){Q(t,i)}}}function an(r){let t,e,i,n,c,f,a,p,l,s,d,g,T,_;return i=new It({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),i.$on("type",r[4]),i.$on("passive",r[5]),c=new Wt({props:{card:r[0].cardHalf1,back:r[1]}}),p=new Wt({props:{card:r[0].cardHalf2,rotation:r[2]?0:180,back:r[1]}}),d=new It({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),d.$on("type",r[6]),d.$on("passive",r[7]),{c(){t=z("div"),e=z("p"),X(i.$$.fragment),n=U(),X(c.$$.fragment),f=U(),a=z("div"),X(p.$$.fragment),l=U(),s=z("p"),X(d.$$.fragment),g=U(),T=z("div"),J(e,"class","first svelte-1ubeuca"),J(t,"class","first-half half"),J(s,"class","second svelte-1ubeuca"),J(a,"class","second-half half svelte-1ubeuca"),J(T,"class","fill svelte-1ubeuca")},m(b,m){P(b,t,m),R(t,e),V(i,e,null),R(t,n),V(c,t,null),P(b,f,m),P(b,a,m),V(p,a,null),R(a,l),R(a,s),V(d,s,null),P(b,g,m),P(b,T,m),_=!0},p(b,m){const O={};m&1&&(O.cardType=b[0].cardHalf1.cardType.type),m&1&&(O.passive=b[0].cardHalf1.cardType.passive),m&2&&(O.back=b[1]),i.$set(O);const $={};m&1&&($.card=b[0].cardHalf1),m&2&&($.back=b[1]),c.$set($);const u={};m&1&&(u.card=b[0].cardHalf2),m&4&&(u.rotation=b[2]?0:180),m&2&&(u.back=b[1]),p.$set(u);const v={};m&1&&(v.cardType=b[0].cardHalf2.cardType.type),m&1&&(v.passive=b[0].cardHalf2.cardType.passive),m&2&&(v.back=b[1]),d.$set(v)},i(b){_||(q(i.$$.fragment,b),q(c.$$.fragment,b),q(p.$$.fragment,b),q(d.$$.fragment,b),_=!0)},o(b){W(i.$$.fragment,b),W(c.$$.fragment,b),W(p.$$.fragment,b),W(d.$$.fragment,b),_=!1},d(b){b&&(B(t),B(f),B(a),B(g),B(T)),Q(i),Q(c),Q(p),Q(d)}}}function ln(r){let t,e,i,n,c;const f=[an,fn],a=[];function p(l,s){return l[0].cardHalf2?0:1}return e=p(r),i=a[e]=f[e](r),{c(){t=z("div"),i.c(),J(t,"class",n=Xt(`card ${r[1]&&"back"}`)+" svelte-1ubeuca"),rt(t,"--colour",r[3])},m(l,s){P(l,t,s),a[e].m(t,null),c=!0},p(l,[s]){let d=e;e=p(l),e===d?a[e].p(l,s):(dt(),W(a[d],1,1,()=>{a[d]=null}),ht(),i=a[e],i?i.p(l,s):(i=a[e]=f[e](l),i.c()),q(i,1),i.m(t,null)),(!c||s&2&&n!==(n=Xt(`card ${l[1]&&"back"}`)+" svelte-1ubeuca"))&&J(t,"class",n),(!c||s&8)&&rt(t,"--colour",l[3])},i(l){c||(q(i),c=!0)},o(l){W(i),c=!1},d(l){l&&B(t),a[e].d()}}}function cn(r,t,e){let i,{card:n}=t,{back:c=!1}=t,{readable:f=!1}=t;const a=({detail:d})=>e(0,n.cardHalf1.cardType.type=d,n),p=({detail:d})=>e(0,n.cardHalf1.cardType.passive=d,n),l=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.type=d,n)},s=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.passive=d,n)};return r.$$set=d=>{"card"in d&&e(0,n=d.card),"back"in d&&e(1,c=d.back),"readable"in d&&e(2,f=d.readable)},r.$$.update=()=>{r.$$.dirty&1&&e(3,i=St(n.cardHalf1.cardType.type))},[n,c,f,i,a,p,l,s]}class Ut extends at{constructor(t){super(),ft(this,t,cn,ln,ot,{card:0,back:1,readable:2})}}const fe=(r,t=9)=>{const e=[];let i=0;for(;i<r.length;)e.push(r.slice(i,t+i)),i+=t;return e};function sn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function dn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kt={exports:{}};Kt.exports;(function(r){(function(){function t(i,n){return n?dn(i):i.slice?t[c(i)]:function(f,a){i(f={exports:{}}),t[c(a)]=f.exports};function c(f){return f.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(i){String.random=function(c,f){var a="";for(c=c||24,f=f||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)a+=f.charAt(Math.floor(Math.random()*f.length));return a},String.match=function(c,f){var a,p;return typeof c!="string"?!1:(typeof f=="string"&&(f={"=":f}),f=f||{},a=f["="]||f["*"]||f[">"]||f["<"],c===a?!0:p!==f["="]?!1:(a=f["*"]||f[">"],c.slice(0,(a||"").length)===a?!0:p!==f["*"]?!1:p!==f[">"]&&p!==f["<"]?c>=f[">"]&&c<=f["<"]:p!==f[">"]&&c>=f[">"]||p!==f["<"]&&c<=f["<"]))},String.hash=function(c,f){if(typeof c=="string"){if(f=f||0,!c.length)return f;for(var a=0,p=c.length,l;a<p;++a)l=c.charCodeAt(a),f=(f<<5)-f+l,f|=0;return f}};var n=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,f){for(var a in c)if(n.call(c,a)&&(!f||f.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var f=[];for(var a in c)n.call(c,a)&&f.push(a);return f},function(){var c,f=setTimeout,a=0,p=0,l=typeof setImmediate!=""+c&&setImmediate||function(d,g){return typeof MessageChannel==""+c?f:((d=new MessageChannel).port1.onmessage=function(T){T.data==""&&g()},function(T){g=T,d.port2.postMessage("")})}(),s=f.check=f.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};f.hold=f.hold||9,f.poll=f.poll||function(d){if(f.hold>=s.now()-a&&p++<3333){d();return}l(function(){a=s.now(),d()},p=0)}}(),function(){var c=setTimeout,f=c.turn=c.turn||function(g){a.push(g)==1&&p(d)},a=f.s=[],p=c.poll,l=0,s,d=function(){(s=a[l++])&&s(),(l==a.length||l==99)&&(a=f.s=a.slice(l),l=0),a.length&&p(d)}}(),function(){var c,f=setTimeout,a=f.turn;(f.each=f.each||function(p,l,s,d){d=d||9,function g(T,_,b){if(_=(T=(p||[]).splice(0,d)).length){for(var m=0;m<_&&c===(b=l(T[m]));m++);if(c===b){a(g);return}}s&&s(b)}()})()}()})(t,"./shim"),t(function(i){i.exports=function n(s,f,a){if(!s)return{to:n};var p,l=typeof f=="function",s=(this.tag||(this.tag={}))[s]||l&&(this.tag[s]={tag:s,to:n._={next:function(g){var T;(T=this.to)&&T.next(g)}}});if(l){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:f,the:s,on:this,as:a};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&p!==f&&s.next(f),s}})(t,"./onto"),t(function(i){i.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(i){t("./shim");function n(){var s=+new Date;return p<s?(f=0,p=s+n.drift):p=s+(f+=1)/a+n.drift}n.drift=0;var c=-1/0,f=0,a=999,p=c,l;n.is=function(s,d,g){var T=d&&s&&s._&&s._[">"]||g;if(T)return typeof(T=T[d])=="number"?T:c},n.ify=function(s,d,g,T,_){(s=s||{})._=s._||{},_&&(s._["#"]=_);var b=s._[">"]||(s._[">"]={});return l!==d&&d!=="_"&&(typeof g=="number"&&(b[d]=g),l!==T&&(s[d]=T)),s},i.exports=n})(t,"./state"),t(function(i){t("./shim");function n(c){var f={s:{}},a=f.s;c=c||{max:999,age:1e3*9},f.check=function(l){return a[l]?p(l):!1};var p=f.track=function(l){var s=a[l]||(a[l]={});return s.was=f.now=+new Date,f.to||(f.to=setTimeout(f.drop,c.age+9)),p.ed&&p.ed(l),s};return f.drop=function(l){f.to=null,f.now=+new Date;var s=Object.keys(a);console.STAT&&console.STAT(f.now,+new Date-f.now,"dup drop keys"),setTimeout.each(s,function(d){var g=a[d];g&&(l||c.age)>f.now-g.was||delete a[d]},0,99)},f}i.exports=n})(t,"./dup"),t(function(i){t("./onto"),i.exports=function(f,a){if(this.on){var p=(this.opt||{}).lack||9e3;if(typeof f!="function"){if(!f)return;var s=f["#"]||f,l=(this.tag||"")[s];return l?(a&&(l=this.on(s,a),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},p)),!0):void 0}var s=a&&a["#"]||n(9);if(!f)return s;var d=this.on(s,f,a);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},p),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(i){function n(_){return _ instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:_}):new n(_)}n.is=function(_){return _ instanceof n||_&&_._&&_===_._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||n.on,o.ask=o.ask||n.ask,o.dup=o.dup||n.dup();var y=o.$.opt(o.opt);return o.once||(o.on("in",_,o),o.on("out",_,o),o.on("put",O,o),n.on("create",o),o.on("create",o)),o.once=1,y};function _(o){if(o){if(o.out===_){this.to.next(o);return}var y=this,w=y.as,x=w.at||w,C=x.$,S=x.dup,N,F=o.DBG;if((N=o["#"])||(N=o["#"]=f(9)),!S.check(N)){if(S.track(N),N=o._,o._=typeof N=="function"?N:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&u(o),!x.ask(o["@"],o))if(F&&(F.u=+new Date),o.put){b(o);return}else o.get&&n.on.get(o,C);F&&(F.uc=+new Date),y.to.next(o),F&&(F.ua=+new Date),!(o.nts||o.NTS)&&(o.out=_,x.on("out",o),F&&(F.ue=+new Date))}}}function b(o){if(o){var y=o._||"",w=y.root=((y.$=o.$||"")._||"").root;if(o["@"]&&y.faith&&!y.miss){o.out=_,w.on("out",o);return}y.latch=w.hatch,y.match=w.hatch=[];var x=o.put,C=y.DBG=o.DBG,S=+new Date;if(I=I||S,!(x["#"]&&x["."])){C&&(C.p=S),y["#"]=o["#"],y.msg=o,y.all=0,y.stun=1;var N=Object.keys(x);console.STAT&&console.STAT(S,((C||y).pk=+new Date)-S,"put sort");var F=0,H,M,L,K,tt,et,ct;(function ut(vt){if(H!=F){if(H=F,!(L=N[F])){console.STAT&&console.STAT(S,((C||y).pd=+new Date)-S,"put"),$(y);return}(K=x[L])?(ct=K._)?L!==ct["#"]?et=j+A(L)+"soul not same.":(tt=ct[">"])||(et=j+A(L)+"no state."):et=j+A(L)+"no meta.":et=j+A(L)+"no node.",M=Object.keys(K||{})}if(et){o.err=y.err=et,$(y);return}var Ot=0,Y;for(vt=vt||0;vt++<9&&(Y=M[Ot++]);)if(Y!=="_"){var yt=K[Y],Vt=tt[Y];if(d===Vt){et=j+A(Y)+"on"+A(L)+"no state.";break}if(!p(yt)){et=j+A(Y)+"on"+A(L)+"bad "+typeof yt+A(yt);break}m(yt,Y,L,Vt,o),++E}if((M=M.slice(Ot)).length){a(ut);return}++F,M=null,ut(vt)})()}}}n.on.put=b;function m(o,y,w,x,C){var S=C._||"",N=S.root,F=N.graph,H,M=F[w]||g,L=l(M,y,1),K=M[y],tt=S.DBG;(H=console.STAT)&&(!F[w]||!K)&&(H.has=(H.has||0)+1);var et=G();if(x>et){setTimeout(function(){m(o,y,w,x,C)},(H=x-et)>D?D:H),console.STAT&&console.STAT((tt||S).Hf=+new Date,H,"future");return}if(!(x<L)&&!(!S.faith&&x===L&&(o===K||k(o)<=k(K))&&!S.miss)){S.stun++;var ct=C["#"]+S.all++,ut={toString:function(){return ct},_:S};ut.toJSON=ut.toString,N.dup.track(ut)["#"]=C["#"],tt&&(tt.ph=tt.ph||+new Date),N.on("put",{"#":ut,"@":C["@"],put:{"#":w,".":y,":":o,">":x},ok:C.ok,_:S})}}function O(o){var y;(y=(o._||"").DBG)&&(y.pa=+new Date,y.pm=y.pm||+new Date);var w=this,x=w.as,C=x.graph,S=o._,N=o.put,F=N["#"],H=N["."],M=N[":"],L=N[">"];o["#"];var K;(K=S.msg)&&(K=K.put)&&(K=K[F])&&s(K,H,L,M,F),C[F]=s(C[F],H,L,M,F),(K=(x.next||"")[F])&&K.on("in",o),$(S),w.to.next(o)}function $(o,y){var w;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(w=o.root))){var x=o.match;x.end=1,x===w.hatch&&(!(x=o.latch)||x.end?delete w.hatch:w.hatch=x),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(y=o.msg)||o.err||y.err)&&(y.out=_,o.root.on("out",y),h())}}function u(o){var y=o["@"]||"",w;if(!(w=y._)){var x=(x=o.$)&&(x=x._)&&(x=x.root)&&(x=x.dup);if(!(x=x.check(y)))return;o["@"]=x["#"]||o["@"];return}w.acks=(w.acks||0)+1,(w.err=o.err)&&(o["@"]=w["#"],$(w)),w.ok=o.ok||w.ok,!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){v(w)})),v(w)}function v(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?d:o.ok||{"":1}})}var j="Error: Invalid graph!",A=function(o){return" '"+(""+o).slice(0,9)+"...' "},k=JSON.stringify,D=2147483647,G=n.state,E=0,I,h=function(){E>999&&E/-(I-(I=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),h=function(){E=0})}}(),function(){n.on.get=function(b,m){var O=m._,$=b.get,u=$["#"],v=O.graph[u],j=$["."],A=O.next||(O.next={}),k=A[u],D=b._||{},G=D.DBG=b.DBG;if(G&&(G.g=+new Date),!v)return O.on("get",b);if(j){if((typeof j!="string"||d===v[j])&&!((k||"").next||"")[j]){O.on("get",b);return}v=s({},j,l(v,j),v[j],u)}v&&_(b,v),O.on("get",b)};function _(b,m){var O=+new Date,$=b._||{},u=$.DBG=b.DBG,v=b["#"],j=f(9),A=Object.keys(m||"").sort(),k=((m||"")._||"")["#"];A.length;var D=b.$._.root,G=m===D.graph[k];console.STAT&&console.STAT(O,((u||$).gk=+new Date)-O,"got keys"),m&&function E(){O=+new Date;for(var I=0,h,o={},y;I<9&&(h=A[I++]);)s(o,h,l(m,h),m[h],k);A=A.slice(I),(y={})[k]=o,o=y;var w;G&&(w=function(){},w.ram=w.faith=!0),y=A.length,console.STAT&&console.STAT(O,-(O-(O=+new Date)),"got copied some"),u&&(u.ga=+new Date),D.on("in",{"@":v,"#":j,put:o,"%":y?j=f(9):d,$:D.$,_:w,DBG:u,FOO:1}),console.STAT&&console.STAT(O,+new Date-O,"got in"),y&&setTimeout.turn(E)}(),m||D.on("in",{"@":b["#"]})}n.on.get.ack=_}(),function(){n.chain.opt=function(_){_=_||{};var b=this,m=b._,O=_.peers||_;return Object.plain(_)||(_={}),Object.plain(m.opt)||(m.opt=_),typeof O=="string"&&(O=[O]),Object.plain(m.opt.peers)||(m.opt.peers={}),O instanceof Array&&(_.peers={},O.forEach(function($){var u={};u.id=u.url=$,_.peers[$]=m.opt.peers[$]=m.opt.peers[$]||u})),c(_,function $(u){var v=this[u];if(this&&this.hasOwnProperty(u)||typeof v=="string"||Object.empty(v)){this[u]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||c(v,$)}),m.opt.from=_,n.on("opt",m),m.opt.uuid=m.opt.uuid||function(u){return n.state().toString(36).replace(".","")+String.random(u||12)},b}}();var c=function(_,b){Object.keys(_).forEach(b,_)},f=String.random,a=setTimeout.turn,p=n.valid,l=n.state.is,s=n.state.ify,d,g={},T;n.log=function(){return!n.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(_,b,m){return(m=n.log.once)[_]=m[_]||0,m[_]++||n.log(b)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}i.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(T=console).only=function(_,b){return T.only.i&&_===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||b)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(i){var n=t("./root");n.chain.back=function(a,p){var l;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var g=0,T=a.length,l=d;for(g;g<T;g++)l=(l||c)[a[g]];return f!==l?p?s:l:(l=d.back)?l.$.back(a,p):void 0}if(typeof a=="function"){for(var _,l={back:d};(l=l.back)&&f===(_=a(l,p)););return _}return typeof a=="number"?(d.back||d).$.back(a-1):this};var c={},f})(t,"./back"),t(function(i){var n=t("./root");n.chain.chain=function($){var u=this,v=u._,j=new($||u).constructor(u),A=j._,k;return A.root=k=v.root,A.id=++k.once,A.back=u._,A.on=n.on,A.on("in",n.on.in,A),A.on("out",n.on.out,A),j};function c($){var u,v=this.as,j=v.back,A=v.root,k;if($.$||($.$=v.$),this.to.next($),v.err){v.on("in",{put:v.put=d,$:v.$});return}if(u=$.get){if(A.pass&&(A.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(D){k[D]=v.lex[D]},k=$.get=$.get||{}),u["#"]||v.soul){if(u["#"]=u["#"]||v.soul,$["#"]||($["#"]=g(9)),j=A.$.get(u["#"])._,u=u["."]){if(_(j.put,u)&&(k=j.ask&&j.ask[u],(j.ask||(j.ask={}))[u]=j.$.get(u)._,j.on("in",{get:u,put:{"#":j.soul,".":u,":":j.put[u],">":m(A.graph[j.soul],u)}}),k))return}else{if(k=j.ask&&j.ask[""],(j.ask||(j.ask={}))[""]=j,d!==j.put&&(j.on("in",j),k))return;$.$=j.$}return A.ask(l,$),A.on("in",$)}if(u["."])return v.get?($={get:{".":v.get},$:v.$},(j.ask||(j.ask={}))[v.get]=$.$._,j.on("out",$)):($={get:v.lex?$.get:{},$:v.$},j.on("out",$));if((v.ask||(v.ask={}))[""]=v,v.get)return u["."]=v.get,(j.ask||(j.ask={}))[v.get]=$.$._,j.on("out",$)}return j.on("out",$)}n.on.out=c;function f($,u){u=u||this.as;var v=u.root,j=$.$||($.$=u.$),A=(j||"")._||s,k=$.put||"",D=k["#"],G=k["."],E=d!==k["="]?k["="]:k[":"],I=k[">"]||-1/0,h;if(d!==$.put&&(d===k["#"]||d===k["."]||d===k[":"]&&d===k["="]||d===k[">"])){if(!T(k)){if(!(D=((k||"")._||"")["#"])){console.log("chain not yet supported for",k,"...",$,u);return}return j=u.root.$.get(D),setTimeout.each(Object.keys(k).sort(),function(o){o=="_"||d===(I=m(k,o))||u.on("in",{$:j,put:{"#":D,".":o,"=":k[o],">":I},VIA:$})})}u.on("in",{$:A.back.$,put:{"#":D=A.back.soul,".":G=A.has||A.get,"=":k,">":m(A.back.put,G)},via:$});return}($.seen||"")[u.id]||(($.seen||($.seen=function(){}))[u.id]=u,u!==A&&(Object.keys($).forEach(function(o){k[o]=$[o]},k={}),k.get=u.get||k.get,!u.soul&&!u.has?k.$$$=k.$$$||u.$:A.soul&&(k.$=u.$,k.$$=k.$$||A.$),$=k),p($,u),(u.soul||$.$$)&&I>=m(v.graph[D],G)&&((k=v.$.get(D)._).put=O(k.put,G,I,E,D)),!A.soul&&I>=m(v.graph[D],G)&&(h=(v.$.get(D)._.next||"")[G])&&(h.put=E,typeof(k=T(E))=="string"&&(h.put=v.$.get(k)._.put||E)),this.to&&this.to.next($),u.any&&setTimeout.each(Object.keys(u.any),function(o){(o=u.any[o])&&o($)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(o){(o=u.echo[o])&&o.on("in",$)},0,99),(($.$$||"")._||A).soul&&(h=u.next)&&(h=h[G])&&(k={},Object.keys($).forEach(function(o){k[o]=$[o]}),k.$=($.$$||$.$).get(k.get=G),delete k.$$,delete k.$$$,h.on("in",k)),a($,u))}n.on.in=f;function a($,u){if(u=u||this.as||$.$._,!($.$$&&this!==n.on)&&!(!$.put||u.soul)){var v=$.put||"",j=v["="]||v[":"],G,A=u.root,k=A.$.get(v["#"]).get(v["."])._;if(typeof(j=T(j))!="string"){this===n.on&&((k.echo||(k.echo={}))[u.id]=u);return}if(!((k.echo||(k.echo={}))[u.id]&&!(A.pass||"")[u.id])){if(G=A.pass){if(G[j+u.id])return;G[j+u.id]=1}(k.echo||(k.echo={}))[u.id]=u,u.has&&(u.link=j);var D=A.$.get(k.link=j)._;(D.echo||(D.echo={}))[k.id]=k;var G=u.ask||"";(G[""]||u.lex)&&D.on("out",{get:{"#":j}}),setTimeout.each(Object.keys(G),function(E,I){!E||!(I=G[E])||I.on("out",{get:{"#":j,".":E}})},0,99)}}}n.on.link=a;function p($,u){var v=$.put||"",j=d!==v["="]?v["="]:v[":"],A=u.root,k,D;if(d===j){if(u.soul&&d!==u.put||(D=($.$$||$.$||"")._||"",$["@"]&&(d!==D.put||d!==u.put)))return;(k=u.link||$.linked)&&delete(A.$.get(k)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(G,E){(E=u.next[G])&&(k&&delete(A.$.get(k).get(G)._.echo||"")[E.id],E.on("in",{get:G,put:d,$:E.$}))},0,99);return}u.soul||$.$$||(k=T(j),D=$.$._||"",!((k===D.link||u.has&&!D.link)&&!((A.pass||"")[u.id]&&typeof k!="string"))&&(delete(D.echo||"")[u.id],p({get:u.get,put:d,$:$.$,linked:$.linked=$.linked||D.link},u)))}n.on.unlink=p;function l($,u){var v=this.as,j=v.$._;j.root;var A=v.get||"",k=($.put||"")[A["#"]]||"";if(!$.put||typeof A["."]=="string"&&d===k[A["."]]){if(d!==j.put||!j.soul&&!j.has)return;j.ack=(j.ack||0)+1,j.on("in",{get:j.get,put:j.put=d,$:j.$,"@":$["@"]});return}($._||{}).miss=1,n.on.put($)}var s={},d,g=String.random,T=n.valid,_=function($,u){return $&&Object.prototype.hasOwnProperty.call($,u)},b=n.state,m=b.is,O=b.ify})(t,"./chain"),t(function(i){var n=t("./root");n.chain.get=function(d,g,T){var _,b;if(typeof d=="string"){if(d.length==0)return(_=this.chain())._.err={err:n.log("0 length key!",d)},g&&g.call(_,_._.err),_;var m=this,O=m._,$=O.next||p;(_=$[d])||(_=d&&c(d,m)),_=_&&_.$}else if(typeof d=="function"){let G=function(E,I,h){if(!G.stun&&!((S=v.pass)&&!S[j])){var o=E.$._,y=(E.$$||"")._,w=(y||o).put,x=!o.has&&!o.soul,C={},S;if((x||s===w)&&(w=s===((S=E.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=n.valid(w))=="string"&&(w=s===(S=v.$.get(S)._.put)?u.not?s:w:S),!(u.not&&s===w)){if(s===u.stun){if((S=v.stun)&&S.on&&(O.$.back(function(N){if(S.on(""+N.id,C={}),(C.run||0)<G.id)return C}),!C.run&&S.on(""+o.id,C={}),!C.run&&y&&S.on(""+y.id,C={}),G.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=S.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[j]=function(){G(E,I,1)};return}if(s===w&&(h=0),(S=v.hatch)&&!S.end&&s===u.hatch&&!h){if(A[o.$._.id])return;A[o.$._.id]=1,S.push(function(){G(E,I,1)});return}A={}}if(v.pass){if(v.pass[j+o.id])return;v.pass[j+o.id]=1}if(u.on){u.ok.call(o.$,w,o.get,E,I||G);return}if(u.v2020){u.ok(E,I||G);return}Object.keys(E).forEach(function(N){S[N]=E[N]},S={}),E=S,E.put=w,u.ok.call(u.as,E,I||G)}}};var k=G;if(g===!0)return f(this,d,g,T),this;_=this;var O=_._,u=g||{},v=O.root,j;u.at=O,u.ok=d;var A={};return G.at=O,(O.any||(O.any={}))[j=String.random(7)]=G,G.off=function(){G.stun=1,O.any&&delete O.any[j]},G.rid=a,G.id=u.run||++v.once,b=v.pass,(v.pass={})[j]=1,u.out=u.out||{get:{}},O.on("out",u.out),v.pass=b,_}else{if(typeof d=="number")return this.get(""+d,g,T);if(typeof(b=l(d))=="string")return this.get(b,g,T);(b=this.get.next)&&(_=b(this,d))}return _?(g&&typeof g=="function"&&_.get(g,T),_):((_=this.chain())._.err={err:n.log("Invalid get request!",d)},g&&g.call(_,_._.err),_)};function c(d,g){var T=g._,_=T.next,b=g.chain(),m=b._;return _||(_=T.next={}),_[m.get=d]=m,g===T.root.$?m.soul=d:(T.soul||T.has)&&(m.has=d),m}function f(d,g,T,_){var b=d._,m=0,O;return(O=b.soul||b.link)?g(O,_,b):b.jam?b.jam.push([g,_]):(b.jam=[[g,_]],d.get(function(u,v){if(!(s===u.put&&!b.root.opt.super&&(O=Object.keys(b.root.opt.peers).length)&&++m<=O)){v.rid(u);var j=(j=u.$)&&j._||{},A=0,k;for(O=b.jam,delete b.jam;k=O[A++];){var D=k[0];k=k[1],D&&D(j.link||j.soul||n.valid(u.put)||((u.put||{})._||{})["#"],k,u,v)}}},{out:{get:{".":!0}}}),d)}function a(d){var g=this.at||this.on;if(!d||g.soul||g.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){g.map;var T;if((T=this.seen||(this.seen={}))[d])return!0;T[d]=!0}}var p={},l=n.valid,s})(t,"./get"),t(function(i){var n=t("./root");n.chain.put=function(_,b,m){var O=this,$=O._,u=$.root;m=m||{},m.root=$.root,m.run||(m.run=u.once),c(m,$.id),m.ack=m.ack||b,m.via=m.via||O,m.data=m.data||_,m.soul||(m.soul=$.soul||typeof b=="string"&&b);var v=m.state=m.state||n.state();return typeof _=="function"?(_(function(j){m.data=j,O.put(l,l,m)}),O):m.soul?(m.$=u.$.get(m.soul),m.todo=[{it:m.data,ref:m.$}],m.turn=m.turn||d,m.ran=m.ran||f,function j(){var A=m.todo,k=A.pop(),D=k.it;k.ref&&k.ref._.id;var G,E,I,h,o;if(c(m,k.ref),(h=k.todo)&&(E=h.pop(),D=D[E],h.length&&A.push(k)),E&&(A.path||(A.path=[])).push(E),!(G=g(D))&&!(o=n.is(D))){if(!Object.plain(D)){f.err(m,"Invalid data: "+p(D)+" at "+(m.via.back(function(S){S.get&&h.push(S.get)},h=[])||h.join("."))+"."+(A.path||[]).join("."));return}for(var y=m.seen||(m.seen=[]),w=y.length;w--;)if(D===(h=y[w]).it){G=D=h.link;break}}if(E&&G)k.node=T(k.node,E,v,D);else{let S=function(N,F){var H=I.link["#"];F&&(F.off(),F.rid(N));var M=H||N.soul||(h=(N.$$||N.$)._||"").soul||h.link||((h=h.put||"")._||"")["#"]||h["#"]||((h=N.put||"")&&N.$$?h["#"]:(h["="]||h[":"]||"")["#"]);if(!H&&c(m,N.$),!M&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){S(N,F)});return}M||(M=[],(N.$$||N.$).back(function(L){if(h=L.soul||L.link)return M.push(h);M.push(L.get)}),M=M.reverse().join("/")),I.link["#"]=M,!o&&(((m.graph||(m.graph={}))[M]=I.node||(I.node={_:{}}))._["#"]=M),delete m.wait[x],I.wait&&setTimeout.each(I.wait,function(L){L&&L()}),m.ran(m)};var C=S;if(!m.seen){f.err(m,"Data at root of graph must be a node (an object).");return}m.seen.push(I={it:D,link:{},todo:o?[]:Object.keys(D).sort().reverse(),path:(A.path||[]).slice(),up:k}),k.node=T(k.node,E,v,I.link),!o&&I.todo.length&&A.push(I);var x=m.seen.length;(m.wait||(m.wait={}))[x]="",h=(I.ref=o?D:E?k.ref.get(E):k.ref)._,(h=D&&(D._||"")["#"]||h.soul||h.link)?S({soul:h}):I.ref.get(S,{run:m.run,v2020:1,out:{get:{".":" "}}})}if(!A.length)return m.ran(m);m.turn(j)}(),O):(a(m),O)};function c(_,b){if(b){b=(b._||"").id||b;var m=_.root.stun||(_.root.stun={on:n.on}),O={},$;_.stun||(_.stun=m.on("stun",function(){})),($=m.on(""+b))&&$.the.last.next(O),!(O.run>=_.run)&&m.on(""+b,function(u){if(_.stun.end){this.off(),this.to.next(u);return}u.run=u.run||_.run,u.stun=u.stun||_.stun})}}function f(_){if(_.err){f.end(_.stun,_.root);return}if(!(_.todo.length||_.end||!Object.empty(_.wait))){_.end=1;var b=_.$.back(-1)._,m=b.root,O=b.ask(function(j){m.on("ack",j),j.err&&!j.lack&&n.log(j),++$>(_.acks||0)&&this.off(),_.ack&&_.ack(j,this)},_.opt),$=0,u=_.stun,v;(v=function(){u&&(f.end(u,m),setTimeout.each(Object.keys(u=u.add||""),function(j){(j=u[j])&&j()}))}).hatch=v,_.ack&&!_.ok&&(_.ok=_.acks||9),_.via._.on("out",{put:_.out=_.graph,ok:_.ok&&{"@":_.ok+1},opt:_.opt,"#":O,_:v})}}f.end=function(_,b){_.end=s,_.the.to===_&&_===_.the.last&&delete b.stun,_.off()},f.err=function(_,b){(_.ack||s).call(_,_.out={err:_.err=n.log(b)}),_.ran(_)};function a(_){var b=_.via._,m;_.via=_.via.back(function(O){if(O.soul||!O.get)return O.$;m=_.data,(_.data={})[O.get]=m}),(!_.via||!_.via._.soul)&&(_.via=b.root.$.get(((_.data||"")._||"")["#"]||b.$.back("opt.uuid")())),_.via.put(_.data,_.ack,_)}function p(_,b){return _&&(b=_.constructor)&&b.name||typeof _}var l,s=function(){},d=setTimeout.turn,g=n.valid,T=n.state.ify})(t,"./put"),t(function(i){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),i.exports=n})(t,"./index"),t(function(i){var n=t("./index");n.chain.on=function(a,p,l,s){var d=this,g=d._;g.root;var T;if(typeof a=="string")return p?(T=g.on(a,p,l||g,s),l&&l.$&&(l.subs||(l.subs=[])).push(T),d):g.on(a);var _=p;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,d.get(a,_),d},n.chain.once=function(a,p){if(p=p||{},!a)return c(this);var l=this,s=l._,d=s.root;s.put;var g=String.random(7),T;return l.get(function(_,b,m,O){var $=this,u=$._,v=u.one||(u.one={});if(O.stun||v[g]==="")return;if((T=n.valid(_))===!0){j();return}if(typeof T=="string")return;clearTimeout((s.one||"")[g]),clearTimeout(v[g]),v[g]=setTimeout(j,p.wait||99);function j(A){if(!u.has&&!u.soul&&(u={put:_,get:b}),f===(T=u.put)&&(T=((m.$$||"")._||"").put),typeof n.valid(T)=="string"&&(T=d.$.get(T)._.put,T===f&&!A)){v[g]=setTimeout(function(){j(1)},p.wait||99);return}O.stun||v[g]!==""&&(v[g]="",(s.soul||s.has)&&O.off(),a.call($,T,u.get),clearTimeout(v[g]))}},{on:1}),l};function c(a,p,l){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=a.chain())._.nix=a.once(function(s,d){l._.on("in",this._)}),l._.lex=a._.lex,l}n.chain.off=function(){var a=this,p=a._,l,s=p.back;if(s)return p.ack=0,(l=s.next)&&l[p.get]&&delete l[p.get],(l=s.any)&&(delete s.any,s.any={}),(l=s.ask)&&delete l[p.get],(l=s.put)&&delete l[p.get],(l=p.soul)&&delete s.root.graph[l],(l=p.map)&&Object.keys(l).forEach(function(d,g){g=l[d],g.link&&s.root.$.get(g.link).off()}),(l=p.next)&&Object.keys(l).forEach(function(d,g){g=l[d],g.$.off()}),p.on("off",{}),a};var f})(t,"./on"),t(function(i){var n=t("./index"),c=n.chain.get.next;n.chain.get.next=function(l,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?l.get(d):((d=l.chain()._).lex=s,l.on("in",function(g){String.match(g.get||(g.put||"")["."],s["."]||s["#"]||s)&&d.on("in",g),this.to.next(g)}),d.$):(c||a)(l,s)},n.chain.map=function(l,s,d){var g=this,T=g._,_,b;return Object.plain(l)&&(_=l["."]?l:{".":l},l=p),l?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=g.chain(),g.map().on(function(m,O,$,u){var v=(l||a).call(this,m,O,$,u);if(p!==v){if(m===v)return b._.on("in",$);if(n.is(v))return b._.on("in",v._);var j={};Object.keys($.put).forEach(function(A){j[A]=$.put[A]},j),j["="]=v,b._.on("in",{get:O,put:j})}}),b):((b=T.each)||((T.each=b=g.chain())._.lex=_||b._.lex||T.lex,b._.nix=g.back("nix"),g.on("in",f,b._)),b)};function f(l){this.to.next(l);var s=this.as,d=l.$,g=d._,T=l.put,_;!g.soul&&!l.$$||(_=s.lex)&&!String.match(l.get||(T||"")["."],_["."]||_["#"]||_)||n.on.link(l,s)}var a=function(){},p})(t,"./map"),t(function(i){var n=t("./index");n.chain.set=function(c,f,a){var p=this,l=p.back(-1),s,d;return f=f||function(){},a=a||{},a.item=a.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=n.valid(c))=="string"?p.get(s=d).put(c,f,a):n.is(c)?(p.put(function(g){c.get(function(T,_,b){if(!T)return f.call(p,{err:n.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[T]={"#":T},g(d)},!0)}),c):(Object.plain(c)&&(c=l.get(s=p.back("opt.uuid")()).put(c)),p.get(s||l.back("opt.uuid")(7)).put(c,f,a))}})(t,"./set"),t(function(i){t("./shim");var n=function(){},c=JSON.parseAsync||function(l,s,d){var g,T=+new Date;try{s(g,JSON.parse(l,d),f.sucks(+new Date-T))}catch(_){s(_)}},f=JSON.stringifyAsync||function(l,s,d,g){var T,_=+new Date;try{s(T,JSON.stringify(l,d,g),f.sucks(+new Date-_))}catch(b){s(b)}};f.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),f.sucks=n)};function a(l){var s=function(){},d=l.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var g=setTimeout.turn||setTimeout,T=l.dup,_=T.check,b=T.track,m=s.hear=function(u,v){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},v);s===this&&(m.d+=u.length||0,++m.c);var j=v.SH=+new Date,A=u[0],k;if(A==="["){c(u,function(D,G){if(D||!G)return s.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,G.length,"# on hear batch");var E=d.puff;(function I(){for(var h=+new Date,o=0,y;o<E&&(y=G[o++]);)s.hear(y,v);G=G.slice(o),console.STAT&&console.STAT(h,+new Date-h,"hear loop"),O(v),G.length&&g(I,0)})()}),u="";return}if(A==="{"||(u["#"]||Object.plain(u))&&(k=u)){if(k)return m.one(k,v,j);c(u,function(D,G){if(D||!G)return s.say({dam:"!",err:"DAM JSON parse error."},v);m.one(G,v,j)});return}}};m.one=function(u,v,I){var A,k,D,G,E;if(u.DBG&&(u.DBG=E={DBG:u.DBG}),E&&(E.h=I),E&&(E.hp=+new Date),(A=u["#"])||(A=u["#"]=String.random(9)),!(D=_(A))&&(k=u["##"],!(k&&(D=u["@"]||u.get&&A)&&T.check(G=D+k)))){if((u._=function(){}).via=s.leap=v,(D=u["><"])&&typeof D=="string"&&D.slice(0,99).split(",").forEach(function(h){this[h]=1},u._.yo={}),D=u.dam){(D=s.hear[D])&&D(u,v,l),b(A);return}(D=u.ok)&&(u._.near=D["/"]);var I=+new Date;E&&(E.is=I),v.SI=A,b.ed=function(h){A===h&&(b.ed=0,(h=T.s[A])&&(h.via=v,u.get&&(h.it=u)))},l.on("in",s.last=u),E&&(E.hd=+new Date),console.STAT&&console.STAT(I,+new Date-I,u.get?"msg get":u.put?"msg put":"msg"),b(A),G&&b(G),s.leap=s.last=null}},m.c=m.d=0,function(){var u=0,v;s.hash=function(k,D){var G,E,I,h=+new Date;f(k.put,function o(y,w){var x=(E||(E=I=w||"")).slice(0,32768);if(G=String.hash(x,G),E=E.slice(32768),E){g(o,0);return}console.STAT&&console.STAT(h,+new Date-h,"say json+hash"),k._.$put=I,k["##"]=G,s.say(k,D),delete k._.$put},j)};function j(k,D){var G;return D instanceof Object?(Object.keys(D).sort().forEach(A,{to:G={},on:D}),G):D}function A(k){this.to[k]=this.on[k]}s.say=function(k,D){var G;if((G=this)&&(G=G.to)&&G.next&&G.next(k),!k)return!1;var E,I,h,o=k["@"],y=k._||(k._=function(){}),w=k.DBG,x=+new Date;if(y.y=y.y||x,D||w&&(w.y=x),(E=k["#"])||(E=k["#"]=String.random(9)),!v&&b(E),!(I=k["##"])&&p!==k.put&&!y.via&&o){s.hash(k,D);return}if(!D&&o&&(D=(G=T.s[o])&&(G.via||(G=G.it)&&(G=G._)&&G.via)||(G=s.last)&&o===G["#"]&&s.leap),!D&&o)return T.s[o]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(o&&!k.put&&!I&&((T.s[o]||"").it||"")["##"])return!1;if(!D&&s.way)return s.way(k);if(w&&(w.yh=+new Date),!(h=y.raw)){s.raw(k,D);return}if(w&&(w.yr=+new Date),!D||!D.id){if(!Object.plain(D||d.peers))return!1;var x=+new Date;d.puff;var C=d.peers,S=Object.keys(D||d.peers||{});console.STAT&&console.STAT(x,+new Date-x,"peer keys"),function H(){var M=+new Date;v=1;var L=y.raw;y.raw=h;for(var K=0,tt;K<9&&(tt=(S||"")[K++]);)(tt=C[tt]||(D||"")[tt])&&s.say(k,tt);y.raw=L,v=0,S=S.slice(K),console.STAT&&console.STAT(M,+new Date-M,"say loop"),S.length&&(g(H,0),o&&b(o))}();return}if(!D.wire&&s.wire&&s.wire(D),E!==D.last){if(D.last=E,D===y.via||(G=y.yo)&&(G[D.url]||G[D.pid]||G[D.id]))return!1;if(console.STAT&&console.STAT(x,((w||y).yp=+new Date)-(y.y||x),"say prep"),!v&&o&&b(o),D.batch){if(D.tail=(G=D.tail||0)+h.length,D.tail<=d.pack){D.batch+=(G?",":"")+h;return}O(D)}D.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),O(D)},d.gap),$(h,D),console.STAT&&o===D.SI&&console.STAT(x,+new Date-D.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(k,D){if(!k)return"";var G=k._||{},E,I;if(I=G.raw)return I;if(typeof k=="string")return k;var h=k["##"],o=k["@"];if(h&&o){if(!G.via&&_(o+h))return!1;if(I=(T.s[o]||"").it){if(h===I["##"])return!1;I["##"]||(I["##"]=h)}}if(!k.dam&&!k["@"]){var y=0,w=[];I=d.peers;for(var x in I){var C=I[x];if(w.push(C.url||C.pid||C.id),++y>6)break}y>1&&(k["><"]=w.join())}if(k.put&&(I=k.ok)&&(k.ok={"@":(I["@"]||1)-1,"/":I["/"]==k._.near?s.near:I["/"]}),E=G.$put){I={},Object.keys(k).forEach(function(N){I[N]=k[N]}),I.put=":])([:",f(I,function(N,F){if(!N){var H=+new Date;I=F.indexOf('"put":":])([:"'),S(p,F=F.slice(0,I+6)+E+F.slice(I+14)),console.STAT&&console.STAT(H,+new Date-H,"say slice")}});return}f(k,S);function S(N,F){N||(G.raw=F,s.say(k,D))}}}();function O(u){var v=u.batch,j=typeof v=="string";if(j&&(v+="]"),u.batch=u.tail=null,!!v&&!(j?3>v.length:!v.length)){if(!j)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(A){return d.log("DAM JSON stringify error",A)}v&&$(v,u)}}function $(u,v){try{var j=v.wire;v.say?v.say(u):j.send&&j.send(u),s.say.d+=u.length||0,++s.say.c}catch{(v.queue=v.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var v=u.wire,j;if(!v){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(j=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:l.opt.pid},d.peers[j]=u),delete T.s[u.last]),u.met||(s.near++,u.met=+new Date,l.on("hi",u)),j=u.queue,u.queue=[],setTimeout.each(j||[],function(A){$(A,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,l.on("bye",u);var v=+new Date;v=v-(u.met||v),s.bye.time=((s.bye.time||v)+v)/2},s.hear["!"]=function(u,v){d.log("Error:",u.err)},s.hear["?"]=function(u,v){u.pid&&(v.pid||(v.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},v),delete T.s[v.last])},s.hear.mob=function(u,v){if(u.peers){var j=Object.keys(u.peers),A=j[Math.random()*j.length>>0];A&&(s.bye(v),s.hi(A))}},l.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),l.on("bye",function(u,v){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(v=u.wire)&&v.close&&v.close(),delete d.peers[u.id],u.wire=null}),l.on("bye",function(u,v){this.to.next(u),(v=console.STAT)&&(v.peers=s.near),(v=u.url)&&setTimeout(function(){},d.lack||9e3)}),l.on("hi",function(u,v){if(this.to.next(u),(v=console.STAT)&&(v.peers=s.near),!d.super){var j=Object.keys(l.next||"");j.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(j,function(A){var k=l.next[A];if(d.super||(k.ask||"")[""]){s.say({get:{"#":A}},u);return}setTimeout.each(Object.keys(k.ask||""),function(D){D&&s.say({"##":String.hash((l.graph[A]||"")[D]),get:{"#":A,".":D}},u)})})}}),s}var p;try{i.exports=a}catch{}})(t,"./mesh"),t(function(i){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(f){if(this.to.next(f),f.once)return;var a=f.opt;if(a.WebSocket===!1)return;var p=n.window||{},l=a.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!l)return;a.WebSocket=l;var s=a.mesh=a.mesh||n.Mesh(f);s.wire||a.wire,s.wire=a.wire=d;function d(b){try{if(!b||!b.url)return O&&O(b);var m=b.url.replace(/^http/,"ws"),O=b.wire=new a.WebSocket(m);return O.onclose=function(){T(b),a.mesh.bye(b)},O.onerror=function($){T(b)},O.onopen=function(){a.mesh.hi(b)},O.onmessage=function($){$&&a.mesh.hear($.data||$,b)},O}catch{a.mesh.bye(b)}}setTimeout(function(){!a.super&&f.on("out",{dam:"hi"})},1);var g=2*999;function T(b){clearTimeout(b.defer),a.peers[b.url]&&(_&&b.retry<=0||(b.retry=(b.retry||a.retry+1||60)-(-b.tried+(b.tried=+new Date)<g*4?1:0),b.defer=setTimeout(function m(){if(_&&_.hidden)return setTimeout(m,g);d(b)},g)))}var _=""+c!=typeof document&&document});var c})(t,"./websocket"),t(function(i){if(!(typeof Gun>"u")){var n=function(){},c;try{c=(Gun.window||n).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(a,p){this[a]=p},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var f=JSON.stringifyAsync||function(a,p,l,s){var d;try{p(d,JSON.stringify(a,l,s))}catch(g){p(g)}};Gun.on("create",function a(p){this.to.next(p);var l=p.opt;p.graph;var s=[],d,g,T,_;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{d=a[l.prefix]=a[l.prefix]||JSON.parse(T=c.getItem(l.prefix))||{}}catch{d=a[l.prefix]={}}T=(T||"").length,p.on("get",function(m){this.to.next(m);var O=m.get,$,u,v,j;!O||!($=O["#"])||(u=d[$]||j,u&&(v=O["."])&&!Object.plain(v)&&(u=Gun.state.ify({},v,Gun.state.is(u,v),u[v],$)),Gun.on.get.ack(m,u))}),p.on("put",function(m){this.to.next(m);var O=m.put,$=O["#"],u=O["."],v=m["#"],j=m.ok||"";if(d[$]=Gun.state.ify(d[$],u,O[">"],O[":"],$),_&&T>4999880){p.on("in",{"@":v,err:"localStorage max!"});return}!m["@"]&&(!m._.via||Math.random()<j["@"]/j["/"])&&s.push(v),!g&&(g=setTimeout(b,9+T/333))});function b(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var m=s;clearTimeout(g),g=!1,s=[],f(d,function(O,$){try{!O&&c.setItem(l.prefix,$)}catch(u){O=_=u||"localStorage failure"}O&&(Gun.log(O+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:O,get:l.prefix,put:d})),T=$.length,setTimeout.each(m,function(u){p.on("in",{"@":u,err:O,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var I;if(""+I!=typeof Gun){var t=function(h){console.warn("Warning! Deprecated internal utility will break in next version:",h)},e=Gun;e.fn=e.fn||{is:function(h){return t("fn"),!!h&&typeof h=="function"}},e.bi=e.bi||{is:function(h){return t("bi"),h instanceof Boolean||typeof h=="boolean"}},e.num=e.num||{is:function(h){return t("num"),!i(h)&&(h-parseFloat(h)+1>=0||h===1/0||h===-1/0)}},e.text=e.text||{is:function(h){return t("text"),typeof h=="string"}},e.text.ify=e.text.ify||function(h){return t("text.ify"),e.text.is(h)?h:typeof JSON<"u"?JSON.stringify(h):h&&h.toString?h.toString():h},e.text.random=e.text.random||function(h,o){t("text.random");var y="";for(h=h||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";h>0;)y+=o.charAt(Math.floor(Math.random()*o.length)),h--;return y},e.text.match=e.text.match||function(h,o){var y,w;return t("text.match"),typeof h!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},y=o["="]||o["*"]||o[">"]||o["<"],h===y?!0:w!==o["="]?!1:(y=o["*"]||o[">"]||o["<"],h.slice(0,(y||"").length)===y?!0:w!==o["*"]?!1:w!==o[">"]&&w!==o["<"]?h>=o[">"]&&h<=o["<"]:w!==o[">"]&&h>=o[">"]||w!==o["<"]&&h<=o["<"]))},e.text.hash=e.text.hash||function(h,o){if(t("text.hash"),typeof h=="string"){if(o=o||0,!h.length)return o;for(var y=0,w=h.length,x;y<w;++y)x=h.charCodeAt(y),o=(o<<5)-o+x,o|=0;return o}},e.list=e.list||{is:function(h){return t("list"),h instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(h){return t("list.sort"),function(o,y){return!o||!y?0:(o=o[h],y=y[h],o<y?-1:o>y?1:0)}},e.list.map=e.list.map||function(h,o,y){return t("list.map"),G(h,o,y)},e.list.index=1,e.obj=e.boj||{is:function(h){return t("obj"),h?h instanceof Object&&h.constructor===Object||Object.prototype.toString.call(h).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(h,o,y){return t("obj.put"),(h||{})[o]=y,h},e.obj.has=e.obj.has||function(h,o){return t("obj.has"),h&&Object.prototype.hasOwnProperty.call(h,o)},e.obj.del=e.obj.del||function(h,o){if(t("obj.del"),!!h)return h[o]=null,delete h[o],h},e.obj.as=e.obj.as||function(h,o,y,w){return t("obj.as"),h[o]=h[o]||(w===y?{}:y)},e.obj.ify=e.obj.ify||function(h){if(t("obj.ify"),v(h))return h;try{h=JSON.parse(h)}catch{h={}}return h},function(){var h;function o(y,w){A(this,w)&&h!==this[w]||(this[w]=y)}e.obj.to=e.obj.to||function(y,w){return t("obj.to"),w=w||{},G(y,o,w),w}}(),e.obj.copy=e.obj.copy||function(h){return t("obj.copy"),h&&JSON.parse(JSON.stringify(h))},function(){function h(o,y){var w=this.n,x;if(!(w&&(y===w||v(w)&&A(w,y)))&&x!==y)return!0}e.obj.empty=e.obj.empty||function(o,y){return t("obj.empty"),o?!G(o,h,{n:y}):!0}}(),function(){function h(w,x){if(arguments.length===2){h.r=h.r||{},h.r[w]=x;return}h.r=h.r||[],h.r.push(w)}var o=Object.keys,y;Object.keys=Object.keys||function(w){return y(w,function(x,C,S){S(C)})},e.obj.map=y=e.obj.map||function(w,x,C){t("obj.map");var S,N=0,F,H,M,L,K=typeof x=="function";if(h.r=S,o&&v(w)&&(M=o(w),L=!0),C=C||{},i(w)||M)for(F=(M||w).length;N<F;N++){var tt=N+e.list.index;if(K){if(H=L?x.call(C,w[M[N]],M[N],h):x.call(C,w[N],tt,h),H!==S)return H}else if(x===w[L?M[N]:N])return M?M[N]:tt}else for(N in w)if(K){if(A(w,N)&&(H=C?x.call(C,w[N],N,h):x(w[N],N,h),H!==S))return H}else if(x===w[N])return N;return K?h.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(h){return t("time"),h?h instanceof Date:+new Date().getTime()};var $=e.fn.is,i=e.list.is,u=e.obj,v=u.is,A=u.has,G=u.map,n={};n.is=function(h){return t("val.is"),h===I?!1:h===null?!0:h===1/0?!1:a(h)||f(h)||_(h)?!0:n.link.is(h)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(o){if(t("val.link.is"),o&&o[c]&&!o._&&v(o)){var y={};if(G(o,h,y),y.id)return y.id}return!1};function h(o,y){var w=this;if(w.id)return w.id=!1;if(y==c&&a(o))w.id=o;else return w.id=!1}}(),n.link.ify=function(h){return t("val.link.ify"),D({},c,h)},e.obj.has._=".";var c=n.link._,I,f=e.bi.is,_=e.num.is,a=e.text.is,u=e.obj,v=u.is,D=u.put,G=u.map;e.val=e.val||n;var p={_:"_"};p.soul=function(h,o){return t("node.soul"),h&&h._&&h._[o||d]},p.soul.ify=function(h,o){return t("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},h=h||{},h._=h._||{},h._[d]=o.soul||h._[d]||s(),h},p.soul._=n.link._,function(){p.is=function(o,y,w){t("node.is");var x;return v(o)&&(x=p.soul(o))?!G(o,h,{as:w,cb:y,s:x,n:o}):!1};function h(o,y){if(y!==p._){if(!n.is(o))return!0;this.cb&&this.cb.call(this.as,o,y,this.n,this.s)}}}(),function(){p.ify=function(o,y,w){return t("node.ify"),y?typeof y=="string"?y={soul:y}:typeof y=="function"&&(y={map:y}):y={},y.map&&(y.node=y.map.call(w,o,I,y.node||{})),(y.node=p.soul.ify(y.node||{},y))&&G(o,h,{o:y,as:w}),y.node};function h(o,y){var w=this.o,x,C;if(w.map){x=w.map.call(this.as,o,""+y,w.node),C===x?j(w.node,y):w.node&&(w.node[y]=x);return}n.is(o)&&(w.node[y]=o)}}();var u=e.obj,v=u.is,j=u.del,G=u.map,l=e.text,s=l.random,d=p.soul._,I;e.node=e.node||p;var g=e.state;g.lex=function(){return t("state.lex"),g().toString(36).replace(".","")},g.to=function(h,o,y){t("state.to");var w=(h||{})[o];return v(w)&&(w=E(w)),g.ify(y,o,g.is(h,o),w,p.soul(h))},function(){g.map=function(o,y,w){t("state.map");var x,C=v(C=o||y)?C:null;return o=$(o=o||y)?o:null,C&&!o?(y=_(y)?y:g(),C[m]=C[m]||{},G(C,h,{o:C,s:y}),C):(w=w||v(y)?y:x,y=_(y)?y:g(),function(S,N,F,H){if(!o)return h.call({o:F,s:y},S,N),S;o.call(w||this||{},S,N,F,H),!(A(F,N)&&x===F[N])&&h.call({o:F,s:y},S,N)})};function h(o,y){m!==y&&g.ify(this.o,y,this.s)}}();var u=e.obj;u.as;var A=u.has,v=u.is,G=u.map,E=u.copy,T=e.num,_=T.is,b=e.fn,$=b.is,m=p._,I,O={};(function(){O.is=function(y,w,x,C){return t("graph.is"),!y||!v(y)||k(y)?!1:!G(y,h,{cb:w,fn:x,as:C})};function h(y,w){if(!y||w!==p.soul(y)||!p.is(y,this.fn,this.as))return!0;this.cb&&(o.n=y,o.as=this.as,this.cb.call(o.as,y,w,o))}function o(y){y&&p.is(o.n,y,o.as)}})(),function(){O.ify=function(C,S,N){t("graph.ify");var F={path:[],obj:C};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof N=="string"&&(S.soul=S.soul||N,N=I),S.soul&&(F.link=n.link.ify(S.soul)),S.shell=(N||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||N,h(S,F),S.root=F.node,S.graph};function h(C,S){var N;return(N=x(C,S))?N:(S.env=C,S.soul=y,p.ify(S.obj,o,S)&&(S.link=S.link||n.link.ify(p.soul(S.node)),S.obj!==C.shell&&(C.graph[n.link.is(S.link)]=S.node)),S)}function o(C,S,N){var F=this,H=F.env,M,L;if(p._===S&&A(C,n.link._))return N._;if(M=w(C,S,N,F,H)){if(S||(F.node=F.node||N||{},A(C,p._)&&p.soul(C)&&(F.node._=E(C._)),F.node=p.soul.ify(F.node,n.link.is(F.link)),F.link=F.link||n.link.ify(p.soul(F.node))),(L=H.map)&&(L.call(H.as||{},C,S,N,F),A(N,S))){if(C=N[S],I===C){j(N,S);return}if(!(M=w(C,S,N,F,H)))return}if(!S)return F.node;if(M===!0)return C;if(L=h(H,{obj:C,path:F.path.concat(S)}),!!L.node)return L.link}}function y(C){var S=this,N=n.link.is(S.link),F=S.env.graph;S.link=S.link||n.link.ify(C),S.link[n.link._]=C,S.node&&S.node[p._]&&(S.node[p._][n.link._]=C),A(F,N)&&(F[C]=F[N],j(F,N))}function w(C,S,N,F,H){var M;if(n.is(C))return!0;if(v(C))return 1;if(M=H.invalid)return C=M.call(H.as||{},C,S,N),w(C,S,N,F,H);H.err="Invalid value at '"+F.path.concat(S).join(".")+"'!",e.list.is(C)&&(H.err+=" Use `.set(item)` instead of an Array.")}function x(C,S){for(var N=C.seen,F=N.length,H;F--;)if(H=N[F],S.obj===H.obj)return H;N.push(S)}}(),O.node=function(h){t("graph.node");var o=p.soul(h);if(o)return D({},o,h)},function(){O.to=function(o,y,w){if(t("graph.to"),!!o){var x={};return w=w||{seen:{}},G(o[y],h,{obj:x,graph:o,opt:w}),x}};function h(o,y){var w,x;if(p._===y){if(k(o,n.link._))return;this.obj[y]=E(o);return}if(!(w=n.link.is(o))){this.obj[y]=o;return}if(x=this.opt.seen[w]){this.obj[y]=x;return}this.obj[y]=this.opt.seen[w]=O.to(this.graph,w,this.opt)}}();var $=e.fn.is,u=e.obj,v=u.is,j=u.del,A=u.has,k=u.empty,D=u.put,G=u.map,E=u.copy,I;e.graph=e.graph||O}}()})(Kt);var hn=Kt.exports,pn=hn;const _n=sn(pn),vn=_n({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),Se=vn.get("cards"),qt=document.createElement("a"),Bt=document.createElement("input");Bt.type="file";Bt.accept=".json";Bt.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const i=await t.text();Rt(JSON.parse(i))}};const mt=je([]),Rt=r=>{Se.put({data:JSON.stringify(r)})};Se.on(r=>{mt.set(JSON.parse(r.data))});const yn=()=>{qt.href=URL.createObjectURL(new Blob([JSON.stringify(xe(mt))],{type:"application/json"})),qt.download="cards.json",qt.click()},bn=()=>{Bt.click()};function ae(r,t,e){const i=r.slice();return i[3]=t[e],i}function le(r,t,e){const i=r.slice();return i[6]=t[e],i}function ce(r,t,e){const i=r.slice();return i[6]=t[e],i}function se(r){let t,e;return t=new Ut({props:{card:r[6]}}),{c(){X(t.$$.fragment)},m(i,n){V(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){Q(t,i)}}}function de(r){let t,e;return t=new Ut({props:{card:r[6],back:!0}}),{c(){X(t.$$.fragment)},m(i,n){V(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){Q(t,i)}}}function he(r){let t,e,i,n,c,f=it(r[3]),a=[];for(let g=0;g<f.length;g+=1)a[g]=se(ce(r,f,g));const p=g=>W(a[g],1,1,()=>{a[g]=null});let l=it(r[3]),s=[];for(let g=0;g<l.length;g+=1)s[g]=de(le(r,l,g));const d=g=>W(s[g],1,1,()=>{s[g]=null});return{c(){t=z("div");for(let g=0;g<a.length;g+=1)a[g].c();e=U(),i=z("div");for(let g=0;g<s.length;g+=1)s[g].c();n=U(),J(t,"class","page svelte-1bs53cn"),J(i,"class","page svelte-1bs53cn")},m(g,T){P(g,t,T);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(t,null);P(g,e,T),P(g,i,T);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(i,null);R(i,n),c=!0},p(g,T){if(T&2){f=it(g[3]);let _;for(_=0;_<f.length;_+=1){const b=ce(g,f,_);a[_]?(a[_].p(b,T),q(a[_],1)):(a[_]=se(b),a[_].c(),q(a[_],1),a[_].m(t,null))}for(dt(),_=f.length;_<a.length;_+=1)p(_);ht()}if(T&2){l=it(g[3]);let _;for(_=0;_<l.length;_+=1){const b=le(g,l,_);s[_]?(s[_].p(b,T),q(s[_],1)):(s[_]=de(b),s[_].c(),q(s[_],1),s[_].m(i,n))}for(dt(),_=l.length;_<s.length;_+=1)d(_);ht()}},i(g){if(!c){for(let T=0;T<f.length;T+=1)q(a[T]);for(let T=0;T<l.length;T+=1)q(s[T]);c=!0}},o(g){a=a.filter(Boolean);for(let T=0;T<a.length;T+=1)W(a[T]);s=s.filter(Boolean);for(let T=0;T<s.length;T+=1)W(s[T]);c=!1},d(g){g&&(B(t),B(e),B(i)),jt(a,g),jt(s,g)}}}function gn(r){let t,e,i,n=it(fe(r[1])),c=[];for(let a=0;a<n.length;a+=1)c[a]=he(ae(r,n,a));const f=a=>W(c[a],1,1,()=>{c[a]=null});return{c(){t=z("div"),e=z("section");for(let a=0;a<c.length;a+=1)c[a].c();J(e,"class","print")},m(a,p){P(a,t,p),R(t,e);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(e,null);r[2](e),i=!0},p(a,[p]){if(p&2){n=it(fe(a[1]));let l;for(l=0;l<n.length;l+=1){const s=ae(a,n,l);c[l]?(c[l].p(s,p),q(c[l],1)):(c[l]=he(s),c[l].c(),q(c[l],1),c[l].m(e,null))}for(dt(),l=n.length;l<c.length;l+=1)f(l);ht()}},i(a){if(!i){for(let p=0;p<n.length;p+=1)q(c[p]);i=!0}},o(a){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)W(c[p]);i=!1},d(a){a&&B(t),jt(c,a),r[2](null)}}}function mn(r,t,e){let i;Ft(r,mt,f=>e(1,i=f));let n;function c(f){Nt[f?"unshift":"push"](()=>{n=f,e(0,n)})}return[n,i,c]}class kn extends at{constructor(t){super(),ft(this,t,mn,gn,ot,{})}}function $n(r){let t,e,i,n,c;const f=r[2].default,a=Ce(f,r,r[1],null);return{c(){t=z("button"),a&&a.c(),J(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(p,l){P(p,t,l),a&&a.m(t,null),i=!0,n||(c=_t(t,"click",r[3]),n=!0)},p(p,[l]){a&&a.p&&(!i||l&2)&&He(a,f,p,p[1],i?Ee(f,p[1],l,null):Ie(p[1]),null),(!i||l&1&&e!==(e="button "+p[0]+" svelte-zqnkwt"))&&J(t,"class",e)},i(p){i||(q(a,p),i=!0)},o(p){W(a,p),i=!1},d(p){p&&B(t),a&&a.d(p),n=!1,c()}}}function wn(r,t,e){let{$$slots:i={},$$scope:n}=t,{colour:c="green"}=t;function f(a){Je.call(this,r,a)}return r.$$set=a=>{"colour"in a&&e(0,c=a.colour),"$$scope"in a&&e(1,n=a.$$scope)},[c,n,i,f]}class lt extends at{constructor(t){super(),ft(this,t,wn,$n,ot,{colour:0})}}function Tn(r){let t,e,i;return e=new It({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),e.$on("type",r[2]),{c(){t=z("div"),X(e.$$.fragment),J(t,"class","select-wrapper svelte-1wgwrdq"),rt(t,"background-color",r[1])},m(n,c){P(n,t,c),V(e,t,null),i=!0},p(n,[c]){const f={};c&1&&(f.cardType=n[0]),e.$set(f),(!i||c&2)&&rt(t,"background-color",n[1])},i(n){i||(q(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){n&&B(t),Q(e)}}}function jn(r,t,e){let i,{currentFilter:n="None"}=t;const c=({detail:f})=>e(0,n=f);return r.$$set=f=>{"currentFilter"in f&&e(0,n=f.currentFilter)},r.$$.update=()=>{r.$$.dirty&1&&e(1,i=St(n))},[n,i,c]}class Oe extends at{constructor(t){super(),ft(this,t,jn,Tn,ot,{currentFilter:0})}}function pe(r,t,e){const i=r.slice();return i[7]=t[e],i}function Sn(r){let t;return{c(){t=Z("home")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function _e(r){let t,e=r[7].cardType.passive?"passive":"",i,n,c=r[7].cardType.type+"",f,a,p,l,s;return p=new Wt({props:{card:r[7],editable:!1}}),{c(){t=z("div"),i=Z(e),n=U(),f=Z(c),a=U(),X(p.$$.fragment),l=U()},m(d,g){P(d,t,g),R(t,i),R(t,n),R(t,f),R(t,a),V(p,t,null),R(t,l),s=!0},p(d,g){(!s||g&4)&&e!==(e=d[7].cardType.passive?"passive":"")&&gt(i,e),(!s||g&4)&&c!==(c=d[7].cardType.type+"")&&gt(f,c);const T={};g&4&&(T.card=d[7]),p.$set(T)},i(d){s||(q(p.$$.fragment,d),s=!0)},o(d){W(p.$$.fragment,d),s=!1},d(d){d&&B(t),Q(p)}}}function On(r){let t,e,i,n,c,f,a,p,l=r[2].length+"",s,d,g,T,_=r[1]?"stop sorting passive":"sort passive",b,m,O,$,u,v,j,A;e=new lt({props:{$$slots:{default:[Sn]},$$scope:{ctx:r}}}),e.$on("click",r[4]);function k(h){r[5](h)}let D={};r[0]!==void 0&&(D.currentFilter=r[0]),n=new Oe({props:D}),Nt.push(()=>Te(n,"currentFilter",k));let G=it(r[2]),E=[];for(let h=0;h<G.length;h+=1)E[h]=_e(pe(r,G,h));const I=h=>W(E[h],1,1,()=>{E[h]=null});return{c(){t=z("header"),X(e.$$.fragment),i=U(),X(n.$$.fragment),f=U(),a=Z(r[0]),p=Z(": "),s=Z(l),d=U(),g=z("section"),T=z("label"),b=Z(_),m=U(),O=z("input"),$=U(),u=z("section");for(let h=0;h<E.length;h+=1)E[h].c();J(t,"class","svelte-hn041v"),J(T,"for","passive"),J(O,"type","checkbox"),J(O,"name","passive"),J(O,"id","passive"),J(O,"class","svelte-hn041v"),J(u,"class","container svelte-hn041v")},m(h,o){P(h,t,o),V(e,t,null),R(t,i),V(n,t,null),P(h,f,o),P(h,a,o),P(h,p,o),P(h,s,o),P(h,d,o),P(h,g,o),R(g,T),R(T,b),R(g,m),R(g,O),O.checked=r[1],P(h,$,o),P(h,u,o);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(u,null);v=!0,j||(A=_t(O,"change",r[6]),j=!0)},p(h,[o]){const y={};o&1024&&(y.$$scope={dirty:o,ctx:h}),e.$set(y);const w={};if(!c&&o&1&&(c=!0,w.currentFilter=h[0],$e(()=>c=!1)),n.$set(w),(!v||o&1)&&gt(a,h[0]),(!v||o&4)&&l!==(l=h[2].length+"")&&gt(s,l),(!v||o&2)&&_!==(_=h[1]?"stop sorting passive":"sort passive")&&gt(b,_),o&2&&(O.checked=h[1]),o&4){G=it(h[2]);let x;for(x=0;x<G.length;x+=1){const C=pe(h,G,x);E[x]?(E[x].p(C,o),q(E[x],1)):(E[x]=_e(C),E[x].c(),q(E[x],1),E[x].m(u,null))}for(dt(),x=G.length;x<E.length;x+=1)I(x);ht()}},i(h){if(!v){q(e.$$.fragment,h),q(n.$$.fragment,h);for(let o=0;o<G.length;o+=1)q(E[o]);v=!0}},o(h){W(e.$$.fragment,h),W(n.$$.fragment,h),E=E.filter(Boolean);for(let o=0;o<E.length;o+=1)W(E[o]);v=!1},d(h){h&&(B(t),B(f),B(a),B(p),B(s),B(d),B(g),B($),B(u)),Q(e),Q(n),jt(E,h),j=!1,A()}}}function Dn(r,t,e){let i,n;Ft(r,mt,s=>e(3,n=s));let c="None",f=!1;const a=()=>{Ht.set("")};function p(s){c=s,e(0,c)}function l(){f=this.checked,e(1,f)}return r.$$.update=()=>{r.$$.dirty&11&&e(2,i=n.map(s=>{const d=[s.cardHalf1];return s.cardHalf2&&d.push(s.cardHalf2),d}).flat().filter(s=>{if(c==="None"||s.cardType.type===c)return s}).sort((s,d)=>f?-Number(s.cardType.passive)-Number(d.cardType.passive):0))},[c,f,i,n,a,p,l]}class An extends at{constructor(t){super(),ft(this,t,Dn,On,ot,{})}}function ve(r,t,e){const i=r.slice();return i[14]=t[e],i}function Nn(r){let t;return{c(){t=Z("add two sided")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function Gn(r){let t;return{c(){t=Z("add one sided")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function xn(r){let t;return{c(){t=Z("save")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function Cn(r){let t;return{c(){t=Z("import JSON")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function En(r){let t;return{c(){t=Z("export JSON")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function Hn(r){let t;return{c(){t=Z("Download")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function In(r){let t;return{c(){t=Z("view halves")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function Fn(r){let t;return{c(){t=Z("remove")},m(e,i){P(e,t,i)},d(e){e&&B(t)}}}function ye(r){let t,e,i,n,c,f;e=new Ut({props:{card:r[14],readable:!0}});function a(){return r[11](r[14])}return n=new lt({props:{colour:"red",$$slots:{default:[Fn]},$$scope:{ctx:r}}}),n.$on("click",a),{c(){t=z("div"),X(e.$$.fragment),i=U(),X(n.$$.fragment),c=U(),J(t,"class","wrapper svelte-m1wwdp")},m(p,l){P(p,t,l),V(e,t,null),R(t,i),V(n,t,null),R(t,c),f=!0},p(p,l){r=p;const s={};l&8&&(s.card=r[14]),e.$set(s);const d={};l&131072&&(d.$$scope={dirty:l,ctx:r}),n.$set(d)},i(p){f||(q(e.$$.fragment,p),q(n.$$.fragment,p),f=!0)},o(p){W(e.$$.fragment,p),W(n.$$.fragment,p),f=!1},d(p){p&&B(t),Q(e),Q(n)}}}function Mn(r){let t,e,i,n,c,f,a,p,l,s,d,g,T,_,b,m,O,$,u,v,j=r[3].length+"",A,k,D,G,E,I,h,o,y,w;function x(H){r[4](H)}let C={};r[0]!==void 0&&(C.currentFilter=r[0]),e=new Oe({props:C}),Nt.push(()=>Te(e,"currentFilter",x)),c=new lt({props:{colour:"blue",$$slots:{default:[Nn]},$$scope:{ctx:r}}}),c.$on("click",r[5]),a=new lt({props:{colour:"blue",$$slots:{default:[Gn]},$$scope:{ctx:r}}}),a.$on("click",r[6]),l=new lt({props:{$$slots:{default:[xn]},$$scope:{ctx:r}}}),l.$on("click",r[7]),d=new lt({props:{$$slots:{default:[Cn]},$$scope:{ctx:r}}}),d.$on("click",bn),T=new lt({props:{$$slots:{default:[En]},$$scope:{ctx:r}}}),T.$on("click",yn),b=new lt({props:{$$slots:{default:[Hn]},$$scope:{ctx:r}}}),b.$on("click",r[8]),O=new lt({props:{$$slots:{default:[In]},$$scope:{ctx:r}}}),O.$on("click",r[9]);let S=it(r[3]),N=[];for(let H=0;H<S.length;H+=1)N[H]=ye(ve(r,S,H));const F=H=>W(N[H],1,1,()=>{N[H]=null});return{c(){t=z("section"),X(e.$$.fragment),n=U(),X(c.$$.fragment),f=U(),X(a.$$.fragment),p=U(),X(l.$$.fragment),s=U(),X(d.$$.fragment),g=U(),X(T.$$.fragment),_=U(),X(b.$$.fragment),m=U(),X(O.$$.fragment),$=U(),u=z("h1"),v=Z("cards "),A=Z(j),k=U(),D=z("div"),G=Z("search filter: "),E=z("input"),I=U(),h=z("section");for(let H=0;H<N.length;H+=1)N[H].c();J(t,"class","button-container svelte-m1wwdp"),J(E,"type","text"),J(D,"class","filter svelte-m1wwdp"),J(h,"class","container svelte-m1wwdp")},m(H,M){P(H,t,M),V(e,t,null),R(t,n),V(c,t,null),R(t,f),V(a,t,null),R(t,p),V(l,t,null),R(t,s),V(d,t,null),R(t,g),V(T,t,null),R(t,_),V(b,t,null),R(t,m),V(O,t,null),P(H,$,M),P(H,u,M),R(u,v),R(u,A),P(H,k,M),P(H,D,M),R(D,G),R(D,E),Yt(E,r[1]),P(H,I,M),P(H,h,M);for(let L=0;L<N.length;L+=1)N[L]&&N[L].m(h,null);o=!0,y||(w=_t(E,"input",r[10]),y=!0)},p(H,[M]){const L={};!i&&M&1&&(i=!0,L.currentFilter=H[0],$e(()=>i=!1)),e.$set(L);const K={};M&131072&&(K.$$scope={dirty:M,ctx:H}),c.$set(K);const tt={};M&131072&&(tt.$$scope={dirty:M,ctx:H}),a.$set(tt);const et={};M&131072&&(et.$$scope={dirty:M,ctx:H}),l.$set(et);const ct={};M&131072&&(ct.$$scope={dirty:M,ctx:H}),d.$set(ct);const ut={};M&131072&&(ut.$$scope={dirty:M,ctx:H}),T.$set(ut);const vt={};M&131072&&(vt.$$scope={dirty:M,ctx:H}),b.$set(vt);const Ot={};if(M&131072&&(Ot.$$scope={dirty:M,ctx:H}),O.$set(Ot),(!o||M&8)&&j!==(j=H[3].length+"")&&gt(A,j),M&2&&E.value!==H[1]&&Yt(E,H[1]),M&12){S=it(H[3]);let Y;for(Y=0;Y<S.length;Y+=1){const yt=ve(H,S,Y);N[Y]?(N[Y].p(yt,M),q(N[Y],1)):(N[Y]=ye(yt),N[Y].c(),q(N[Y],1),N[Y].m(h,null))}for(dt(),Y=S.length;Y<N.length;Y+=1)F(Y);ht()}},i(H){if(!o){q(e.$$.fragment,H),q(c.$$.fragment,H),q(a.$$.fragment,H),q(l.$$.fragment,H),q(d.$$.fragment,H),q(T.$$.fragment,H),q(b.$$.fragment,H),q(O.$$.fragment,H);for(let M=0;M<S.length;M+=1)q(N[M]);o=!0}},o(H){W(e.$$.fragment,H),W(c.$$.fragment,H),W(a.$$.fragment,H),W(l.$$.fragment,H),W(d.$$.fragment,H),W(T.$$.fragment,H),W(b.$$.fragment,H),W(O.$$.fragment,H),N=N.filter(Boolean);for(let M=0;M<N.length;M+=1)W(N[M]);o=!1},d(H){H&&(B(t),B($),B(u),B(k),B(D),B(I),B(h)),Q(e),Q(c),Q(a),Q(l),Q(d),Q(T),Q(b),Q(O),jt(N,H),y=!1,w()}}}function Bn(r,t,e){let i,n;Ft(r,mt,O=>e(2,n=O));let c="None",f="";const a=(O,$)=>($=$.toLocaleLowerCase(),!$||O.cardHalf1.text.toLocaleLowerCase().includes($)||O.cardHalf2&&O.cardHalf2.text.toLocaleLowerCase().includes($)),p=(O,$,u)=>O.filter(v=>(v.cardHalf1.cardType.type===$||$==="None"||v.cardHalf2&&v.cardHalf2.cardType.type===$)&&a(v,u));function l(O){c=O,e(0,c)}const s=()=>{mt.set([...n,te(2)])},d=()=>{mt.set([...n,te(1)]),console.log(n.length)},g=()=>{Rt(n)},T=()=>{Ht.set("download")},_=()=>{Ht.set("half")};function b(){f=this.value,e(1,f)}const m=O=>{Rt(n.filter($=>$.id!==O.id))};return r.$$.update=()=>{r.$$.dirty&7&&e(3,i=p(n,c,f)),r.$$.dirty&2&&console.log(f)},[c,f,n,i,l,s,d,g,T,_,b,m]}class Pn extends at{constructor(t){super(),ft(this,t,Bn,Mn,ot,{})}}function Jn(r){let t,e,i;var n=r[0];function c(f,a){return{}}return n&&(t=Zt(n,c())),{c(){t&&X(t.$$.fragment),e=Mt()},m(f,a){t&&V(t,f,a),P(f,e,a),i=!0},p(f,[a]){if(a&1&&n!==(n=f[0])){if(t){dt();const p=t;W(p.$$.fragment,1,0,()=>{Q(p,1)}),ht()}n?(t=Zt(n,c()),X(t.$$.fragment),q(t.$$.fragment,1),V(t,e.parentNode,e)):t=null}},i(f){i||(t&&q(t.$$.fragment,f),i=!0)},o(f){t&&W(t.$$.fragment,f),i=!1},d(f){f&&B(e),t&&Q(t,f)}}}function qn(r,t,e){let i,n;Ft(r,Ht,f=>e(1,n=f));const c={"":Pn,download:kn,half:An};return r.$$.update=()=>{r.$$.dirty&2&&e(0,i=c[n])},[i,n]}class Ln extends at{constructor(t){super(),ft(this,t,qn,Jn,ot,{})}}new Ln({target:document.getElementById("app")});
