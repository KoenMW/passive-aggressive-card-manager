var Gt=Object.defineProperty;var Ct=(n,e,t)=>e in n?Gt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Le=(n,e,t)=>Ct(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}})();function re(){}function xt(n,e){for(const t in e)n[t]=e[t];return n}function mt(n){return n()}function et(){return Object.create(null)}function me(n){n.forEach(mt)}function $t(n){return typeof n=="function"}function ue(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ee;function he(n,e){return n===e?!0:(Ee||(Ee=document.createElement("a")),Ee.href=e,n===Ee.href)}function Ht(n){return Object.keys(n).length===0}function wt(n,...e){if(n==null){for(const o of e)o(void 0);return re}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Et(n){let e;return wt(n,t=>e=t)(),e}function Pe(n,e,t){n.$$.on_destroy.push(wt(e,t))}function Ft(n,e,t,o){if(n){const r=Tt(n,e,t,o);return n[0](r)}}function Tt(n,e,t,o){return n[1]&&o?xt(t.ctx.slice(),n[1](o(e))):t.ctx}function It(n,e,t,o){if(n[2]&&o){const r=n[2](o(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const c=[],a=Math.max(e.dirty.length,r.length);for(let f=0;f<a;f+=1)c[f]=e.dirty[f]|r[f];return c}return e.dirty|r}return e.dirty}function Mt(n,e,t,o,r,c){if(r){const a=Tt(e,t,o,c);n.p(a,r)}}function Bt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let o=0;o<t;o++)e[o]=-1;return e}return-1}function tt(n){return n??""}function U(n,e){n.appendChild(e)}function P(n,e,t){n.insertBefore(e,t||null)}function B(n){n.parentNode&&n.parentNode.removeChild(n)}function Se(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function R(n){return document.createElement(n)}function ee(n){return document.createTextNode(n)}function V(){return ee(" ")}function Je(){return ee("")}function le(n,e,t,o){return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}function M(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Pt(n){return Array.from(n.childNodes)}function Oe(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ie(n,e){n.value=e??""}function ie(n,e,t,o){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Jt(n,e,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:o})}function nt(n,e){return new n(e)}let Ce;function Ge(n){Ce=n}function qt(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Lt(){const n=qt();return(e,t,{cancelable:o=!1}={})=>{const r=n.$$.callbacks[e];if(r){const c=Jt(e,t,{cancelable:o});return r.slice().forEach(a=>{a.call(n,c)}),!c.defaultPrevented}return!0}}function zt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(o=>o.call(this,e))}const Te=[],xe=[];let je=[];const Re=[],Wt=Promise.resolve();let Ue=!1;function Rt(){Ue||(Ue=!0,Wt.then(St))}function He(n){je.push(n)}function jt(n){Re.push(n)}const ze=new Set;let $e=0;function St(){if($e!==0)return;const n=Ce;do{try{for(;$e<Te.length;){const e=Te[$e];$e++,Ge(e),Ut(e.$$)}}catch(e){throw Te.length=0,$e=0,e}for(Ge(null),Te.length=0,$e=0;xe.length;)xe.pop()();for(let e=0;e<je.length;e+=1){const t=je[e];ze.has(t)||(ze.add(t),t())}je.length=0}while(Te.length);for(;Re.length;)Re.pop()();Ue=!1,ze.clear(),Ge(n)}function Ut(n){if(n.fragment!==null){n.update(),me(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(He)}}function Kt(n){const e=[],t=[];je.forEach(o=>n.indexOf(o)===-1?e.push(o):t.push(o)),t.forEach(o=>o()),je=e}const Fe=new Set;let ge;function pe(){ge={r:0,c:[],p:ge}}function _e(){ge.r||me(ge.c),ge=ge.p}function W(n,e){n&&n.i&&(Fe.delete(n),n.i(e))}function K(n,e,t,o){if(n&&n.o){if(Fe.has(n))return;Fe.add(n),ge.c.push(()=>{Fe.delete(n),o&&(t&&n.d(1),o())}),n.o(e)}else o&&o()}function oe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ot(n,e,t){const o=n.$$.props[e];o!==void 0&&(n.$$.bound[o]=t,t(n.$$.ctx[o]))}function Z(n){n&&n.c()}function X(n,e,t){const{fragment:o,after_update:r}=n.$$;o&&o.m(e,t),He(()=>{const c=n.$$.on_mount.map(mt).filter($t);n.$$.on_destroy?n.$$.on_destroy.push(...c):me(c),n.$$.on_mount=[]}),r.forEach(He)}function Y(n,e){const t=n.$$;t.fragment!==null&&(Kt(t.after_update),me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vt(n,e){n.$$.dirty[0]===-1&&(Te.push(n),Rt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ce(n,e,t,o,r,c,a=null,f=[-1]){const h=Ce;Ge(n);const l=n.$$={fragment:null,ctx:[],props:c,update:re,not_equal:r,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:et(),dirty:f,skip_bound:!1,root:e.target||h.$$.root};a&&a(l.root);let s=!1;if(l.ctx=t?t(n,e.props||{},(d,y,...j)=>{const p=j.length?j[0]:y;return l.ctx&&r(l.ctx[d],l.ctx[d]=p)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](p),s&&Vt(n,d)),y}):[],l.update(),s=!0,me(l.before_update),l.fragment=o?o(l.ctx):!1,e.target){if(e.hydrate){const d=Pt(e.target);l.fragment&&l.fragment.l(d),d.forEach(B)}else l.fragment&&l.fragment.c();e.intro&&W(n.$$.fragment),X(n,e.target,e.anchor),St()}Ge(h)}class se{constructor(){Le(this,"$$");Le(this,"$$set")}$destroy(){Y(this,1),this.$destroy=re}$on(e,t){if(!$t(t))return re;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(t),()=>{const r=o.indexOf(t);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!Ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qt);const we=[];function Dt(n,e=re){let t;const o=new Set;function r(f){if(ue(n,f)&&(n=f,t)){const h=!we.length;for(const l of o)l[1](),we.push(l,n);if(h){for(let l=0;l<we.length;l+=2)we[l][0](we[l+1]);we.length=0}}}function c(f){r(f(n))}function a(f,h=re){const l=[f,h];return o.add(l),o.size===1&&(t=e(r,c)||re),f(n),()=>{o.delete(l),o.size===0&&t&&(t(),t=null)}}return{set:r,update:c,subscribe:a}}const Me=Dt(""),De=n=>{switch(n){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},ve=n=>window.location.href.includes("localhost")?`${window.location.href}/${n}.svg`:`${n}.svg`,rt=n=>{const e=Math.random().toString(36);return n===1?{id:e,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:e,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Xt(n){let e,t=n[0].text+"",o;return{c(){e=R("div"),o=ee(t),M(e,"class","cardText svelte-13kvtzw")},m(r,c){P(r,e,c),U(e,o)},p(r,c){c&1&&t!==(t=r[0].text+"")&&Oe(o,t)},d(r){r&&B(e)}}}function Yt(n){let e,t,o;return{c(){e=R("div"),M(e,"contenteditable","true"),M(e,"class","cardText svelte-13kvtzw"),n[0].text===void 0&&He(()=>n[5].call(e))},m(r,c){P(r,e,c),n[0].text!==void 0&&(e.innerText=n[0].text),t||(o=le(e,"input",n[5]),t=!0)},p(r,c){c&1&&r[0].text!==e.innerText&&(e.innerText=r[0].text)},d(r){r&&B(e),t=!1,o()}}}function Zt(n){let e,t,o,r,c=n[0].cardType.passive&&it();return{c(){e=R("img"),o=V(),c&&c.c(),r=Je(),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-13kvtzw")},m(a,f){P(a,e,f),P(a,o,f),c&&c.m(a,f),P(a,r,f)},p(a,f){f&1&&!he(e.src,t=ve(a[0].cardType.type))&&M(e,"src",t),a[0].cardType.passive?c||(c=it(),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},d(a){a&&(B(e),B(o),B(r)),c&&c.d(a)}}}function it(n){let e;return{c(){e=R("p"),e.textContent="Passive",M(e,"class","mirrored svelte-13kvtzw")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function en(n){let e,t;function o(a,f){return a[2]?Zt:a[3]?Yt:Xt}let r=o(n),c=r(n);return{c(){e=R("div"),t=R("div"),c.c(),M(t,"class","card svelte-13kvtzw"),ie(t,"--colour",n[4]),M(e,"class","wrapper svelte-13kvtzw"),ie(e,"--rotation",n[1]+"deg")},m(a,f){P(a,e,f),U(e,t),c.m(t,null)},p(a,[f]){r===(r=o(a))&&c?c.p(a,f):(c.d(1),c=r(a),c&&(c.c(),c.m(t,null))),f&16&&ie(t,"--colour",a[4]),f&2&&ie(e,"--rotation",a[1]+"deg")},i:re,o:re,d(a){a&&B(e),c.d()}}}function tn(n,e,t){let o,{card:r}=e,{rotation:c=0}=e,{back:a=!1}=e,{editable:f=!0}=e;function h(){r.text=this.innerText,t(0,r)}return n.$$set=l=>{"card"in l&&t(0,r=l.card),"rotation"in l&&t(1,c=l.rotation),"back"in l&&t(2,a=l.back),"editable"in l&&t(3,f=l.editable)},n.$$.update=()=>{n.$$.dirty&1&&t(4,o=De(r.cardType.type))},[r,c,a,f,o,h]}class Ke extends se{constructor(e){super(),ce(this,e,tn,en,ue,{card:0,rotation:1,back:2,editable:3})}}function ot(n,e,t){const o=n.slice();return o[12]=e[t],o}function ut(n){let e,t,o,r,c,a,f,h,l=n[5]&&ft(n),s=!n[3]&&lt(n);return{c(){e=R("div"),t=R("img"),r=V(),l&&l.c(),c=V(),s&&s.c(),a=Je(),he(t.src,o=ve(n[0]))||M(t,"src",o),M(t,"alt","My Icon"),M(t,"class","cardIcon svelte-lm5vvd"),M(e,"class","select svelte-lm5vvd")},m(d,y){P(d,e,y),U(e,t),U(e,r),l&&l.m(e,null),P(d,c,y),s&&s.m(d,y),P(d,a,y),f||(h=le(t,"click",n[8]),f=!0)},p(d,y){y&1&&!he(t.src,o=ve(d[0]))&&M(t,"src",o),d[5]?l?l.p(d,y):(l=ft(d),l.c(),l.m(e,null)):l&&(l.d(1),l=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,y):(s=lt(d),s.c(),s.m(a.parentNode,a))},d(d){d&&(B(e),B(c),B(a)),l&&l.d(),s&&s.d(d),f=!1,h()}}}function ft(n){let e,t=oe(n[4]),o=[];for(let r=0;r<t.length;r+=1)o[r]=at(ot(n,t,r));return{c(){e=R("div");for(let r=0;r<o.length;r+=1)o[r].c();M(e,"class","options svelte-lm5vvd"),ie(e,"--colour",n[6])},m(r,c){P(r,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(r,c){if(c&49){t=oe(r[4]);let a;for(a=0;a<t.length;a+=1){const f=ot(r,t,a);o[a]?o[a].p(f,c):(o[a]=at(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=t.length}c&64&&ie(e,"--colour",r[6])},d(r){r&&B(e),Se(o,r)}}}function at(n){let e,t,o,r,c;function a(){return n[9](n[12])}return{c(){e=R("img"),he(e.src,t=ve(n[12]))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class",o="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")},m(f,h){P(f,e,h),r||(c=le(e,"click",a),r=!0)},p(f,h){n=f,h&16&&!he(e.src,t=ve(n[12]))&&M(e,"src",t),h&17&&o!==(o="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")&&M(e,"class",o)},d(f){f&&B(e),r=!1,c()}}}function lt(n){let e,t,o,r,c,a,f;return{c(){e=R("input"),t=V(),o=R("label"),r=ee("Passive"),M(e,"type","checkbox"),M(e,"id",n[7]),M(e,"class","hidden"),M(o,"for",n[7]),M(o,"class",c="passive no-select "+(n[1]?"":"invisible")+" svelte-lm5vvd")},m(h,l){P(h,e,l),e.checked=n[1],P(h,t,l),P(h,o,l),U(o,r),a||(f=le(e,"change",n[10]),a=!0)},p(h,l){l&2&&(e.checked=h[1]),l&2&&c!==(c="passive no-select "+(h[1]?"":"invisible")+" svelte-lm5vvd")&&M(o,"class",c)},d(h){h&&(B(e),B(t),B(o)),a=!1,f()}}}function nn(n){let e,t=!n[2]&&ut(n);return{c(){t&&t.c(),e=Je()},m(o,r){t&&t.m(o,r),P(o,e,r)},p(o,[r]){o[2]?t&&(t.d(1),t=null):t?t.p(o,r):(t=ut(o),t.c(),t.m(e.parentNode,e))},i:re,o:re,d(o){o&&B(e),t&&t.d(o)}}}function rn(n,e,t){let o,{cardType:r}=e,{passive:c=!1}=e,{back:a=!1}=e,{noPassive:f=!1}=e;const h=Math.random().toString(36).substring(7),l=Lt();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=e;const y=()=>t(5,s=!s),j=g=>{t(0,r=g),t(5,s=!1)};function p(){c=this.checked,t(1,c)}return n.$$set=g=>{"cardType"in g&&t(0,r=g.cardType),"passive"in g&&t(1,c=g.passive),"back"in g&&t(2,a=g.back),"noPassive"in g&&t(3,f=g.noPassive),"names"in g&&t(4,d=g.names)},n.$$.update=()=>{n.$$.dirty&1&&t(6,o=De(r)),n.$$.dirty&1&&l("type",r),n.$$.dirty&2&&l("passive",c)},[r,c,a,f,d,s,o,h,y,j,p]}class Be extends se{constructor(e){super(),ce(this,e,rn,nn,ue,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function on(n){let e,t;return{c(){e=R("img"),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-15hk4fg")},m(o,r){P(o,e,r)},p(o,r){r&1&&!he(e.src,t=ve(o[0].cardType.type))&&M(e,"src",t)},i:re,o:re,d(o){o&&B(e)}}}function un(n){let e,t,o,r,c,a,f;return t=new Be({props:{cardType:n[0].cardType.type,passive:n[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),t.$on("type",n[2]),{c(){e=R("p"),Z(t.$$.fragment),o=V(),r=R("div"),M(e,"class","svelte-15hk4fg"),M(r,"contenteditable","true"),M(r,"class","cardText svelte-15hk4fg"),n[0].text===void 0&&He(()=>n[3].call(r))},m(h,l){P(h,e,l),X(t,e,null),P(h,o,l),P(h,r,l),n[0].text!==void 0&&(r.innerText=n[0].text),c=!0,a||(f=le(r,"input",n[3]),a=!0)},p(h,l){const s={};l&1&&(s.cardType=h[0].cardType.type),l&1&&(s.passive=h[0].cardType.passive),t.$set(s),l&1&&h[0].text!==r.innerText&&(r.innerText=h[0].text)},i(h){c||(W(t.$$.fragment,h),c=!0)},o(h){K(t.$$.fragment,h),c=!1},d(h){h&&(B(e),B(o),B(r)),Y(t),a=!1,f()}}}function fn(n){let e,t,o,r;const c=[un,on],a=[];function f(h,l){return h[1]?1:0}return t=f(n),o=a[t]=c[t](n),{c(){e=R("div"),o.c(),M(e,"class","card svelte-15hk4fg"),ie(e,"--colour",De(n[0].cardType.type))},m(h,l){P(h,e,l),a[t].m(e,null),r=!0},p(h,[l]){let s=t;t=f(h),t===s?a[t].p(h,l):(pe(),K(a[s],1,1,()=>{a[s]=null}),_e(),o=a[t],o?o.p(h,l):(o=a[t]=c[t](h),o.c()),W(o,1),o.m(e,null)),(!r||l&1)&&ie(e,"--colour",De(h[0].cardType.type))},i(h){r||(W(o),r=!0)},o(h){K(o),r=!1},d(h){h&&B(e),a[t].d()}}}function an(n,e,t){let{card:o}=e,{back:r=!1}=e;const c=({detail:f})=>t(0,o.cardType.type=f,o);function a(){o.text=this.innerText,t(0,o)}return n.$$set=f=>{"card"in f&&t(0,o=f.card),"back"in f&&t(1,r=f.back)},[o,r,c,a]}class ln extends se{constructor(e){super(),ce(this,e,an,fn,ue,{card:0,back:1})}}function cn(n){let e,t;return e=new ln({props:{card:n[0].cardHalf1,back:n[1]}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&1&&(c.card=o[0].cardHalf1),r&2&&(c.back=o[1]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function sn(n){let e,t,o,r,c,a,f,h,l,s,d,y,j,p;return o=new Be({props:{cardType:n[0].cardHalf1.cardType.type,passive:n[0].cardHalf1.cardType.passive,back:n[1]}}),o.$on("type",n[4]),o.$on("passive",n[5]),c=new Ke({props:{card:n[0].cardHalf1,back:n[1]}}),h=new Ke({props:{card:n[0].cardHalf2,rotation:n[2]?0:180,back:n[1]}}),d=new Be({props:{cardType:n[0].cardHalf2.cardType.type,passive:n[0].cardHalf2.cardType.passive,back:n[1]}}),d.$on("type",n[6]),d.$on("passive",n[7]),{c(){e=R("div"),t=R("p"),Z(o.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),f=R("div"),Z(h.$$.fragment),l=V(),s=R("p"),Z(d.$$.fragment),y=V(),j=R("div"),M(t,"class","first svelte-1ubeuca"),M(e,"class","first-half half"),M(s,"class","second svelte-1ubeuca"),M(f,"class","second-half half svelte-1ubeuca"),M(j,"class","fill svelte-1ubeuca")},m(g,k){P(g,e,k),U(e,t),X(o,t,null),U(e,r),X(c,e,null),P(g,a,k),P(g,f,k),X(h,f,null),U(f,l),U(f,s),X(d,s,null),P(g,y,k),P(g,j,k),p=!0},p(g,k){const N={};k&1&&(N.cardType=g[0].cardHalf1.cardType.type),k&1&&(N.passive=g[0].cardHalf1.cardType.passive),k&2&&(N.back=g[1]),o.$set(N);const w={};k&1&&(w.card=g[0].cardHalf1),k&2&&(w.back=g[1]),c.$set(w);const u={};k&1&&(u.card=g[0].cardHalf2),k&4&&(u.rotation=g[2]?0:180),k&2&&(u.back=g[1]),h.$set(u);const b={};k&1&&(b.cardType=g[0].cardHalf2.cardType.type),k&1&&(b.passive=g[0].cardHalf2.cardType.passive),k&2&&(b.back=g[1]),d.$set(b)},i(g){p||(W(o.$$.fragment,g),W(c.$$.fragment,g),W(h.$$.fragment,g),W(d.$$.fragment,g),p=!0)},o(g){K(o.$$.fragment,g),K(c.$$.fragment,g),K(h.$$.fragment,g),K(d.$$.fragment,g),p=!1},d(g){g&&(B(e),B(a),B(f),B(y),B(j)),Y(o),Y(c),Y(h),Y(d)}}}function dn(n){let e,t,o,r,c;const a=[sn,cn],f=[];function h(l,s){return l[0].cardHalf2?0:1}return t=h(n),o=f[t]=a[t](n),{c(){e=R("div"),o.c(),M(e,"class",r=tt(`card ${n[1]&&"back"}`)+" svelte-1ubeuca"),ie(e,"--colour",n[3])},m(l,s){P(l,e,s),f[t].m(e,null),c=!0},p(l,[s]){let d=t;t=h(l),t===d?f[t].p(l,s):(pe(),K(f[d],1,1,()=>{f[d]=null}),_e(),o=f[t],o?o.p(l,s):(o=f[t]=a[t](l),o.c()),W(o,1),o.m(e,null)),(!c||s&2&&r!==(r=tt(`card ${l[1]&&"back"}`)+" svelte-1ubeuca"))&&M(e,"class",r),(!c||s&8)&&ie(e,"--colour",l[3])},i(l){c||(W(o),c=!0)},o(l){K(o),c=!1},d(l){l&&B(e),f[t].d()}}}function hn(n,e,t){let o,{card:r}=e,{back:c=!1}=e,{readable:a=!1}=e;const f=({detail:d})=>t(0,r.cardHalf1.cardType.type=d,r),h=({detail:d})=>t(0,r.cardHalf1.cardType.passive=d,r),l=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.type=d,r)},s=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.passive=d,r)};return n.$$set=d=>{"card"in d&&t(0,r=d.card),"back"in d&&t(1,c=d.back),"readable"in d&&t(2,a=d.readable)},n.$$.update=()=>{n.$$.dirty&1&&t(3,o=De(r.cardHalf1.cardType.type))},[r,c,a,o,f,h,l,s]}class Qe extends se{constructor(e){super(),ce(this,e,hn,dn,ue,{card:0,back:1,readable:2})}}const ct=(n,e=9)=>{const t=[];let o=0;for(;o<n.length;)t.push(n.slice(o,e+o)),o+=e;return t},pn=(n,e)=>(e=e.toLocaleLowerCase(),!e||n.cardHalf1.text.toLocaleLowerCase().includes(e)||n.cardHalf2&&n.cardHalf2.text.toLocaleLowerCase().includes(e)),_n=(n,e)=>!e||n.cardHalf1.cardType.passive||n.cardHalf2&&n.cardHalf2.cardType.passive;function vn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yn(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xe={exports:{}};Xe.exports;(function(n){(function(){function e(o,r){return r?yn(o):o.slice?e[c(o)]:function(a,f){o(a={exports:{}}),e[c(f)]=a.exports};function c(a){return a.split("/").slice(-1).toString().replace(".js","")}}var t=n;e(function(o){String.random=function(c,a){var f="";for(c=c||24,a=a||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)f+=a.charAt(Math.floor(Math.random()*a.length));return f},String.match=function(c,a){var f,h;return typeof c!="string"?!1:(typeof a=="string"&&(a={"=":a}),a=a||{},f=a["="]||a["*"]||a[">"]||a["<"],c===f?!0:h!==a["="]?!1:(f=a["*"]||a[">"],c.slice(0,(f||"").length)===f?!0:h!==a["*"]?!1:h!==a[">"]&&h!==a["<"]?c>=a[">"]&&c<=a["<"]:h!==a[">"]&&c>=a[">"]||h!==a["<"]&&c<=a["<"]))},String.hash=function(c,a){if(typeof c=="string"){if(a=a||0,!c.length)return a;for(var f=0,h=c.length,l;f<h;++f)l=c.charCodeAt(f),a=(a<<5)-a+l,a|=0;return a}};var r=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,a){for(var f in c)if(r.call(c,f)&&(!a||a.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var a=[];for(var f in c)r.call(c,f)&&a.push(f);return a},function(){var c,a=setTimeout,f=0,h=0,l=typeof setImmediate!=""+c&&setImmediate||function(d,y){return typeof MessageChannel==""+c?a:((d=new MessageChannel).port1.onmessage=function(j){j.data==""&&y()},function(j){y=j,d.port2.postMessage("")})}(),s=a.check=a.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};a.hold=a.hold||9,a.poll=a.poll||function(d){if(a.hold>=s.now()-f&&h++<3333){d();return}l(function(){f=s.now(),d()},h=0)}}(),function(){var c=setTimeout,a=c.turn=c.turn||function(y){f.push(y)==1&&h(d)},f=a.s=[],h=c.poll,l=0,s,d=function(){(s=f[l++])&&s(),(l==f.length||l==99)&&(f=a.s=f.slice(l),l=0),f.length&&h(d)}}(),function(){var c,a=setTimeout,f=a.turn;(a.each=a.each||function(h,l,s,d){d=d||9,function y(j,p,g){if(p=(j=(h||[]).splice(0,d)).length){for(var k=0;k<p&&c===(g=l(j[k]));k++);if(c===g){f(y);return}}s&&s(g)}()})()}()})(e,"./shim"),e(function(o){o.exports=function r(s,a,f){if(!s)return{to:r};var h,l=typeof a=="function",s=(this.tag||(this.tag={}))[s]||l&&(this.tag[s]={tag:s,to:r._={next:function(y){var j;(j=this.to)&&j.next(y)}}});if(l){var d={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:a,the:s,on:this,as:f};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&h!==a&&s.next(a),s}})(e,"./onto"),e(function(o){o.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(o){e("./shim");function r(){var s=+new Date;return h<s?(a=0,h=s+r.drift):h=s+(a+=1)/f+r.drift}r.drift=0;var c=-1/0,a=0,f=999,h=c,l;r.is=function(s,d,y){var j=d&&s&&s._&&s._[">"]||y;if(j)return typeof(j=j[d])=="number"?j:c},r.ify=function(s,d,y,j,p){(s=s||{})._=s._||{},p&&(s._["#"]=p);var g=s._[">"]||(s._[">"]={});return l!==d&&d!=="_"&&(typeof y=="number"&&(g[d]=y),l!==j&&(s[d]=j)),s},o.exports=r})(e,"./state"),e(function(o){e("./shim");function r(c){var a={s:{}},f=a.s;c=c||{max:999,age:1e3*9},a.check=function(l){return f[l]?h(l):!1};var h=a.track=function(l){var s=f[l]||(f[l]={});return s.was=a.now=+new Date,a.to||(a.to=setTimeout(a.drop,c.age+9)),h.ed&&h.ed(l),s};return a.drop=function(l){a.to=null,a.now=+new Date;var s=Object.keys(f);console.STAT&&console.STAT(a.now,+new Date-a.now,"dup drop keys"),setTimeout.each(s,function(d){var y=f[d];y&&(l||c.age)>a.now-y.was||delete f[d]},0,99)},a}o.exports=r})(e,"./dup"),e(function(o){e("./onto"),o.exports=function(a,f){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof a!="function"){if(!a)return;var s=a["#"]||a,l=(this.tag||"")[s];return l?(f&&(l=this.on(s,f),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},h)),!0):void 0}var s=f&&f["#"]||r(9);if(!a)return s;var d=this.on(s,a,f);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(o){function r(p){return p instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:p}):new r(p)}r.is=function(p){return p instanceof r||p&&p._&&p===p._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(i){i.root=i.root||i,i.graph=i.graph||{},i.on=i.on||r.on,i.ask=i.ask||r.ask,i.dup=i.dup||r.dup();var _=i.$.opt(i.opt);return i.once||(i.on("in",p,i),i.on("out",p,i),i.on("put",N,i),r.on("create",i),i.on("create",i)),i.once=1,_};function p(i){if(i){if(i.out===p){this.to.next(i);return}var _=this,$=_.as,x=$.at||$,A=x.$,S=x.dup,H,F=i.DBG;if((H=i["#"])||(H=i["#"]=a(9)),!S.check(H)){if(S.track(H),H=i._,i._=typeof H=="function"?H:function(){},i.$&&i.$===(i.$._||"").$||(i.$=A),i["@"]&&!i.put&&u(i),!x.ask(i["@"],i))if(F&&(F.u=+new Date),i.put){g(i);return}else i.get&&r.on.get(i,A);F&&(F.uc=+new Date),_.to.next(i),F&&(F.ua=+new Date),!(i.nts||i.NTS)&&(i.out=p,x.on("out",i),F&&(F.ue=+new Date))}}}function g(i){if(i){var _=i._||"",$=_.root=((_.$=i.$||"")._||"").root;if(i["@"]&&_.faith&&!_.miss){i.out=p,$.on("out",i);return}_.latch=$.hatch,_.match=$.hatch=[];var x=i.put,A=_.DBG=i.DBG,S=+new Date;if(C=C||S,!(x["#"]&&x["."])){A&&(A.p=S),_["#"]=i["#"],_.msg=i,_.all=0,_.stun=1;var H=Object.keys(x);console.STAT&&console.STAT(S,((A||_).pk=+new Date)-S,"put sort");var F=0,L,q,J,Q,I,z,ne;(function fe(ye){if(L!=F){if(L=F,!(J=H[F])){console.STAT&&console.STAT(S,((A||_).pd=+new Date)-S,"put"),w(_);return}(Q=x[J])?(ne=Q._)?J!==ne["#"]?z=T+D(J)+"soul not same.":(I=ne[">"])||(z=T+D(J)+"no state."):z=T+D(J)+"no meta.":z=T+D(J)+"no node.",q=Object.keys(Q||{})}if(z){i.err=_.err=z,w(_);return}var Ae=0,ae;for(ye=ye||0;ye++<9&&(ae=q[Ae++]);)if(ae!=="_"){var be=Q[ae],Ne=I[ae];if(d===Ne){z=T+D(ae)+"on"+D(J)+"no state.";break}if(!h(be)){z=T+D(ae)+"on"+D(J)+"bad "+typeof be+D(be);break}k(be,ae,J,Ne,i),++E}if((q=q.slice(Ae)).length){f(fe);return}++F,q=null,fe(ye)})()}}}r.on.put=g;function k(i,_,$,x,A){var S=A._||"",H=S.root,F=H.graph,L,q=F[$]||y,J=l(q,_,1),Q=q[_],I=S.DBG;(L=console.STAT)&&(!F[$]||!Q)&&(L.has=(L.has||0)+1);var z=G();if(x>z){setTimeout(function(){k(i,_,$,x,A)},(L=x-z)>O?O:L),console.STAT&&console.STAT((I||S).Hf=+new Date,L,"future");return}if(!(x<J)&&!(!S.faith&&x===J&&(i===Q||m(i)<=m(Q))&&!S.miss)){S.stun++;var ne=A["#"]+S.all++,fe={toString:function(){return ne},_:S};fe.toJSON=fe.toString,H.dup.track(fe)["#"]=A["#"],I&&(I.ph=I.ph||+new Date),H.on("put",{"#":fe,"@":A["@"],put:{"#":$,".":_,":":i,">":x},ok:A.ok,_:S})}}function N(i){var _;(_=(i._||"").DBG)&&(_.pa=+new Date,_.pm=_.pm||+new Date);var $=this,x=$.as,A=x.graph,S=i._,H=i.put,F=H["#"],L=H["."],q=H[":"],J=H[">"];i["#"];var Q;(Q=S.msg)&&(Q=Q.put)&&(Q=Q[F])&&s(Q,L,J,q,F),A[F]=s(A[F],L,J,q,F),(Q=(x.next||"")[F])&&Q.on("in",i),w(S),$.to.next(i)}function w(i,_){var $;if(!i.stop&&!(!i.err&&0<--i.stun)&&(i.stop=1,!!($=i.root))){var x=i.match;x.end=1,x===$.hatch&&(!(x=i.latch)||x.end?delete $.hatch:$.hatch=x),i.hatch&&i.hatch(),setTimeout.each(i.match,function(A){A&&A()}),!(!(_=i.msg)||i.err||_.err)&&(_.out=p,i.root.on("out",_),v())}}function u(i){var _=i["@"]||"",$;if(!($=_._)){var x=(x=i.$)&&(x=x._)&&(x=x.root)&&(x=x.dup);if(!(x=x.check(_)))return;i["@"]=x["#"]||i["@"];return}$.acks=($.acks||0)+1,($.err=i.err)&&(i["@"]=$["#"],w($)),$.ok=i.ok||$.ok,!$.stop&&!$.crack&&($.crack=$.match&&$.match.push(function(){b($)})),b($)}function b(i){!i||!i.root||i.stun||i.acks!==i.all||i.root.on("in",{"@":i["#"],err:i.err,ok:i.err?d:i.ok||{"":1}})}var T="Error: Invalid graph!",D=function(i){return" '"+(""+i).slice(0,9)+"...' "},m=JSON.stringify,O=2147483647,G=r.state,E=0,C,v=function(){E>999&&E/-(C-(C=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),v=function(){E=0})}}(),function(){r.on.get=function(g,k){var N=k._,w=g.get,u=w["#"],b=N.graph[u],T=w["."],D=N.next||(N.next={}),m=D[u],O=g._||{},G=O.DBG=g.DBG;if(G&&(G.g=+new Date),!b)return N.on("get",g);if(T){if((typeof T!="string"||d===b[T])&&!((m||"").next||"")[T]){N.on("get",g);return}b=s({},T,l(b,T),b[T],u)}b&&p(g,b),N.on("get",g)};function p(g,k){var N=+new Date,w=g._||{},u=w.DBG=g.DBG,b=g["#"],T=a(9),D=Object.keys(k||"").sort(),m=((k||"")._||"")["#"];D.length;var O=g.$._.root,G=k===O.graph[m];console.STAT&&console.STAT(N,((u||w).gk=+new Date)-N,"got keys"),k&&function E(){N=+new Date;for(var C=0,v,i={},_;C<9&&(v=D[C++]);)s(i,v,l(k,v),k[v],m);D=D.slice(C),(_={})[m]=i,i=_;var $;G&&($=function(){},$.ram=$.faith=!0),_=D.length,console.STAT&&console.STAT(N,-(N-(N=+new Date)),"got copied some"),u&&(u.ga=+new Date),O.on("in",{"@":b,"#":T,put:i,"%":_?T=a(9):d,$:O.$,_:$,DBG:u,FOO:1}),console.STAT&&console.STAT(N,+new Date-N,"got in"),_&&setTimeout.turn(E)}(),k||O.on("in",{"@":g["#"]})}r.on.get.ack=p}(),function(){r.chain.opt=function(p){p=p||{};var g=this,k=g._,N=p.peers||p;return Object.plain(p)||(p={}),Object.plain(k.opt)||(k.opt=p),typeof N=="string"&&(N=[N]),Object.plain(k.opt.peers)||(k.opt.peers={}),N instanceof Array&&(p.peers={},N.forEach(function(w){var u={};u.id=u.url=w,p.peers[w]=k.opt.peers[w]=k.opt.peers[w]||u})),c(p,function w(u){var b=this[u];if(this&&this.hasOwnProperty(u)||typeof b=="string"||Object.empty(b)){this[u]=b;return}b&&b.constructor!==Object&&!(b instanceof Array)||c(b,w)}),k.opt.from=p,r.on("opt",k),k.opt.uuid=k.opt.uuid||function(u){return r.state().toString(36).replace(".","")+String.random(u||12)},g}}();var c=function(p,g){Object.keys(p).forEach(g,p)},a=String.random,f=setTimeout.turn,h=r.valid,l=r.state.is,s=r.state.ify,d,y={},j;r.log=function(){return!r.log.off&&j.log.apply(j,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(p,g,k){return(k=r.log.once)[p]=k[p]||0,k[p]++||r.log(g)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof t<"u"&&(t.exports=r)}catch{}o.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(j=console).only=function(p,g){return j.only.i&&p===j.only.i&&j.only.i++&&(j.log.apply(j,arguments)||g)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(o){var r=e("./root");r.chain.back=function(f,h){var l;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var y=0,j=f.length,l=d;for(y;y<j;y++)l=(l||c)[f[y]];return a!==l?h?s:l:(l=d.back)?l.$.back(f,h):void 0}if(typeof f=="function"){for(var p,l={back:d};(l=l.back)&&a===(p=f(l,h)););return p}return typeof f=="number"?(d.back||d).$.back(f-1):this};var c={},a})(e,"./back"),e(function(o){var r=e("./root");r.chain.chain=function(w){var u=this,b=u._,T=new(w||u).constructor(u),D=T._,m;return D.root=m=b.root,D.id=++m.once,D.back=u._,D.on=r.on,D.on("in",r.on.in,D),D.on("out",r.on.out,D),T};function c(w){var u,b=this.as,T=b.back,D=b.root,m;if(w.$||(w.$=b.$),this.to.next(w),b.err){b.on("in",{put:b.put=d,$:b.$});return}if(u=w.get){if(D.pass&&(D.pass[b.id]=b),b.lex&&Object.keys(b.lex).forEach(function(O){m[O]=b.lex[O]},m=w.get=w.get||{}),u["#"]||b.soul){if(u["#"]=u["#"]||b.soul,w["#"]||(w["#"]=y(9)),T=D.$.get(u["#"])._,u=u["."]){if(p(T.put,u)&&(m=T.ask&&T.ask[u],(T.ask||(T.ask={}))[u]=T.$.get(u)._,T.on("in",{get:u,put:{"#":T.soul,".":u,":":T.put[u],">":k(D.graph[T.soul],u)}}),m))return}else{if(m=T.ask&&T.ask[""],(T.ask||(T.ask={}))[""]=T,d!==T.put&&(T.on("in",T),m))return;w.$=T.$}return D.ask(l,w),D.on("in",w)}if(u["."])return b.get?(w={get:{".":b.get},$:b.$},(T.ask||(T.ask={}))[b.get]=w.$._,T.on("out",w)):(w={get:b.lex?w.get:{},$:b.$},T.on("out",w));if((b.ask||(b.ask={}))[""]=b,b.get)return u["."]=b.get,(T.ask||(T.ask={}))[b.get]=w.$._,T.on("out",w)}return T.on("out",w)}r.on.out=c;function a(w,u){u=u||this.as;var b=u.root,T=w.$||(w.$=u.$),D=(T||"")._||s,m=w.put||"",O=m["#"],G=m["."],E=d!==m["="]?m["="]:m[":"],C=m[">"]||-1/0,v;if(d!==w.put&&(d===m["#"]||d===m["."]||d===m[":"]&&d===m["="]||d===m[">"])){if(!j(m)){if(!(O=((m||"")._||"")["#"])){console.log("chain not yet supported for",m,"...",w,u);return}return T=u.root.$.get(O),setTimeout.each(Object.keys(m).sort(),function(i){i=="_"||d===(C=k(m,i))||u.on("in",{$:T,put:{"#":O,".":i,"=":m[i],">":C},VIA:w})})}u.on("in",{$:D.back.$,put:{"#":O=D.back.soul,".":G=D.has||D.get,"=":m,">":k(D.back.put,G)},via:w});return}(w.seen||"")[u.id]||((w.seen||(w.seen=function(){}))[u.id]=u,u!==D&&(Object.keys(w).forEach(function(i){m[i]=w[i]},m={}),m.get=u.get||m.get,!u.soul&&!u.has?m.$$$=m.$$$||u.$:D.soul&&(m.$=u.$,m.$$=m.$$||D.$),w=m),h(w,u),(u.soul||w.$$)&&C>=k(b.graph[O],G)&&((m=b.$.get(O)._).put=N(m.put,G,C,E,O)),!D.soul&&C>=k(b.graph[O],G)&&(v=(b.$.get(O)._.next||"")[G])&&(v.put=E,typeof(m=j(E))=="string"&&(v.put=b.$.get(m)._.put||E)),this.to&&this.to.next(w),u.any&&setTimeout.each(Object.keys(u.any),function(i){(i=u.any[i])&&i(w)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(i){(i=u.echo[i])&&i.on("in",w)},0,99),((w.$$||"")._||D).soul&&(v=u.next)&&(v=v[G])&&(m={},Object.keys(w).forEach(function(i){m[i]=w[i]}),m.$=(w.$$||w.$).get(m.get=G),delete m.$$,delete m.$$$,v.on("in",m)),f(w,u))}r.on.in=a;function f(w,u){if(u=u||this.as||w.$._,!(w.$$&&this!==r.on)&&!(!w.put||u.soul)){var b=w.put||"",T=b["="]||b[":"],G,D=u.root,m=D.$.get(b["#"]).get(b["."])._;if(typeof(T=j(T))!="string"){this===r.on&&((m.echo||(m.echo={}))[u.id]=u);return}if(!((m.echo||(m.echo={}))[u.id]&&!(D.pass||"")[u.id])){if(G=D.pass){if(G[T+u.id])return;G[T+u.id]=1}(m.echo||(m.echo={}))[u.id]=u,u.has&&(u.link=T);var O=D.$.get(m.link=T)._;(O.echo||(O.echo={}))[m.id]=m;var G=u.ask||"";(G[""]||u.lex)&&O.on("out",{get:{"#":T}}),setTimeout.each(Object.keys(G),function(E,C){!E||!(C=G[E])||C.on("out",{get:{"#":T,".":E}})},0,99)}}}r.on.link=f;function h(w,u){var b=w.put||"",T=d!==b["="]?b["="]:b[":"],D=u.root,m,O;if(d===T){if(u.soul&&d!==u.put||(O=(w.$$||w.$||"")._||"",w["@"]&&(d!==O.put||d!==u.put)))return;(m=u.link||w.linked)&&delete(D.$.get(m)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(G,E){(E=u.next[G])&&(m&&delete(D.$.get(m).get(G)._.echo||"")[E.id],E.on("in",{get:G,put:d,$:E.$}))},0,99);return}u.soul||w.$$||(m=j(T),O=w.$._||"",!((m===O.link||u.has&&!O.link)&&!((D.pass||"")[u.id]&&typeof m!="string"))&&(delete(O.echo||"")[u.id],h({get:u.get,put:d,$:w.$,linked:w.linked=w.linked||O.link},u)))}r.on.unlink=h;function l(w,u){var b=this.as,T=b.$._;T.root;var D=b.get||"",m=(w.put||"")[D["#"]]||"";if(!w.put||typeof D["."]=="string"&&d===m[D["."]]){if(d!==T.put||!T.soul&&!T.has)return;T.ack=(T.ack||0)+1,T.on("in",{get:T.get,put:T.put=d,$:T.$,"@":w["@"]});return}(w._||{}).miss=1,r.on.put(w)}var s={},d,y=String.random,j=r.valid,p=function(w,u){return w&&Object.prototype.hasOwnProperty.call(w,u)},g=r.state,k=g.is,N=g.ify})(e,"./chain"),e(function(o){var r=e("./root");r.chain.get=function(d,y,j){var p,g;if(typeof d=="string"){if(d.length==0)return(p=this.chain())._.err={err:r.log("0 length key!",d)},y&&y.call(p,p._.err),p;var k=this,N=k._,w=N.next||h;(p=w[d])||(p=d&&c(d,k)),p=p&&p.$}else if(typeof d=="function"){let G=function(E,C,v){if(!G.stun&&!((S=b.pass)&&!S[T])){var i=E.$._,_=(E.$$||"")._,$=(_||i).put,x=!i.has&&!i.soul,A={},S;if((x||s===$)&&($=s===((S=E.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=r.valid($))=="string"&&($=s===(S=b.$.get(S)._.put)?u.not?s:$:S),!(u.not&&s===$)){if(s===u.stun){if((S=b.stun)&&S.on&&(N.$.back(function(H){if(S.on(""+H.id,A={}),(A.run||0)<G.id)return A}),!A.run&&S.on(""+i.id,A={}),!A.run&&_&&S.on(""+_.id,A={}),G.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=S.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[T]=function(){G(E,C,1)};return}if(s===$&&(v=0),(S=b.hatch)&&!S.end&&s===u.hatch&&!v){if(D[i.$._.id])return;D[i.$._.id]=1,S.push(function(){G(E,C,1)});return}D={}}if(b.pass){if(b.pass[T+i.id])return;b.pass[T+i.id]=1}if(u.on){u.ok.call(i.$,$,i.get,E,C||G);return}if(u.v2020){u.ok(E,C||G);return}Object.keys(E).forEach(function(H){S[H]=E[H]},S={}),E=S,E.put=$,u.ok.call(u.as,E,C||G)}}};var m=G;if(y===!0)return a(this,d,y,j),this;p=this;var N=p._,u=y||{},b=N.root,T;u.at=N,u.ok=d;var D={};return G.at=N,(N.any||(N.any={}))[T=String.random(7)]=G,G.off=function(){G.stun=1,N.any&&delete N.any[T]},G.rid=f,G.id=u.run||++b.once,g=b.pass,(b.pass={})[T]=1,u.out=u.out||{get:{}},N.on("out",u.out),b.pass=g,p}else{if(typeof d=="number")return this.get(""+d,y,j);if(typeof(g=l(d))=="string")return this.get(g,y,j);(g=this.get.next)&&(p=g(this,d))}return p?(y&&typeof y=="function"&&p.get(y,j),p):((p=this.chain())._.err={err:r.log("Invalid get request!",d)},y&&y.call(p,p._.err),p)};function c(d,y){var j=y._,p=j.next,g=y.chain(),k=g._;return p||(p=j.next={}),p[k.get=d]=k,y===j.root.$?k.soul=d:(j.soul||j.has)&&(k.has=d),k}function a(d,y,j,p){var g=d._,k=0,N;return(N=g.soul||g.link)?y(N,p,g):g.jam?g.jam.push([y,p]):(g.jam=[[y,p]],d.get(function(u,b){if(!(s===u.put&&!g.root.opt.super&&(N=Object.keys(g.root.opt.peers).length)&&++k<=N)){b.rid(u);var T=(T=u.$)&&T._||{},D=0,m;for(N=g.jam,delete g.jam;m=N[D++];){var O=m[0];m=m[1],O&&O(T.link||T.soul||r.valid(u.put)||((u.put||{})._||{})["#"],m,u,b)}}},{out:{get:{".":!0}}}),d)}function f(d){var y=this.at||this.on;if(!d||y.soul||y.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){y.map;var j;if((j=this.seen||(this.seen={}))[d])return!0;j[d]=!0}}var h={},l=r.valid,s})(e,"./get"),e(function(o){var r=e("./root");r.chain.put=function(p,g,k){var N=this,w=N._,u=w.root;k=k||{},k.root=w.root,k.run||(k.run=u.once),c(k,w.id),k.ack=k.ack||g,k.via=k.via||N,k.data=k.data||p,k.soul||(k.soul=w.soul||typeof g=="string"&&g);var b=k.state=k.state||r.state();return typeof p=="function"?(p(function(T){k.data=T,N.put(l,l,k)}),N):k.soul?(k.$=u.$.get(k.soul),k.todo=[{it:k.data,ref:k.$}],k.turn=k.turn||d,k.ran=k.ran||a,function T(){var D=k.todo,m=D.pop(),O=m.it;m.ref&&m.ref._.id;var G,E,C,v,i;if(c(k,m.ref),(v=m.todo)&&(E=v.pop(),O=O[E],v.length&&D.push(m)),E&&(D.path||(D.path=[])).push(E),!(G=y(O))&&!(i=r.is(O))){if(!Object.plain(O)){a.err(k,"Invalid data: "+h(O)+" at "+(k.via.back(function(S){S.get&&v.push(S.get)},v=[])||v.join("."))+"."+(D.path||[]).join("."));return}for(var _=k.seen||(k.seen=[]),$=_.length;$--;)if(O===(v=_[$]).it){G=O=v.link;break}}if(E&&G)m.node=j(m.node,E,b,O);else{let S=function(H,F){var L=C.link["#"];F&&(F.off(),F.rid(H));var q=L||H.soul||(v=(H.$$||H.$)._||"").soul||v.link||((v=v.put||"")._||"")["#"]||v["#"]||((v=H.put||"")&&H.$$?v["#"]:(v["="]||v[":"]||"")["#"]);if(!L&&c(k,H.$),!q&&!m.link["#"]){(m.wait||(m.wait=[])).push(function(){S(H,F)});return}q||(q=[],(H.$$||H.$).back(function(J){if(v=J.soul||J.link)return q.push(v);q.push(J.get)}),q=q.reverse().join("/")),C.link["#"]=q,!i&&(((k.graph||(k.graph={}))[q]=C.node||(C.node={_:{}}))._["#"]=q),delete k.wait[x],C.wait&&setTimeout.each(C.wait,function(J){J&&J()}),k.ran(k)};var A=S;if(!k.seen){a.err(k,"Data at root of graph must be a node (an object).");return}k.seen.push(C={it:O,link:{},todo:i?[]:Object.keys(O).sort().reverse(),path:(D.path||[]).slice(),up:m}),m.node=j(m.node,E,b,C.link),!i&&C.todo.length&&D.push(C);var x=k.seen.length;(k.wait||(k.wait={}))[x]="",v=(C.ref=i?O:E?m.ref.get(E):m.ref)._,(v=O&&(O._||"")["#"]||v.soul||v.link)?S({soul:v}):C.ref.get(S,{run:k.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return k.ran(k);k.turn(T)}(),N):(f(k),N)};function c(p,g){if(g){g=(g._||"").id||g;var k=p.root.stun||(p.root.stun={on:r.on}),N={},w;p.stun||(p.stun=k.on("stun",function(){})),(w=k.on(""+g))&&w.the.last.next(N),!(N.run>=p.run)&&k.on(""+g,function(u){if(p.stun.end){this.off(),this.to.next(u);return}u.run=u.run||p.run,u.stun=u.stun||p.stun})}}function a(p){if(p.err){a.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,k=g.root,N=g.ask(function(T){k.on("ack",T),T.err&&!T.lack&&r.log(T),++w>(p.acks||0)&&this.off(),p.ack&&p.ack(T,this)},p.opt),w=0,u=p.stun,b;(b=function(){u&&(a.end(u,k),setTimeout.each(Object.keys(u=u.add||""),function(T){(T=u[T])&&T()}))}).hatch=b,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":N,_:b})}}a.end=function(p,g){p.end=s,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()},a.err=function(p,g){(p.ack||s).call(p,p.out={err:p.err=r.log(g)}),p.ran(p)};function f(p){var g=p.via._,k;p.via=p.via.back(function(N){if(N.soul||!N.get)return N.$;k=p.data,(p.data={})[N.get]=k}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function h(p,g){return p&&(g=p.constructor)&&g.name||typeof p}var l,s=function(){},d=setTimeout.turn,y=r.valid,j=r.state.ify})(e,"./put"),e(function(o){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),o.exports=r})(e,"./index"),e(function(o){var r=e("./index");r.chain.on=function(f,h,l,s){var d=this,y=d._;y.root;var j;if(typeof f=="string")return h?(j=y.on(f,h,l||y,s),l&&l.$&&(l.subs||(l.subs=[])).push(j),d):y.on(f);var p=h;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,d.get(f,p),d},r.chain.once=function(f,h){if(h=h||{},!f)return c(this);var l=this,s=l._,d=s.root;s.put;var y=String.random(7),j;return l.get(function(p,g,k,N){var w=this,u=w._,b=u.one||(u.one={});if(N.stun||b[y]==="")return;if((j=r.valid(p))===!0){T();return}if(typeof j=="string")return;clearTimeout((s.one||"")[y]),clearTimeout(b[y]),b[y]=setTimeout(T,h.wait||99);function T(D){if(!u.has&&!u.soul&&(u={put:p,get:g}),a===(j=u.put)&&(j=((k.$$||"")._||"").put),typeof r.valid(j)=="string"&&(j=d.$.get(j)._.put,j===a&&!D)){b[y]=setTimeout(function(){T(1)},h.wait||99);return}N.stun||b[y]!==""&&(b[y]="",(s.soul||s.has)&&N.off(),f.call(w,j,u.get),clearTimeout(b[y]))}},{on:1}),l};function c(f,h,l){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=f.chain())._.nix=f.once(function(s,d){l._.on("in",this._)}),l._.lex=f._.lex,l}r.chain.off=function(){var f=this,h=f._,l,s=h.back;if(s)return h.ack=0,(l=s.next)&&l[h.get]&&delete l[h.get],(l=s.any)&&(delete s.any,s.any={}),(l=s.ask)&&delete l[h.get],(l=s.put)&&delete l[h.get],(l=h.soul)&&delete s.root.graph[l],(l=h.map)&&Object.keys(l).forEach(function(d,y){y=l[d],y.link&&s.root.$.get(y.link).off()}),(l=h.next)&&Object.keys(l).forEach(function(d,y){y=l[d],y.$.off()}),h.on("off",{}),f};var a})(e,"./on"),e(function(o){var r=e("./index"),c=r.chain.get.next;r.chain.get.next=function(l,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?l.get(d):((d=l.chain()._).lex=s,l.on("in",function(y){String.match(y.get||(y.put||"")["."],s["."]||s["#"]||s)&&d.on("in",y),this.to.next(y)}),d.$):(c||f)(l,s)},r.chain.map=function(l,s,d){var y=this,j=y._,p,g;return Object.plain(l)&&(p=l["."]?l:{".":l},l=h),l?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=y.chain(),y.map().on(function(k,N,w,u){var b=(l||f).call(this,k,N,w,u);if(h!==b){if(k===b)return g._.on("in",w);if(r.is(b))return g._.on("in",b._);var T={};Object.keys(w.put).forEach(function(D){T[D]=w.put[D]},T),T["="]=b,g._.on("in",{get:N,put:T})}}),g):((g=j.each)||((j.each=g=y.chain())._.lex=p||g._.lex||j.lex,g._.nix=y.back("nix"),y.on("in",a,g._)),g)};function a(l){this.to.next(l);var s=this.as,d=l.$,y=d._,j=l.put,p;!y.soul&&!l.$$||(p=s.lex)&&!String.match(l.get||(j||"")["."],p["."]||p["#"]||p)||r.on.link(l,s)}var f=function(){},h})(e,"./map"),e(function(o){var r=e("./index");r.chain.set=function(c,a,f){var h=this,l=h.back(-1),s,d;return a=a||function(){},f=f||{},f.item=f.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=r.valid(c))=="string"?h.get(s=d).put(c,a,f):r.is(c)?(h.put(function(y){c.get(function(j,p,g){if(!j)return a.call(h,{err:r.log('Only a node can be linked! Not "'+g.put+'"!')});(d={})[j]={"#":j},y(d)},!0)}),c):(Object.plain(c)&&(c=l.get(s=h.back("opt.uuid")()).put(c)),h.get(s||l.back("opt.uuid")(7)).put(c,a,f))}})(e,"./set"),e(function(o){e("./shim");var r=function(){},c=JSON.parseAsync||function(l,s,d){var y,j=+new Date;try{s(y,JSON.parse(l,d),a.sucks(+new Date-j))}catch(p){s(p)}},a=JSON.stringifyAsync||function(l,s,d,y){var j,p=+new Date;try{s(j,JSON.stringify(l,d,y),a.sucks(+new Date-p))}catch(g){s(g)}};a.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),a.sucks=r)};function f(l){var s=function(){},d=l.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var y=setTimeout.turn||setTimeout,j=l.dup,p=j.check,g=j.track,k=s.hear=function(u,b){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},b);s===this&&(k.d+=u.length||0,++k.c);var T=b.SH=+new Date,D=u[0],m;if(D==="["){c(u,function(O,G){if(O||!G)return s.say({dam:"!",err:"DAM JSON parse error."},b);console.STAT&&console.STAT(+new Date,G.length,"# on hear batch");var E=d.puff;(function C(){for(var v=+new Date,i=0,_;i<E&&(_=G[i++]);)s.hear(_,b);G=G.slice(i),console.STAT&&console.STAT(v,+new Date-v,"hear loop"),N(b),G.length&&y(C,0)})()}),u="";return}if(D==="{"||(u["#"]||Object.plain(u))&&(m=u)){if(m)return k.one(m,b,T);c(u,function(O,G){if(O||!G)return s.say({dam:"!",err:"DAM JSON parse error."},b);k.one(G,b,T)});return}}};k.one=function(u,b,C){var D,m,O,G,E;if(u.DBG&&(u.DBG=E={DBG:u.DBG}),E&&(E.h=C),E&&(E.hp=+new Date),(D=u["#"])||(D=u["#"]=String.random(9)),!(O=p(D))&&(m=u["##"],!(m&&(O=u["@"]||u.get&&D)&&j.check(G=O+m)))){if((u._=function(){}).via=s.leap=b,(O=u["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(v){this[v]=1},u._.yo={}),O=u.dam){(O=s.hear[O])&&O(u,b,l),g(D);return}(O=u.ok)&&(u._.near=O["/"]);var C=+new Date;E&&(E.is=C),b.SI=D,g.ed=function(v){D===v&&(g.ed=0,(v=j.s[D])&&(v.via=b,u.get&&(v.it=u)))},l.on("in",s.last=u),E&&(E.hd=+new Date),console.STAT&&console.STAT(C,+new Date-C,u.get?"msg get":u.put?"msg put":"msg"),g(D),G&&g(G),s.leap=s.last=null}},k.c=k.d=0,function(){var u=0,b;s.hash=function(m,O){var G,E,C,v=+new Date;a(m.put,function i(_,$){var x=(E||(E=C=$||"")).slice(0,32768);if(G=String.hash(x,G),E=E.slice(32768),E){y(i,0);return}console.STAT&&console.STAT(v,+new Date-v,"say json+hash"),m._.$put=C,m["##"]=G,s.say(m,O),delete m._.$put},T)};function T(m,O){var G;return O instanceof Object?(Object.keys(O).sort().forEach(D,{to:G={},on:O}),G):O}function D(m){this.to[m]=this.on[m]}s.say=function(m,O){var G;if((G=this)&&(G=G.to)&&G.next&&G.next(m),!m)return!1;var E,C,v,i=m["@"],_=m._||(m._=function(){}),$=m.DBG,x=+new Date;if(_.y=_.y||x,O||$&&($.y=x),(E=m["#"])||(E=m["#"]=String.random(9)),!b&&g(E),!(C=m["##"])&&h!==m.put&&!_.via&&i){s.hash(m,O);return}if(!O&&i&&(O=(G=j.s[i])&&(G.via||(G=G.it)&&(G=G._)&&G.via)||(G=s.last)&&i===G["#"]&&s.leap),!O&&i)return j.s[i]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(i&&!m.put&&!C&&((j.s[i]||"").it||"")["##"])return!1;if(!O&&s.way)return s.way(m);if($&&($.yh=+new Date),!(v=_.raw)){s.raw(m,O);return}if($&&($.yr=+new Date),!O||!O.id){if(!Object.plain(O||d.peers))return!1;var x=+new Date;d.puff;var A=d.peers,S=Object.keys(O||d.peers||{});console.STAT&&console.STAT(x,+new Date-x,"peer keys"),function L(){var q=+new Date;b=1;var J=_.raw;_.raw=v;for(var Q=0,I;Q<9&&(I=(S||"")[Q++]);)(I=A[I]||(O||"")[I])&&s.say(m,I);_.raw=J,b=0,S=S.slice(Q),console.STAT&&console.STAT(q,+new Date-q,"say loop"),S.length&&(y(L,0),i&&g(i))}();return}if(!O.wire&&s.wire&&s.wire(O),E!==O.last){if(O.last=E,O===_.via||(G=_.yo)&&(G[O.url]||G[O.pid]||G[O.id]))return!1;if(console.STAT&&console.STAT(x,(($||_).yp=+new Date)-(_.y||x),"say prep"),!b&&i&&g(i),O.batch){if(O.tail=(G=O.tail||0)+v.length,O.tail<=d.pack){O.batch+=(G?",":"")+v;return}N(O)}O.batch="[";var H=+new Date;setTimeout(function(){console.STAT&&console.STAT(H,+new Date-H,"0ms TO"),N(O)},d.gap),w(v,O),console.STAT&&i===O.SI&&console.STAT(x,+new Date-O.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(m,O){if(!m)return"";var G=m._||{},E,C;if(C=G.raw)return C;if(typeof m=="string")return m;var v=m["##"],i=m["@"];if(v&&i){if(!G.via&&p(i+v))return!1;if(C=(j.s[i]||"").it){if(v===C["##"])return!1;C["##"]||(C["##"]=v)}}if(!m.dam&&!m["@"]){var _=0,$=[];C=d.peers;for(var x in C){var A=C[x];if($.push(A.url||A.pid||A.id),++_>6)break}_>1&&(m["><"]=$.join())}if(m.put&&(C=m.ok)&&(m.ok={"@":(C["@"]||1)-1,"/":C["/"]==m._.near?s.near:C["/"]}),E=G.$put){C={},Object.keys(m).forEach(function(H){C[H]=m[H]}),C.put=":])([:",a(C,function(H,F){if(!H){var L=+new Date;C=F.indexOf('"put":":])([:"'),S(h,F=F.slice(0,C+6)+E+F.slice(C+14)),console.STAT&&console.STAT(L,+new Date-L,"say slice")}});return}a(m,S);function S(H,F){H||(G.raw=F,s.say(m,O))}}}();function N(u){var b=u.batch,T=typeof b=="string";if(T&&(b+="]"),u.batch=u.tail=null,!!b&&!(T?3>b.length:!b.length)){if(!T)try{b=b.length===1?b[0]:JSON.stringify(b)}catch(D){return d.log("DAM JSON stringify error",D)}b&&w(b,u)}}function w(u,b){try{var T=b.wire;b.say?b.say(u):T.send&&T.send(u),s.say.d+=u.length||0,++s.say.c}catch{(b.queue=b.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var b=u.wire,T;if(!b){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(T=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:l.opt.pid},d.peers[T]=u),delete j.s[u.last]),u.met||(s.near++,u.met=+new Date,l.on("hi",u)),T=u.queue,u.queue=[],setTimeout.each(T||[],function(D){w(D,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,l.on("bye",u);var b=+new Date;b=b-(u.met||b),s.bye.time=((s.bye.time||b)+b)/2},s.hear["!"]=function(u,b){d.log("Error:",u.err)},s.hear["?"]=function(u,b){u.pid&&(b.pid||(b.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},b),delete j.s[b.last])},s.hear.mob=function(u,b){if(u.peers){var T=Object.keys(u.peers),D=T[Math.random()*T.length>>0];D&&(s.bye(b),s.hi(D))}},l.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),l.on("bye",function(u,b){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(b=u.wire)&&b.close&&b.close(),delete d.peers[u.id],u.wire=null}),l.on("bye",function(u,b){this.to.next(u),(b=console.STAT)&&(b.peers=s.near),(b=u.url)&&setTimeout(function(){},d.lack||9e3)}),l.on("hi",function(u,b){if(this.to.next(u),(b=console.STAT)&&(b.peers=s.near),!d.super){var T=Object.keys(l.next||"");T.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(T,function(D){var m=l.next[D];if(d.super||(m.ask||"")[""]){s.say({get:{"#":D}},u);return}setTimeout.each(Object.keys(m.ask||""),function(O){O&&s.say({"##":String.hash((l.graph[D]||"")[O]),get:{"#":D,".":O}},u)})})}}),s}var h;try{o.exports=f}catch{}})(e,"./mesh"),e(function(o){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(a){if(this.to.next(a),a.once)return;var f=a.opt;if(f.WebSocket===!1)return;var h=r.window||{},l=f.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!l)return;f.WebSocket=l;var s=f.mesh=f.mesh||r.Mesh(a);s.wire||f.wire,s.wire=f.wire=d;function d(g){try{if(!g||!g.url)return N&&N(g);var k=g.url.replace(/^http/,"ws"),N=g.wire=new f.WebSocket(k);return N.onclose=function(){j(g),f.mesh.bye(g)},N.onerror=function(w){j(g)},N.onopen=function(){f.mesh.hi(g)},N.onmessage=function(w){w&&f.mesh.hear(w.data||w,g)},N}catch{f.mesh.bye(g)}}setTimeout(function(){!f.super&&a.on("out",{dam:"hi"})},1);var y=2*999;function j(g){clearTimeout(g.defer),f.peers[g.url]&&(p&&g.retry<=0||(g.retry=(g.retry||f.retry+1||60)-(-g.tried+(g.tried=+new Date)<y*4?1:0),g.defer=setTimeout(function k(){if(p&&p.hidden)return setTimeout(k,y);d(g)},y)))}var p=""+c!=typeof document&&document});var c})(e,"./websocket"),e(function(o){if(!(typeof Gun>"u")){var r=function(){},c;try{c=(Gun.window||r).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(f,h){this[f]=h},removeItem:function(f){delete this[f]},getItem:function(f){return this[f]}});var a=JSON.stringifyAsync||function(f,h,l,s){var d;try{h(d,JSON.stringify(f,l,s))}catch(y){h(y)}};Gun.on("create",function f(h){this.to.next(h);var l=h.opt;h.graph;var s=[],d,y,j,p;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{d=f[l.prefix]=f[l.prefix]||JSON.parse(j=c.getItem(l.prefix))||{}}catch{d=f[l.prefix]={}}j=(j||"").length,h.on("get",function(k){this.to.next(k);var N=k.get,w,u,b,T;!N||!(w=N["#"])||(u=d[w]||T,u&&(b=N["."])&&!Object.plain(b)&&(u=Gun.state.ify({},b,Gun.state.is(u,b),u[b],w)),Gun.on.get.ack(k,u))}),h.on("put",function(k){this.to.next(k);var N=k.put,w=N["#"],u=N["."],b=k["#"],T=k.ok||"";if(d[w]=Gun.state.ify(d[w],u,N[">"],N[":"],w),p&&j>4999880){h.on("in",{"@":b,err:"localStorage max!"});return}!k["@"]&&(!k._.via||Math.random()<T["@"]/T["/"])&&s.push(b),!y&&(y=setTimeout(g,9+j/333))});function g(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var k=s;clearTimeout(y),y=!1,s=[],a(d,function(N,w){try{!N&&c.setItem(l.prefix,w)}catch(u){N=p=u||"localStorage failure"}N&&(Gun.log(N+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:N,get:l.prefix,put:d})),j=w.length,setTimeout.each(k,function(u){h.on("in",{"@":u,err:N,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var C;if(""+C!=typeof Gun){var e=function(v){console.warn("Warning! Deprecated internal utility will break in next version:",v)},t=Gun;t.fn=t.fn||{is:function(v){return e("fn"),!!v&&typeof v=="function"}},t.bi=t.bi||{is:function(v){return e("bi"),v instanceof Boolean||typeof v=="boolean"}},t.num=t.num||{is:function(v){return e("num"),!o(v)&&(v-parseFloat(v)+1>=0||v===1/0||v===-1/0)}},t.text=t.text||{is:function(v){return e("text"),typeof v=="string"}},t.text.ify=t.text.ify||function(v){return e("text.ify"),t.text.is(v)?v:typeof JSON<"u"?JSON.stringify(v):v&&v.toString?v.toString():v},t.text.random=t.text.random||function(v,i){e("text.random");var _="";for(v=v||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";v>0;)_+=i.charAt(Math.floor(Math.random()*i.length)),v--;return _},t.text.match=t.text.match||function(v,i){var _,$;return e("text.match"),typeof v!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},_=i["="]||i["*"]||i[">"]||i["<"],v===_?!0:$!==i["="]?!1:(_=i["*"]||i[">"]||i["<"],v.slice(0,(_||"").length)===_?!0:$!==i["*"]?!1:$!==i[">"]&&$!==i["<"]?v>=i[">"]&&v<=i["<"]:$!==i[">"]&&v>=i[">"]||$!==i["<"]&&v<=i["<"]))},t.text.hash=t.text.hash||function(v,i){if(e("text.hash"),typeof v=="string"){if(i=i||0,!v.length)return i;for(var _=0,$=v.length,x;_<$;++_)x=v.charCodeAt(_),i=(i<<5)-i+x,i|=0;return i}},t.list=t.list||{is:function(v){return e("list"),v instanceof Array}},t.list.slit=t.list.slit||Array.prototype.slice,t.list.sort=t.list.sort||function(v){return e("list.sort"),function(i,_){return!i||!_?0:(i=i[v],_=_[v],i<_?-1:i>_?1:0)}},t.list.map=t.list.map||function(v,i,_){return e("list.map"),G(v,i,_)},t.list.index=1,t.obj=t.boj||{is:function(v){return e("obj"),v?v instanceof Object&&v.constructor===Object||Object.prototype.toString.call(v).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},t.obj.put=t.obj.put||function(v,i,_){return e("obj.put"),(v||{})[i]=_,v},t.obj.has=t.obj.has||function(v,i){return e("obj.has"),v&&Object.prototype.hasOwnProperty.call(v,i)},t.obj.del=t.obj.del||function(v,i){if(e("obj.del"),!!v)return v[i]=null,delete v[i],v},t.obj.as=t.obj.as||function(v,i,_,$){return e("obj.as"),v[i]=v[i]||($===_?{}:_)},t.obj.ify=t.obj.ify||function(v){if(e("obj.ify"),b(v))return v;try{v=JSON.parse(v)}catch{v={}}return v},function(){var v;function i(_,$){D(this,$)&&v!==this[$]||(this[$]=_)}t.obj.to=t.obj.to||function(_,$){return e("obj.to"),$=$||{},G(_,i,$),$}}(),t.obj.copy=t.obj.copy||function(v){return e("obj.copy"),v&&JSON.parse(JSON.stringify(v))},function(){function v(i,_){var $=this.n,x;if(!($&&(_===$||b($)&&D($,_)))&&x!==_)return!0}t.obj.empty=t.obj.empty||function(i,_){return e("obj.empty"),i?!G(i,v,{n:_}):!0}}(),function(){function v($,x){if(arguments.length===2){v.r=v.r||{},v.r[$]=x;return}v.r=v.r||[],v.r.push($)}var i=Object.keys,_;Object.keys=Object.keys||function($){return _($,function(x,A,S){S(A)})},t.obj.map=_=t.obj.map||function($,x,A){e("obj.map");var S,H=0,F,L,q,J,Q=typeof x=="function";if(v.r=S,i&&b($)&&(q=i($),J=!0),A=A||{},o($)||q)for(F=(q||$).length;H<F;H++){var I=H+t.list.index;if(Q){if(L=J?x.call(A,$[q[H]],q[H],v):x.call(A,$[H],I,v),L!==S)return L}else if(x===$[J?q[H]:H])return q?q[H]:I}else for(H in $)if(Q){if(D($,H)&&(L=A?x.call(A,$[H],H,v):x($[H],H,v),L!==S))return L}else if(x===$[H])return H;return Q?v.r:t.list.index?0:-1}}(),t.time=t.time||{},t.time.is=t.time.is||function(v){return e("time"),v?v instanceof Date:+new Date().getTime()};var w=t.fn.is,o=t.list.is,u=t.obj,b=u.is,D=u.has,G=u.map,r={};r.is=function(v){return e("val.is"),v===C?!1:v===null?!0:v===1/0?!1:f(v)||a(v)||p(v)?!0:r.link.is(v)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(i){if(e("val.link.is"),i&&i[c]&&!i._&&b(i)){var _={};if(G(i,v,_),_.id)return _.id}return!1};function v(i,_){var $=this;if($.id)return $.id=!1;if(_==c&&f(i))$.id=i;else return $.id=!1}}(),r.link.ify=function(v){return e("val.link.ify"),O({},c,v)},t.obj.has._=".";var c=r.link._,C,a=t.bi.is,p=t.num.is,f=t.text.is,u=t.obj,b=u.is,O=u.put,G=u.map;t.val=t.val||r;var h={_:"_"};h.soul=function(v,i){return e("node.soul"),v&&v._&&v._[i||d]},h.soul.ify=function(v,i){return e("node.soul.ify"),i=typeof i=="string"?{soul:i}:i||{},v=v||{},v._=v._||{},v._[d]=i.soul||v._[d]||s(),v},h.soul._=r.link._,function(){h.is=function(i,_,$){e("node.is");var x;return b(i)&&(x=h.soul(i))?!G(i,v,{as:$,cb:_,s:x,n:i}):!1};function v(i,_){if(_!==h._){if(!r.is(i))return!0;this.cb&&this.cb.call(this.as,i,_,this.n,this.s)}}}(),function(){h.ify=function(i,_,$){return e("node.ify"),_?typeof _=="string"?_={soul:_}:typeof _=="function"&&(_={map:_}):_={},_.map&&(_.node=_.map.call($,i,C,_.node||{})),(_.node=h.soul.ify(_.node||{},_))&&G(i,v,{o:_,as:$}),_.node};function v(i,_){var $=this.o,x,A;if($.map){x=$.map.call(this.as,i,""+_,$.node),A===x?T($.node,_):$.node&&($.node[_]=x);return}r.is(i)&&($.node[_]=i)}}();var u=t.obj,b=u.is,T=u.del,G=u.map,l=t.text,s=l.random,d=h.soul._,C;t.node=t.node||h;var y=t.state;y.lex=function(){return e("state.lex"),y().toString(36).replace(".","")},y.to=function(v,i,_){e("state.to");var $=(v||{})[i];return b($)&&($=E($)),y.ify(_,i,y.is(v,i),$,h.soul(v))},function(){y.map=function(i,_,$){e("state.map");var x,A=b(A=i||_)?A:null;return i=w(i=i||_)?i:null,A&&!i?(_=p(_)?_:y(),A[k]=A[k]||{},G(A,v,{o:A,s:_}),A):($=$||b(_)?_:x,_=p(_)?_:y(),function(S,H,F,L){if(!i)return v.call({o:F,s:_},S,H),S;i.call($||this||{},S,H,F,L),!(D(F,H)&&x===F[H])&&v.call({o:F,s:_},S,H)})};function v(i,_){k!==_&&y.ify(this.o,_,this.s)}}();var u=t.obj;u.as;var D=u.has,b=u.is,G=u.map,E=u.copy,j=t.num,p=j.is,g=t.fn,w=g.is,k=h._,C,N={};(function(){N.is=function(_,$,x,A){return e("graph.is"),!_||!b(_)||m(_)?!1:!G(_,v,{cb:$,fn:x,as:A})};function v(_,$){if(!_||$!==h.soul(_)||!h.is(_,this.fn,this.as))return!0;this.cb&&(i.n=_,i.as=this.as,this.cb.call(i.as,_,$,i))}function i(_){_&&h.is(i.n,_,i.as)}})(),function(){N.ify=function(A,S,H){e("graph.ify");var F={path:[],obj:A};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof H=="string"&&(S.soul=S.soul||H,H=C),S.soul&&(F.link=r.link.ify(S.soul)),S.shell=(H||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||H,v(S,F),S.root=F.node,S.graph};function v(A,S){var H;return(H=x(A,S))?H:(S.env=A,S.soul=_,h.ify(S.obj,i,S)&&(S.link=S.link||r.link.ify(h.soul(S.node)),S.obj!==A.shell&&(A.graph[r.link.is(S.link)]=S.node)),S)}function i(A,S,H){var F=this,L=F.env,q,J;if(h._===S&&D(A,r.link._))return H._;if(q=$(A,S,H,F,L)){if(S||(F.node=F.node||H||{},D(A,h._)&&h.soul(A)&&(F.node._=E(A._)),F.node=h.soul.ify(F.node,r.link.is(F.link)),F.link=F.link||r.link.ify(h.soul(F.node))),(J=L.map)&&(J.call(L.as||{},A,S,H,F),D(H,S))){if(A=H[S],C===A){T(H,S);return}if(!(q=$(A,S,H,F,L)))return}if(!S)return F.node;if(q===!0)return A;if(J=v(L,{obj:A,path:F.path.concat(S)}),!!J.node)return J.link}}function _(A){var S=this,H=r.link.is(S.link),F=S.env.graph;S.link=S.link||r.link.ify(A),S.link[r.link._]=A,S.node&&S.node[h._]&&(S.node[h._][r.link._]=A),D(F,H)&&(F[A]=F[H],T(F,H))}function $(A,S,H,F,L){var q;if(r.is(A))return!0;if(b(A))return 1;if(q=L.invalid)return A=q.call(L.as||{},A,S,H),$(A,S,H,F,L);L.err="Invalid value at '"+F.path.concat(S).join(".")+"'!",t.list.is(A)&&(L.err+=" Use `.set(item)` instead of an Array.")}function x(A,S){for(var H=A.seen,F=H.length,L;F--;)if(L=H[F],S.obj===L.obj)return L;H.push(S)}}(),N.node=function(v){e("graph.node");var i=h.soul(v);if(i)return O({},i,v)},function(){N.to=function(i,_,$){if(e("graph.to"),!!i){var x={};return $=$||{seen:{}},G(i[_],v,{obj:x,graph:i,opt:$}),x}};function v(i,_){var $,x;if(h._===_){if(m(i,r.link._))return;this.obj[_]=E(i);return}if(!($=r.link.is(i))){this.obj[_]=i;return}if(x=this.opt.seen[$]){this.obj[_]=x;return}this.obj[_]=this.opt.seen[$]=N.to(this.graph,$,this.opt)}}();var w=t.fn.is,u=t.obj,b=u.is,T=u.del,D=u.has,m=u.empty,O=u.put,G=u.map,E=u.copy,C;t.graph=t.graph||N}}()})(Xe);var bn=Xe.exports,gn=bn;const kn=vn(gn),mn=kn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),At=mn.get("cards"),We=document.createElement("a"),qe=document.createElement("input");qe.type="file";qe.accept=".json";qe.onchange=async n=>{var t;if(!n||!n.target)return;const e=(t=n.target.files)==null?void 0:t[0];if(e){const o=await e.text();Ve(JSON.parse(o))}};const ke=Dt([]),Ve=n=>{At.put({data:JSON.stringify(n)})};At.on(n=>{ke.set(JSON.parse(n.data))});const $n=()=>{We.href=URL.createObjectURL(new Blob([JSON.stringify(Et(ke))],{type:"application/json"})),We.download="cards.json",We.click()},wn=()=>{qe.click()};function st(n,e,t){const o=n.slice();return o[3]=e[t],o}function dt(n,e,t){const o=n.slice();return o[6]=e[t],o}function ht(n,e,t){const o=n.slice();return o[6]=e[t],o}function pt(n){let e,t;return e=new Qe({props:{card:n[6]}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&2&&(c.card=o[6]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function _t(n){let e,t;return e=new Qe({props:{card:n[6],back:!0}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&2&&(c.card=o[6]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function vt(n){let e,t,o,r,c,a=oe(n[3]),f=[];for(let y=0;y<a.length;y+=1)f[y]=pt(ht(n,a,y));const h=y=>K(f[y],1,1,()=>{f[y]=null});let l=oe(n[3]),s=[];for(let y=0;y<l.length;y+=1)s[y]=_t(dt(n,l,y));const d=y=>K(s[y],1,1,()=>{s[y]=null});return{c(){e=R("div");for(let y=0;y<f.length;y+=1)f[y].c();t=V(),o=R("div");for(let y=0;y<s.length;y+=1)s[y].c();r=V(),M(e,"class","page svelte-1bs53cn"),M(o,"class","page svelte-1bs53cn")},m(y,j){P(y,e,j);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(e,null);P(y,t,j),P(y,o,j);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(o,null);U(o,r),c=!0},p(y,j){if(j&2){a=oe(y[3]);let p;for(p=0;p<a.length;p+=1){const g=ht(y,a,p);f[p]?(f[p].p(g,j),W(f[p],1)):(f[p]=pt(g),f[p].c(),W(f[p],1),f[p].m(e,null))}for(pe(),p=a.length;p<f.length;p+=1)h(p);_e()}if(j&2){l=oe(y[3]);let p;for(p=0;p<l.length;p+=1){const g=dt(y,l,p);s[p]?(s[p].p(g,j),W(s[p],1)):(s[p]=_t(g),s[p].c(),W(s[p],1),s[p].m(o,r))}for(pe(),p=l.length;p<s.length;p+=1)d(p);_e()}},i(y){if(!c){for(let j=0;j<a.length;j+=1)W(f[j]);for(let j=0;j<l.length;j+=1)W(s[j]);c=!0}},o(y){f=f.filter(Boolean);for(let j=0;j<f.length;j+=1)K(f[j]);s=s.filter(Boolean);for(let j=0;j<s.length;j+=1)K(s[j]);c=!1},d(y){y&&(B(e),B(t),B(o)),Se(f,y),Se(s,y)}}}function Tn(n){let e,t,o,r=oe(ct(n[1])),c=[];for(let f=0;f<r.length;f+=1)c[f]=vt(st(n,r,f));const a=f=>K(c[f],1,1,()=>{c[f]=null});return{c(){e=R("div"),t=R("section");for(let f=0;f<c.length;f+=1)c[f].c();M(t,"class","print")},m(f,h){P(f,e,h),U(e,t);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(t,null);n[2](t),o=!0},p(f,[h]){if(h&2){r=oe(ct(f[1]));let l;for(l=0;l<r.length;l+=1){const s=st(f,r,l);c[l]?(c[l].p(s,h),W(c[l],1)):(c[l]=vt(s),c[l].c(),W(c[l],1),c[l].m(t,null))}for(pe(),l=r.length;l<c.length;l+=1)a(l);_e()}},i(f){if(!o){for(let h=0;h<r.length;h+=1)W(c[h]);o=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)K(c[h]);o=!1},d(f){f&&B(e),Se(c,f),n[2](null)}}}function jn(n,e,t){let o;Pe(n,ke,a=>t(1,o=a));let r;function c(a){xe[a?"unshift":"push"](()=>{r=a,t(0,r)})}return[r,o,c]}class Sn extends se{constructor(e){super(),ce(this,e,jn,Tn,ue,{})}}function On(n){let e,t,o,r,c;const a=n[2].default,f=Ft(a,n,n[1],null);return{c(){e=R("button"),f&&f.c(),M(e,"class",t="button "+n[0]+" svelte-zqnkwt")},m(h,l){P(h,e,l),f&&f.m(e,null),o=!0,r||(c=le(e,"click",n[3]),r=!0)},p(h,[l]){f&&f.p&&(!o||l&2)&&Mt(f,a,h,h[1],o?It(a,h[1],l,null):Bt(h[1]),null),(!o||l&1&&t!==(t="button "+h[0]+" svelte-zqnkwt"))&&M(e,"class",t)},i(h){o||(W(f,h),o=!0)},o(h){K(f,h),o=!1},d(h){h&&B(e),f&&f.d(h),r=!1,c()}}}function Dn(n,e,t){let{$$slots:o={},$$scope:r}=e,{colour:c="green"}=e;function a(f){zt.call(this,n,f)}return n.$$set=f=>{"colour"in f&&t(0,c=f.colour),"$$scope"in f&&t(1,r=f.$$scope)},[c,r,o,a]}class de extends se{constructor(e){super(),ce(this,e,Dn,On,ue,{colour:0})}}function An(n){let e,t,o;return t=new Be({props:{cardType:n[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),t.$on("type",n[2]),{c(){e=R("div"),Z(t.$$.fragment),M(e,"class","select-wrapper svelte-1wgwrdq"),ie(e,"background-color",n[1])},m(r,c){P(r,e,c),X(t,e,null),o=!0},p(r,[c]){const a={};c&1&&(a.cardType=r[0]),t.$set(a),(!o||c&2)&&ie(e,"background-color",r[1])},i(r){o||(W(t.$$.fragment,r),o=!0)},o(r){K(t.$$.fragment,r),o=!1},d(r){r&&B(e),Y(t)}}}function Nn(n,e,t){let o,{currentFilter:r="None"}=e;const c=({detail:a})=>t(0,r=a);return n.$$set=a=>{"currentFilter"in a&&t(0,r=a.currentFilter)},n.$$.update=()=>{n.$$.dirty&1&&t(1,o=De(r))},[r,o,c]}class Nt extends se{constructor(e){super(),ce(this,e,Nn,An,ue,{currentFilter:0})}}function yt(n,e,t){const o=n.slice();return o[9]=e[t],o}function Gn(n){let e;return{c(){e=ee("home")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function bt(n){let e,t=n[9].cardType.passive?"passive":"",o,r,c=n[9].cardType.type+"",a,f,h,l,s;return h=new Ke({props:{card:n[9],editable:!1}}),{c(){e=R("div"),o=ee(t),r=V(),a=ee(c),f=V(),Z(h.$$.fragment),l=V()},m(d,y){P(d,e,y),U(e,o),U(e,r),U(e,a),U(e,f),X(h,e,null),U(e,l),s=!0},p(d,y){(!s||y&8)&&t!==(t=d[9].cardType.passive?"passive":"")&&Oe(o,t),(!s||y&8)&&c!==(c=d[9].cardType.type+"")&&Oe(a,c);const j={};y&8&&(j.card=d[9]),h.$set(j)},i(d){s||(W(h.$$.fragment,d),s=!0)},o(d){K(h.$$.fragment,d),s=!1},d(d){d&&B(e),Y(h)}}}function Cn(n){let e,t,o,r,c,a,f,h,l=n[3].length+"",s,d,y,j,p,g,k,N,w,u,b,T,D,m;t=new de({props:{$$slots:{default:[Gn]},$$scope:{ctx:n}}}),t.$on("click",n[5]);function O(i){n[6](i)}let G={};n[0]!==void 0&&(G.currentFilter=n[0]),r=new Nt({props:G}),xe.push(()=>Ot(r,"currentFilter",O));let E=oe(n[3]),C=[];for(let i=0;i<E.length;i+=1)C[i]=bt(yt(n,E,i));const v=i=>K(C[i],1,1,()=>{C[i]=null});return{c(){e=R("header"),Z(t.$$.fragment),o=V(),Z(r.$$.fragment),a=V(),f=ee(n[0]),h=ee(": "),s=ee(l),d=V(),y=R("div"),j=ee("search filter: "),p=R("input"),g=V(),k=R("label"),k.textContent="filter passive:",N=V(),w=R("input"),u=V(),b=R("section");for(let i=0;i<C.length;i+=1)C[i].c();M(e,"class","svelte-1fxk8fu"),M(p,"type","text"),M(k,"for","filter-passive"),M(w,"type","checkbox"),M(w,"name","filter-passive"),M(w,"id","filter-passive"),M(y,"class","filter"),M(b,"class","container svelte-1fxk8fu")},m(i,_){P(i,e,_),X(t,e,null),U(e,o),X(r,e,null),P(i,a,_),P(i,f,_),P(i,h,_),P(i,s,_),P(i,d,_),P(i,y,_),U(y,j),U(y,p),Ie(p,n[1]),U(y,g),U(y,k),U(y,N),U(y,w),w.checked=n[2],P(i,u,_),P(i,b,_);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(b,null);T=!0,D||(m=[le(p,"input",n[7]),le(w,"change",n[8])],D=!0)},p(i,[_]){const $={};_&4096&&($.$$scope={dirty:_,ctx:i}),t.$set($);const x={};if(!c&&_&1&&(c=!0,x.currentFilter=i[0],jt(()=>c=!1)),r.$set(x),(!T||_&1)&&Oe(f,i[0]),(!T||_&8)&&l!==(l=i[3].length+"")&&Oe(s,l),_&2&&p.value!==i[1]&&Ie(p,i[1]),_&4&&(w.checked=i[2]),_&8){E=oe(i[3]);let A;for(A=0;A<E.length;A+=1){const S=yt(i,E,A);C[A]?(C[A].p(S,_),W(C[A],1)):(C[A]=bt(S),C[A].c(),W(C[A],1),C[A].m(b,null))}for(pe(),A=E.length;A<C.length;A+=1)v(A);_e()}},i(i){if(!T){W(t.$$.fragment,i),W(r.$$.fragment,i);for(let _=0;_<E.length;_+=1)W(C[_]);T=!0}},o(i){K(t.$$.fragment,i),K(r.$$.fragment,i),C=C.filter(Boolean);for(let _=0;_<C.length;_+=1)K(C[_]);T=!1},d(i){i&&(B(e),B(a),B(f),B(h),B(s),B(d),B(y),B(u),B(b)),Y(t),Y(r),Se(C,i),D=!1,me(m)}}}function xn(n,e,t){let o,r;Pe(n,ke,y=>t(4,r=y));let c="None",a="",f=!1;const h=()=>{Me.set("")};function l(y){c=y,t(0,c)}function s(){a=this.value,t(1,a)}function d(){f=this.checked,t(2,f)}return n.$$.update=()=>{n.$$.dirty&23&&t(3,o=r.map(y=>{const j=[y.cardHalf1];return y.cardHalf2&&j.push(y.cardHalf2),j}).flat().filter(y=>(c==="None"||y.cardType.type===c)&&y.text.toLocaleLowerCase().includes(a.toLocaleLowerCase())&&!f||y.cardType.passive))},[c,a,f,o,r,h,l,s,d]}class Hn extends se{constructor(e){super(),ce(this,e,xn,Cn,ue,{})}}function gt(n,e,t){const o=n.slice();return o[15]=e[t],o}function En(n){let e;return{c(){e=ee("add two sided")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Fn(n){let e;return{c(){e=ee("add one sided")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function In(n){let e;return{c(){e=ee("save")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Mn(n){let e;return{c(){e=ee("import JSON")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Bn(n){let e;return{c(){e=ee("export JSON")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Pn(n){let e;return{c(){e=ee("Download")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Jn(n){let e;return{c(){e=ee("view halves")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function qn(n){let e;return{c(){e=ee("remove")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function kt(n){let e,t,o,r,c,a;t=new Qe({props:{card:n[15],readable:!0}});function f(){return n[13](n[15])}return r=new de({props:{colour:"red",$$slots:{default:[qn]},$$scope:{ctx:n}}}),r.$on("click",f),{c(){e=R("div"),Z(t.$$.fragment),o=V(),Z(r.$$.fragment),c=V(),M(e,"class","wrapper svelte-m1wwdp")},m(h,l){P(h,e,l),X(t,e,null),U(e,o),X(r,e,null),U(e,c),a=!0},p(h,l){n=h;const s={};l&16&&(s.card=n[15]),t.$set(s);const d={};l&262144&&(d.$$scope={dirty:l,ctx:n}),r.$set(d)},i(h){a||(W(t.$$.fragment,h),W(r.$$.fragment,h),a=!0)},o(h){K(t.$$.fragment,h),K(r.$$.fragment,h),a=!1},d(h){h&&B(e),Y(t),Y(r)}}}function Ln(n){let e,t,o,r,c,a,f,h,l,s,d,y,j,p,g,k,N,w,u,b,T=n[4].length+"",D,m,O,G,E,C,v,i,_,$,x,A,S,H;function F(I){n[5](I)}let L={};n[0]!==void 0&&(L.currentFilter=n[0]),t=new Nt({props:L}),xe.push(()=>Ot(t,"currentFilter",F)),c=new de({props:{colour:"blue",$$slots:{default:[En]},$$scope:{ctx:n}}}),c.$on("click",n[6]),f=new de({props:{colour:"blue",$$slots:{default:[Fn]},$$scope:{ctx:n}}}),f.$on("click",n[7]),l=new de({props:{$$slots:{default:[In]},$$scope:{ctx:n}}}),l.$on("click",n[8]),d=new de({props:{$$slots:{default:[Mn]},$$scope:{ctx:n}}}),d.$on("click",wn),j=new de({props:{$$slots:{default:[Bn]},$$scope:{ctx:n}}}),j.$on("click",$n),g=new de({props:{$$slots:{default:[Pn]},$$scope:{ctx:n}}}),g.$on("click",n[9]),N=new de({props:{$$slots:{default:[Jn]},$$scope:{ctx:n}}}),N.$on("click",n[10]);let q=oe(n[4]),J=[];for(let I=0;I<q.length;I+=1)J[I]=kt(gt(n,q,I));const Q=I=>K(J[I],1,1,()=>{J[I]=null});return{c(){e=R("section"),Z(t.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),Z(f.$$.fragment),h=V(),Z(l.$$.fragment),s=V(),Z(d.$$.fragment),y=V(),Z(j.$$.fragment),p=V(),Z(g.$$.fragment),k=V(),Z(N.$$.fragment),w=V(),u=R("h1"),b=ee("cards "),D=ee(T),m=V(),O=R("div"),G=ee("search filter: "),E=R("input"),C=V(),v=R("label"),v.textContent="filter passive:",i=V(),_=R("input"),$=V(),x=R("section");for(let I=0;I<J.length;I+=1)J[I].c();M(e,"class","button-container svelte-m1wwdp"),M(E,"type","text"),M(v,"for","filter-passive"),M(_,"type","checkbox"),M(_,"name","filter-passive"),M(_,"id","filter-passive"),M(O,"class","filter svelte-m1wwdp"),M(x,"class","container svelte-m1wwdp")},m(I,z){P(I,e,z),X(t,e,null),U(e,r),X(c,e,null),U(e,a),X(f,e,null),U(e,h),X(l,e,null),U(e,s),X(d,e,null),U(e,y),X(j,e,null),U(e,p),X(g,e,null),U(e,k),X(N,e,null),P(I,w,z),P(I,u,z),U(u,b),U(u,D),P(I,m,z),P(I,O,z),U(O,G),U(O,E),Ie(E,n[1]),U(O,C),U(O,v),U(O,i),U(O,_),_.checked=n[2],P(I,$,z),P(I,x,z);for(let ne=0;ne<J.length;ne+=1)J[ne]&&J[ne].m(x,null);A=!0,S||(H=[le(E,"input",n[11]),le(_,"change",n[12])],S=!0)},p(I,[z]){const ne={};!o&&z&1&&(o=!0,ne.currentFilter=I[0],jt(()=>o=!1)),t.$set(ne);const fe={};z&262144&&(fe.$$scope={dirty:z,ctx:I}),c.$set(fe);const ye={};z&262144&&(ye.$$scope={dirty:z,ctx:I}),f.$set(ye);const Ae={};z&262144&&(Ae.$$scope={dirty:z,ctx:I}),l.$set(Ae);const ae={};z&262144&&(ae.$$scope={dirty:z,ctx:I}),d.$set(ae);const be={};z&262144&&(be.$$scope={dirty:z,ctx:I}),j.$set(be);const Ne={};z&262144&&(Ne.$$scope={dirty:z,ctx:I}),g.$set(Ne);const Ye={};if(z&262144&&(Ye.$$scope={dirty:z,ctx:I}),N.$set(Ye),(!A||z&16)&&T!==(T=I[4].length+"")&&Oe(D,T),z&2&&E.value!==I[1]&&Ie(E,I[1]),z&4&&(_.checked=I[2]),z&24){q=oe(I[4]);let te;for(te=0;te<q.length;te+=1){const Ze=gt(I,q,te);J[te]?(J[te].p(Ze,z),W(J[te],1)):(J[te]=kt(Ze),J[te].c(),W(J[te],1),J[te].m(x,null))}for(pe(),te=q.length;te<J.length;te+=1)Q(te);_e()}},i(I){if(!A){W(t.$$.fragment,I),W(c.$$.fragment,I),W(f.$$.fragment,I),W(l.$$.fragment,I),W(d.$$.fragment,I),W(j.$$.fragment,I),W(g.$$.fragment,I),W(N.$$.fragment,I);for(let z=0;z<q.length;z+=1)W(J[z]);A=!0}},o(I){K(t.$$.fragment,I),K(c.$$.fragment,I),K(f.$$.fragment,I),K(l.$$.fragment,I),K(d.$$.fragment,I),K(j.$$.fragment,I),K(g.$$.fragment,I),K(N.$$.fragment,I),J=J.filter(Boolean);for(let z=0;z<J.length;z+=1)K(J[z]);A=!1},d(I){I&&(B(e),B(w),B(u),B(m),B(O),B($),B(x)),Y(t),Y(c),Y(f),Y(l),Y(d),Y(j),Y(g),Y(N),Se(J,I),S=!1,me(H)}}}function zn(n,e,t){let o,r;Pe(n,ke,w=>t(3,r=w));let c="None",a="",f=!1;const h=(w,u,b,T)=>w.filter(D=>(u==="None"||D.cardHalf1.cardType.type===u||D.cardHalf2&&D.cardHalf2.cardType.type===u)&&pn(D,b)&&_n(D,T));function l(w){c=w,t(0,c)}const s=()=>{ke.set([...r,rt(2)])},d=()=>{ke.set([...r,rt(1)]),console.log(r.length)},y=()=>{Ve(r)},j=()=>{Me.set("download")},p=()=>{Me.set("half")};function g(){a=this.value,t(1,a)}function k(){f=this.checked,t(2,f)}const N=w=>{Ve(r.filter(u=>u.id!==w.id))};return n.$$.update=()=>{n.$$.dirty&15&&t(4,o=h(r,c,a,f))},[c,a,f,r,o,l,s,d,y,j,p,g,k,N]}class Wn extends se{constructor(e){super(),ce(this,e,zn,Ln,ue,{})}}function Rn(n){let e,t,o;var r=n[0];function c(a,f){return{}}return r&&(e=nt(r,c())),{c(){e&&Z(e.$$.fragment),t=Je()},m(a,f){e&&X(e,a,f),P(a,t,f),o=!0},p(a,[f]){if(f&1&&r!==(r=a[0])){if(e){pe();const h=e;K(h.$$.fragment,1,0,()=>{Y(h,1)}),_e()}r?(e=nt(r,c()),Z(e.$$.fragment),W(e.$$.fragment,1),X(e,t.parentNode,t)):e=null}},i(a){o||(e&&W(e.$$.fragment,a),o=!0)},o(a){e&&K(e.$$.fragment,a),o=!1},d(a){a&&B(t),e&&Y(e,a)}}}function Un(n,e,t){let o,r;Pe(n,Me,a=>t(1,r=a));const c={"":Wn,download:Sn,half:Hn};return n.$$.update=()=>{n.$$.dirty&2&&t(0,o=c[r])},[o,r]}class Kn extends se{constructor(e){super(),ce(this,e,Un,Rn,ue,{})}}new Kn({target:document.getElementById("app")});
