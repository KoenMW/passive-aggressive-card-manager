var ue=Object.defineProperty;var fe=(o,t,n)=>t in o?ue(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var xt=(o,t,n)=>fe(o,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const y of e)if(y.type==="childList")for(const u of y.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const y={};return e.integrity&&(y.integrity=e.integrity),e.referrerPolicy&&(y.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?y.credentials="include":e.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(e){if(e.ep)return;e.ep=!0;const y=n(e);fetch(e.href,y)}})();function Q(){}function ae(o,t){for(const n in t)o[n]=t[n];return o}function Zt(o){return o()}function Jt(){return Object.create(null)}function pt(o){o.forEach(Zt)}function te(o){return typeof o=="function"}function et(o,t){return o!=o?t==t:o!==t||o&&typeof o=="object"||typeof o=="function"}let $t;function jt(o,t){return o===t?!0:($t||($t=document.createElement("a")),$t.href=t,o===$t.href)}function se(o){return Object.keys(o).length===0}function ce(o,...t){if(o==null){for(const a of t)a(void 0);return Q}const n=o.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ee(o,t,n){o.$$.on_destroy.push(ce(t,n))}function le(o,t,n,a){if(o){const e=ne(o,t,n,a);return o[0](e)}}function ne(o,t,n,a){return o[1]&&a?ae(n.ctx.slice(),o[1](a(t))):n.ctx}function he(o,t,n,a){if(o[2]&&a){const e=o[2](a(n));if(t.dirty===void 0)return e;if(typeof e=="object"){const y=[],u=Math.max(t.dirty.length,e.length);for(let c=0;c<u;c+=1)y[c]=t.dirty[c]|e[c];return y}return t.dirty|e}return t.dirty}function de(o,t,n,a,e,y){if(e){const u=ne(t,n,a,y);o.p(u,e)}}function pe(o){if(o.ctx.length>32){const t=[],n=o.ctx.length/32;for(let a=0;a<n;a++)t[a]=-1;return t}return-1}function _e(o,t,n){return o.set(n),t}function Z(o,t){o.appendChild(t)}function q(o,t,n){o.insertBefore(t,n||null)}function J(o){o.parentNode&&o.parentNode.removeChild(o)}function re(o,t){for(let n=0;n<o.length;n+=1)o[n]&&o[n].d(t)}function z(o){return document.createElement(o)}function at(o){return document.createTextNode(o)}function X(){return at(" ")}function ye(){return at("")}function dt(o,t,n,a){return o.addEventListener(t,n,a),()=>o.removeEventListener(t,n,a)}function F(o,t,n){n==null?o.removeAttribute(t):o.getAttribute(t)!==n&&o.setAttribute(t,n)}function ve(o){return Array.from(o.childNodes)}function nt(o,t,n,a){n==null?o.style.removeProperty(t):o.style.setProperty(t,n,"")}function ge(o,t,{bubbles:n=!1,cancelable:a=!1}={}){return new CustomEvent(o,{detail:t,bubbles:n,cancelable:a})}function qt(o,t){return new o(t)}let vt;function yt(o){vt=o}function be(){if(!vt)throw new Error("Function called outside component initialization");return vt}function me(){const o=be();return(t,n,{cancelable:a=!1}={})=>{const e=o.$$.callbacks[t];if(e){const y=ge(t,n,{cancelable:a});return e.slice().forEach(u=>{u.call(o,y)}),!y.defaultPrevented}return!0}}function $e(o,t){const n=o.$$.callbacks[t.type];n&&n.slice().forEach(a=>a.call(this,t))}const lt=[],Wt=[];let ht=[];const zt=[],ke=Promise.resolve();let Nt=!1;function we(){Nt||(Nt=!0,ke.then(ie))}function gt(o){ht.push(o)}const At=new Set;let st=0;function ie(){if(st!==0)return;const o=vt;do{try{for(;st<lt.length;){const t=lt[st];st++,yt(t),Te(t.$$)}}catch(t){throw lt.length=0,st=0,t}for(yt(null),lt.length=0,st=0;Wt.length;)Wt.pop()();for(let t=0;t<ht.length;t+=1){const n=ht[t];At.has(n)||(At.add(n),n())}ht.length=0}while(lt.length);for(;zt.length;)zt.pop()();Nt=!1,At.clear(),yt(o)}function Te(o){if(o.fragment!==null){o.update(),pt(o.before_update);const t=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,t),o.after_update.forEach(gt)}}function je(o){const t=[],n=[];ht.forEach(a=>o.indexOf(a)===-1?t.push(a):n.push(a)),n.forEach(a=>a()),ht=t}const kt=new Set;let ft;function It(){ft={r:0,c:[],p:ft}}function Bt(){ft.r||pt(ft.c),ft=ft.p}function R(o,t){o&&o.i&&(kt.delete(o),o.i(t))}function L(o,t,n,a){if(o&&o.o){if(kt.has(o))return;kt.add(o),ft.c.push(()=>{kt.delete(o),a&&(n&&o.d(1),a())}),o.o(t)}else a&&a()}function St(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function Y(o){o&&o.c()}function K(o,t,n){const{fragment:a,after_update:e}=o.$$;a&&a.m(t,n),gt(()=>{const y=o.$$.on_mount.map(Zt).filter(te);o.$$.on_destroy?o.$$.on_destroy.push(...y):pt(y),o.$$.on_mount=[]}),e.forEach(gt)}function V(o,t){const n=o.$$;n.fragment!==null&&(je(n.after_update),pt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Se(o,t){o.$$.dirty[0]===-1&&(lt.push(o),we(),o.$$.dirty.fill(0)),o.$$.dirty[t/31|0]|=1<<t%31}function rt(o,t,n,a,e,y,u=null,c=[-1]){const l=vt;yt(o);const s=o.$$={fragment:null,ctx:[],props:y,update:Q,not_equal:e,bound:Jt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Jt(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};u&&u(s.root);let h=!1;if(s.ctx=n?n(o,t.props||{},(f,w,...$)=>{const p=$.length?$[0]:w;return s.ctx&&e(s.ctx[f],s.ctx[f]=p)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](p),h&&Se(o,f)),w}):[],s.update(),h=!0,pt(s.before_update),s.fragment=a?a(s.ctx):!1,t.target){if(t.hydrate){const f=ve(t.target);s.fragment&&s.fragment.l(f),f.forEach(J)}else s.fragment&&s.fragment.c();t.intro&&R(o.$$.fragment),K(o,t.target,t.anchor),ie()}yt(l)}class it{constructor(){xt(this,"$$");xt(this,"$$set")}$destroy(){V(this,1),this.$destroy=Q}$on(t,n){if(!te(n))return Q;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const e=a.indexOf(n);e!==-1&&a.splice(e,1)}}$set(t){this.$$set&&!se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Oe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oe);function De(o){let t;return{c(){t=z("section"),t.innerHTML="<h1>404</h1> <p>Page not found</p>",F(t,"class","center svelte-nfvh92")},m(n,a){q(n,t,a)},p:Q,i:Q,o:Q,d(n){n&&J(t)}}}class xe extends it{constructor(t){super(),rt(this,t,null,De,et,{})}}const ct=[];function Ct(o,t=Q){let n;const a=new Set;function e(c){if(et(o,c)&&(o=c,n)){const l=!ct.length;for(const s of a)s[1](),ct.push(s,o);if(l){for(let s=0;s<ct.length;s+=2)ct[s][0](ct[s+1]);ct.length=0}}}function y(c){e(c(o))}function u(c,l=Q){const s=[c,l];return a.add(s),a.size===1&&(n=t(e,y)||Q),c(o),()=>{a.delete(s),a.size===0&&n&&(n(),n=null)}}return{set:e,update:y,subscribe:u}}function Ae(o){let t,n,a,e,y;const u=o[2].default,c=le(u,o,o[1],null);return{c(){t=z("button"),c&&c.c(),F(t,"class",n="button "+o[0]+" svelte-1t3yz2i")},m(l,s){q(l,t,s),c&&c.m(t,null),a=!0,e||(y=dt(t,"click",o[3]),e=!0)},p(l,[s]){c&&c.p&&(!a||s&2)&&de(c,u,l,l[1],a?he(u,l[1],s,null):pe(l[1]),null),(!a||s&1&&n!==(n="button "+l[0]+" svelte-1t3yz2i"))&&F(t,"class",n)},i(l){a||(R(c,l),a=!0)},o(l){L(c,l),a=!1},d(l){l&&J(t),c&&c.d(l),e=!1,y()}}}function Ge(o,t,n){let{$$slots:a={},$$scope:e}=t,{colour:y="green"}=t;function u(c){$e.call(this,o,c)}return o.$$set=c=>{"colour"in c&&n(0,y=c.colour),"$$scope"in c&&n(1,e=c.$$scope)},[y,e,a,u]}class wt extends it{constructor(t){super(),rt(this,t,Ge,Ae,et,{colour:0})}}const Ot=o=>{switch(o){case"curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";default:return"#FFFFFF"}},Dt=o=>{switch(o){case"curse":return"Curse.svg";case"Deck":return"Deck.svg";case"Movement":return"Movement.svg";case"Change":return"Change.svg";case"Mystery":return"Mystery.svg";case"Board":return"Board.svg";default:return"Blank.svg"}},Rt=o=>{const t=Math.random().toString(36);return o===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Ne(o){let t,n,a,e,y;return{c(){t=z("div"),n=z("div"),a=z("div"),F(a,"contenteditable","true"),F(a,"class","cardText svelte-2sj25y"),o[0].text===void 0&&gt(()=>o[3].call(a)),F(n,"class","card svelte-2sj25y"),nt(n,"--colour",o[2]),F(t,"class","wrapper svelte-2sj25y"),nt(t,"--rotation",o[1]+"deg")},m(u,c){q(u,t,c),Z(t,n),Z(n,a),o[0].text!==void 0&&(a.innerText=o[0].text),e||(y=dt(a,"input",o[3]),e=!0)},p(u,[c]){c&1&&u[0].text!==a.innerText&&(a.innerText=u[0].text),c&4&&nt(n,"--colour",u[2]),c&2&&nt(t,"--rotation",u[1]+"deg")},i:Q,o:Q,d(u){u&&J(t),e=!1,y()}}}function Me(o,t,n){let a,{card:e}=t,{rotation:y=0}=t;function u(){e.text=this.innerText,n(0,e)}return o.$$set=c=>{"card"in c&&n(0,e=c.card),"rotation"in c&&n(1,y=c.rotation)},o.$$.update=()=>{o.$$.dirty&1&&n(2,a=Ot(e.cardType.type))},[e,y,a,u]}class Lt extends it{constructor(t){super(),rt(this,t,Me,Ne,et,{card:0,rotation:1})}}function Ut(o,t,n){const a=o.slice();return a[10]=t[n],a}function Kt(o){let t,n=St(o[2]),a=[];for(let e=0;e<n.length;e+=1)a[e]=Vt(Ut(o,n,e));return{c(){t=z("div");for(let e=0;e<a.length;e+=1)a[e].c();F(t,"class","options svelte-lm5vvd"),nt(t,"--colour",o[4])},m(e,y){q(e,t,y);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(e,y){if(y&13){n=St(e[2]);let u;for(u=0;u<n.length;u+=1){const c=Ut(e,n,u);a[u]?a[u].p(c,y):(a[u]=Vt(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=n.length}y&16&&nt(t,"--colour",e[4])},d(e){e&&J(t),re(a,e)}}}function Vt(o){let t,n,a,e,y;function u(){return o[7](o[10])}return{c(){t=z("img"),jt(t.src,n=Dt(o[10]))||F(t,"src",n),F(t,"alt","My Icon"),F(t,"class",a="cardIcon "+(o[0]===o[10]?"hidden":"")+" svelte-lm5vvd")},m(c,l){q(c,t,l),e||(y=dt(t,"click",u),e=!0)},p(c,l){o=c,l&4&&!jt(t.src,n=Dt(o[10]))&&F(t,"src",n),l&5&&a!==(a="cardIcon "+(o[0]===o[10]?"hidden":"")+" svelte-lm5vvd")&&F(t,"class",a)},d(c){c&&J(t),e=!1,y()}}}function Ee(o){let t,n,a,e,y,u,c,l,s,h,f,w,$=o[3]&&Kt(o);return{c(){t=z("div"),n=z("img"),e=X(),$&&$.c(),y=X(),u=z("input"),c=X(),l=z("label"),s=at("Passive"),jt(n.src,a=Dt(o[0]))||F(n,"src",a),F(n,"alt","My Icon"),F(n,"class","cardIcon svelte-lm5vvd"),F(t,"class","select svelte-lm5vvd"),F(u,"type","checkbox"),F(u,"id",o[5]),F(u,"class","hidden"),F(l,"for",o[5]),F(l,"class",h="passive no-select "+(o[1]?"":"invisible")+" svelte-lm5vvd")},m(p,g){q(p,t,g),Z(t,n),Z(t,e),$&&$.m(t,null),q(p,y,g),q(p,u,g),u.checked=o[1],q(p,c,g),q(p,l,g),Z(l,s),f||(w=[dt(n,"click",o[6]),dt(u,"change",o[8])],f=!0)},p(p,[g]){g&1&&!jt(n.src,a=Dt(p[0]))&&F(n,"src",a),p[3]?$?$.p(p,g):($=Kt(p),$.c(),$.m(t,null)):$&&($.d(1),$=null),g&2&&(u.checked=p[1]),g&2&&h!==(h="passive no-select "+(p[1]?"":"invisible")+" svelte-lm5vvd")&&F(l,"class",h)},i:Q,o:Q,d(p){p&&(J(t),J(y),J(u),J(c),J(l)),$&&$.d(),f=!1,pt(w)}}}function Ie(o,t,n){let a,{cardType:e}=t,{passive:y=!1}=t;const u=Math.random().toString(36).substring(7),c=me();let l=!1,{names:s=["Board","Change","Deck","Movement","Mystery","curse"]}=t;const h=()=>n(3,l=!l),f=$=>{n(0,e=$),n(3,l=!1)};function w(){y=this.checked,n(1,y)}return o.$$set=$=>{"cardType"in $&&n(0,e=$.cardType),"passive"in $&&n(1,y=$.passive),"names"in $&&n(2,s=$.names)},o.$$.update=()=>{o.$$.dirty&1&&n(4,a=Ot(e)),o.$$.dirty&1&&c("type",e),o.$$.dirty&2&&c("passive",y)},[e,y,s,l,a,u,h,f,w]}class Mt extends it{constructor(t){super(),rt(this,t,Ie,Ee,et,{cardType:0,passive:1,names:2})}}function Be(o){let t,n,a,e,y,u,c,l;return a=new Mt({props:{cardType:o[0].cardType.type,passive:o[0].cardType.passive,names:["Mystery","curse"]}}),a.$on("type",o[1]),{c(){t=z("div"),n=z("p"),Y(a.$$.fragment),e=X(),y=z("div"),F(n,"class","svelte-1adgv2l"),F(y,"contenteditable","true"),F(y,"class","cardText svelte-1adgv2l"),o[0].text===void 0&&gt(()=>o[2].call(y)),F(t,"class","card svelte-1adgv2l"),nt(t,"--colour",Ot(o[0].cardType.type))},m(s,h){q(s,t,h),Z(t,n),K(a,n,null),Z(t,e),Z(t,y),o[0].text!==void 0&&(y.innerText=o[0].text),u=!0,c||(l=dt(y,"input",o[2]),c=!0)},p(s,[h]){const f={};h&1&&(f.cardType=s[0].cardType.type),h&1&&(f.passive=s[0].cardType.passive),a.$set(f),h&1&&s[0].text!==y.innerText&&(y.innerText=s[0].text),(!u||h&1)&&nt(t,"--colour",Ot(s[0].cardType.type))},i(s){u||(R(a.$$.fragment,s),u=!0)},o(s){L(a.$$.fragment,s),u=!1},d(s){s&&J(t),V(a),c=!1,l()}}}function Ce(o,t,n){let{card:a}=t;const e=({detail:u})=>n(0,a.cardType.type=u,a);function y(){a.text=this.innerText,n(0,a)}return o.$$set=u=>{"card"in u&&n(0,a=u.card)},[a,e,y]}class He extends it{constructor(t){super(),rt(this,t,Ce,Be,et,{card:0})}}function Pe(o){let t,n;return t=new He({props:{card:o[0].cardHalf1}}),{c(){Y(t.$$.fragment)},m(a,e){K(t,a,e),n=!0},p(a,e){const y={};e&1&&(y.card=a[0].cardHalf1),t.$set(y)},i(a){n||(R(t.$$.fragment,a),n=!0)},o(a){L(t.$$.fragment,a),n=!1},d(a){V(t,a)}}}function Fe(o){let t,n,a,e,y,u,c,l,s,h;return n=new Mt({props:{cardType:o[0].cardHalf1.cardType.type,passive:o[0].cardHalf1.cardType.passive}}),n.$on("type",o[1]),n.$on("passive",o[2]),e=new Lt({props:{card:o[0].cardHalf1}}),u=new Lt({props:{card:o[0].cardHalf2,rotation:180}}),s=new Mt({props:{cardType:o[0].cardHalf2.cardType.type,passive:o[0].cardHalf2.cardType.passive}}),s.$on("type",o[3]),s.$on("passive",o[4]),{c(){t=z("p"),Y(n.$$.fragment),a=X(),Y(e.$$.fragment),y=X(),Y(u.$$.fragment),c=X(),l=z("p"),Y(s.$$.fragment),F(t,"class","first svelte-btssnq"),F(l,"class","second svelte-btssnq")},m(f,w){q(f,t,w),K(n,t,null),q(f,a,w),K(e,f,w),q(f,y,w),K(u,f,w),q(f,c,w),q(f,l,w),K(s,l,null),h=!0},p(f,w){const $={};w&1&&($.cardType=f[0].cardHalf1.cardType.type),w&1&&($.passive=f[0].cardHalf1.cardType.passive),n.$set($);const p={};w&1&&(p.card=f[0].cardHalf1),e.$set(p);const g={};w&1&&(g.card=f[0].cardHalf2),u.$set(g);const b={};w&1&&(b.cardType=f[0].cardHalf2.cardType.type),w&1&&(b.passive=f[0].cardHalf2.cardType.passive),s.$set(b)},i(f){h||(R(n.$$.fragment,f),R(e.$$.fragment,f),R(u.$$.fragment,f),R(s.$$.fragment,f),h=!0)},o(f){L(n.$$.fragment,f),L(e.$$.fragment,f),L(u.$$.fragment,f),L(s.$$.fragment,f),h=!1},d(f){f&&(J(t),J(a),J(y),J(c),J(l)),V(n),V(e,f),V(u,f),V(s)}}}function Je(o){let t,n,a,e;const y=[Fe,Pe],u=[];function c(l,s){return l[0].cardHalf2?0:1}return n=c(o),a=u[n]=y[n](o),{c(){t=z("div"),a.c(),F(t,"class","card svelte-btssnq")},m(l,s){q(l,t,s),u[n].m(t,null),e=!0},p(l,[s]){let h=n;n=c(l),n===h?u[n].p(l,s):(It(),L(u[h],1,1,()=>{u[h]=null}),Bt(),a=u[n],a?a.p(l,s):(a=u[n]=y[n](l),a.c()),R(a,1),a.m(t,null))},i(l){e||(R(a),e=!0)},o(l){L(a),e=!1},d(l){l&&J(t),u[n].d()}}}function qe(o,t,n){let{card:a}=t;const e=({detail:l})=>n(0,a.cardHalf1.cardType.type=l,a),y=({detail:l})=>n(0,a.cardHalf1.cardType.passive=l,a),u=({detail:l})=>{a.cardHalf2&&n(0,a.cardHalf2.cardType.type=l,a)},c=({detail:l})=>{a.cardHalf2&&n(0,a.cardHalf2.cardType.passive=l,a)};return o.$$set=l=>{"card"in l&&n(0,a=l.card)},[a,e,y,u,c]}class We extends it{constructor(t){super(),rt(this,t,qe,Je,et,{card:0})}}function ze(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Re(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ht={exports:{}};Ht.exports;(function(o){(function(){function t(a,e){return e?Re(a):a.slice?t[y(a)]:function(u,c){a(u={exports:{}}),t[y(c)]=u.exports};function y(u){return u.split("/").slice(-1).toString().replace(".js","")}}var n=o;t(function(a){String.random=function(y,u){var c="";for(y=y||24,u=u||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";y-- >0;)c+=u.charAt(Math.floor(Math.random()*u.length));return c},String.match=function(y,u){var c,l;return typeof y!="string"?!1:(typeof u=="string"&&(u={"=":u}),u=u||{},c=u["="]||u["*"]||u[">"]||u["<"],y===c?!0:l!==u["="]?!1:(c=u["*"]||u[">"],y.slice(0,(c||"").length)===c?!0:l!==u["*"]?!1:l!==u[">"]&&l!==u["<"]?y>=u[">"]&&y<=u["<"]:l!==u[">"]&&y>=u[">"]||l!==u["<"]&&y<=u["<"]))},String.hash=function(y,u){if(typeof y=="string"){if(u=u||0,!y.length)return u;for(var c=0,l=y.length,s;c<l;++c)s=y.charCodeAt(c),u=(u<<5)-u+s,u|=0;return u}};var e=Object.prototype.hasOwnProperty;Object.plain=function(y){return y?y instanceof Object&&y.constructor===Object||Object.prototype.toString.call(y).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(y,u){for(var c in y)if(e.call(y,c)&&(!u||u.indexOf(c)==-1))return!1;return!0},Object.keys=Object.keys||function(y){var u=[];for(var c in y)e.call(y,c)&&u.push(c);return u},function(){var y,u=setTimeout,c=0,l=0,s=typeof setImmediate!=""+y&&setImmediate||function(f,w){return typeof MessageChannel==""+y?u:((f=new MessageChannel).port1.onmessage=function($){$.data==""&&w()},function($){w=$,f.port2.postMessage("")})}(),h=u.check=u.check||typeof performance!=""+y&&performance||{now:function(){return+new Date}};u.hold=u.hold||9,u.poll=u.poll||function(f){if(u.hold>=h.now()-c&&l++<3333){f();return}s(function(){c=h.now(),f()},l=0)}}(),function(){var y=setTimeout,u=y.turn=y.turn||function(w){c.push(w)==1&&l(f)},c=u.s=[],l=y.poll,s=0,h,f=function(){(h=c[s++])&&h(),(s==c.length||s==99)&&(c=u.s=c.slice(s),s=0),c.length&&l(f)}}(),function(){var y,u=setTimeout,c=u.turn;(u.each=u.each||function(l,s,h,f){f=f||9,function w($,p,g){if(p=($=(l||[]).splice(0,f)).length){for(var b=0;b<p&&y===(g=s($[b]));b++);if(y===g){c(w);return}}h&&h(g)}()})()}()})(t,"./shim"),t(function(a){a.exports=function e(h,u,c){if(!h)return{to:e};var l,s=typeof u=="function",h=(this.tag||(this.tag={}))[h]||s&&(this.tag[h]={tag:h,to:e._={next:function(w){var $;($=this.to)&&$.next(w)}}});if(s){var f={off:e.off||(e.off=function(){if(this.next===e._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=e._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:e._,next:u,the:h,on:this,as:c};return(f.back=h.last||h).to=f,h.last=f}return(h=h.to)&&l!==u&&h.next(u),h}})(t,"./onto"),t(function(a){a.exports=function(e){return e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"&&e!=1/0&&e!=-1/0&&e===e||!!e&&typeof e["#"]=="string"&&Object.keys(e).length===1&&e["#"]}})(t,"./valid"),t(function(a){t("./shim");function e(){var h=+new Date;return l<h?(u=0,l=h+e.drift):l=h+(u+=1)/c+e.drift}e.drift=0;var y=-1/0,u=0,c=999,l=y,s;e.is=function(h,f,w){var $=f&&h&&h._&&h._[">"]||w;if($)return typeof($=$[f])=="number"?$:y},e.ify=function(h,f,w,$,p){(h=h||{})._=h._||{},p&&(h._["#"]=p);var g=h._[">"]||(h._[">"]={});return s!==f&&f!=="_"&&(typeof w=="number"&&(g[f]=w),s!==$&&(h[f]=$)),h},a.exports=e})(t,"./state"),t(function(a){t("./shim");function e(y){var u={s:{}},c=u.s;y=y||{max:999,age:1e3*9},u.check=function(s){return c[s]?l(s):!1};var l=u.track=function(s){var h=c[s]||(c[s]={});return h.was=u.now=+new Date,u.to||(u.to=setTimeout(u.drop,y.age+9)),l.ed&&l.ed(s),h};return u.drop=function(s){u.to=null,u.now=+new Date;var h=Object.keys(c);console.STAT&&console.STAT(u.now,+new Date-u.now,"dup drop keys"),setTimeout.each(h,function(f){var w=c[f];w&&(s||y.age)>u.now-w.was||delete c[f]},0,99)},u}a.exports=e})(t,"./dup"),t(function(a){t("./onto"),a.exports=function(u,c){if(this.on){var l=(this.opt||{}).lack||9e3;if(typeof u!="function"){if(!u)return;var h=u["#"]||u,s=(this.tag||"")[h];return s?(c&&(s=this.on(h,c),clearTimeout(s.err),s.err=setTimeout(function(){s.off()},l)),!0):void 0}var h=c&&c["#"]||e(9);if(!u)return h;var f=this.on(h,u,c);return f.err=f.err||setTimeout(function(){f.off(),f.next({err:"Error: No ACK yet.",lack:!0})},l),h}};var e=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(a){function e(p){return p instanceof e?(this._={$:this}).$:this instanceof e?e.create(this._={$:this,opt:p}):new e(p)}e.is=function(p){return p instanceof e||p&&p._&&p===p._.$||!1},e.version=.202,e.chain=e.prototype,e.chain.toJSON=function(){},t("./shim"),e.valid=t("./valid"),e.state=t("./state"),e.on=t("./onto"),e.dup=t("./dup"),e.ask=t("./ask"),function(){e.create=function(r){r.root=r.root||r,r.graph=r.graph||{},r.on=r.on||e.on,r.ask=r.ask||e.ask,r.dup=r.dup||e.dup();var v=r.$.opt(r.opt);return r.once||(r.on("in",p,r),r.on("out",p,r),r.on("put",x,r),e.on("create",r),r.on("create",r)),r.once=1,v};function p(r){if(r){if(r.out===p){this.to.next(r);return}var v=this,k=v.as,M=k.at||k,G=M.$,S=M.dup,N,B=r.DBG;if((N=r["#"])||(N=r["#"]=u(9)),!S.check(N)){if(S.track(N),N=r._,r._=typeof N=="function"?N:function(){},r.$&&r.$===(r.$._||"").$||(r.$=G),r["@"]&&!r.put&&i(r),!M.ask(r["@"],r))if(B&&(B.u=+new Date),r.put){g(r);return}else r.get&&e.on.get(r,G);B&&(B.uc=+new Date),v.to.next(r),B&&(B.ua=+new Date),!(r.nts||r.NTS)&&(r.out=p,M.on("out",r),B&&(B.ue=+new Date))}}}function g(r){if(r){var v=r._||"",k=v.root=((v.$=r.$||"")._||"").root;if(r["@"]&&v.faith&&!v.miss){r.out=p,k.on("out",r);return}v.latch=k.hatch,v.match=k.hatch=[];var M=r.put,G=v.DBG=r.DBG,S=+new Date;if(E=E||S,!(M["#"]&&M["."])){G&&(G.p=S),v["#"]=r["#"],v.msg=r,v.all=0,v.stun=1;var N=Object.keys(M);console.STAT&&console.STAT(S,((G||v).pk=+new Date)-S,"put sort");var B=0,C,H,P,W,U,tt,_t;(function ot(bt){if(C!=B){if(C=B,!(P=N[B])){console.STAT&&console.STAT(S,((G||v).pd=+new Date)-S,"put"),j(v);return}(W=M[P])?(_t=W._)?P!==_t["#"]?tt=T+D(P)+"soul not same.":(U=_t[">"])||(tt=T+D(P)+"no state."):tt=T+D(P)+"no meta.":tt=T+D(P)+"no node.",H=Object.keys(W||{})}if(tt){r.err=v.err=tt,j(v);return}var Pt=0,ut;for(bt=bt||0;bt++<9&&(ut=H[Pt++]);)if(ut!=="_"){var mt=W[ut],Ft=U[ut];if(f===Ft){tt=T+D(ut)+"on"+D(P)+"no state.";break}if(!l(mt)){tt=T+D(ut)+"on"+D(P)+"bad "+typeof mt+D(mt);break}b(mt,ut,P,Ft,r),++I}if((H=H.slice(Pt)).length){c(ot);return}++B,H=null,ot(bt)})()}}}e.on.put=g;function b(r,v,k,M,G){var S=G._||"",N=S.root,B=N.graph,C,H=B[k]||w,P=s(H,v,1),W=H[v],U=S.DBG;(C=console.STAT)&&(!B[k]||!W)&&(C.has=(C.has||0)+1);var tt=A();if(M>tt){setTimeout(function(){b(r,v,k,M,G)},(C=M-tt)>O?O:C),console.STAT&&console.STAT((U||S).Hf=+new Date,C,"future");return}if(!(M<P)&&!(!S.faith&&M===P&&(r===W||m(r)<=m(W))&&!S.miss)){S.stun++;var _t=G["#"]+S.all++,ot={toString:function(){return _t},_:S};ot.toJSON=ot.toString,N.dup.track(ot)["#"]=G["#"],U&&(U.ph=U.ph||+new Date),N.on("put",{"#":ot,"@":G["@"],put:{"#":k,".":v,":":r,">":M},ok:G.ok,_:S})}}function x(r){var v;(v=(r._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var k=this,M=k.as,G=M.graph,S=r._,N=r.put,B=N["#"],C=N["."],H=N[":"],P=N[">"];r["#"];var W;(W=S.msg)&&(W=W.put)&&(W=W[B])&&h(W,C,P,H,B),G[B]=h(G[B],C,P,H,B),(W=(M.next||"")[B])&&W.on("in",r),j(S),k.to.next(r)}function j(r,v){var k;if(!r.stop&&!(!r.err&&0<--r.stun)&&(r.stop=1,!!(k=r.root))){var M=r.match;M.end=1,M===k.hatch&&(!(M=r.latch)||M.end?delete k.hatch:k.hatch=M),r.hatch&&r.hatch(),setTimeout.each(r.match,function(G){G&&G()}),!(!(v=r.msg)||r.err||v.err)&&(v.out=p,r.root.on("out",v),d())}}function i(r){var v=r["@"]||"",k;if(!(k=v._)){var M=(M=r.$)&&(M=M._)&&(M=M.root)&&(M=M.dup);if(!(M=M.check(v)))return;r["@"]=M["#"]||r["@"];return}k.acks=(k.acks||0)+1,(k.err=r.err)&&(r["@"]=k["#"],j(k)),k.ok=r.ok||k.ok,!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){_(k)})),_(k)}function _(r){!r||!r.root||r.stun||r.acks!==r.all||r.root.on("in",{"@":r["#"],err:r.err,ok:r.err?f:r.ok||{"":1}})}var T="Error: Invalid graph!",D=function(r){return" '"+(""+r).slice(0,9)+"...' "},m=JSON.stringify,O=2147483647,A=e.state,I=0,E,d=function(){I>999&&I/-(E-(E=+new Date))>1&&(e.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),d=function(){I=0})}}(),function(){e.on.get=function(g,b){var x=b._,j=g.get,i=j["#"],_=x.graph[i],T=j["."],D=x.next||(x.next={}),m=D[i],O=g._||{},A=O.DBG=g.DBG;if(A&&(A.g=+new Date),!_)return x.on("get",g);if(T){if((typeof T!="string"||f===_[T])&&!((m||"").next||"")[T]){x.on("get",g);return}_=h({},T,s(_,T),_[T],i)}_&&p(g,_),x.on("get",g)};function p(g,b){var x=+new Date,j=g._||{},i=j.DBG=g.DBG,_=g["#"],T=u(9),D=Object.keys(b||"").sort(),m=((b||"")._||"")["#"];D.length;var O=g.$._.root,A=b===O.graph[m];console.STAT&&console.STAT(x,((i||j).gk=+new Date)-x,"got keys"),b&&function I(){x=+new Date;for(var E=0,d,r={},v;E<9&&(d=D[E++]);)h(r,d,s(b,d),b[d],m);D=D.slice(E),(v={})[m]=r,r=v;var k;A&&(k=function(){},k.ram=k.faith=!0),v=D.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),i&&(i.ga=+new Date),O.on("in",{"@":_,"#":T,put:r,"%":v?T=u(9):f,$:O.$,_:k,DBG:i,FOO:1}),console.STAT&&console.STAT(x,+new Date-x,"got in"),v&&setTimeout.turn(I)}(),b||O.on("in",{"@":g["#"]})}e.on.get.ack=p}(),function(){e.chain.opt=function(p){p=p||{};var g=this,b=g._,x=p.peers||p;return Object.plain(p)||(p={}),Object.plain(b.opt)||(b.opt=p),typeof x=="string"&&(x=[x]),Object.plain(b.opt.peers)||(b.opt.peers={}),x instanceof Array&&(p.peers={},x.forEach(function(j){var i={};i.id=i.url=j,p.peers[j]=b.opt.peers[j]=b.opt.peers[j]||i})),y(p,function j(i){var _=this[i];if(this&&this.hasOwnProperty(i)||typeof _=="string"||Object.empty(_)){this[i]=_;return}_&&_.constructor!==Object&&!(_ instanceof Array)||y(_,j)}),b.opt.from=p,e.on("opt",b),b.opt.uuid=b.opt.uuid||function(i){return e.state().toString(36).replace(".","")+String.random(i||12)},g}}();var y=function(p,g){Object.keys(p).forEach(g,p)},u=String.random,c=setTimeout.turn,l=e.valid,s=e.state.is,h=e.state.ify,f,w={},$;e.log=function(){return!e.log.off&&$.log.apply($,arguments),[].slice.call(arguments).join(" ")},e.log.once=function(p,g,b){return(b=e.log.once)[p]=b[p]||0,b[p]++||e.log(g)},typeof window<"u"&&((window.GUN=window.Gun=e).window=window);try{typeof n<"u"&&(n.exports=e)}catch{}a.exports=e,(e.window||{}).console=(e.window||{}).console||{log:function(){}},($=console).only=function(p,g){return $.only.i&&p===$.only.i&&$.only.i++&&($.log.apply($,arguments)||g)},e.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(a){var e=t("./root");e.chain.back=function(c,l){var s;if(c=c||1,c===-1||c===1/0)return this._.root.$;if(c===1)return(this._.back||this._).$;var h=this,f=h._;if(typeof c=="string"&&(c=c.split(".")),c instanceof Array){var w=0,$=c.length,s=f;for(w;w<$;w++)s=(s||y)[c[w]];return u!==s?l?h:s:(s=f.back)?s.$.back(c,l):void 0}if(typeof c=="function"){for(var p,s={back:f};(s=s.back)&&u===(p=c(s,l)););return p}return typeof c=="number"?(f.back||f).$.back(c-1):this};var y={},u})(t,"./back"),t(function(a){var e=t("./root");e.chain.chain=function(j){var i=this,_=i._,T=new(j||i).constructor(i),D=T._,m;return D.root=m=_.root,D.id=++m.once,D.back=i._,D.on=e.on,D.on("in",e.on.in,D),D.on("out",e.on.out,D),T};function y(j){var i,_=this.as,T=_.back,D=_.root,m;if(j.$||(j.$=_.$),this.to.next(j),_.err){_.on("in",{put:_.put=f,$:_.$});return}if(i=j.get){if(D.pass&&(D.pass[_.id]=_),_.lex&&Object.keys(_.lex).forEach(function(O){m[O]=_.lex[O]},m=j.get=j.get||{}),i["#"]||_.soul){if(i["#"]=i["#"]||_.soul,j["#"]||(j["#"]=w(9)),T=D.$.get(i["#"])._,i=i["."]){if(p(T.put,i)&&(m=T.ask&&T.ask[i],(T.ask||(T.ask={}))[i]=T.$.get(i)._,T.on("in",{get:i,put:{"#":T.soul,".":i,":":T.put[i],">":b(D.graph[T.soul],i)}}),m))return}else{if(m=T.ask&&T.ask[""],(T.ask||(T.ask={}))[""]=T,f!==T.put&&(T.on("in",T),m))return;j.$=T.$}return D.ask(s,j),D.on("in",j)}if(i["."])return _.get?(j={get:{".":_.get},$:_.$},(T.ask||(T.ask={}))[_.get]=j.$._,T.on("out",j)):(j={get:_.lex?j.get:{},$:_.$},T.on("out",j));if((_.ask||(_.ask={}))[""]=_,_.get)return i["."]=_.get,(T.ask||(T.ask={}))[_.get]=j.$._,T.on("out",j)}return T.on("out",j)}e.on.out=y;function u(j,i){i=i||this.as;var _=i.root,T=j.$||(j.$=i.$),D=(T||"")._||h,m=j.put||"",O=m["#"],A=m["."],I=f!==m["="]?m["="]:m[":"],E=m[">"]||-1/0,d;if(f!==j.put&&(f===m["#"]||f===m["."]||f===m[":"]&&f===m["="]||f===m[">"])){if(!$(m)){if(!(O=((m||"")._||"")["#"])){console.log("chain not yet supported for",m,"...",j,i);return}return T=i.root.$.get(O),setTimeout.each(Object.keys(m).sort(),function(r){r=="_"||f===(E=b(m,r))||i.on("in",{$:T,put:{"#":O,".":r,"=":m[r],">":E},VIA:j})})}i.on("in",{$:D.back.$,put:{"#":O=D.back.soul,".":A=D.has||D.get,"=":m,">":b(D.back.put,A)},via:j});return}(j.seen||"")[i.id]||((j.seen||(j.seen=function(){}))[i.id]=i,i!==D&&(Object.keys(j).forEach(function(r){m[r]=j[r]},m={}),m.get=i.get||m.get,!i.soul&&!i.has?m.$$$=m.$$$||i.$:D.soul&&(m.$=i.$,m.$$=m.$$||D.$),j=m),l(j,i),(i.soul||j.$$)&&E>=b(_.graph[O],A)&&((m=_.$.get(O)._).put=x(m.put,A,E,I,O)),!D.soul&&E>=b(_.graph[O],A)&&(d=(_.$.get(O)._.next||"")[A])&&(d.put=I,typeof(m=$(I))=="string"&&(d.put=_.$.get(m)._.put||I)),this.to&&this.to.next(j),i.any&&setTimeout.each(Object.keys(i.any),function(r){(r=i.any[r])&&r(j)},0,99),i.echo&&setTimeout.each(Object.keys(i.echo),function(r){(r=i.echo[r])&&r.on("in",j)},0,99),((j.$$||"")._||D).soul&&(d=i.next)&&(d=d[A])&&(m={},Object.keys(j).forEach(function(r){m[r]=j[r]}),m.$=(j.$$||j.$).get(m.get=A),delete m.$$,delete m.$$$,d.on("in",m)),c(j,i))}e.on.in=u;function c(j,i){if(i=i||this.as||j.$._,!(j.$$&&this!==e.on)&&!(!j.put||i.soul)){var _=j.put||"",T=_["="]||_[":"],A,D=i.root,m=D.$.get(_["#"]).get(_["."])._;if(typeof(T=$(T))!="string"){this===e.on&&((m.echo||(m.echo={}))[i.id]=i);return}if(!((m.echo||(m.echo={}))[i.id]&&!(D.pass||"")[i.id])){if(A=D.pass){if(A[T+i.id])return;A[T+i.id]=1}(m.echo||(m.echo={}))[i.id]=i,i.has&&(i.link=T);var O=D.$.get(m.link=T)._;(O.echo||(O.echo={}))[m.id]=m;var A=i.ask||"";(A[""]||i.lex)&&O.on("out",{get:{"#":T}}),setTimeout.each(Object.keys(A),function(I,E){!I||!(E=A[I])||E.on("out",{get:{"#":T,".":I}})},0,99)}}}e.on.link=c;function l(j,i){var _=j.put||"",T=f!==_["="]?_["="]:_[":"],D=i.root,m,O;if(f===T){if(i.soul&&f!==i.put||(O=(j.$$||j.$||"")._||"",j["@"]&&(f!==O.put||f!==i.put)))return;(m=i.link||j.linked)&&delete(D.$.get(m)._.echo||"")[i.id],i.has&&(i.link=null),i.put=f,setTimeout.each(Object.keys(i.next||""),function(A,I){(I=i.next[A])&&(m&&delete(D.$.get(m).get(A)._.echo||"")[I.id],I.on("in",{get:A,put:f,$:I.$}))},0,99);return}i.soul||j.$$||(m=$(T),O=j.$._||"",!((m===O.link||i.has&&!O.link)&&!((D.pass||"")[i.id]&&typeof m!="string"))&&(delete(O.echo||"")[i.id],l({get:i.get,put:f,$:j.$,linked:j.linked=j.linked||O.link},i)))}e.on.unlink=l;function s(j,i){var _=this.as,T=_.$._;T.root;var D=_.get||"",m=(j.put||"")[D["#"]]||"";if(!j.put||typeof D["."]=="string"&&f===m[D["."]]){if(f!==T.put||!T.soul&&!T.has)return;T.ack=(T.ack||0)+1,T.on("in",{get:T.get,put:T.put=f,$:T.$,"@":j["@"]});return}(j._||{}).miss=1,e.on.put(j)}var h={},f,w=String.random,$=e.valid,p=function(j,i){return j&&Object.prototype.hasOwnProperty.call(j,i)},g=e.state,b=g.is,x=g.ify})(t,"./chain"),t(function(a){var e=t("./root");e.chain.get=function(f,w,$){var p,g;if(typeof f=="string"){if(f.length==0)return(p=this.chain())._.err={err:e.log("0 length key!",f)},w&&w.call(p,p._.err),p;var b=this,x=b._,j=x.next||l;(p=j[f])||(p=f&&y(f,b)),p=p&&p.$}else if(typeof f=="function"){let A=function(I,E,d){if(!A.stun&&!((S=_.pass)&&!S[T])){var r=I.$._,v=(I.$$||"")._,k=(v||r).put,M=!r.has&&!r.soul,G={},S;if((M||h===k)&&(k=h===((S=I.put)||"")["="]?h===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=e.valid(k))=="string"&&(k=h===(S=_.$.get(S)._.put)?i.not?h:k:S),!(i.not&&h===k)){if(h===i.stun){if((S=_.stun)&&S.on&&(x.$.back(function(N){if(S.on(""+N.id,G={}),(G.run||0)<A.id)return G}),!G.run&&S.on(""+r.id,G={}),!G.run&&v&&S.on(""+v.id,G={}),A.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=S.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[T]=function(){A(I,E,1)};return}if(h===k&&(d=0),(S=_.hatch)&&!S.end&&h===i.hatch&&!d){if(D[r.$._.id])return;D[r.$._.id]=1,S.push(function(){A(I,E,1)});return}D={}}if(_.pass){if(_.pass[T+r.id])return;_.pass[T+r.id]=1}if(i.on){i.ok.call(r.$,k,r.get,I,E||A);return}if(i.v2020){i.ok(I,E||A);return}Object.keys(I).forEach(function(N){S[N]=I[N]},S={}),I=S,I.put=k,i.ok.call(i.as,I,E||A)}}};var m=A;if(w===!0)return u(this,f,w,$),this;p=this;var x=p._,i=w||{},_=x.root,T;i.at=x,i.ok=f;var D={};return A.at=x,(x.any||(x.any={}))[T=String.random(7)]=A,A.off=function(){A.stun=1,x.any&&delete x.any[T]},A.rid=c,A.id=i.run||++_.once,g=_.pass,(_.pass={})[T]=1,i.out=i.out||{get:{}},x.on("out",i.out),_.pass=g,p}else{if(typeof f=="number")return this.get(""+f,w,$);if(typeof(g=s(f))=="string")return this.get(g,w,$);(g=this.get.next)&&(p=g(this,f))}return p?(w&&typeof w=="function"&&p.get(w,$),p):((p=this.chain())._.err={err:e.log("Invalid get request!",f)},w&&w.call(p,p._.err),p)};function y(f,w){var $=w._,p=$.next,g=w.chain(),b=g._;return p||(p=$.next={}),p[b.get=f]=b,w===$.root.$?b.soul=f:($.soul||$.has)&&(b.has=f),b}function u(f,w,$,p){var g=f._,b=0,x;return(x=g.soul||g.link)?w(x,p,g):g.jam?g.jam.push([w,p]):(g.jam=[[w,p]],f.get(function(i,_){if(!(h===i.put&&!g.root.opt.super&&(x=Object.keys(g.root.opt.peers).length)&&++b<=x)){_.rid(i);var T=(T=i.$)&&T._||{},D=0,m;for(x=g.jam,delete g.jam;m=x[D++];){var O=m[0];m=m[1],O&&O(T.link||T.soul||e.valid(i.put)||((i.put||{})._||{})["#"],m,i,_)}}},{out:{get:{".":!0}}}),f)}function c(f){var w=this.at||this.on;if(!f||w.soul||w.has)return this.off();if(f=(f=(f=f.$||f)._||f).id){w.map;var $;if(($=this.seen||(this.seen={}))[f])return!0;$[f]=!0}}var l={},s=e.valid,h})(t,"./get"),t(function(a){var e=t("./root");e.chain.put=function(p,g,b){var x=this,j=x._,i=j.root;b=b||{},b.root=j.root,b.run||(b.run=i.once),y(b,j.id),b.ack=b.ack||g,b.via=b.via||x,b.data=b.data||p,b.soul||(b.soul=j.soul||typeof g=="string"&&g);var _=b.state=b.state||e.state();return typeof p=="function"?(p(function(T){b.data=T,x.put(s,s,b)}),x):b.soul?(b.$=i.$.get(b.soul),b.todo=[{it:b.data,ref:b.$}],b.turn=b.turn||f,b.ran=b.ran||u,function T(){var D=b.todo,m=D.pop(),O=m.it;m.ref&&m.ref._.id;var A,I,E,d,r;if(y(b,m.ref),(d=m.todo)&&(I=d.pop(),O=O[I],d.length&&D.push(m)),I&&(D.path||(D.path=[])).push(I),!(A=w(O))&&!(r=e.is(O))){if(!Object.plain(O)){u.err(b,"Invalid data: "+l(O)+" at "+(b.via.back(function(S){S.get&&d.push(S.get)},d=[])||d.join("."))+"."+(D.path||[]).join("."));return}for(var v=b.seen||(b.seen=[]),k=v.length;k--;)if(O===(d=v[k]).it){A=O=d.link;break}}if(I&&A)m.node=$(m.node,I,_,O);else{let S=function(N,B){var C=E.link["#"];B&&(B.off(),B.rid(N));var H=C||N.soul||(d=(N.$$||N.$)._||"").soul||d.link||((d=d.put||"")._||"")["#"]||d["#"]||((d=N.put||"")&&N.$$?d["#"]:(d["="]||d[":"]||"")["#"]);if(!C&&y(b,N.$),!H&&!m.link["#"]){(m.wait||(m.wait=[])).push(function(){S(N,B)});return}H||(H=[],(N.$$||N.$).back(function(P){if(d=P.soul||P.link)return H.push(d);H.push(P.get)}),H=H.reverse().join("/")),E.link["#"]=H,!r&&(((b.graph||(b.graph={}))[H]=E.node||(E.node={_:{}}))._["#"]=H),delete b.wait[M],E.wait&&setTimeout.each(E.wait,function(P){P&&P()}),b.ran(b)};var G=S;if(!b.seen){u.err(b,"Data at root of graph must be a node (an object).");return}b.seen.push(E={it:O,link:{},todo:r?[]:Object.keys(O).sort().reverse(),path:(D.path||[]).slice(),up:m}),m.node=$(m.node,I,_,E.link),!r&&E.todo.length&&D.push(E);var M=b.seen.length;(b.wait||(b.wait={}))[M]="",d=(E.ref=r?O:I?m.ref.get(I):m.ref)._,(d=O&&(O._||"")["#"]||d.soul||d.link)?S({soul:d}):E.ref.get(S,{run:b.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return b.ran(b);b.turn(T)}(),x):(c(b),x)};function y(p,g){if(g){g=(g._||"").id||g;var b=p.root.stun||(p.root.stun={on:e.on}),x={},j;p.stun||(p.stun=b.on("stun",function(){})),(j=b.on(""+g))&&j.the.last.next(x),!(x.run>=p.run)&&b.on(""+g,function(i){if(p.stun.end){this.off(),this.to.next(i);return}i.run=i.run||p.run,i.stun=i.stun||p.stun})}}function u(p){if(p.err){u.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,b=g.root,x=g.ask(function(T){b.on("ack",T),T.err&&!T.lack&&e.log(T),++j>(p.acks||0)&&this.off(),p.ack&&p.ack(T,this)},p.opt),j=0,i=p.stun,_;(_=function(){i&&(u.end(i,b),setTimeout.each(Object.keys(i=i.add||""),function(T){(T=i[T])&&T()}))}).hatch=_,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":x,_})}}u.end=function(p,g){p.end=h,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()},u.err=function(p,g){(p.ack||h).call(p,p.out={err:p.err=e.log(g)}),p.ran(p)};function c(p){var g=p.via._,b;p.via=p.via.back(function(x){if(x.soul||!x.get)return x.$;b=p.data,(p.data={})[x.get]=b}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function l(p,g){return p&&(g=p.constructor)&&g.name||typeof p}var s,h=function(){},f=setTimeout.turn,w=e.valid,$=e.state.ify})(t,"./put"),t(function(a){var e=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),a.exports=e})(t,"./index"),t(function(a){var e=t("./index");e.chain.on=function(c,l,s,h){var f=this,w=f._;w.root;var $;if(typeof c=="string")return l?($=w.on(c,l,s||w,h),s&&s.$&&(s.subs||(s.subs=[])).push($),f):w.on(c);var p=l;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,f.get(c,p),f},e.chain.once=function(c,l){if(l=l||{},!c)return y(this);var s=this,h=s._,f=h.root;h.put;var w=String.random(7),$;return s.get(function(p,g,b,x){var j=this,i=j._,_=i.one||(i.one={});if(x.stun||_[w]==="")return;if(($=e.valid(p))===!0){T();return}if(typeof $=="string")return;clearTimeout((h.one||"")[w]),clearTimeout(_[w]),_[w]=setTimeout(T,l.wait||99);function T(D){if(!i.has&&!i.soul&&(i={put:p,get:g}),u===($=i.put)&&($=((b.$$||"")._||"").put),typeof e.valid($)=="string"&&($=f.$.get($)._.put,$===u&&!D)){_[w]=setTimeout(function(){T(1)},l.wait||99);return}x.stun||_[w]!==""&&(_[w]="",(h.soul||h.has)&&x.off(),c.call(j,$,i.get),clearTimeout(_[w]))}},{on:1}),s};function y(c,l,s){return e.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(s=c.chain())._.nix=c.once(function(h,f){s._.on("in",this._)}),s._.lex=c._.lex,s}e.chain.off=function(){var c=this,l=c._,s,h=l.back;if(h)return l.ack=0,(s=h.next)&&s[l.get]&&delete s[l.get],(s=h.any)&&(delete h.any,h.any={}),(s=h.ask)&&delete s[l.get],(s=h.put)&&delete s[l.get],(s=l.soul)&&delete h.root.graph[s],(s=l.map)&&Object.keys(s).forEach(function(f,w){w=s[f],w.link&&h.root.$.get(w.link).off()}),(s=l.next)&&Object.keys(s).forEach(function(f,w){w=s[f],w.$.off()}),l.on("off",{}),c};var u})(t,"./on"),t(function(a){var e=t("./index"),y=e.chain.get.next;e.chain.get.next=function(s,h){var f;return Object.plain(h)?(f=((f=h["#"])||"")["="]||f)?s.get(f):((f=s.chain()._).lex=h,s.on("in",function(w){String.match(w.get||(w.put||"")["."],h["."]||h["#"]||h)&&f.on("in",w),this.to.next(w)}),f.$):(y||c)(s,h)},e.chain.map=function(s,h,f){var w=this,$=w._,p,g;return Object.plain(s)&&(p=s["."]?s:{".":s},s=l),s?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=w.chain(),w.map().on(function(b,x,j,i){var _=(s||c).call(this,b,x,j,i);if(l!==_){if(b===_)return g._.on("in",j);if(e.is(_))return g._.on("in",_._);var T={};Object.keys(j.put).forEach(function(D){T[D]=j.put[D]},T),T["="]=_,g._.on("in",{get:x,put:T})}}),g):((g=$.each)||(($.each=g=w.chain())._.lex=p||g._.lex||$.lex,g._.nix=w.back("nix"),w.on("in",u,g._)),g)};function u(s){this.to.next(s);var h=this.as,f=s.$,w=f._,$=s.put,p;!w.soul&&!s.$$||(p=h.lex)&&!String.match(s.get||($||"")["."],p["."]||p["#"]||p)||e.on.link(s,h)}var c=function(){},l})(t,"./map"),t(function(a){var e=t("./index");e.chain.set=function(y,u,c){var l=this,s=l.back(-1),h,f;return u=u||function(){},c=c||{},c.item=c.item||y,(h=((y||"")._||"")["#"])&&((y={})["#"]=h),typeof(f=e.valid(y))=="string"?l.get(h=f).put(y,u,c):e.is(y)?(l.put(function(w){y.get(function($,p,g){if(!$)return u.call(l,{err:e.log('Only a node can be linked! Not "'+g.put+'"!')});(f={})[$]={"#":$},w(f)},!0)}),y):(Object.plain(y)&&(y=s.get(h=l.back("opt.uuid")()).put(y)),l.get(h||s.back("opt.uuid")(7)).put(y,u,c))}})(t,"./set"),t(function(a){t("./shim");var e=function(){},y=JSON.parseAsync||function(s,h,f){var w,$=+new Date;try{h(w,JSON.parse(s,f),u.sucks(+new Date-$))}catch(p){h(p)}},u=JSON.stringifyAsync||function(s,h,f,w){var $,p=+new Date;try{h($,JSON.stringify(s,f,w),u.sucks(+new Date-p))}catch(g){h(g)}};u.sucks=function(s){s>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),u.sucks=e)};function c(s){var h=function(){},f=s.opt||{};f.log=f.log||console.log,f.gap=f.gap||f.wait||0,f.max=f.max||(f.memory?f.memory*999*999:3e8)*.3,f.pack=f.pack||f.max*.01*.01,f.puff=f.puff||9;var w=setTimeout.turn||setTimeout,$=s.dup,p=$.check,g=$.track,b=h.hear=function(i,_){if(i){if(f.max<=i.length)return h.say({dam:"!",err:"Message too big!"},_);h===this&&(b.d+=i.length||0,++b.c);var T=_.SH=+new Date,D=i[0],m;if(D==="["){y(i,function(O,A){if(O||!A)return h.say({dam:"!",err:"DAM JSON parse error."},_);console.STAT&&console.STAT(+new Date,A.length,"# on hear batch");var I=f.puff;(function E(){for(var d=+new Date,r=0,v;r<I&&(v=A[r++]);)h.hear(v,_);A=A.slice(r),console.STAT&&console.STAT(d,+new Date-d,"hear loop"),x(_),A.length&&w(E,0)})()}),i="";return}if(D==="{"||(i["#"]||Object.plain(i))&&(m=i)){if(m)return b.one(m,_,T);y(i,function(O,A){if(O||!A)return h.say({dam:"!",err:"DAM JSON parse error."},_);b.one(A,_,T)});return}}};b.one=function(i,_,E){var D,m,O,A,I;if(i.DBG&&(i.DBG=I={DBG:i.DBG}),I&&(I.h=E),I&&(I.hp=+new Date),(D=i["#"])||(D=i["#"]=String.random(9)),!(O=p(D))&&(m=i["##"],!(m&&(O=i["@"]||i.get&&D)&&$.check(A=O+m)))){if((i._=function(){}).via=h.leap=_,(O=i["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(d){this[d]=1},i._.yo={}),O=i.dam){(O=h.hear[O])&&O(i,_,s),g(D);return}(O=i.ok)&&(i._.near=O["/"]);var E=+new Date;I&&(I.is=E),_.SI=D,g.ed=function(d){D===d&&(g.ed=0,(d=$.s[D])&&(d.via=_,i.get&&(d.it=i)))},s.on("in",h.last=i),I&&(I.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,i.get?"msg get":i.put?"msg put":"msg"),g(D),A&&g(A),h.leap=h.last=null}},b.c=b.d=0,function(){var i=0,_;h.hash=function(m,O){var A,I,E,d=+new Date;u(m.put,function r(v,k){var M=(I||(I=E=k||"")).slice(0,32768);if(A=String.hash(M,A),I=I.slice(32768),I){w(r,0);return}console.STAT&&console.STAT(d,+new Date-d,"say json+hash"),m._.$put=E,m["##"]=A,h.say(m,O),delete m._.$put},T)};function T(m,O){var A;return O instanceof Object?(Object.keys(O).sort().forEach(D,{to:A={},on:O}),A):O}function D(m){this.to[m]=this.on[m]}h.say=function(m,O){var A;if((A=this)&&(A=A.to)&&A.next&&A.next(m),!m)return!1;var I,E,d,r=m["@"],v=m._||(m._=function(){}),k=m.DBG,M=+new Date;if(v.y=v.y||M,O||k&&(k.y=M),(I=m["#"])||(I=m["#"]=String.random(9)),!_&&g(I),!(E=m["##"])&&l!==m.put&&!v.via&&r){h.hash(m,O);return}if(!O&&r&&(O=(A=$.s[r])&&(A.via||(A=A.it)&&(A=A._)&&A.via)||(A=h.last)&&r===A["#"]&&h.leap),!O&&r)return $.s[r]?void 0:(console.STAT&&console.STAT(+new Date,++i,"total no peer to ack to"),!1);if(r&&!m.put&&!E&&(($.s[r]||"").it||"")["##"])return!1;if(!O&&h.way)return h.way(m);if(k&&(k.yh=+new Date),!(d=v.raw)){h.raw(m,O);return}if(k&&(k.yr=+new Date),!O||!O.id){if(!Object.plain(O||f.peers))return!1;var M=+new Date;f.puff;var G=f.peers,S=Object.keys(O||f.peers||{});console.STAT&&console.STAT(M,+new Date-M,"peer keys"),function C(){var H=+new Date;_=1;var P=v.raw;v.raw=d;for(var W=0,U;W<9&&(U=(S||"")[W++]);)(U=G[U]||(O||"")[U])&&h.say(m,U);v.raw=P,_=0,S=S.slice(W),console.STAT&&console.STAT(H,+new Date-H,"say loop"),S.length&&(w(C,0),r&&g(r))}();return}if(!O.wire&&h.wire&&h.wire(O),I!==O.last){if(O.last=I,O===v.via||(A=v.yo)&&(A[O.url]||A[O.pid]||A[O.id]))return!1;if(console.STAT&&console.STAT(M,((k||v).yp=+new Date)-(v.y||M),"say prep"),!_&&r&&g(r),O.batch){if(O.tail=(A=O.tail||0)+d.length,O.tail<=f.pack){O.batch+=(A?",":"")+d;return}x(O)}O.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),x(O)},f.gap),j(d,O),console.STAT&&r===O.SI&&console.STAT(M,+new Date-O.SH,"say ack")}},h.say.c=h.say.d=0,h.raw=function(m,O){if(!m)return"";var A=m._||{},I,E;if(E=A.raw)return E;if(typeof m=="string")return m;var d=m["##"],r=m["@"];if(d&&r){if(!A.via&&p(r+d))return!1;if(E=($.s[r]||"").it){if(d===E["##"])return!1;E["##"]||(E["##"]=d)}}if(!m.dam&&!m["@"]){var v=0,k=[];E=f.peers;for(var M in E){var G=E[M];if(k.push(G.url||G.pid||G.id),++v>6)break}v>1&&(m["><"]=k.join())}if(m.put&&(E=m.ok)&&(m.ok={"@":(E["@"]||1)-1,"/":E["/"]==m._.near?h.near:E["/"]}),I=A.$put){E={},Object.keys(m).forEach(function(N){E[N]=m[N]}),E.put=":])([:",u(E,function(N,B){if(!N){var C=+new Date;E=B.indexOf('"put":":])([:"'),S(l,B=B.slice(0,E+6)+I+B.slice(E+14)),console.STAT&&console.STAT(C,+new Date-C,"say slice")}});return}u(m,S);function S(N,B){N||(A.raw=B,h.say(m,O))}}}();function x(i){var _=i.batch,T=typeof _=="string";if(T&&(_+="]"),i.batch=i.tail=null,!!_&&!(T?3>_.length:!_.length)){if(!T)try{_=_.length===1?_[0]:JSON.stringify(_)}catch(D){return f.log("DAM JSON stringify error",D)}_&&j(_,i)}}function j(i,_){try{var T=_.wire;_.say?_.say(i):T.send&&T.send(i),h.say.d+=i.length||0,++h.say.c}catch{(_.queue=_.queue||[]).push(i)}}return h.near=0,h.hi=function(i){var _=i.wire,T;if(!_){h.wire(i.length&&{url:i,id:i}||i);return}i.id?f.peers[i.url||i.id]=i:(T=i.id=i.id||i.url||String.random(9),h.say({dam:"?",pid:s.opt.pid},f.peers[T]=i),delete $.s[i.last]),i.met||(h.near++,i.met=+new Date,s.on("hi",i)),T=i.queue,i.queue=[],setTimeout.each(T||[],function(D){j(D,i)},0,9)},h.bye=function(i){i.met&&--h.near,delete i.met,s.on("bye",i);var _=+new Date;_=_-(i.met||_),h.bye.time=((h.bye.time||_)+_)/2},h.hear["!"]=function(i,_){f.log("Error:",i.err)},h.hear["?"]=function(i,_){i.pid&&(_.pid||(_.pid=i.pid),i["@"])||(h.say({dam:"?",pid:f.pid,"@":i["#"]},_),delete $.s[_.last])},h.hear.mob=function(i,_){if(i.peers){var T=Object.keys(i.peers),D=T[Math.random()*T.length>>0];D&&(h.bye(_),h.hi(D))}},s.on("create",function(i){i.opt.pid=i.opt.pid||String.random(9),this.to.next(i),i.on("out",h.say)}),s.on("bye",function(i,_){i=f.peers[i.id||i]||i,this.to.next(i),i.bye?i.bye():(_=i.wire)&&_.close&&_.close(),delete f.peers[i.id],i.wire=null}),s.on("bye",function(i,_){this.to.next(i),(_=console.STAT)&&(_.peers=h.near),(_=i.url)&&setTimeout(function(){},f.lack||9e3)}),s.on("hi",function(i,_){if(this.to.next(i),(_=console.STAT)&&(_.peers=h.near),!f.super){var T=Object.keys(s.next||"");T.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(T,function(D){var m=s.next[D];if(f.super||(m.ask||"")[""]){h.say({get:{"#":D}},i);return}setTimeout.each(Object.keys(m.ask||""),function(O){O&&h.say({"##":String.hash((s.graph[D]||"")[O]),get:{"#":D,".":O}},i)})})}}),h}var l;try{a.exports=c}catch{}})(t,"./mesh"),t(function(a){var e=t("./index");e.Mesh=t("./mesh"),e.on("opt",function(u){if(this.to.next(u),u.once)return;var c=u.opt;if(c.WebSocket===!1)return;var l=e.window||{},s=c.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!s)return;c.WebSocket=s;var h=c.mesh=c.mesh||e.Mesh(u);h.wire||c.wire,h.wire=c.wire=f;function f(g){try{if(!g||!g.url)return x&&x(g);var b=g.url.replace(/^http/,"ws"),x=g.wire=new c.WebSocket(b);return x.onclose=function(){$(g),c.mesh.bye(g)},x.onerror=function(j){$(g)},x.onopen=function(){c.mesh.hi(g)},x.onmessage=function(j){j&&c.mesh.hear(j.data||j,g)},x}catch{c.mesh.bye(g)}}setTimeout(function(){!c.super&&u.on("out",{dam:"hi"})},1);var w=2*999;function $(g){clearTimeout(g.defer),c.peers[g.url]&&(p&&g.retry<=0||(g.retry=(g.retry||c.retry+1||60)-(-g.tried+(g.tried=+new Date)<w*4?1:0),g.defer=setTimeout(function b(){if(p&&p.hidden)return setTimeout(b,w);f(g)},w)))}var p=""+y!=typeof document&&document});var y})(t,"./websocket"),t(function(a){if(!(typeof Gun>"u")){var e=function(){},y;try{y=(Gun.window||e).localStorage}catch{}y||(Gun.log("Warning: No localStorage exists to persist data to!"),y={setItem:function(c,l){this[c]=l},removeItem:function(c){delete this[c]},getItem:function(c){return this[c]}});var u=JSON.stringifyAsync||function(c,l,s,h){var f;try{l(f,JSON.stringify(c,s,h))}catch(w){l(w)}};Gun.on("create",function c(l){this.to.next(l);var s=l.opt;l.graph;var h=[],f,w,$,p;if(s.localStorage===!1)return;s.prefix=s.file||"gun/";try{f=c[s.prefix]=c[s.prefix]||JSON.parse($=y.getItem(s.prefix))||{}}catch{f=c[s.prefix]={}}$=($||"").length,l.on("get",function(b){this.to.next(b);var x=b.get,j,i,_,T;!x||!(j=x["#"])||(i=f[j]||T,i&&(_=x["."])&&!Object.plain(_)&&(i=Gun.state.ify({},_,Gun.state.is(i,_),i[_],j)),Gun.on.get.ack(b,i))}),l.on("put",function(b){this.to.next(b);var x=b.put,j=x["#"],i=x["."],_=b["#"],T=b.ok||"";if(f[j]=Gun.state.ify(f[j],i,x[">"],x[":"],j),p&&$>4999880){l.on("in",{"@":_,err:"localStorage max!"});return}!b["@"]&&(!b._.via||Math.random()<T["@"]/T["/"])&&h.push(_),!w&&(w=setTimeout(g,9+$/333))});function g(){if(!h.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var b=h;clearTimeout(w),w=!1,h=[],u(f,function(x,j){try{!x&&y.setItem(s.prefix,j)}catch(i){x=p=i||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),l.on("localStorage:error",{err:x,get:s.prefix,put:f})),$=j.length,setTimeout.each(b,function(i){l.on("in",{"@":i,err:x,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var t=function(d){console.warn("Warning! Deprecated internal utility will break in next version:",d)},n=Gun;n.fn=n.fn||{is:function(d){return t("fn"),!!d&&typeof d=="function"}},n.bi=n.bi||{is:function(d){return t("bi"),d instanceof Boolean||typeof d=="boolean"}},n.num=n.num||{is:function(d){return t("num"),!a(d)&&(d-parseFloat(d)+1>=0||d===1/0||d===-1/0)}},n.text=n.text||{is:function(d){return t("text"),typeof d=="string"}},n.text.ify=n.text.ify||function(d){return t("text.ify"),n.text.is(d)?d:typeof JSON<"u"?JSON.stringify(d):d&&d.toString?d.toString():d},n.text.random=n.text.random||function(d,r){t("text.random");var v="";for(d=d||24,r=r||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";d>0;)v+=r.charAt(Math.floor(Math.random()*r.length)),d--;return v},n.text.match=n.text.match||function(d,r){var v,k;return t("text.match"),typeof d!="string"?!1:(typeof r=="string"&&(r={"=":r}),r=r||{},v=r["="]||r["*"]||r[">"]||r["<"],d===v?!0:k!==r["="]?!1:(v=r["*"]||r[">"]||r["<"],d.slice(0,(v||"").length)===v?!0:k!==r["*"]?!1:k!==r[">"]&&k!==r["<"]?d>=r[">"]&&d<=r["<"]:k!==r[">"]&&d>=r[">"]||k!==r["<"]&&d<=r["<"]))},n.text.hash=n.text.hash||function(d,r){if(t("text.hash"),typeof d=="string"){if(r=r||0,!d.length)return r;for(var v=0,k=d.length,M;v<k;++v)M=d.charCodeAt(v),r=(r<<5)-r+M,r|=0;return r}},n.list=n.list||{is:function(d){return t("list"),d instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(d){return t("list.sort"),function(r,v){return!r||!v?0:(r=r[d],v=v[d],r<v?-1:r>v?1:0)}},n.list.map=n.list.map||function(d,r,v){return t("list.map"),A(d,r,v)},n.list.index=1,n.obj=n.boj||{is:function(d){return t("obj"),d?d instanceof Object&&d.constructor===Object||Object.prototype.toString.call(d).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(d,r,v){return t("obj.put"),(d||{})[r]=v,d},n.obj.has=n.obj.has||function(d,r){return t("obj.has"),d&&Object.prototype.hasOwnProperty.call(d,r)},n.obj.del=n.obj.del||function(d,r){if(t("obj.del"),!!d)return d[r]=null,delete d[r],d},n.obj.as=n.obj.as||function(d,r,v,k){return t("obj.as"),d[r]=d[r]||(k===v?{}:v)},n.obj.ify=n.obj.ify||function(d){if(t("obj.ify"),_(d))return d;try{d=JSON.parse(d)}catch{d={}}return d},function(){var d;function r(v,k){D(this,k)&&d!==this[k]||(this[k]=v)}n.obj.to=n.obj.to||function(v,k){return t("obj.to"),k=k||{},A(v,r,k),k}}(),n.obj.copy=n.obj.copy||function(d){return t("obj.copy"),d&&JSON.parse(JSON.stringify(d))},function(){function d(r,v){var k=this.n,M;if(!(k&&(v===k||_(k)&&D(k,v)))&&M!==v)return!0}n.obj.empty=n.obj.empty||function(r,v){return t("obj.empty"),r?!A(r,d,{n:v}):!0}}(),function(){function d(k,M){if(arguments.length===2){d.r=d.r||{},d.r[k]=M;return}d.r=d.r||[],d.r.push(k)}var r=Object.keys,v;Object.keys=Object.keys||function(k){return v(k,function(M,G,S){S(G)})},n.obj.map=v=n.obj.map||function(k,M,G){t("obj.map");var S,N=0,B,C,H,P,W=typeof M=="function";if(d.r=S,r&&_(k)&&(H=r(k),P=!0),G=G||{},a(k)||H)for(B=(H||k).length;N<B;N++){var U=N+n.list.index;if(W){if(C=P?M.call(G,k[H[N]],H[N],d):M.call(G,k[N],U,d),C!==S)return C}else if(M===k[P?H[N]:N])return H?H[N]:U}else for(N in k)if(W){if(D(k,N)&&(C=G?M.call(G,k[N],N,d):M(k[N],N,d),C!==S))return C}else if(M===k[N])return N;return W?d.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(d){return t("time"),d?d instanceof Date:+new Date().getTime()};var j=n.fn.is,a=n.list.is,i=n.obj,_=i.is,D=i.has,A=i.map,e={};e.is=function(d){return t("val.is"),d===E?!1:d===null?!0:d===1/0?!1:c(d)||u(d)||p(d)?!0:e.link.is(d)||!1},e.link=e.rel={_:"#"},function(){e.link.is=function(r){if(t("val.link.is"),r&&r[y]&&!r._&&_(r)){var v={};if(A(r,d,v),v.id)return v.id}return!1};function d(r,v){var k=this;if(k.id)return k.id=!1;if(v==y&&c(r))k.id=r;else return k.id=!1}}(),e.link.ify=function(d){return t("val.link.ify"),O({},y,d)},n.obj.has._=".";var y=e.link._,E,u=n.bi.is,p=n.num.is,c=n.text.is,i=n.obj,_=i.is,O=i.put,A=i.map;n.val=n.val||e;var l={_:"_"};l.soul=function(d,r){return t("node.soul"),d&&d._&&d._[r||f]},l.soul.ify=function(d,r){return t("node.soul.ify"),r=typeof r=="string"?{soul:r}:r||{},d=d||{},d._=d._||{},d._[f]=r.soul||d._[f]||h(),d},l.soul._=e.link._,function(){l.is=function(r,v,k){t("node.is");var M;return _(r)&&(M=l.soul(r))?!A(r,d,{as:k,cb:v,s:M,n:r}):!1};function d(r,v){if(v!==l._){if(!e.is(r))return!0;this.cb&&this.cb.call(this.as,r,v,this.n,this.s)}}}(),function(){l.ify=function(r,v,k){return t("node.ify"),v?typeof v=="string"?v={soul:v}:typeof v=="function"&&(v={map:v}):v={},v.map&&(v.node=v.map.call(k,r,E,v.node||{})),(v.node=l.soul.ify(v.node||{},v))&&A(r,d,{o:v,as:k}),v.node};function d(r,v){var k=this.o,M,G;if(k.map){M=k.map.call(this.as,r,""+v,k.node),G===M?T(k.node,v):k.node&&(k.node[v]=M);return}e.is(r)&&(k.node[v]=r)}}();var i=n.obj,_=i.is,T=i.del,A=i.map,s=n.text,h=s.random,f=l.soul._,E;n.node=n.node||l;var w=n.state;w.lex=function(){return t("state.lex"),w().toString(36).replace(".","")},w.to=function(d,r,v){t("state.to");var k=(d||{})[r];return _(k)&&(k=I(k)),w.ify(v,r,w.is(d,r),k,l.soul(d))},function(){w.map=function(r,v,k){t("state.map");var M,G=_(G=r||v)?G:null;return r=j(r=r||v)?r:null,G&&!r?(v=p(v)?v:w(),G[b]=G[b]||{},A(G,d,{o:G,s:v}),G):(k=k||_(v)?v:M,v=p(v)?v:w(),function(S,N,B,C){if(!r)return d.call({o:B,s:v},S,N),S;r.call(k||this||{},S,N,B,C),!(D(B,N)&&M===B[N])&&d.call({o:B,s:v},S,N)})};function d(r,v){b!==v&&w.ify(this.o,v,this.s)}}();var i=n.obj;i.as;var D=i.has,_=i.is,A=i.map,I=i.copy,$=n.num,p=$.is,g=n.fn,j=g.is,b=l._,E,x={};(function(){x.is=function(v,k,M,G){return t("graph.is"),!v||!_(v)||m(v)?!1:!A(v,d,{cb:k,fn:M,as:G})};function d(v,k){if(!v||k!==l.soul(v)||!l.is(v,this.fn,this.as))return!0;this.cb&&(r.n=v,r.as=this.as,this.cb.call(r.as,v,k,r))}function r(v){v&&l.is(r.n,v,r.as)}})(),function(){x.ify=function(G,S,N){t("graph.ify");var B={path:[],obj:G};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof N=="string"&&(S.soul=S.soul||N,N=E),S.soul&&(B.link=e.link.ify(S.soul)),S.shell=(N||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||N,d(S,B),S.root=B.node,S.graph};function d(G,S){var N;return(N=M(G,S))?N:(S.env=G,S.soul=v,l.ify(S.obj,r,S)&&(S.link=S.link||e.link.ify(l.soul(S.node)),S.obj!==G.shell&&(G.graph[e.link.is(S.link)]=S.node)),S)}function r(G,S,N){var B=this,C=B.env,H,P;if(l._===S&&D(G,e.link._))return N._;if(H=k(G,S,N,B,C)){if(S||(B.node=B.node||N||{},D(G,l._)&&l.soul(G)&&(B.node._=I(G._)),B.node=l.soul.ify(B.node,e.link.is(B.link)),B.link=B.link||e.link.ify(l.soul(B.node))),(P=C.map)&&(P.call(C.as||{},G,S,N,B),D(N,S))){if(G=N[S],E===G){T(N,S);return}if(!(H=k(G,S,N,B,C)))return}if(!S)return B.node;if(H===!0)return G;if(P=d(C,{obj:G,path:B.path.concat(S)}),!!P.node)return P.link}}function v(G){var S=this,N=e.link.is(S.link),B=S.env.graph;S.link=S.link||e.link.ify(G),S.link[e.link._]=G,S.node&&S.node[l._]&&(S.node[l._][e.link._]=G),D(B,N)&&(B[G]=B[N],T(B,N))}function k(G,S,N,B,C){var H;if(e.is(G))return!0;if(_(G))return 1;if(H=C.invalid)return G=H.call(C.as||{},G,S,N),k(G,S,N,B,C);C.err="Invalid value at '"+B.path.concat(S).join(".")+"'!",n.list.is(G)&&(C.err+=" Use `.set(item)` instead of an Array.")}function M(G,S){for(var N=G.seen,B=N.length,C;B--;)if(C=N[B],S.obj===C.obj)return C;N.push(S)}}(),x.node=function(d){t("graph.node");var r=l.soul(d);if(r)return O({},r,d)},function(){x.to=function(r,v,k){if(t("graph.to"),!!r){var M={};return k=k||{seen:{}},A(r[v],d,{obj:M,graph:r,opt:k}),M}};function d(r,v){var k,M;if(l._===v){if(m(r,e.link._))return;this.obj[v]=I(r);return}if(!(k=e.link.is(r))){this.obj[v]=r;return}if(M=this.opt.seen[k]){this.obj[v]=M;return}this.obj[v]=this.opt.seen[k]=x.to(this.graph,k,this.opt)}}();var j=n.fn.is,i=n.obj,_=i.is,T=i.del,D=i.has,m=i.empty,O=i.put,A=i.map,I=i.copy,E;n.graph=n.graph||x}}()})(Ht);var Le=Ht.exports,Ue=Le;const Ke=ze(Ue),Ve=Ke(["http://gun-manhattan.herokuapp.com/gun"]),oe=Ve.get("cards"),Tt=Ct([]);let Gt=null;const Qt=o=>{Gt||(Gt=setTimeout(()=>{oe.put({data:JSON.stringify(o)}),Gt=null},1e3))};oe.on(o=>{Tt.set(JSON.parse(o.data))});function Xt(o,t,n){const a=o.slice();return a[5]=t[n],a}function Qe(o){let t;return{c(){t=at("add two sided")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Xe(o){let t;return{c(){t=at("add one sided")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Ye(o){let t;return{c(){t=at("save")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Ze(o){let t;return{c(){t=at("remove")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Yt(o){let t,n,a,e,y,u;n=new We({props:{card:o[5]}});function c(){return o[4](o[5])}return e=new wt({props:{colour:"red",$$slots:{default:[Ze]},$$scope:{ctx:o}}}),e.$on("click",c),{c(){t=z("div"),Y(n.$$.fragment),a=X(),Y(e.$$.fragment),y=X(),F(t,"class","wrapper svelte-z9e1s4")},m(l,s){q(l,t,s),K(n,t,null),Z(t,a),K(e,t,null),Z(t,y),u=!0},p(l,s){o=l;const h={};s&1&&(h.card=o[5]),n.$set(h);const f={};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(l){u||(R(n.$$.fragment,l),R(e.$$.fragment,l),u=!0)},o(l){L(n.$$.fragment,l),L(e.$$.fragment,l),u=!1},d(l){l&&J(t),V(n),V(e)}}}function tn(o){let t,n,a,e,y,u,c,l,s,h,f;n=new wt({props:{colour:"blue",$$slots:{default:[Qe]},$$scope:{ctx:o}}}),n.$on("click",o[1]),e=new wt({props:{colour:"blue",$$slots:{default:[Xe]},$$scope:{ctx:o}}}),e.$on("click",o[2]),u=new wt({props:{$$slots:{default:[Ye]},$$scope:{ctx:o}}}),u.$on("click",o[3]);let w=St(o[0]),$=[];for(let g=0;g<w.length;g+=1)$[g]=Yt(Xt(o,w,g));const p=g=>L($[g],1,1,()=>{$[g]=null});return{c(){t=z("section"),Y(n.$$.fragment),a=X(),Y(e.$$.fragment),y=X(),Y(u.$$.fragment),c=X(),l=z("h1"),l.textContent="cards",s=X(),h=z("section");for(let g=0;g<$.length;g+=1)$[g].c();F(t,"class","button-container svelte-z9e1s4"),F(h,"class","container svelte-z9e1s4")},m(g,b){q(g,t,b),K(n,t,null),Z(t,a),K(e,t,null),Z(t,y),K(u,t,null),q(g,c,b),q(g,l,b),q(g,s,b),q(g,h,b);for(let x=0;x<$.length;x+=1)$[x]&&$[x].m(h,null);f=!0},p(g,[b]){const x={};b&256&&(x.$$scope={dirty:b,ctx:g}),n.$set(x);const j={};b&256&&(j.$$scope={dirty:b,ctx:g}),e.$set(j);const i={};if(b&256&&(i.$$scope={dirty:b,ctx:g}),u.$set(i),b&1){w=St(g[0]);let _;for(_=0;_<w.length;_+=1){const T=Xt(g,w,_);$[_]?($[_].p(T,b),R($[_],1)):($[_]=Yt(T),$[_].c(),R($[_],1),$[_].m(h,null))}for(It(),_=w.length;_<$.length;_+=1)p(_);Bt()}},i(g){if(!f){R(n.$$.fragment,g),R(e.$$.fragment,g),R(u.$$.fragment,g);for(let b=0;b<w.length;b+=1)R($[b]);f=!0}},o(g){L(n.$$.fragment,g),L(e.$$.fragment,g),L(u.$$.fragment,g),$=$.filter(Boolean);for(let b=0;b<$.length;b+=1)L($[b]);f=!1},d(g){g&&(J(t),J(c),J(l),J(s),J(h)),V(n),V(e),V(u),re($,g)}}}function en(o,t,n){let a;return ee(o,Tt,l=>n(0,a=l)),[a,()=>{Tt.set([...a,Rt(2)])},()=>{Tt.set([...a,Rt(1)]),console.log(a.length)},()=>{Qt(a)},l=>{Qt(a.filter(s=>s.id!==l.id))}]}class nn extends it{constructor(t){super(),rt(this,t,en,tn,et,{})}}const Et=Ct(window.location.pathname),rn=Ct([]);Et.subscribe(o=>{rn.set(o.split("/").filter(Boolean).splice(1))});const on=[{name:"passive aggressive",path:"/",component:nn}];function un(o){let t,n,a;var e=o[0].component;function y(u,c){return{}}return e&&(t=qt(e,y())),{c(){t&&Y(t.$$.fragment),n=ye()},m(u,c){t&&K(t,u,c),q(u,n,c),a=!0},p(u,[c]){if(c&1&&e!==(e=u[0].component)){if(t){It();const l=t;L(l.$$.fragment,1,0,()=>{V(l,1)}),Bt()}e?(t=qt(e,y()),Y(t.$$.fragment),R(t.$$.fragment,1),K(t,n.parentNode,n)):t=null}},i(u){a||(t&&R(t.$$.fragment,u),a=!0)},o(u){t&&L(t.$$.fragment,u),a=!1},d(u){u&&J(n),t&&V(t,u)}}}function fn(o,t,n){let a,e;ee(o,Et,u=>n(1,e=u));const y={name:"404",path:"/404",component:xe};return window.onpopstate=()=>{_e(Et,e=window.location.pathname,e)},o.$$.update=()=>{o.$$.dirty&2&&n(0,a=on.find(u=>(document.title=u.name,u.path===e||u.path===e.split("/").filter(Boolean)[0]))??y)},[a,e]}class an extends it{constructor(t){super(),rt(this,t,fn,un,et,{})}}new an({target:document.getElementById("app")});
