var ve=Object.defineProperty;var be=(r,t,e)=>t in r?ve(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var It=(r,t,e)=>be(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(n){if(n.ep)return;n.ep=!0;const d=e(n);fetch(n.href,d)}})();function Z(){}function ge(r,t){for(const e in t)r[e]=t[e];return r}function ce(r){return r()}function Ut(){return Object.create(null)}function Ot(r){r.forEach(ce)}function se(r){return typeof r=="function"}function ht(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function it(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function ke(r){return Object.keys(r).length===0}function he(r,...t){if(r==null){for(const i of t)i(void 0);return Z}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function me(r){let t;return he(r,e=>t=e)(),t}function $e(r,t,e){r.$$.on_destroy.push(he(t,e))}function we(r,t,e,i){if(r){const n=de(r,t,e,i);return r[0](n)}}function de(r,t,e,i){return r[1]&&i?ge(e.ctx.slice(),r[1](i(t))):e.ctx}function Te(r,t,e,i){if(r[2]&&i){const n=r[2](i(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const d=[],l=Math.max(t.dirty.length,n.length);for(let a=0;a<l;a+=1)d[a]=t.dirty[a]|n[a];return d}return t.dirty|n}return t.dirty}function je(r,t,e,i,n,d){if(n){const l=de(t,e,i,d);r.p(l,n)}}function Se(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function Lt(r){return r??""}function Q(r,t){r.appendChild(t)}function J(r,t,e){r.insertBefore(t,e||null)}function P(r){r.parentNode&&r.parentNode.removeChild(r)}function wt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function U(r){return document.createElement(r)}function tt(r){return document.createTextNode(r)}function z(){return tt(" ")}function Jt(){return tt("")}function vt(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function H(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Oe(r){return Array.from(r.childNodes)}function De(r,t){t=""+t,r.data!==t&&(r.data=t)}function nt(r,t,e,i){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function Ae(r,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:i})}let Tt;function mt(r){Tt=r}function pe(){if(!Tt)throw new Error("Function called outside component initialization");return Tt}function xe(r){pe().$$.on_mount.push(r)}function Ge(){const r=pe();return(t,e,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[t];if(n){const d=Ae(t,e,{cancelable:i});return n.slice().forEach(l=>{l.call(r,d)}),!d.defaultPrevented}return!0}}function Ne(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const _t=[],Bt=[];let yt=[];const zt=[],Ee=Promise.resolve();let Ht=!1;function Ie(){Ht||(Ht=!0,Ee.then(_e))}function jt(r){yt.push(r)}const Mt=new Set;let dt=0;function _e(){if(dt!==0)return;const r=Tt;do{try{for(;dt<_t.length;){const t=_t[dt];dt++,mt(t),Me(t.$$)}}catch(t){throw _t.length=0,dt=0,t}for(mt(null),_t.length=0,dt=0;Bt.length;)Bt.pop()();for(let t=0;t<yt.length;t+=1){const e=yt[t];Mt.has(e)||(Mt.add(e),e())}yt.length=0}while(_t.length);for(;zt.length;)zt.pop()();Ht=!1,Mt.clear(),mt(r)}function Me(r){if(r.fragment!==null){r.update(),Ot(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(jt)}}function Ce(r){const t=[],e=[];yt.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),yt=t}const Gt=new Set;let lt;function ct(){lt={r:0,c:[],p:lt}}function st(){lt.r||Ot(lt.c),lt=lt.p}function q(r,t){r&&r.i&&(Gt.delete(r),r.i(t))}function W(r,t,e,i){if(r&&r.o){if(Gt.has(r))return;Gt.add(r),lt.c.push(()=>{Gt.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}function rt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function X(r){r&&r.c()}function K(r,t,e){const{fragment:i,after_update:n}=r.$$;i&&i.m(t,e),jt(()=>{const d=r.$$.on_mount.map(ce).filter(se);r.$$.on_destroy?r.$$.on_destroy.push(...d):Ot(d),r.$$.on_mount=[]}),n.forEach(jt)}function V(r,t){const e=r.$$;e.fragment!==null&&(Ce(e.after_update),Ot(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Be(r,t){r.$$.dirty[0]===-1&&(_t.push(r),Ie(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function bt(r,t,e,i,n,d,l=null,a=[-1]){const h=Tt;mt(r);const u=r.$$={fragment:null,ctx:[],props:d,update:Z,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Ut(),dirty:a,skip_bound:!1,root:t.target||h.$$.root};l&&l(u.root);let s=!1;if(u.ctx=e?e(r,t.props||{},(c,y,...T)=>{const _=T.length?T[0]:y;return u.ctx&&n(u.ctx[c],u.ctx[c]=_)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](_),s&&Be(r,c)),y}):[],u.update(),s=!0,Ot(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const c=Oe(t.target);u.fragment&&u.fragment.l(c),c.forEach(P)}else u.fragment&&u.fragment.c();t.intro&&q(r.$$.fragment),K(r,t.target,t.anchor),_e()}mt(h)}class gt{constructor(){It(this,"$$");It(this,"$$set")}$destroy(){V(this,1),this.$destroy=Z}$on(t,e){if(!se(e))return Z;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const He="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(He);function Pe(r){let t,e,i,n,d;const l=r[2].default,a=we(l,r,r[1],null);return{c(){t=U("button"),a&&a.c(),H(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(h,u){J(h,t,u),a&&a.m(t,null),i=!0,n||(d=vt(t,"click",r[3]),n=!0)},p(h,[u]){a&&a.p&&(!i||u&2)&&je(a,l,h,h[1],i?Te(l,h[1],u,null):Se(h[1]),null),(!i||u&1&&e!==(e="button "+h[0]+" svelte-zqnkwt"))&&H(t,"class",e)},i(h){i||(q(a,h),i=!0)},o(h){W(a,h),i=!1},d(h){h&&P(t),a&&a.d(h),n=!1,d()}}}function Je(r,t,e){let{$$slots:i={},$$scope:n}=t,{colour:d="green"}=t;function l(a){Ne.call(this,r,a)}return r.$$set=a=>{"colour"in a&&e(0,d=a.colour),"$$scope"in a&&e(1,n=a.$$scope)},[d,n,i,l]}class at extends gt{constructor(t){super(),bt(this,t,Je,Pe,ht,{colour:0})}}const St=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},ot=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,Kt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Fe(r){let t,e,i;return{c(){t=U("div"),H(t,"contenteditable","true"),H(t,"class","cardText svelte-1udja8b"),r[0].text===void 0&&jt(()=>r[4].call(t))},m(n,d){J(n,t,d),r[0].text!==void 0&&(t.innerText=r[0].text),e||(i=vt(t,"input",r[4]),e=!0)},p(n,d){d&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&P(t),e=!1,i()}}}function qe(r){let t,e;return{c(){t=U("img"),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-1udja8b")},m(i,n){J(i,t,n)},p(i,n){n&1&&!it(t.src,e=ot(i[0].cardType.type))&&H(t,"src",e)},d(i){i&&P(t)}}}function Re(r){let t,e;function i(l,a){return l[2]?qe:Fe}let n=i(r),d=n(r);return{c(){t=U("div"),e=U("div"),d.c(),H(e,"class","card svelte-1udja8b"),nt(e,"--colour",r[3]),H(t,"class","wrapper svelte-1udja8b"),nt(t,"--rotation",r[1]+"deg")},m(l,a){J(l,t,a),Q(t,e),d.m(e,null)},p(l,[a]){n===(n=i(l))&&d?d.p(l,a):(d.d(1),d=n(l),d&&(d.c(),d.m(e,null))),a&8&&nt(e,"--colour",l[3]),a&2&&nt(t,"--rotation",l[1]+"deg")},i:Z,o:Z,d(l){l&&P(t),d.d()}}}function We(r,t,e){let i,{card:n}=t,{rotation:d=0}=t,{back:l=!1}=t;function a(){n.text=this.innerText,e(0,n)}return r.$$set=h=>{"card"in h&&e(0,n=h.card),"rotation"in h&&e(1,d=h.rotation),"back"in h&&e(2,l=h.back)},r.$$.update=()=>{r.$$.dirty&1&&e(3,i=St(n.cardType.type))},[n,d,l,i,a]}class Vt extends gt{constructor(t){super(),bt(this,t,We,Re,ht,{card:0,rotation:1,back:2})}}function Qt(r,t,e){const i=r.slice();return i[12]=t[e],i}function Xt(r){let t,e,i,n,d,l,a,h,u=r[5]&&Yt(r),s=!r[3]&&te(r);return{c(){t=U("div"),e=U("img"),n=z(),u&&u.c(),d=z(),s&&s.c(),l=Jt(),it(e.src,i=ot(r[0]))||H(e,"src",i),H(e,"alt","My Icon"),H(e,"class","cardIcon svelte-lm5vvd"),H(t,"class","select svelte-lm5vvd")},m(c,y){J(c,t,y),Q(t,e),Q(t,n),u&&u.m(t,null),J(c,d,y),s&&s.m(c,y),J(c,l,y),a||(h=vt(e,"click",r[8]),a=!0)},p(c,y){y&1&&!it(e.src,i=ot(c[0]))&&H(e,"src",i),c[5]?u?u.p(c,y):(u=Yt(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null),c[3]?s&&(s.d(1),s=null):s?s.p(c,y):(s=te(c),s.c(),s.m(l.parentNode,l))},d(c){c&&(P(t),P(d),P(l)),u&&u.d(),s&&s.d(c),a=!1,h()}}}function Yt(r){let t,e=rt(r[4]),i=[];for(let n=0;n<e.length;n+=1)i[n]=Zt(Qt(r,e,n));return{c(){t=U("div");for(let n=0;n<i.length;n+=1)i[n].c();H(t,"class","options svelte-lm5vvd"),nt(t,"--colour",r[6])},m(n,d){J(n,t,d);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(t,null)},p(n,d){if(d&49){e=rt(n[4]);let l;for(l=0;l<e.length;l+=1){const a=Qt(n,e,l);i[l]?i[l].p(a,d):(i[l]=Zt(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}d&64&&nt(t,"--colour",n[6])},d(n){n&&P(t),wt(i,n)}}}function Zt(r){let t,e,i,n,d;function l(){return r[9](r[12])}return{c(){t=U("img"),it(t.src,e=ot(r[12]))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class",i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(a,h){J(a,t,h),n||(d=vt(t,"click",l),n=!0)},p(a,h){r=a,h&16&&!it(t.src,e=ot(r[12]))&&H(t,"src",e),h&17&&i!==(i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&H(t,"class",i)},d(a){a&&P(t),n=!1,d()}}}function te(r){let t,e,i,n,d,l,a;return{c(){t=U("input"),e=z(),i=U("label"),n=tt("Passive"),H(t,"type","checkbox"),H(t,"id",r[7]),H(t,"class","hidden"),H(i,"for",r[7]),H(i,"class",d="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(h,u){J(h,t,u),t.checked=r[1],J(h,e,u),J(h,i,u),Q(i,n),l||(a=vt(t,"change",r[10]),l=!0)},p(h,u){u&2&&(t.checked=h[1]),u&2&&d!==(d="passive no-select "+(h[1]?"":"invisible")+" svelte-lm5vvd")&&H(i,"class",d)},d(h){h&&(P(t),P(e),P(i)),l=!1,a()}}}function Ue(r){let t,e=!r[2]&&Xt(r);return{c(){e&&e.c(),t=Jt()},m(i,n){e&&e.m(i,n),J(i,t,n)},p(i,[n]){i[2]?e&&(e.d(1),e=null):e?e.p(i,n):(e=Xt(i),e.c(),e.m(t.parentNode,t))},i:Z,o:Z,d(i){i&&P(t),e&&e.d(i)}}}function Le(r,t,e){let i,{cardType:n}=t,{passive:d=!1}=t,{back:l=!1}=t,{noPassive:a=!1}=t;const h=Math.random().toString(36).substring(7),u=Ge();let s=!1,{names:c=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const y=()=>e(5,s=!s),T=g=>{e(0,n=g),e(5,s=!1)};function _(){d=this.checked,e(1,d)}return r.$$set=g=>{"cardType"in g&&e(0,n=g.cardType),"passive"in g&&e(1,d=g.passive),"back"in g&&e(2,l=g.back),"noPassive"in g&&e(3,a=g.noPassive),"names"in g&&e(4,c=g.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,i=St(n)),r.$$.dirty&1&&u("type",n),r.$$.dirty&2&&u("passive",d)},[n,d,l,a,c,s,i,h,y,T,_]}class Nt extends gt{constructor(t){super(),bt(this,t,Le,Ue,ht,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function ze(r){let t,e;return{c(){t=U("img"),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-15hk4fg")},m(i,n){J(i,t,n)},p(i,n){n&1&&!it(t.src,e=ot(i[0].cardType.type))&&H(t,"src",e)},i:Z,o:Z,d(i){i&&P(t)}}}function Ke(r){let t,e,i,n,d,l,a;return e=new Nt({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=U("p"),X(e.$$.fragment),i=z(),n=U("div"),H(t,"class","svelte-15hk4fg"),H(n,"contenteditable","true"),H(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&jt(()=>r[3].call(n))},m(h,u){J(h,t,u),K(e,t,null),J(h,i,u),J(h,n,u),r[0].text!==void 0&&(n.innerText=r[0].text),d=!0,l||(a=vt(n,"input",r[3]),l=!0)},p(h,u){const s={};u&1&&(s.cardType=h[0].cardType.type),u&1&&(s.passive=h[0].cardType.passive),e.$set(s),u&1&&h[0].text!==n.innerText&&(n.innerText=h[0].text)},i(h){d||(q(e.$$.fragment,h),d=!0)},o(h){W(e.$$.fragment,h),d=!1},d(h){h&&(P(t),P(i),P(n)),V(e),l=!1,a()}}}function Ve(r){let t,e,i,n;const d=[Ke,ze],l=[];function a(h,u){return h[1]?1:0}return e=a(r),i=l[e]=d[e](r),{c(){t=U("div"),i.c(),H(t,"class","card svelte-15hk4fg"),nt(t,"--colour",St(r[0].cardType.type))},m(h,u){J(h,t,u),l[e].m(t,null),n=!0},p(h,[u]){let s=e;e=a(h),e===s?l[e].p(h,u):(ct(),W(l[s],1,1,()=>{l[s]=null}),st(),i=l[e],i?i.p(h,u):(i=l[e]=d[e](h),i.c()),q(i,1),i.m(t,null)),(!n||u&1)&&nt(t,"--colour",St(h[0].cardType.type))},i(h){n||(q(i),n=!0)},o(h){W(i),n=!1},d(h){h&&P(t),l[e].d()}}}function Qe(r,t,e){let{card:i}=t,{back:n=!1}=t;const d=({detail:a})=>e(0,i.cardType.type=a,i);function l(){i.text=this.innerText,e(0,i)}return r.$$set=a=>{"card"in a&&e(0,i=a.card),"back"in a&&e(1,n=a.back)},[i,n,d,l]}class Xe extends gt{constructor(t){super(),bt(this,t,Qe,Ve,ht,{card:0,back:1})}}function Ye(r){let t,e;return t=new Xe({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const d={};n&1&&(d.card=i[0].cardHalf1),n&2&&(d.back=i[1]),t.$set(d)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function Ze(r){let t,e,i,n,d,l,a,h,u,s;return e=new Nt({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),e.$on("type",r[2]),e.$on("passive",r[3]),n=new Vt({props:{card:r[0].cardHalf1,back:r[1]}}),l=new Vt({props:{card:r[0].cardHalf2,rotation:180,back:r[1]}}),u=new Nt({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),u.$on("type",r[4]),u.$on("passive",r[5]),{c(){t=U("p"),X(e.$$.fragment),i=z(),X(n.$$.fragment),d=z(),X(l.$$.fragment),a=z(),h=U("p"),X(u.$$.fragment),H(t,"class","first svelte-1fv14re"),H(h,"class","second svelte-1fv14re")},m(c,y){J(c,t,y),K(e,t,null),J(c,i,y),K(n,c,y),J(c,d,y),K(l,c,y),J(c,a,y),J(c,h,y),K(u,h,null),s=!0},p(c,y){const T={};y&1&&(T.cardType=c[0].cardHalf1.cardType.type),y&1&&(T.passive=c[0].cardHalf1.cardType.passive),y&2&&(T.back=c[1]),e.$set(T);const _={};y&1&&(_.card=c[0].cardHalf1),y&2&&(_.back=c[1]),n.$set(_);const g={};y&1&&(g.card=c[0].cardHalf2),y&2&&(g.back=c[1]),l.$set(g);const $={};y&1&&($.cardType=c[0].cardHalf2.cardType.type),y&1&&($.passive=c[0].cardHalf2.cardType.passive),y&2&&($.back=c[1]),u.$set($)},i(c){s||(q(e.$$.fragment,c),q(n.$$.fragment,c),q(l.$$.fragment,c),q(u.$$.fragment,c),s=!0)},o(c){W(e.$$.fragment,c),W(n.$$.fragment,c),W(l.$$.fragment,c),W(u.$$.fragment,c),s=!1},d(c){c&&(P(t),P(i),P(d),P(a),P(h)),V(e),V(n,c),V(l,c),V(u)}}}function tn(r){let t,e,i,n,d;const l=[Ze,Ye],a=[];function h(u,s){return u[0].cardHalf2?0:1}return e=h(r),i=a[e]=l[e](r),{c(){t=U("div"),i.c(),H(t,"class",n=Lt(`card ${r[1]&&"back"}`)+" svelte-1fv14re")},m(u,s){J(u,t,s),a[e].m(t,null),d=!0},p(u,[s]){let c=e;e=h(u),e===c?a[e].p(u,s):(ct(),W(a[c],1,1,()=>{a[c]=null}),st(),i=a[e],i?i.p(u,s):(i=a[e]=l[e](u),i.c()),q(i,1),i.m(t,null)),(!d||s&2&&n!==(n=Lt(`card ${u[1]&&"back"}`)+" svelte-1fv14re"))&&H(t,"class",n)},i(u){d||(q(i),d=!0)},o(u){W(i),d=!1},d(u){u&&P(t),a[e].d()}}}function en(r,t,e){let{card:i}=t,{back:n=!1}=t;const d=({detail:u})=>e(0,i.cardHalf1.cardType.type=u,i),l=({detail:u})=>e(0,i.cardHalf1.cardType.passive=u,i),a=({detail:u})=>{i.cardHalf2&&e(0,i.cardHalf2.cardType.type=u,i)},h=({detail:u})=>{i.cardHalf2&&e(0,i.cardHalf2.cardType.passive=u,i)};return r.$$set=u=>{"card"in u&&e(0,i=u.card),"back"in u&&e(1,n=u.back)},[i,n,d,l,a,h]}class Ft extends gt{constructor(t){super(),bt(this,t,en,tn,ht,{card:0,back:1})}}const ee=(r,t=9)=>{const e=[];let i=0;for(;i<r.length;)e.push(r.slice(i,t+i)),i+=t;return e};function nn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function rn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qt={exports:{}};qt.exports;(function(r){(function(){function t(i,n){return n?rn(i):i.slice?t[d(i)]:function(l,a){i(l={exports:{}}),t[d(a)]=l.exports};function d(l){return l.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(i){String.random=function(d,l){var a="";for(d=d||24,l=l||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";d-- >0;)a+=l.charAt(Math.floor(Math.random()*l.length));return a},String.match=function(d,l){var a,h;return typeof d!="string"?!1:(typeof l=="string"&&(l={"=":l}),l=l||{},a=l["="]||l["*"]||l[">"]||l["<"],d===a?!0:h!==l["="]?!1:(a=l["*"]||l[">"],d.slice(0,(a||"").length)===a?!0:h!==l["*"]?!1:h!==l[">"]&&h!==l["<"]?d>=l[">"]&&d<=l["<"]:h!==l[">"]&&d>=l[">"]||h!==l["<"]&&d<=l["<"]))},String.hash=function(d,l){if(typeof d=="string"){if(l=l||0,!d.length)return l;for(var a=0,h=d.length,u;a<h;++a)u=d.charCodeAt(a),l=(l<<5)-l+u,l|=0;return l}};var n=Object.prototype.hasOwnProperty;Object.plain=function(d){return d?d instanceof Object&&d.constructor===Object||Object.prototype.toString.call(d).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(d,l){for(var a in d)if(n.call(d,a)&&(!l||l.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(d){var l=[];for(var a in d)n.call(d,a)&&l.push(a);return l},function(){var d,l=setTimeout,a=0,h=0,u=typeof setImmediate!=""+d&&setImmediate||function(c,y){return typeof MessageChannel==""+d?l:((c=new MessageChannel).port1.onmessage=function(T){T.data==""&&y()},function(T){y=T,c.port2.postMessage("")})}(),s=l.check=l.check||typeof performance!=""+d&&performance||{now:function(){return+new Date}};l.hold=l.hold||9,l.poll=l.poll||function(c){if(l.hold>=s.now()-a&&h++<3333){c();return}u(function(){a=s.now(),c()},h=0)}}(),function(){var d=setTimeout,l=d.turn=d.turn||function(y){a.push(y)==1&&h(c)},a=l.s=[],h=d.poll,u=0,s,c=function(){(s=a[u++])&&s(),(u==a.length||u==99)&&(a=l.s=a.slice(u),u=0),a.length&&h(c)}}(),function(){var d,l=setTimeout,a=l.turn;(l.each=l.each||function(h,u,s,c){c=c||9,function y(T,_,g){if(_=(T=(h||[]).splice(0,c)).length){for(var $=0;$<_&&d===(g=u(T[$]));$++);if(d===g){a(y);return}}s&&s(g)}()})()}()})(t,"./shim"),t(function(i){i.exports=function n(s,l,a){if(!s)return{to:n};var h,u=typeof l=="function",s=(this.tag||(this.tag={}))[s]||u&&(this.tag[s]={tag:s,to:n._={next:function(y){var T;(T=this.to)&&T.next(y)}}});if(u){var c={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:l,the:s,on:this,as:a};return(c.back=s.last||s).to=c,s.last=c}return(s=s.to)&&h!==l&&s.next(l),s}})(t,"./onto"),t(function(i){i.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(i){t("./shim");function n(){var s=+new Date;return h<s?(l=0,h=s+n.drift):h=s+(l+=1)/a+n.drift}n.drift=0;var d=-1/0,l=0,a=999,h=d,u;n.is=function(s,c,y){var T=c&&s&&s._&&s._[">"]||y;if(T)return typeof(T=T[c])=="number"?T:d},n.ify=function(s,c,y,T,_){(s=s||{})._=s._||{},_&&(s._["#"]=_);var g=s._[">"]||(s._[">"]={});return u!==c&&c!=="_"&&(typeof y=="number"&&(g[c]=y),u!==T&&(s[c]=T)),s},i.exports=n})(t,"./state"),t(function(i){t("./shim");function n(d){var l={s:{}},a=l.s;d=d||{max:999,age:1e3*9},l.check=function(u){return a[u]?h(u):!1};var h=l.track=function(u){var s=a[u]||(a[u]={});return s.was=l.now=+new Date,l.to||(l.to=setTimeout(l.drop,d.age+9)),h.ed&&h.ed(u),s};return l.drop=function(u){l.to=null,l.now=+new Date;var s=Object.keys(a);console.STAT&&console.STAT(l.now,+new Date-l.now,"dup drop keys"),setTimeout.each(s,function(c){var y=a[c];y&&(u||d.age)>l.now-y.was||delete a[c]},0,99)},l}i.exports=n})(t,"./dup"),t(function(i){t("./onto"),i.exports=function(l,a){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof l!="function"){if(!l)return;var s=l["#"]||l,u=(this.tag||"")[s];return u?(a&&(u=this.on(s,a),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},h)),!0):void 0}var s=a&&a["#"]||n(9);if(!l)return s;var c=this.on(s,l,a);return c.err=c.err||setTimeout(function(){c.off(),c.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(i){function n(_){return _ instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:_}):new n(_)}n.is=function(_){return _ instanceof n||_&&_._&&_===_._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||n.on,o.ask=o.ask||n.ask,o.dup=o.dup||n.dup();var b=o.$.opt(o.opt);return o.once||(o.on("in",_,o),o.on("out",_,o),o.on("put",A,o),n.on("create",o),o.on("create",o)),o.once=1,b};function _(o){if(o){if(o.out===_){this.to.next(o);return}var b=this,m=b.as,I=m.at||m,N=I.$,S=I.dup,E,M=o.DBG;if((E=o["#"])||(E=o["#"]=l(9)),!S.check(E)){if(S.track(E),E=o._,o._=typeof E=="function"?E:function(){},o.$&&o.$===(o.$._||"").$||(o.$=N),o["@"]&&!o.put&&f(o),!I.ask(o["@"],o))if(M&&(M.u=+new Date),o.put){g(o);return}else o.get&&n.on.get(o,N);M&&(M.uc=+new Date),b.to.next(o),M&&(M.ua=+new Date),!(o.nts||o.NTS)&&(o.out=_,I.on("out",o),M&&(M.ue=+new Date))}}}function g(o){if(o){var b=o._||"",m=b.root=((b.$=o.$||"")._||"").root;if(o["@"]&&b.faith&&!b.miss){o.out=_,m.on("out",o);return}b.latch=m.hatch,b.match=m.hatch=[];var I=o.put,N=b.DBG=o.DBG,S=+new Date;if(D=D||S,!(I["#"]&&I["."])){N&&(N.p=S),b["#"]=o["#"],b.msg=o,b.all=0,b.stun=1;var E=Object.keys(I);console.STAT&&console.STAT(S,((N||b).pk=+new Date)-S,"put sort");var M=0,B,F,R,L,Y,et,kt;(function ut(Dt){if(B!=M){if(B=M,!(R=E[M])){console.STAT&&console.STAT(S,((N||b).pd=+new Date)-S,"put"),j(b);return}(L=I[R])?(kt=L._)?R!==kt["#"]?et=w+G(R)+"soul not same.":(Y=kt[">"])||(et=w+G(R)+"no state."):et=w+G(R)+"no meta.":et=w+G(R)+"no node.",F=Object.keys(L||{})}if(et){o.err=b.err=et,j(b);return}var Rt=0,ft;for(Dt=Dt||0;Dt++<9&&(ft=F[Rt++]);)if(ft!=="_"){var At=L[ft],Wt=Y[ft];if(c===Wt){et=w+G(ft)+"on"+G(R)+"no state.";break}if(!h(At)){et=w+G(ft)+"on"+G(R)+"bad "+typeof At+G(At);break}$(At,ft,R,Wt,o),++C}if((F=F.slice(Rt)).length){a(ut);return}++M,F=null,ut(Dt)})()}}}n.on.put=g;function $(o,b,m,I,N){var S=N._||"",E=S.root,M=E.graph,B,F=M[m]||y,R=u(F,b,1),L=F[b],Y=S.DBG;(B=console.STAT)&&(!M[m]||!L)&&(B.has=(B.has||0)+1);var et=O();if(I>et){setTimeout(function(){$(o,b,m,I,N)},(B=I-et)>x?x:B),console.STAT&&console.STAT((Y||S).Hf=+new Date,B,"future");return}if(!(I<R)&&!(!S.faith&&I===R&&(o===L||k(o)<=k(L))&&!S.miss)){S.stun++;var kt=N["#"]+S.all++,ut={toString:function(){return kt},_:S};ut.toJSON=ut.toString,E.dup.track(ut)["#"]=N["#"],Y&&(Y.ph=Y.ph||+new Date),E.on("put",{"#":ut,"@":N["@"],put:{"#":m,".":b,":":o,">":I},ok:N.ok,_:S})}}function A(o){var b;(b=(o._||"").DBG)&&(b.pa=+new Date,b.pm=b.pm||+new Date);var m=this,I=m.as,N=I.graph,S=o._,E=o.put,M=E["#"],B=E["."],F=E[":"],R=E[">"];o["#"];var L;(L=S.msg)&&(L=L.put)&&(L=L[M])&&s(L,B,R,F,M),N[M]=s(N[M],B,R,F,M),(L=(I.next||"")[M])&&L.on("in",o),j(S),m.to.next(o)}function j(o,b){var m;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(m=o.root))){var I=o.match;I.end=1,I===m.hatch&&(!(I=o.latch)||I.end?delete m.hatch:m.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(N){N&&N()}),!(!(b=o.msg)||o.err||b.err)&&(b.out=_,o.root.on("out",b),p())}}function f(o){var b=o["@"]||"",m;if(!(m=b._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(b)))return;o["@"]=I["#"]||o["@"];return}m.acks=(m.acks||0)+1,(m.err=o.err)&&(o["@"]=m["#"],j(m)),m.ok=o.ok||m.ok,!m.stop&&!m.crack&&(m.crack=m.match&&m.match.push(function(){v(m)})),v(m)}function v(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?c:o.ok||{"":1}})}var w="Error: Invalid graph!",G=function(o){return" '"+(""+o).slice(0,9)+"...' "},k=JSON.stringify,x=2147483647,O=n.state,C=0,D,p=function(){C>999&&C/-(D-(D=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),p=function(){C=0})}}(),function(){n.on.get=function(g,$){var A=$._,j=g.get,f=j["#"],v=A.graph[f],w=j["."],G=A.next||(A.next={}),k=G[f],x=g._||{},O=x.DBG=g.DBG;if(O&&(O.g=+new Date),!v)return A.on("get",g);if(w){if((typeof w!="string"||c===v[w])&&!((k||"").next||"")[w]){A.on("get",g);return}v=s({},w,u(v,w),v[w],f)}v&&_(g,v),A.on("get",g)};function _(g,$){var A=+new Date,j=g._||{},f=j.DBG=g.DBG,v=g["#"],w=l(9),G=Object.keys($||"").sort(),k=(($||"")._||"")["#"];G.length;var x=g.$._.root,O=$===x.graph[k];console.STAT&&console.STAT(A,((f||j).gk=+new Date)-A,"got keys"),$&&function C(){A=+new Date;for(var D=0,p,o={},b;D<9&&(p=G[D++]);)s(o,p,u($,p),$[p],k);G=G.slice(D),(b={})[k]=o,o=b;var m;O&&(m=function(){},m.ram=m.faith=!0),b=G.length,console.STAT&&console.STAT(A,-(A-(A=+new Date)),"got copied some"),f&&(f.ga=+new Date),x.on("in",{"@":v,"#":w,put:o,"%":b?w=l(9):c,$:x.$,_:m,DBG:f,FOO:1}),console.STAT&&console.STAT(A,+new Date-A,"got in"),b&&setTimeout.turn(C)}(),$||x.on("in",{"@":g["#"]})}n.on.get.ack=_}(),function(){n.chain.opt=function(_){_=_||{};var g=this,$=g._,A=_.peers||_;return Object.plain(_)||(_={}),Object.plain($.opt)||($.opt=_),typeof A=="string"&&(A=[A]),Object.plain($.opt.peers)||($.opt.peers={}),A instanceof Array&&(_.peers={},A.forEach(function(j){var f={};f.id=f.url=j,_.peers[j]=$.opt.peers[j]=$.opt.peers[j]||f})),d(_,function j(f){var v=this[f];if(this&&this.hasOwnProperty(f)||typeof v=="string"||Object.empty(v)){this[f]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||d(v,j)}),$.opt.from=_,n.on("opt",$),$.opt.uuid=$.opt.uuid||function(f){return n.state().toString(36).replace(".","")+String.random(f||12)},g}}();var d=function(_,g){Object.keys(_).forEach(g,_)},l=String.random,a=setTimeout.turn,h=n.valid,u=n.state.is,s=n.state.ify,c,y={},T;n.log=function(){return!n.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(_,g,$){return($=n.log.once)[_]=$[_]||0,$[_]++||n.log(g)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}i.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(T=console).only=function(_,g){return T.only.i&&_===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||g)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(i){var n=t("./root");n.chain.back=function(a,h){var u;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var s=this,c=s._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var y=0,T=a.length,u=c;for(y;y<T;y++)u=(u||d)[a[y]];return l!==u?h?s:u:(u=c.back)?u.$.back(a,h):void 0}if(typeof a=="function"){for(var _,u={back:c};(u=u.back)&&l===(_=a(u,h)););return _}return typeof a=="number"?(c.back||c).$.back(a-1):this};var d={},l})(t,"./back"),t(function(i){var n=t("./root");n.chain.chain=function(j){var f=this,v=f._,w=new(j||f).constructor(f),G=w._,k;return G.root=k=v.root,G.id=++k.once,G.back=f._,G.on=n.on,G.on("in",n.on.in,G),G.on("out",n.on.out,G),w};function d(j){var f,v=this.as,w=v.back,G=v.root,k;if(j.$||(j.$=v.$),this.to.next(j),v.err){v.on("in",{put:v.put=c,$:v.$});return}if(f=j.get){if(G.pass&&(G.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(x){k[x]=v.lex[x]},k=j.get=j.get||{}),f["#"]||v.soul){if(f["#"]=f["#"]||v.soul,j["#"]||(j["#"]=y(9)),w=G.$.get(f["#"])._,f=f["."]){if(_(w.put,f)&&(k=w.ask&&w.ask[f],(w.ask||(w.ask={}))[f]=w.$.get(f)._,w.on("in",{get:f,put:{"#":w.soul,".":f,":":w.put[f],">":$(G.graph[w.soul],f)}}),k))return}else{if(k=w.ask&&w.ask[""],(w.ask||(w.ask={}))[""]=w,c!==w.put&&(w.on("in",w),k))return;j.$=w.$}return G.ask(u,j),G.on("in",j)}if(f["."])return v.get?(j={get:{".":v.get},$:v.$},(w.ask||(w.ask={}))[v.get]=j.$._,w.on("out",j)):(j={get:v.lex?j.get:{},$:v.$},w.on("out",j));if((v.ask||(v.ask={}))[""]=v,v.get)return f["."]=v.get,(w.ask||(w.ask={}))[v.get]=j.$._,w.on("out",j)}return w.on("out",j)}n.on.out=d;function l(j,f){f=f||this.as;var v=f.root,w=j.$||(j.$=f.$),G=(w||"")._||s,k=j.put||"",x=k["#"],O=k["."],C=c!==k["="]?k["="]:k[":"],D=k[">"]||-1/0,p;if(c!==j.put&&(c===k["#"]||c===k["."]||c===k[":"]&&c===k["="]||c===k[">"])){if(!T(k)){if(!(x=((k||"")._||"")["#"])){console.log("chain not yet supported for",k,"...",j,f);return}return w=f.root.$.get(x),setTimeout.each(Object.keys(k).sort(),function(o){o=="_"||c===(D=$(k,o))||f.on("in",{$:w,put:{"#":x,".":o,"=":k[o],">":D},VIA:j})})}f.on("in",{$:G.back.$,put:{"#":x=G.back.soul,".":O=G.has||G.get,"=":k,">":$(G.back.put,O)},via:j});return}(j.seen||"")[f.id]||((j.seen||(j.seen=function(){}))[f.id]=f,f!==G&&(Object.keys(j).forEach(function(o){k[o]=j[o]},k={}),k.get=f.get||k.get,!f.soul&&!f.has?k.$$$=k.$$$||f.$:G.soul&&(k.$=f.$,k.$$=k.$$||G.$),j=k),h(j,f),(f.soul||j.$$)&&D>=$(v.graph[x],O)&&((k=v.$.get(x)._).put=A(k.put,O,D,C,x)),!G.soul&&D>=$(v.graph[x],O)&&(p=(v.$.get(x)._.next||"")[O])&&(p.put=C,typeof(k=T(C))=="string"&&(p.put=v.$.get(k)._.put||C)),this.to&&this.to.next(j),f.any&&setTimeout.each(Object.keys(f.any),function(o){(o=f.any[o])&&o(j)},0,99),f.echo&&setTimeout.each(Object.keys(f.echo),function(o){(o=f.echo[o])&&o.on("in",j)},0,99),((j.$$||"")._||G).soul&&(p=f.next)&&(p=p[O])&&(k={},Object.keys(j).forEach(function(o){k[o]=j[o]}),k.$=(j.$$||j.$).get(k.get=O),delete k.$$,delete k.$$$,p.on("in",k)),a(j,f))}n.on.in=l;function a(j,f){if(f=f||this.as||j.$._,!(j.$$&&this!==n.on)&&!(!j.put||f.soul)){var v=j.put||"",w=v["="]||v[":"],O,G=f.root,k=G.$.get(v["#"]).get(v["."])._;if(typeof(w=T(w))!="string"){this===n.on&&((k.echo||(k.echo={}))[f.id]=f);return}if(!((k.echo||(k.echo={}))[f.id]&&!(G.pass||"")[f.id])){if(O=G.pass){if(O[w+f.id])return;O[w+f.id]=1}(k.echo||(k.echo={}))[f.id]=f,f.has&&(f.link=w);var x=G.$.get(k.link=w)._;(x.echo||(x.echo={}))[k.id]=k;var O=f.ask||"";(O[""]||f.lex)&&x.on("out",{get:{"#":w}}),setTimeout.each(Object.keys(O),function(C,D){!C||!(D=O[C])||D.on("out",{get:{"#":w,".":C}})},0,99)}}}n.on.link=a;function h(j,f){var v=j.put||"",w=c!==v["="]?v["="]:v[":"],G=f.root,k,x;if(c===w){if(f.soul&&c!==f.put||(x=(j.$$||j.$||"")._||"",j["@"]&&(c!==x.put||c!==f.put)))return;(k=f.link||j.linked)&&delete(G.$.get(k)._.echo||"")[f.id],f.has&&(f.link=null),f.put=c,setTimeout.each(Object.keys(f.next||""),function(O,C){(C=f.next[O])&&(k&&delete(G.$.get(k).get(O)._.echo||"")[C.id],C.on("in",{get:O,put:c,$:C.$}))},0,99);return}f.soul||j.$$||(k=T(w),x=j.$._||"",!((k===x.link||f.has&&!x.link)&&!((G.pass||"")[f.id]&&typeof k!="string"))&&(delete(x.echo||"")[f.id],h({get:f.get,put:c,$:j.$,linked:j.linked=j.linked||x.link},f)))}n.on.unlink=h;function u(j,f){var v=this.as,w=v.$._;w.root;var G=v.get||"",k=(j.put||"")[G["#"]]||"";if(!j.put||typeof G["."]=="string"&&c===k[G["."]]){if(c!==w.put||!w.soul&&!w.has)return;w.ack=(w.ack||0)+1,w.on("in",{get:w.get,put:w.put=c,$:w.$,"@":j["@"]});return}(j._||{}).miss=1,n.on.put(j)}var s={},c,y=String.random,T=n.valid,_=function(j,f){return j&&Object.prototype.hasOwnProperty.call(j,f)},g=n.state,$=g.is,A=g.ify})(t,"./chain"),t(function(i){var n=t("./root");n.chain.get=function(c,y,T){var _,g;if(typeof c=="string"){if(c.length==0)return(_=this.chain())._.err={err:n.log("0 length key!",c)},y&&y.call(_,_._.err),_;var $=this,A=$._,j=A.next||h;(_=j[c])||(_=c&&d(c,$)),_=_&&_.$}else if(typeof c=="function"){let O=function(C,D,p){if(!O.stun&&!((S=v.pass)&&!S[w])){var o=C.$._,b=(C.$$||"")._,m=(b||o).put,I=!o.has&&!o.soul,N={},S;if((I||s===m)&&(m=s===((S=C.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=n.valid(m))=="string"&&(m=s===(S=v.$.get(S)._.put)?f.not?s:m:S),!(f.not&&s===m)){if(s===f.stun){if((S=v.stun)&&S.on&&(A.$.back(function(E){if(S.on(""+E.id,N={}),(N.run||0)<O.id)return N}),!N.run&&S.on(""+o.id,N={}),!N.run&&b&&S.on(""+b.id,N={}),O.id>N.run&&((!N.stun||N.stun.end)&&(N.stun=S.on("stun"),N.stun=N.stun&&N.stun.last),N.stun&&!N.stun.end))){(N.stun.add||(N.stun.add={}))[w]=function(){O(C,D,1)};return}if(s===m&&(p=0),(S=v.hatch)&&!S.end&&s===f.hatch&&!p){if(G[o.$._.id])return;G[o.$._.id]=1,S.push(function(){O(C,D,1)});return}G={}}if(v.pass){if(v.pass[w+o.id])return;v.pass[w+o.id]=1}if(f.on){f.ok.call(o.$,m,o.get,C,D||O);return}if(f.v2020){f.ok(C,D||O);return}Object.keys(C).forEach(function(E){S[E]=C[E]},S={}),C=S,C.put=m,f.ok.call(f.as,C,D||O)}}};var k=O;if(y===!0)return l(this,c,y,T),this;_=this;var A=_._,f=y||{},v=A.root,w;f.at=A,f.ok=c;var G={};return O.at=A,(A.any||(A.any={}))[w=String.random(7)]=O,O.off=function(){O.stun=1,A.any&&delete A.any[w]},O.rid=a,O.id=f.run||++v.once,g=v.pass,(v.pass={})[w]=1,f.out=f.out||{get:{}},A.on("out",f.out),v.pass=g,_}else{if(typeof c=="number")return this.get(""+c,y,T);if(typeof(g=u(c))=="string")return this.get(g,y,T);(g=this.get.next)&&(_=g(this,c))}return _?(y&&typeof y=="function"&&_.get(y,T),_):((_=this.chain())._.err={err:n.log("Invalid get request!",c)},y&&y.call(_,_._.err),_)};function d(c,y){var T=y._,_=T.next,g=y.chain(),$=g._;return _||(_=T.next={}),_[$.get=c]=$,y===T.root.$?$.soul=c:(T.soul||T.has)&&($.has=c),$}function l(c,y,T,_){var g=c._,$=0,A;return(A=g.soul||g.link)?y(A,_,g):g.jam?g.jam.push([y,_]):(g.jam=[[y,_]],c.get(function(f,v){if(!(s===f.put&&!g.root.opt.super&&(A=Object.keys(g.root.opt.peers).length)&&++$<=A)){v.rid(f);var w=(w=f.$)&&w._||{},G=0,k;for(A=g.jam,delete g.jam;k=A[G++];){var x=k[0];k=k[1],x&&x(w.link||w.soul||n.valid(f.put)||((f.put||{})._||{})["#"],k,f,v)}}},{out:{get:{".":!0}}}),c)}function a(c){var y=this.at||this.on;if(!c||y.soul||y.has)return this.off();if(c=(c=(c=c.$||c)._||c).id){y.map;var T;if((T=this.seen||(this.seen={}))[c])return!0;T[c]=!0}}var h={},u=n.valid,s})(t,"./get"),t(function(i){var n=t("./root");n.chain.put=function(_,g,$){var A=this,j=A._,f=j.root;$=$||{},$.root=j.root,$.run||($.run=f.once),d($,j.id),$.ack=$.ack||g,$.via=$.via||A,$.data=$.data||_,$.soul||($.soul=j.soul||typeof g=="string"&&g);var v=$.state=$.state||n.state();return typeof _=="function"?(_(function(w){$.data=w,A.put(u,u,$)}),A):$.soul?($.$=f.$.get($.soul),$.todo=[{it:$.data,ref:$.$}],$.turn=$.turn||c,$.ran=$.ran||l,function w(){var G=$.todo,k=G.pop(),x=k.it;k.ref&&k.ref._.id;var O,C,D,p,o;if(d($,k.ref),(p=k.todo)&&(C=p.pop(),x=x[C],p.length&&G.push(k)),C&&(G.path||(G.path=[])).push(C),!(O=y(x))&&!(o=n.is(x))){if(!Object.plain(x)){l.err($,"Invalid data: "+h(x)+" at "+($.via.back(function(S){S.get&&p.push(S.get)},p=[])||p.join("."))+"."+(G.path||[]).join("."));return}for(var b=$.seen||($.seen=[]),m=b.length;m--;)if(x===(p=b[m]).it){O=x=p.link;break}}if(C&&O)k.node=T(k.node,C,v,x);else{let S=function(E,M){var B=D.link["#"];M&&(M.off(),M.rid(E));var F=B||E.soul||(p=(E.$$||E.$)._||"").soul||p.link||((p=p.put||"")._||"")["#"]||p["#"]||((p=E.put||"")&&E.$$?p["#"]:(p["="]||p[":"]||"")["#"]);if(!B&&d($,E.$),!F&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){S(E,M)});return}F||(F=[],(E.$$||E.$).back(function(R){if(p=R.soul||R.link)return F.push(p);F.push(R.get)}),F=F.reverse().join("/")),D.link["#"]=F,!o&&((($.graph||($.graph={}))[F]=D.node||(D.node={_:{}}))._["#"]=F),delete $.wait[I],D.wait&&setTimeout.each(D.wait,function(R){R&&R()}),$.ran($)};var N=S;if(!$.seen){l.err($,"Data at root of graph must be a node (an object).");return}$.seen.push(D={it:x,link:{},todo:o?[]:Object.keys(x).sort().reverse(),path:(G.path||[]).slice(),up:k}),k.node=T(k.node,C,v,D.link),!o&&D.todo.length&&G.push(D);var I=$.seen.length;($.wait||($.wait={}))[I]="",p=(D.ref=o?x:C?k.ref.get(C):k.ref)._,(p=x&&(x._||"")["#"]||p.soul||p.link)?S({soul:p}):D.ref.get(S,{run:$.run,v2020:1,out:{get:{".":" "}}})}if(!G.length)return $.ran($);$.turn(w)}(),A):(a($),A)};function d(_,g){if(g){g=(g._||"").id||g;var $=_.root.stun||(_.root.stun={on:n.on}),A={},j;_.stun||(_.stun=$.on("stun",function(){})),(j=$.on(""+g))&&j.the.last.next(A),!(A.run>=_.run)&&$.on(""+g,function(f){if(_.stun.end){this.off(),this.to.next(f);return}f.run=f.run||_.run,f.stun=f.stun||_.stun})}}function l(_){if(_.err){l.end(_.stun,_.root);return}if(!(_.todo.length||_.end||!Object.empty(_.wait))){_.end=1;var g=_.$.back(-1)._,$=g.root,A=g.ask(function(w){$.on("ack",w),w.err&&!w.lack&&n.log(w),++j>(_.acks||0)&&this.off(),_.ack&&_.ack(w,this)},_.opt),j=0,f=_.stun,v;(v=function(){f&&(l.end(f,$),setTimeout.each(Object.keys(f=f.add||""),function(w){(w=f[w])&&w()}))}).hatch=v,_.ack&&!_.ok&&(_.ok=_.acks||9),_.via._.on("out",{put:_.out=_.graph,ok:_.ok&&{"@":_.ok+1},opt:_.opt,"#":A,_:v})}}l.end=function(_,g){_.end=s,_.the.to===_&&_===_.the.last&&delete g.stun,_.off()},l.err=function(_,g){(_.ack||s).call(_,_.out={err:_.err=n.log(g)}),_.ran(_)};function a(_){var g=_.via._,$;_.via=_.via.back(function(A){if(A.soul||!A.get)return A.$;$=_.data,(_.data={})[A.get]=$}),(!_.via||!_.via._.soul)&&(_.via=g.root.$.get(((_.data||"")._||"")["#"]||g.$.back("opt.uuid")())),_.via.put(_.data,_.ack,_)}function h(_,g){return _&&(g=_.constructor)&&g.name||typeof _}var u,s=function(){},c=setTimeout.turn,y=n.valid,T=n.state.ify})(t,"./put"),t(function(i){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),i.exports=n})(t,"./index"),t(function(i){var n=t("./index");n.chain.on=function(a,h,u,s){var c=this,y=c._;y.root;var T;if(typeof a=="string")return h?(T=y.on(a,h,u||y,s),u&&u.$&&(u.subs||(u.subs=[])).push(T),c):y.on(a);var _=h;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,c.get(a,_),c},n.chain.once=function(a,h){if(h=h||{},!a)return d(this);var u=this,s=u._,c=s.root;s.put;var y=String.random(7),T;return u.get(function(_,g,$,A){var j=this,f=j._,v=f.one||(f.one={});if(A.stun||v[y]==="")return;if((T=n.valid(_))===!0){w();return}if(typeof T=="string")return;clearTimeout((s.one||"")[y]),clearTimeout(v[y]),v[y]=setTimeout(w,h.wait||99);function w(G){if(!f.has&&!f.soul&&(f={put:_,get:g}),l===(T=f.put)&&(T=(($.$$||"")._||"").put),typeof n.valid(T)=="string"&&(T=c.$.get(T)._.put,T===l&&!G)){v[y]=setTimeout(function(){w(1)},h.wait||99);return}A.stun||v[y]!==""&&(v[y]="",(s.soul||s.has)&&A.off(),a.call(j,T,f.get),clearTimeout(v[y]))}},{on:1}),u};function d(a,h,u){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=a.chain())._.nix=a.once(function(s,c){u._.on("in",this._)}),u._.lex=a._.lex,u}n.chain.off=function(){var a=this,h=a._,u,s=h.back;if(s)return h.ack=0,(u=s.next)&&u[h.get]&&delete u[h.get],(u=s.any)&&(delete s.any,s.any={}),(u=s.ask)&&delete u[h.get],(u=s.put)&&delete u[h.get],(u=h.soul)&&delete s.root.graph[u],(u=h.map)&&Object.keys(u).forEach(function(c,y){y=u[c],y.link&&s.root.$.get(y.link).off()}),(u=h.next)&&Object.keys(u).forEach(function(c,y){y=u[c],y.$.off()}),h.on("off",{}),a};var l})(t,"./on"),t(function(i){var n=t("./index"),d=n.chain.get.next;n.chain.get.next=function(u,s){var c;return Object.plain(s)?(c=((c=s["#"])||"")["="]||c)?u.get(c):((c=u.chain()._).lex=s,u.on("in",function(y){String.match(y.get||(y.put||"")["."],s["."]||s["#"]||s)&&c.on("in",y),this.to.next(y)}),c.$):(d||a)(u,s)},n.chain.map=function(u,s,c){var y=this,T=y._,_,g;return Object.plain(u)&&(_=u["."]?u:{".":u},u=h),u?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=y.chain(),y.map().on(function($,A,j,f){var v=(u||a).call(this,$,A,j,f);if(h!==v){if($===v)return g._.on("in",j);if(n.is(v))return g._.on("in",v._);var w={};Object.keys(j.put).forEach(function(G){w[G]=j.put[G]},w),w["="]=v,g._.on("in",{get:A,put:w})}}),g):((g=T.each)||((T.each=g=y.chain())._.lex=_||g._.lex||T.lex,g._.nix=y.back("nix"),y.on("in",l,g._)),g)};function l(u){this.to.next(u);var s=this.as,c=u.$,y=c._,T=u.put,_;!y.soul&&!u.$$||(_=s.lex)&&!String.match(u.get||(T||"")["."],_["."]||_["#"]||_)||n.on.link(u,s)}var a=function(){},h})(t,"./map"),t(function(i){var n=t("./index");n.chain.set=function(d,l,a){var h=this,u=h.back(-1),s,c;return l=l||function(){},a=a||{},a.item=a.item||d,(s=((d||"")._||"")["#"])&&((d={})["#"]=s),typeof(c=n.valid(d))=="string"?h.get(s=c).put(d,l,a):n.is(d)?(h.put(function(y){d.get(function(T,_,g){if(!T)return l.call(h,{err:n.log('Only a node can be linked! Not "'+g.put+'"!')});(c={})[T]={"#":T},y(c)},!0)}),d):(Object.plain(d)&&(d=u.get(s=h.back("opt.uuid")()).put(d)),h.get(s||u.back("opt.uuid")(7)).put(d,l,a))}})(t,"./set"),t(function(i){t("./shim");var n=function(){},d=JSON.parseAsync||function(u,s,c){var y,T=+new Date;try{s(y,JSON.parse(u,c),l.sucks(+new Date-T))}catch(_){s(_)}},l=JSON.stringifyAsync||function(u,s,c,y){var T,_=+new Date;try{s(T,JSON.stringify(u,c,y),l.sucks(+new Date-_))}catch(g){s(g)}};l.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),l.sucks=n)};function a(u){var s=function(){},c=u.opt||{};c.log=c.log||console.log,c.gap=c.gap||c.wait||0,c.max=c.max||(c.memory?c.memory*999*999:3e8)*.3,c.pack=c.pack||c.max*.01*.01,c.puff=c.puff||9;var y=setTimeout.turn||setTimeout,T=u.dup,_=T.check,g=T.track,$=s.hear=function(f,v){if(f){if(c.max<=f.length)return s.say({dam:"!",err:"Message too big!"},v);s===this&&($.d+=f.length||0,++$.c);var w=v.SH=+new Date,G=f[0],k;if(G==="["){d(f,function(x,O){if(x||!O)return s.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,O.length,"# on hear batch");var C=c.puff;(function D(){for(var p=+new Date,o=0,b;o<C&&(b=O[o++]);)s.hear(b,v);O=O.slice(o),console.STAT&&console.STAT(p,+new Date-p,"hear loop"),A(v),O.length&&y(D,0)})()}),f="";return}if(G==="{"||(f["#"]||Object.plain(f))&&(k=f)){if(k)return $.one(k,v,w);d(f,function(x,O){if(x||!O)return s.say({dam:"!",err:"DAM JSON parse error."},v);$.one(O,v,w)});return}}};$.one=function(f,v,D){var G,k,x,O,C;if(f.DBG&&(f.DBG=C={DBG:f.DBG}),C&&(C.h=D),C&&(C.hp=+new Date),(G=f["#"])||(G=f["#"]=String.random(9)),!(x=_(G))&&(k=f["##"],!(k&&(x=f["@"]||f.get&&G)&&T.check(O=x+k)))){if((f._=function(){}).via=s.leap=v,(x=f["><"])&&typeof x=="string"&&x.slice(0,99).split(",").forEach(function(p){this[p]=1},f._.yo={}),x=f.dam){(x=s.hear[x])&&x(f,v,u),g(G);return}(x=f.ok)&&(f._.near=x["/"]);var D=+new Date;C&&(C.is=D),v.SI=G,g.ed=function(p){G===p&&(g.ed=0,(p=T.s[G])&&(p.via=v,f.get&&(p.it=f)))},u.on("in",s.last=f),C&&(C.hd=+new Date),console.STAT&&console.STAT(D,+new Date-D,f.get?"msg get":f.put?"msg put":"msg"),g(G),O&&g(O),s.leap=s.last=null}},$.c=$.d=0,function(){var f=0,v;s.hash=function(k,x){var O,C,D,p=+new Date;l(k.put,function o(b,m){var I=(C||(C=D=m||"")).slice(0,32768);if(O=String.hash(I,O),C=C.slice(32768),C){y(o,0);return}console.STAT&&console.STAT(p,+new Date-p,"say json+hash"),k._.$put=D,k["##"]=O,s.say(k,x),delete k._.$put},w)};function w(k,x){var O;return x instanceof Object?(Object.keys(x).sort().forEach(G,{to:O={},on:x}),O):x}function G(k){this.to[k]=this.on[k]}s.say=function(k,x){var O;if((O=this)&&(O=O.to)&&O.next&&O.next(k),!k)return!1;var C,D,p,o=k["@"],b=k._||(k._=function(){}),m=k.DBG,I=+new Date;if(b.y=b.y||I,x||m&&(m.y=I),(C=k["#"])||(C=k["#"]=String.random(9)),!v&&g(C),!(D=k["##"])&&h!==k.put&&!b.via&&o){s.hash(k,x);return}if(!x&&o&&(x=(O=T.s[o])&&(O.via||(O=O.it)&&(O=O._)&&O.via)||(O=s.last)&&o===O["#"]&&s.leap),!x&&o)return T.s[o]?void 0:(console.STAT&&console.STAT(+new Date,++f,"total no peer to ack to"),!1);if(o&&!k.put&&!D&&((T.s[o]||"").it||"")["##"])return!1;if(!x&&s.way)return s.way(k);if(m&&(m.yh=+new Date),!(p=b.raw)){s.raw(k,x);return}if(m&&(m.yr=+new Date),!x||!x.id){if(!Object.plain(x||c.peers))return!1;var I=+new Date;c.puff;var N=c.peers,S=Object.keys(x||c.peers||{});console.STAT&&console.STAT(I,+new Date-I,"peer keys"),function B(){var F=+new Date;v=1;var R=b.raw;b.raw=p;for(var L=0,Y;L<9&&(Y=(S||"")[L++]);)(Y=N[Y]||(x||"")[Y])&&s.say(k,Y);b.raw=R,v=0,S=S.slice(L),console.STAT&&console.STAT(F,+new Date-F,"say loop"),S.length&&(y(B,0),o&&g(o))}();return}if(!x.wire&&s.wire&&s.wire(x),C!==x.last){if(x.last=C,x===b.via||(O=b.yo)&&(O[x.url]||O[x.pid]||O[x.id]))return!1;if(console.STAT&&console.STAT(I,((m||b).yp=+new Date)-(b.y||I),"say prep"),!v&&o&&g(o),x.batch){if(x.tail=(O=x.tail||0)+p.length,x.tail<=c.pack){x.batch+=(O?",":"")+p;return}A(x)}x.batch="[";var E=+new Date;setTimeout(function(){console.STAT&&console.STAT(E,+new Date-E,"0ms TO"),A(x)},c.gap),j(p,x),console.STAT&&o===x.SI&&console.STAT(I,+new Date-x.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(k,x){if(!k)return"";var O=k._||{},C,D;if(D=O.raw)return D;if(typeof k=="string")return k;var p=k["##"],o=k["@"];if(p&&o){if(!O.via&&_(o+p))return!1;if(D=(T.s[o]||"").it){if(p===D["##"])return!1;D["##"]||(D["##"]=p)}}if(!k.dam&&!k["@"]){var b=0,m=[];D=c.peers;for(var I in D){var N=D[I];if(m.push(N.url||N.pid||N.id),++b>6)break}b>1&&(k["><"]=m.join())}if(k.put&&(D=k.ok)&&(k.ok={"@":(D["@"]||1)-1,"/":D["/"]==k._.near?s.near:D["/"]}),C=O.$put){D={},Object.keys(k).forEach(function(E){D[E]=k[E]}),D.put=":])([:",l(D,function(E,M){if(!E){var B=+new Date;D=M.indexOf('"put":":])([:"'),S(h,M=M.slice(0,D+6)+C+M.slice(D+14)),console.STAT&&console.STAT(B,+new Date-B,"say slice")}});return}l(k,S);function S(E,M){E||(O.raw=M,s.say(k,x))}}}();function A(f){var v=f.batch,w=typeof v=="string";if(w&&(v+="]"),f.batch=f.tail=null,!!v&&!(w?3>v.length:!v.length)){if(!w)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(G){return c.log("DAM JSON stringify error",G)}v&&j(v,f)}}function j(f,v){try{var w=v.wire;v.say?v.say(f):w.send&&w.send(f),s.say.d+=f.length||0,++s.say.c}catch{(v.queue=v.queue||[]).push(f)}}return s.near=0,s.hi=function(f){var v=f.wire,w;if(!v){s.wire(f.length&&{url:f,id:f}||f);return}f.id?c.peers[f.url||f.id]=f:(w=f.id=f.id||f.url||String.random(9),s.say({dam:"?",pid:u.opt.pid},c.peers[w]=f),delete T.s[f.last]),f.met||(s.near++,f.met=+new Date,u.on("hi",f)),w=f.queue,f.queue=[],setTimeout.each(w||[],function(G){j(G,f)},0,9)},s.bye=function(f){f.met&&--s.near,delete f.met,u.on("bye",f);var v=+new Date;v=v-(f.met||v),s.bye.time=((s.bye.time||v)+v)/2},s.hear["!"]=function(f,v){c.log("Error:",f.err)},s.hear["?"]=function(f,v){f.pid&&(v.pid||(v.pid=f.pid),f["@"])||(s.say({dam:"?",pid:c.pid,"@":f["#"]},v),delete T.s[v.last])},s.hear.mob=function(f,v){if(f.peers){var w=Object.keys(f.peers),G=w[Math.random()*w.length>>0];G&&(s.bye(v),s.hi(G))}},u.on("create",function(f){f.opt.pid=f.opt.pid||String.random(9),this.to.next(f),f.on("out",s.say)}),u.on("bye",function(f,v){f=c.peers[f.id||f]||f,this.to.next(f),f.bye?f.bye():(v=f.wire)&&v.close&&v.close(),delete c.peers[f.id],f.wire=null}),u.on("bye",function(f,v){this.to.next(f),(v=console.STAT)&&(v.peers=s.near),(v=f.url)&&setTimeout(function(){},c.lack||9e3)}),u.on("hi",function(f,v){if(this.to.next(f),(v=console.STAT)&&(v.peers=s.near),!c.super){var w=Object.keys(u.next||"");w.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(w,function(G){var k=u.next[G];if(c.super||(k.ask||"")[""]){s.say({get:{"#":G}},f);return}setTimeout.each(Object.keys(k.ask||""),function(x){x&&s.say({"##":String.hash((u.graph[G]||"")[x]),get:{"#":G,".":x}},f)})})}}),s}var h;try{i.exports=a}catch{}})(t,"./mesh"),t(function(i){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(l){if(this.to.next(l),l.once)return;var a=l.opt;if(a.WebSocket===!1)return;var h=n.window||{},u=a.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!u)return;a.WebSocket=u;var s=a.mesh=a.mesh||n.Mesh(l);s.wire||a.wire,s.wire=a.wire=c;function c(g){try{if(!g||!g.url)return A&&A(g);var $=g.url.replace(/^http/,"ws"),A=g.wire=new a.WebSocket($);return A.onclose=function(){T(g),a.mesh.bye(g)},A.onerror=function(j){T(g)},A.onopen=function(){a.mesh.hi(g)},A.onmessage=function(j){j&&a.mesh.hear(j.data||j,g)},A}catch{a.mesh.bye(g)}}setTimeout(function(){!a.super&&l.on("out",{dam:"hi"})},1);var y=2*999;function T(g){clearTimeout(g.defer),a.peers[g.url]&&(_&&g.retry<=0||(g.retry=(g.retry||a.retry+1||60)-(-g.tried+(g.tried=+new Date)<y*4?1:0),g.defer=setTimeout(function $(){if(_&&_.hidden)return setTimeout($,y);c(g)},y)))}var _=""+d!=typeof document&&document});var d})(t,"./websocket"),t(function(i){if(!(typeof Gun>"u")){var n=function(){},d;try{d=(Gun.window||n).localStorage}catch{}d||(Gun.log("Warning: No localStorage exists to persist data to!"),d={setItem:function(a,h){this[a]=h},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var l=JSON.stringifyAsync||function(a,h,u,s){var c;try{h(c,JSON.stringify(a,u,s))}catch(y){h(y)}};Gun.on("create",function a(h){this.to.next(h);var u=h.opt;h.graph;var s=[],c,y,T,_;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{c=a[u.prefix]=a[u.prefix]||JSON.parse(T=d.getItem(u.prefix))||{}}catch{c=a[u.prefix]={}}T=(T||"").length,h.on("get",function($){this.to.next($);var A=$.get,j,f,v,w;!A||!(j=A["#"])||(f=c[j]||w,f&&(v=A["."])&&!Object.plain(v)&&(f=Gun.state.ify({},v,Gun.state.is(f,v),f[v],j)),Gun.on.get.ack($,f))}),h.on("put",function($){this.to.next($);var A=$.put,j=A["#"],f=A["."],v=$["#"],w=$.ok||"";if(c[j]=Gun.state.ify(c[j],f,A[">"],A[":"],j),_&&T>4999880){h.on("in",{"@":v,err:"localStorage max!"});return}!$["@"]&&(!$._.via||Math.random()<w["@"]/w["/"])&&s.push(v),!y&&(y=setTimeout(g,9+T/333))});function g(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var $=s;clearTimeout(y),y=!1,s=[],l(c,function(A,j){try{!A&&d.setItem(u.prefix,j)}catch(f){A=_=f||"localStorage failure"}A&&(Gun.log(A+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:A,get:u.prefix,put:c})),T=j.length,setTimeout.each($,function(f){h.on("in",{"@":f,err:A,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var D;if(""+D!=typeof Gun){var t=function(p){console.warn("Warning! Deprecated internal utility will break in next version:",p)},e=Gun;e.fn=e.fn||{is:function(p){return t("fn"),!!p&&typeof p=="function"}},e.bi=e.bi||{is:function(p){return t("bi"),p instanceof Boolean||typeof p=="boolean"}},e.num=e.num||{is:function(p){return t("num"),!i(p)&&(p-parseFloat(p)+1>=0||p===1/0||p===-1/0)}},e.text=e.text||{is:function(p){return t("text"),typeof p=="string"}},e.text.ify=e.text.ify||function(p){return t("text.ify"),e.text.is(p)?p:typeof JSON<"u"?JSON.stringify(p):p&&p.toString?p.toString():p},e.text.random=e.text.random||function(p,o){t("text.random");var b="";for(p=p||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";p>0;)b+=o.charAt(Math.floor(Math.random()*o.length)),p--;return b},e.text.match=e.text.match||function(p,o){var b,m;return t("text.match"),typeof p!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},b=o["="]||o["*"]||o[">"]||o["<"],p===b?!0:m!==o["="]?!1:(b=o["*"]||o[">"]||o["<"],p.slice(0,(b||"").length)===b?!0:m!==o["*"]?!1:m!==o[">"]&&m!==o["<"]?p>=o[">"]&&p<=o["<"]:m!==o[">"]&&p>=o[">"]||m!==o["<"]&&p<=o["<"]))},e.text.hash=e.text.hash||function(p,o){if(t("text.hash"),typeof p=="string"){if(o=o||0,!p.length)return o;for(var b=0,m=p.length,I;b<m;++b)I=p.charCodeAt(b),o=(o<<5)-o+I,o|=0;return o}},e.list=e.list||{is:function(p){return t("list"),p instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(p){return t("list.sort"),function(o,b){return!o||!b?0:(o=o[p],b=b[p],o<b?-1:o>b?1:0)}},e.list.map=e.list.map||function(p,o,b){return t("list.map"),O(p,o,b)},e.list.index=1,e.obj=e.boj||{is:function(p){return t("obj"),p?p instanceof Object&&p.constructor===Object||Object.prototype.toString.call(p).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(p,o,b){return t("obj.put"),(p||{})[o]=b,p},e.obj.has=e.obj.has||function(p,o){return t("obj.has"),p&&Object.prototype.hasOwnProperty.call(p,o)},e.obj.del=e.obj.del||function(p,o){if(t("obj.del"),!!p)return p[o]=null,delete p[o],p},e.obj.as=e.obj.as||function(p,o,b,m){return t("obj.as"),p[o]=p[o]||(m===b?{}:b)},e.obj.ify=e.obj.ify||function(p){if(t("obj.ify"),v(p))return p;try{p=JSON.parse(p)}catch{p={}}return p},function(){var p;function o(b,m){G(this,m)&&p!==this[m]||(this[m]=b)}e.obj.to=e.obj.to||function(b,m){return t("obj.to"),m=m||{},O(b,o,m),m}}(),e.obj.copy=e.obj.copy||function(p){return t("obj.copy"),p&&JSON.parse(JSON.stringify(p))},function(){function p(o,b){var m=this.n,I;if(!(m&&(b===m||v(m)&&G(m,b)))&&I!==b)return!0}e.obj.empty=e.obj.empty||function(o,b){return t("obj.empty"),o?!O(o,p,{n:b}):!0}}(),function(){function p(m,I){if(arguments.length===2){p.r=p.r||{},p.r[m]=I;return}p.r=p.r||[],p.r.push(m)}var o=Object.keys,b;Object.keys=Object.keys||function(m){return b(m,function(I,N,S){S(N)})},e.obj.map=b=e.obj.map||function(m,I,N){t("obj.map");var S,E=0,M,B,F,R,L=typeof I=="function";if(p.r=S,o&&v(m)&&(F=o(m),R=!0),N=N||{},i(m)||F)for(M=(F||m).length;E<M;E++){var Y=E+e.list.index;if(L){if(B=R?I.call(N,m[F[E]],F[E],p):I.call(N,m[E],Y,p),B!==S)return B}else if(I===m[R?F[E]:E])return F?F[E]:Y}else for(E in m)if(L){if(G(m,E)&&(B=N?I.call(N,m[E],E,p):I(m[E],E,p),B!==S))return B}else if(I===m[E])return E;return L?p.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(p){return t("time"),p?p instanceof Date:+new Date().getTime()};var j=e.fn.is,i=e.list.is,f=e.obj,v=f.is,G=f.has,O=f.map,n={};n.is=function(p){return t("val.is"),p===D?!1:p===null?!0:p===1/0?!1:a(p)||l(p)||_(p)?!0:n.link.is(p)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(o){if(t("val.link.is"),o&&o[d]&&!o._&&v(o)){var b={};if(O(o,p,b),b.id)return b.id}return!1};function p(o,b){var m=this;if(m.id)return m.id=!1;if(b==d&&a(o))m.id=o;else return m.id=!1}}(),n.link.ify=function(p){return t("val.link.ify"),x({},d,p)},e.obj.has._=".";var d=n.link._,D,l=e.bi.is,_=e.num.is,a=e.text.is,f=e.obj,v=f.is,x=f.put,O=f.map;e.val=e.val||n;var h={_:"_"};h.soul=function(p,o){return t("node.soul"),p&&p._&&p._[o||c]},h.soul.ify=function(p,o){return t("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},p=p||{},p._=p._||{},p._[c]=o.soul||p._[c]||s(),p},h.soul._=n.link._,function(){h.is=function(o,b,m){t("node.is");var I;return v(o)&&(I=h.soul(o))?!O(o,p,{as:m,cb:b,s:I,n:o}):!1};function p(o,b){if(b!==h._){if(!n.is(o))return!0;this.cb&&this.cb.call(this.as,o,b,this.n,this.s)}}}(),function(){h.ify=function(o,b,m){return t("node.ify"),b?typeof b=="string"?b={soul:b}:typeof b=="function"&&(b={map:b}):b={},b.map&&(b.node=b.map.call(m,o,D,b.node||{})),(b.node=h.soul.ify(b.node||{},b))&&O(o,p,{o:b,as:m}),b.node};function p(o,b){var m=this.o,I,N;if(m.map){I=m.map.call(this.as,o,""+b,m.node),N===I?w(m.node,b):m.node&&(m.node[b]=I);return}n.is(o)&&(m.node[b]=o)}}();var f=e.obj,v=f.is,w=f.del,O=f.map,u=e.text,s=u.random,c=h.soul._,D;e.node=e.node||h;var y=e.state;y.lex=function(){return t("state.lex"),y().toString(36).replace(".","")},y.to=function(p,o,b){t("state.to");var m=(p||{})[o];return v(m)&&(m=C(m)),y.ify(b,o,y.is(p,o),m,h.soul(p))},function(){y.map=function(o,b,m){t("state.map");var I,N=v(N=o||b)?N:null;return o=j(o=o||b)?o:null,N&&!o?(b=_(b)?b:y(),N[$]=N[$]||{},O(N,p,{o:N,s:b}),N):(m=m||v(b)?b:I,b=_(b)?b:y(),function(S,E,M,B){if(!o)return p.call({o:M,s:b},S,E),S;o.call(m||this||{},S,E,M,B),!(G(M,E)&&I===M[E])&&p.call({o:M,s:b},S,E)})};function p(o,b){$!==b&&y.ify(this.o,b,this.s)}}();var f=e.obj;f.as;var G=f.has,v=f.is,O=f.map,C=f.copy,T=e.num,_=T.is,g=e.fn,j=g.is,$=h._,D,A={};(function(){A.is=function(b,m,I,N){return t("graph.is"),!b||!v(b)||k(b)?!1:!O(b,p,{cb:m,fn:I,as:N})};function p(b,m){if(!b||m!==h.soul(b)||!h.is(b,this.fn,this.as))return!0;this.cb&&(o.n=b,o.as=this.as,this.cb.call(o.as,b,m,o))}function o(b){b&&h.is(o.n,b,o.as)}})(),function(){A.ify=function(N,S,E){t("graph.ify");var M={path:[],obj:N};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof E=="string"&&(S.soul=S.soul||E,E=D),S.soul&&(M.link=n.link.ify(S.soul)),S.shell=(E||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||E,p(S,M),S.root=M.node,S.graph};function p(N,S){var E;return(E=I(N,S))?E:(S.env=N,S.soul=b,h.ify(S.obj,o,S)&&(S.link=S.link||n.link.ify(h.soul(S.node)),S.obj!==N.shell&&(N.graph[n.link.is(S.link)]=S.node)),S)}function o(N,S,E){var M=this,B=M.env,F,R;if(h._===S&&G(N,n.link._))return E._;if(F=m(N,S,E,M,B)){if(S||(M.node=M.node||E||{},G(N,h._)&&h.soul(N)&&(M.node._=C(N._)),M.node=h.soul.ify(M.node,n.link.is(M.link)),M.link=M.link||n.link.ify(h.soul(M.node))),(R=B.map)&&(R.call(B.as||{},N,S,E,M),G(E,S))){if(N=E[S],D===N){w(E,S);return}if(!(F=m(N,S,E,M,B)))return}if(!S)return M.node;if(F===!0)return N;if(R=p(B,{obj:N,path:M.path.concat(S)}),!!R.node)return R.link}}function b(N){var S=this,E=n.link.is(S.link),M=S.env.graph;S.link=S.link||n.link.ify(N),S.link[n.link._]=N,S.node&&S.node[h._]&&(S.node[h._][n.link._]=N),G(M,E)&&(M[N]=M[E],w(M,E))}function m(N,S,E,M,B){var F;if(n.is(N))return!0;if(v(N))return 1;if(F=B.invalid)return N=F.call(B.as||{},N,S,E),m(N,S,E,M,B);B.err="Invalid value at '"+M.path.concat(S).join(".")+"'!",e.list.is(N)&&(B.err+=" Use `.set(item)` instead of an Array.")}function I(N,S){for(var E=N.seen,M=E.length,B;M--;)if(B=E[M],S.obj===B.obj)return B;E.push(S)}}(),A.node=function(p){t("graph.node");var o=h.soul(p);if(o)return x({},o,p)},function(){A.to=function(o,b,m){if(t("graph.to"),!!o){var I={};return m=m||{seen:{}},O(o[b],p,{obj:I,graph:o,opt:m}),I}};function p(o,b){var m,I;if(h._===b){if(k(o,n.link._))return;this.obj[b]=C(o);return}if(!(m=n.link.is(o))){this.obj[b]=o;return}if(I=this.opt.seen[m]){this.obj[b]=I;return}this.obj[b]=this.opt.seen[m]=A.to(this.graph,m,this.opt)}}();var j=e.fn.is,f=e.obj,v=f.is,w=f.del,G=f.has,k=f.empty,x=f.put,O=f.map,C=f.copy,D;e.graph=e.graph||A}}()})(qt);var on=qt.exports,un=on;const fn=nn(un),pt=[];function an(r,t=Z){let e;const i=new Set;function n(a){if(ht(r,a)&&(r=a,e)){const h=!pt.length;for(const u of i)u[1](),pt.push(u,r);if(h){for(let u=0;u<pt.length;u+=2)pt[u][0](pt[u+1]);pt.length=0}}}function d(a){n(a(r))}function l(a,h=Z){const u=[a,h];return i.add(u),i.size===1&&(e=t(n,d)||Z),a(r),()=>{i.delete(u),i.size===0&&e&&(e(),e=null)}}return{set:n,update:d,subscribe:l}}const ln=fn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),ye=ln.get("cards"),Ct=document.createElement("a"),Et=document.createElement("input");Et.type="file";Et.accept=".json";Et.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const i=await t.text();Pt(JSON.parse(i))}};const $t=an([]),Pt=r=>{ye.put({data:JSON.stringify(r)})};ye.on(r=>{$t.set(JSON.parse(r.data))});const cn=()=>{Ct.href=URL.createObjectURL(new Blob([JSON.stringify(me($t))],{type:"application/json"})),Ct.download="cards.json",Ct.click()},sn=()=>{Et.click()};function ne(r,t,e){const i=r.slice();return i[17]=t[e],i}function re(r,t,e){const i=r.slice();return i[14]=t[e],i}function ie(r,t,e){const i=r.slice();return i[14]=t[e],i}function oe(r,t,e){const i=r.slice();return i[14]=t[e],i}function hn(r){let t,e,i,n=rt(ee(r[1])),d=[];for(let a=0;a<n.length;a+=1)d[a]=ae(ne(r,n,a));const l=a=>W(d[a],1,1,()=>{d[a]=null});return{c(){t=U("div"),e=U("section");for(let a=0;a<d.length;a+=1)d[a].c();H(e,"class","print")},m(a,h){J(a,t,h),Q(t,e);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(e,null);r[12](e),i=!0},p(a,h){if(h&2){n=rt(ee(a[1]));let u;for(u=0;u<n.length;u+=1){const s=ne(a,n,u);d[u]?(d[u].p(s,h),q(d[u],1)):(d[u]=ae(s),d[u].c(),q(d[u],1),d[u].m(e,null))}for(ct(),u=n.length;u<d.length;u+=1)l(u);st()}},i(a){if(!i){for(let h=0;h<n.length;h+=1)q(d[h]);i=!0}},o(a){d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)W(d[h]);i=!1},d(a){a&&P(t),wt(d,a),r[12](null)}}}function dn(r){let t,e,i,n,d,l,a,h,u,s,c,y,T,_,g,$,A,j,f=r[1].length+"",v,w,G,k;i=new Nt({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),i.$on("type",r[6]),d=new at({props:{colour:"blue",$$slots:{default:[pn]},$$scope:{ctx:r}}}),d.$on("click",r[7]),a=new at({props:{colour:"blue",$$slots:{default:[_n]},$$scope:{ctx:r}}}),a.$on("click",r[8]),u=new at({props:{$$slots:{default:[yn]},$$scope:{ctx:r}}}),u.$on("click",r[9]),c=new at({props:{$$slots:{default:[vn]},$$scope:{ctx:r}}}),c.$on("click",sn),T=new at({props:{$$slots:{default:[bn]},$$scope:{ctx:r}}}),T.$on("click",cn),g=new at({props:{$$slots:{default:[gn]},$$scope:{ctx:r}}}),g.$on("click",r[10]);let x=rt(r[4]),O=[];for(let D=0;D<x.length;D+=1)O[D]=le(oe(r,x,D));const C=D=>W(O[D],1,1,()=>{O[D]=null});return{c(){t=U("section"),e=U("div"),X(i.$$.fragment),n=z(),X(d.$$.fragment),l=z(),X(a.$$.fragment),h=z(),X(u.$$.fragment),s=z(),X(c.$$.fragment),y=z(),X(T.$$.fragment),_=z(),X(g.$$.fragment),$=z(),A=U("h1"),j=tt("cards "),v=tt(f),w=z(),G=U("section");for(let D=0;D<O.length;D+=1)O[D].c();H(e,"class","select-wrapper svelte-54h2p3"),nt(e,"background-color",r[5]),H(t,"class","button-container svelte-54h2p3"),H(G,"class","container svelte-54h2p3")},m(D,p){J(D,t,p),Q(t,e),K(i,e,null),Q(t,n),K(d,t,null),Q(t,l),K(a,t,null),Q(t,h),K(u,t,null),Q(t,s),K(c,t,null),Q(t,y),K(T,t,null),Q(t,_),K(g,t,null),J(D,$,p),J(D,A,p),Q(A,j),Q(A,v),J(D,w,p),J(D,G,p);for(let o=0;o<O.length;o+=1)O[o]&&O[o].m(G,null);k=!0},p(D,p){const o={};p&1&&(o.cardType=D[0]),i.$set(o),(!k||p&32)&&nt(e,"background-color",D[5]);const b={};p&16777216&&(b.$$scope={dirty:p,ctx:D}),d.$set(b);const m={};p&16777216&&(m.$$scope={dirty:p,ctx:D}),a.$set(m);const I={};p&16777216&&(I.$$scope={dirty:p,ctx:D}),u.$set(I);const N={};p&16777216&&(N.$$scope={dirty:p,ctx:D}),c.$set(N);const S={};p&16777216&&(S.$$scope={dirty:p,ctx:D}),T.$set(S);const E={};if(p&16777216&&(E.$$scope={dirty:p,ctx:D}),g.$set(E),(!k||p&2)&&f!==(f=D[1].length+"")&&De(v,f),p&18){x=rt(D[4]);let M;for(M=0;M<x.length;M+=1){const B=oe(D,x,M);O[M]?(O[M].p(B,p),q(O[M],1)):(O[M]=le(B),O[M].c(),q(O[M],1),O[M].m(G,null))}for(ct(),M=x.length;M<O.length;M+=1)C(M);st()}},i(D){if(!k){q(i.$$.fragment,D),q(d.$$.fragment,D),q(a.$$.fragment,D),q(u.$$.fragment,D),q(c.$$.fragment,D),q(T.$$.fragment,D),q(g.$$.fragment,D);for(let p=0;p<x.length;p+=1)q(O[p]);k=!0}},o(D){W(i.$$.fragment,D),W(d.$$.fragment,D),W(a.$$.fragment,D),W(u.$$.fragment,D),W(c.$$.fragment,D),W(T.$$.fragment,D),W(g.$$.fragment,D),O=O.filter(Boolean);for(let p=0;p<O.length;p+=1)W(O[p]);k=!1},d(D){D&&(P(t),P($),P(A),P(w),P(G)),V(i),V(d),V(a),V(u),V(c),V(T),V(g),wt(O,D)}}}function ue(r){let t,e;return t=new Ft({props:{card:r[14]}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const d={};n&2&&(d.card=i[14]),t.$set(d)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function fe(r){let t,e;return t=new Ft({props:{card:r[14],back:!0}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const d={};n&2&&(d.card=i[14]),t.$set(d)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function ae(r){let t,e,i,n,d,l=rt(r[17]),a=[];for(let y=0;y<l.length;y+=1)a[y]=ue(ie(r,l,y));const h=y=>W(a[y],1,1,()=>{a[y]=null});let u=rt(r[17]),s=[];for(let y=0;y<u.length;y+=1)s[y]=fe(re(r,u,y));const c=y=>W(s[y],1,1,()=>{s[y]=null});return{c(){t=U("div");for(let y=0;y<a.length;y+=1)a[y].c();e=z(),i=U("div");for(let y=0;y<s.length;y+=1)s[y].c();n=z(),H(t,"class","page svelte-54h2p3"),H(i,"class","page svelte-54h2p3")},m(y,T){J(y,t,T);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(t,null);J(y,e,T),J(y,i,T);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(i,null);Q(i,n),d=!0},p(y,T){if(T&2){l=rt(y[17]);let _;for(_=0;_<l.length;_+=1){const g=ie(y,l,_);a[_]?(a[_].p(g,T),q(a[_],1)):(a[_]=ue(g),a[_].c(),q(a[_],1),a[_].m(t,null))}for(ct(),_=l.length;_<a.length;_+=1)h(_);st()}if(T&2){u=rt(y[17]);let _;for(_=0;_<u.length;_+=1){const g=re(y,u,_);s[_]?(s[_].p(g,T),q(s[_],1)):(s[_]=fe(g),s[_].c(),q(s[_],1),s[_].m(i,n))}for(ct(),_=u.length;_<s.length;_+=1)c(_);st()}},i(y){if(!d){for(let T=0;T<l.length;T+=1)q(a[T]);for(let T=0;T<u.length;T+=1)q(s[T]);d=!0}},o(y){a=a.filter(Boolean);for(let T=0;T<a.length;T+=1)W(a[T]);s=s.filter(Boolean);for(let T=0;T<s.length;T+=1)W(s[T]);d=!1},d(y){y&&(P(t),P(e),P(i)),wt(a,y),wt(s,y)}}}function pn(r){let t;return{c(){t=tt("add two sided")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function _n(r){let t;return{c(){t=tt("add one sided")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function yn(r){let t;return{c(){t=tt("save")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function vn(r){let t;return{c(){t=tt("import JSON")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function bn(r){let t;return{c(){t=tt("export JSON")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function gn(r){let t;return{c(){t=tt("Download")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function kn(r){let t;return{c(){t=tt("remove")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function le(r){let t,e,i,n,d,l;e=new Ft({props:{card:r[14]}});function a(){return r[11](r[14])}return n=new at({props:{colour:"red",$$slots:{default:[kn]},$$scope:{ctx:r}}}),n.$on("click",a),{c(){t=U("div"),X(e.$$.fragment),i=z(),X(n.$$.fragment),d=z(),H(t,"class","wrapper svelte-54h2p3")},m(h,u){J(h,t,u),K(e,t,null),Q(t,i),K(n,t,null),Q(t,d),l=!0},p(h,u){r=h;const s={};u&16&&(s.card=r[14]),e.$set(s);const c={};u&16777216&&(c.$$scope={dirty:u,ctx:r}),n.$set(c)},i(h){l||(q(e.$$.fragment,h),q(n.$$.fragment,h),l=!0)},o(h){W(e.$$.fragment,h),W(n.$$.fragment,h),l=!1},d(h){h&&P(t),V(e),V(n)}}}function mn(r){let t,e,i,n;const d=[dn,hn],l=[];function a(h,u){return h[3]?1:0}return t=a(r),e=l[t]=d[t](r),{c(){e.c(),i=Jt()},m(h,u){l[t].m(h,u),J(h,i,u),n=!0},p(h,[u]){let s=t;t=a(h),t===s?l[t].p(h,u):(ct(),W(l[s],1,1,()=>{l[s]=null}),st(),e=l[t],e?e.p(h,u):(e=l[t]=d[t](h),e.c()),q(e,1),e.m(i.parentNode,i))},i(h){n||(q(e),n=!0)},o(h){W(e),n=!1},d(h){h&&P(i),l[t].d(h)}}}function $n(r,t,e){let i,n,d;$e(r,$t,A=>e(1,d=A));let l,a,h="None";const u=(A,j)=>j==="None"?A:A.filter(f=>f.cardHalf1.cardType.type===j||f.cardHalf2&&f.cardHalf2.cardType.type===j);xe(()=>{const A=new URLSearchParams(window.location.search);e(3,a=!!A.get("download"))});const s=({detail:A})=>e(0,h=A),c=()=>{$t.set([...d,Kt(2)])},y=()=>{$t.set([...d,Kt(1)]),console.log(d.length)},T=()=>{Pt(d)},_=()=>{const A=document.createElement("a");A.href=`${window.location.href}?download=true`,A.click()},g=A=>{Pt(d.filter(j=>j.id!==A.id))};function $(A){Bt[A?"unshift":"push"](()=>{l=A,e(2,l)})}return r.$$.update=()=>{r.$$.dirty&1&&e(5,i=St(h)),r.$$.dirty&3&&e(4,n=u(d,h))},[h,d,l,a,n,i,s,c,y,T,_,g,$]}class wn extends gt{constructor(t){super(),bt(this,t,$n,mn,ht,{})}}new wn({target:document.getElementById("app")});
