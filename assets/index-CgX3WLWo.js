var oe=Object.defineProperty;var ue=(i,t,n)=>t in i?oe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var At=(i,t,n)=>ue(i,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const y of e)if(y.type==="childList")for(const u of y.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const y={};return e.integrity&&(y.integrity=e.integrity),e.referrerPolicy&&(y.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?y.credentials="include":e.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(e){if(e.ep)return;e.ep=!0;const y=n(e);fetch(e.href,y)}})();function tt(){}function fe(i,t){for(const n in t)i[n]=t[n];return i}function Yt(i){return i()}function Ft(){return Object.create(null)}function pt(i){i.forEach(Yt)}function Zt(i){return typeof i=="function"}function et(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}let kt;function jt(i,t){return i===t?!0:(kt||(kt=document.createElement("a")),kt.href=t,i===kt.href)}function ae(i){return Object.keys(i).length===0}function se(i,...t){if(i==null){for(const a of t)a(void 0);return tt}const n=i.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function te(i,t,n){i.$$.on_destroy.push(se(t,n))}function ce(i,t,n,a){if(i){const e=ee(i,t,n,a);return i[0](e)}}function ee(i,t,n,a){return i[1]&&a?fe(n.ctx.slice(),i[1](a(t))):n.ctx}function le(i,t,n,a){if(i[2]&&a){const e=i[2](a(n));if(t.dirty===void 0)return e;if(typeof e=="object"){const y=[],u=Math.max(t.dirty.length,e.length);for(let l=0;l<u;l+=1)y[l]=t.dirty[l]|e[l];return y}return t.dirty|e}return t.dirty}function he(i,t,n,a,e,y){if(e){const u=ee(t,n,a,y);i.p(u,e)}}function de(i){if(i.ctx.length>32){const t=[],n=i.ctx.length/32;for(let a=0;a<n;a++)t[a]=-1;return t}return-1}function pe(i,t,n){return i.set(n),t}function K(i,t){i.appendChild(t)}function q(i,t,n){i.insertBefore(t,n||null)}function J(i){i.parentNode&&i.parentNode.removeChild(i)}function ne(i,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].d(t)}function z(i){return document.createElement(i)}function rt(i){return document.createTextNode(i)}function V(){return rt(" ")}function _e(){return rt("")}function dt(i,t,n,a){return i.addEventListener(t,n,a),()=>i.removeEventListener(t,n,a)}function F(i,t,n){n==null?i.removeAttribute(t):i.getAttribute(t)!==n&&i.setAttribute(t,n)}function ye(i){return Array.from(i.childNodes)}function nt(i,t,n,a){n==null?i.style.removeProperty(t):i.style.setProperty(t,n,"")}function ve(i,t,{bubbles:n=!1,cancelable:a=!1}={}){return new CustomEvent(i,{detail:t,bubbles:n,cancelable:a})}function Jt(i,t){return new i(t)}let gt;function yt(i){gt=i}function ge(){if(!gt)throw new Error("Function called outside component initialization");return gt}function be(){const i=ge();return(t,n,{cancelable:a=!1}={})=>{const e=i.$$.callbacks[t];if(e){const y=ve(t,n,{cancelable:a});return e.slice().forEach(u=>{u.call(i,y)}),!y.defaultPrevented}return!0}}function $e(i,t){const n=i.$$.callbacks[t.type];n&&n.slice().forEach(a=>a.call(this,t))}const lt=[],qt=[];let ht=[];const Wt=[],me=Promise.resolve();let Nt=!1;function ke(){Nt||(Nt=!0,me.then(re))}function bt(i){ht.push(i)}const Gt=new Set;let st=0;function re(){if(st!==0)return;const i=gt;do{try{for(;st<lt.length;){const t=lt[st];st++,yt(t),we(t.$$)}}catch(t){throw lt.length=0,st=0,t}for(yt(null),lt.length=0,st=0;qt.length;)qt.pop()();for(let t=0;t<ht.length;t+=1){const n=ht[t];Gt.has(n)||(Gt.add(n),n())}ht.length=0}while(lt.length);for(;Wt.length;)Wt.pop()();Nt=!1,Gt.clear(),yt(i)}function we(i){if(i.fragment!==null){i.update(),pt(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(bt)}}function Te(i){const t=[],n=[];ht.forEach(a=>i.indexOf(a)===-1?t.push(a):n.push(a)),n.forEach(a=>a()),ht=t}const wt=new Set;let at;function Mt(){at={r:0,c:[],p:at}}function It(){at.r||pt(at.c),at=at.p}function R(i,t){i&&i.i&&(wt.delete(i),i.i(t))}function U(i,t,n,a){if(i&&i.o){if(wt.has(i))return;wt.add(i),at.c.push(()=>{wt.delete(i),a&&(n&&i.d(1),a())}),i.o(t)}else a&&a()}function St(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Y(i){i&&i.c()}function Q(i,t,n){const{fragment:a,after_update:e}=i.$$;a&&a.m(t,n),bt(()=>{const y=i.$$.on_mount.map(Yt).filter(Zt);i.$$.on_destroy?i.$$.on_destroy.push(...y):pt(y),i.$$.on_mount=[]}),e.forEach(bt)}function X(i,t){const n=i.$$;n.fragment!==null&&(Te(n.after_update),pt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(i,t){i.$$.dirty[0]===-1&&(lt.push(i),ke(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function it(i,t,n,a,e,y,u=null,l=[-1]){const c=gt;yt(i);const s=i.$$={fragment:null,ctx:[],props:y,update:tt,not_equal:e,bound:Ft(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Ft(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};u&&u(s.root);let h=!1;if(s.ctx=n?n(i,t.props||{},(f,w,...m)=>{const p=m.length?m[0]:w;return s.ctx&&e(s.ctx[f],s.ctx[f]=p)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](p),h&&je(i,f)),w}):[],s.update(),h=!0,pt(s.before_update),s.fragment=a?a(s.ctx):!1,t.target){if(t.hydrate){const f=ye(t.target);s.fragment&&s.fragment.l(f),f.forEach(J)}else s.fragment&&s.fragment.c();t.intro&&R(i.$$.fragment),Q(i,t.target,t.anchor),re()}yt(c)}class ot{constructor(){At(this,"$$");At(this,"$$set")}$destroy(){X(this,1),this.$destroy=tt}$on(t,n){if(!Zt(n))return tt;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const e=a.indexOf(n);e!==-1&&a.splice(e,1)}}$set(t){this.$$set&&!ae(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Se);function Oe(i){let t,n,a,e,y;const u=i[2].default,l=ce(u,i,i[1],null);return{c(){t=z("button"),l&&l.c(),F(t,"class",n="button "+i[0]+" svelte-1t3yz2i")},m(c,s){q(c,t,s),l&&l.m(t,null),a=!0,e||(y=dt(t,"click",i[3]),e=!0)},p(c,[s]){l&&l.p&&(!a||s&2)&&he(l,u,c,c[1],a?le(u,c[1],s,null):de(c[1]),null),(!a||s&1&&n!==(n="button "+c[0]+" svelte-1t3yz2i"))&&F(t,"class",n)},i(c){a||(R(l,c),a=!0)},o(c){U(l,c),a=!1},d(c){c&&J(t),l&&l.d(c),e=!1,y()}}}function De(i,t,n){let{$$slots:a={},$$scope:e}=t,{colour:y="green"}=t;function u(l){$e.call(this,i,l)}return i.$$set=l=>{"colour"in l&&n(0,y=l.colour),"$$scope"in l&&n(1,e=l.$$scope)},[y,e,a,u]}class vt extends ot{constructor(t){super(),it(this,t,De,Oe,et,{colour:0})}}const ct=[];function Ct(i,t=tt){let n;const a=new Set;function e(l){if(et(i,l)&&(i=l,n)){const c=!ct.length;for(const s of a)s[1](),ct.push(s,i);if(c){for(let s=0;s<ct.length;s+=2)ct[s][0](ct[s+1]);ct.length=0}}}function y(l){e(l(i))}function u(l,c=tt){const s=[l,c];return a.add(s),a.size===1&&(n=t(e,y)||tt),l(i),()=>{a.delete(s),a.size===0&&n&&(n(),n=null)}}return{set:e,update:y,subscribe:u}}const Ot=i=>{switch(i){case"curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";default:return"#FFFFFF"}},Dt=i=>{switch(i){case"curse":return"Curse.svg";case"Deck":return"Deck.svg";case"Movement":return"Movement.svg";case"Change":return"Change.svg";case"Mystery":return"Mystery.svg";case"Board":return"Board.svg";default:return"Blank.svg"}},zt=i=>{const t=Math.random().toString(36);return i===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function xe(i){let t,n,a,e,y;return{c(){t=z("div"),n=z("div"),a=z("div"),F(a,"contenteditable","true"),F(a,"class","cardText svelte-2sj25y"),i[0].text===void 0&&bt(()=>i[3].call(a)),F(n,"class","card svelte-2sj25y"),nt(n,"--colour",i[2]),F(t,"class","wrapper svelte-2sj25y"),nt(t,"--rotation",i[1]+"deg")},m(u,l){q(u,t,l),K(t,n),K(n,a),i[0].text!==void 0&&(a.innerText=i[0].text),e||(y=dt(a,"input",i[3]),e=!0)},p(u,[l]){l&1&&u[0].text!==a.innerText&&(a.innerText=u[0].text),l&4&&nt(n,"--colour",u[2]),l&2&&nt(t,"--rotation",u[1]+"deg")},i:tt,o:tt,d(u){u&&J(t),e=!1,y()}}}function Ae(i,t,n){let a,{card:e}=t,{rotation:y=0}=t;function u(){e.text=this.innerText,n(0,e)}return i.$$set=l=>{"card"in l&&n(0,e=l.card),"rotation"in l&&n(1,y=l.rotation)},i.$$.update=()=>{i.$$.dirty&1&&n(2,a=Ot(e.cardType.type))},[e,y,a,u]}class Rt extends ot{constructor(t){super(),it(this,t,Ae,xe,et,{card:0,rotation:1})}}function Ut(i,t,n){const a=i.slice();return a[10]=t[n],a}function Lt(i){let t,n=St(i[2]),a=[];for(let e=0;e<n.length;e+=1)a[e]=Kt(Ut(i,n,e));return{c(){t=z("div");for(let e=0;e<a.length;e+=1)a[e].c();F(t,"class","options svelte-lm5vvd"),nt(t,"--colour",i[4])},m(e,y){q(e,t,y);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(e,y){if(y&13){n=St(e[2]);let u;for(u=0;u<n.length;u+=1){const l=Ut(e,n,u);a[u]?a[u].p(l,y):(a[u]=Kt(l),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=n.length}y&16&&nt(t,"--colour",e[4])},d(e){e&&J(t),ne(a,e)}}}function Kt(i){let t,n,a,e,y;function u(){return i[7](i[10])}return{c(){t=z("img"),jt(t.src,n=Dt(i[10]))||F(t,"src",n),F(t,"alt","My Icon"),F(t,"class",a="cardIcon "+(i[0]===i[10]?"hidden":"")+" svelte-lm5vvd")},m(l,c){q(l,t,c),e||(y=dt(t,"click",u),e=!0)},p(l,c){i=l,c&4&&!jt(t.src,n=Dt(i[10]))&&F(t,"src",n),c&5&&a!==(a="cardIcon "+(i[0]===i[10]?"hidden":"")+" svelte-lm5vvd")&&F(t,"class",a)},d(l){l&&J(t),e=!1,y()}}}function Ge(i){let t,n,a,e,y,u,l,c,s,h,f,w,m=i[3]&&Lt(i);return{c(){t=z("div"),n=z("img"),e=V(),m&&m.c(),y=V(),u=z("input"),l=V(),c=z("label"),s=rt("Passive"),jt(n.src,a=Dt(i[0]))||F(n,"src",a),F(n,"alt","My Icon"),F(n,"class","cardIcon svelte-lm5vvd"),F(t,"class","select svelte-lm5vvd"),F(u,"type","checkbox"),F(u,"id",i[5]),F(u,"class","hidden"),F(c,"for",i[5]),F(c,"class",h="passive no-select "+(i[1]?"":"invisible")+" svelte-lm5vvd")},m(p,g){q(p,t,g),K(t,n),K(t,e),m&&m.m(t,null),q(p,y,g),q(p,u,g),u.checked=i[1],q(p,l,g),q(p,c,g),K(c,s),f||(w=[dt(n,"click",i[6]),dt(u,"change",i[8])],f=!0)},p(p,[g]){g&1&&!jt(n.src,a=Dt(p[0]))&&F(n,"src",a),p[3]?m?m.p(p,g):(m=Lt(p),m.c(),m.m(t,null)):m&&(m.d(1),m=null),g&2&&(u.checked=p[1]),g&2&&h!==(h="passive no-select "+(p[1]?"":"invisible")+" svelte-lm5vvd")&&F(c,"class",h)},i:tt,o:tt,d(p){p&&(J(t),J(y),J(u),J(l),J(c)),m&&m.d(),f=!1,pt(w)}}}function Ne(i,t,n){let a,{cardType:e}=t,{passive:y=!1}=t;const u=Math.random().toString(36).substring(7),l=be();let c=!1,{names:s=["Board","Change","Deck","Movement","Mystery","curse"]}=t;const h=()=>n(3,c=!c),f=m=>{n(0,e=m),n(3,c=!1)};function w(){y=this.checked,n(1,y)}return i.$$set=m=>{"cardType"in m&&n(0,e=m.cardType),"passive"in m&&n(1,y=m.passive),"names"in m&&n(2,s=m.names)},i.$$.update=()=>{i.$$.dirty&1&&n(4,a=Ot(e)),i.$$.dirty&1&&l("type",e),i.$$.dirty&2&&l("passive",y)},[e,y,s,c,a,u,h,f,w]}class Et extends ot{constructor(t){super(),it(this,t,Ne,Ge,et,{cardType:0,passive:1,names:2})}}function Ee(i){let t,n,a,e,y,u,l,c;return a=new Et({props:{cardType:i[0].cardType.type,passive:i[0].cardType.passive,names:["Mystery","curse"]}}),a.$on("type",i[1]),{c(){t=z("div"),n=z("p"),Y(a.$$.fragment),e=V(),y=z("div"),F(n,"class","svelte-1adgv2l"),F(y,"contenteditable","true"),F(y,"class","cardText svelte-1adgv2l"),i[0].text===void 0&&bt(()=>i[2].call(y)),F(t,"class","card svelte-1adgv2l"),nt(t,"--colour",Ot(i[0].cardType.type))},m(s,h){q(s,t,h),K(t,n),Q(a,n,null),K(t,e),K(t,y),i[0].text!==void 0&&(y.innerText=i[0].text),u=!0,l||(c=dt(y,"input",i[2]),l=!0)},p(s,[h]){const f={};h&1&&(f.cardType=s[0].cardType.type),h&1&&(f.passive=s[0].cardType.passive),a.$set(f),h&1&&s[0].text!==y.innerText&&(y.innerText=s[0].text),(!u||h&1)&&nt(t,"--colour",Ot(s[0].cardType.type))},i(s){u||(R(a.$$.fragment,s),u=!0)},o(s){U(a.$$.fragment,s),u=!1},d(s){s&&J(t),X(a),l=!1,c()}}}function Me(i,t,n){let{card:a}=t;const e=({detail:u})=>n(0,a.cardType.type=u,a);function y(){a.text=this.innerText,n(0,a)}return i.$$set=u=>{"card"in u&&n(0,a=u.card)},[a,e,y]}class Ie extends ot{constructor(t){super(),it(this,t,Me,Ee,et,{card:0})}}function Ce(i){let t,n;return t=new Ie({props:{card:i[0].cardHalf1}}),{c(){Y(t.$$.fragment)},m(a,e){Q(t,a,e),n=!0},p(a,e){const y={};e&1&&(y.card=a[0].cardHalf1),t.$set(y)},i(a){n||(R(t.$$.fragment,a),n=!0)},o(a){U(t.$$.fragment,a),n=!1},d(a){X(t,a)}}}function Be(i){let t,n,a,e,y,u,l,c,s,h;return n=new Et({props:{cardType:i[0].cardHalf1.cardType.type,passive:i[0].cardHalf1.cardType.passive}}),n.$on("type",i[1]),n.$on("passive",i[2]),e=new Rt({props:{card:i[0].cardHalf1}}),u=new Rt({props:{card:i[0].cardHalf2,rotation:180}}),s=new Et({props:{cardType:i[0].cardHalf2.cardType.type,passive:i[0].cardHalf2.cardType.passive}}),s.$on("type",i[3]),s.$on("passive",i[4]),{c(){t=z("p"),Y(n.$$.fragment),a=V(),Y(e.$$.fragment),y=V(),Y(u.$$.fragment),l=V(),c=z("p"),Y(s.$$.fragment),F(t,"class","first svelte-btssnq"),F(c,"class","second svelte-btssnq")},m(f,w){q(f,t,w),Q(n,t,null),q(f,a,w),Q(e,f,w),q(f,y,w),Q(u,f,w),q(f,l,w),q(f,c,w),Q(s,c,null),h=!0},p(f,w){const m={};w&1&&(m.cardType=f[0].cardHalf1.cardType.type),w&1&&(m.passive=f[0].cardHalf1.cardType.passive),n.$set(m);const p={};w&1&&(p.card=f[0].cardHalf1),e.$set(p);const g={};w&1&&(g.card=f[0].cardHalf2),u.$set(g);const b={};w&1&&(b.cardType=f[0].cardHalf2.cardType.type),w&1&&(b.passive=f[0].cardHalf2.cardType.passive),s.$set(b)},i(f){h||(R(n.$$.fragment,f),R(e.$$.fragment,f),R(u.$$.fragment,f),R(s.$$.fragment,f),h=!0)},o(f){U(n.$$.fragment,f),U(e.$$.fragment,f),U(u.$$.fragment,f),U(s.$$.fragment,f),h=!1},d(f){f&&(J(t),J(a),J(y),J(l),J(c)),X(n),X(e,f),X(u,f),X(s)}}}function He(i){let t,n,a,e;const y=[Be,Ce],u=[];function l(c,s){return c[0].cardHalf2?0:1}return n=l(i),a=u[n]=y[n](i),{c(){t=z("div"),a.c(),F(t,"class","card svelte-btssnq")},m(c,s){q(c,t,s),u[n].m(t,null),e=!0},p(c,[s]){let h=n;n=l(c),n===h?u[n].p(c,s):(Mt(),U(u[h],1,1,()=>{u[h]=null}),It(),a=u[n],a?a.p(c,s):(a=u[n]=y[n](c),a.c()),R(a,1),a.m(t,null))},i(c){e||(R(a),e=!0)},o(c){U(a),e=!1},d(c){c&&J(t),u[n].d()}}}function Pe(i,t,n){let{card:a}=t;const e=({detail:c})=>n(0,a.cardHalf1.cardType.type=c,a),y=({detail:c})=>n(0,a.cardHalf1.cardType.passive=c,a),u=({detail:c})=>{a.cardHalf2&&n(0,a.cardHalf2.cardType.type=c,a)},l=({detail:c})=>{a.cardHalf2&&n(0,a.cardHalf2.cardType.passive=c,a)};return i.$$set=c=>{"card"in c&&n(0,a=c.card)},[a,e,y,u,l]}class Fe extends ot{constructor(t){super(),it(this,t,Pe,He,et,{card:0})}}function Je(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function qe(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bt={exports:{}};Bt.exports;(function(i){(function(){function t(a,e){return e?qe(a):a.slice?t[y(a)]:function(u,l){a(u={exports:{}}),t[y(l)]=u.exports};function y(u){return u.split("/").slice(-1).toString().replace(".js","")}}var n=i;t(function(a){String.random=function(y,u){var l="";for(y=y||24,u=u||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";y-- >0;)l+=u.charAt(Math.floor(Math.random()*u.length));return l},String.match=function(y,u){var l,c;return typeof y!="string"?!1:(typeof u=="string"&&(u={"=":u}),u=u||{},l=u["="]||u["*"]||u[">"]||u["<"],y===l?!0:c!==u["="]?!1:(l=u["*"]||u[">"],y.slice(0,(l||"").length)===l?!0:c!==u["*"]?!1:c!==u[">"]&&c!==u["<"]?y>=u[">"]&&y<=u["<"]:c!==u[">"]&&y>=u[">"]||c!==u["<"]&&y<=u["<"]))},String.hash=function(y,u){if(typeof y=="string"){if(u=u||0,!y.length)return u;for(var l=0,c=y.length,s;l<c;++l)s=y.charCodeAt(l),u=(u<<5)-u+s,u|=0;return u}};var e=Object.prototype.hasOwnProperty;Object.plain=function(y){return y?y instanceof Object&&y.constructor===Object||Object.prototype.toString.call(y).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(y,u){for(var l in y)if(e.call(y,l)&&(!u||u.indexOf(l)==-1))return!1;return!0},Object.keys=Object.keys||function(y){var u=[];for(var l in y)e.call(y,l)&&u.push(l);return u},function(){var y,u=setTimeout,l=0,c=0,s=typeof setImmediate!=""+y&&setImmediate||function(f,w){return typeof MessageChannel==""+y?u:((f=new MessageChannel).port1.onmessage=function(m){m.data==""&&w()},function(m){w=m,f.port2.postMessage("")})}(),h=u.check=u.check||typeof performance!=""+y&&performance||{now:function(){return+new Date}};u.hold=u.hold||9,u.poll=u.poll||function(f){if(u.hold>=h.now()-l&&c++<3333){f();return}s(function(){l=h.now(),f()},c=0)}}(),function(){var y=setTimeout,u=y.turn=y.turn||function(w){l.push(w)==1&&c(f)},l=u.s=[],c=y.poll,s=0,h,f=function(){(h=l[s++])&&h(),(s==l.length||s==99)&&(l=u.s=l.slice(s),s=0),l.length&&c(f)}}(),function(){var y,u=setTimeout,l=u.turn;(u.each=u.each||function(c,s,h,f){f=f||9,function w(m,p,g){if(p=(m=(c||[]).splice(0,f)).length){for(var b=0;b<p&&y===(g=s(m[b]));b++);if(y===g){l(w);return}}h&&h(g)}()})()}()})(t,"./shim"),t(function(a){a.exports=function e(h,u,l){if(!h)return{to:e};var c,s=typeof u=="function",h=(this.tag||(this.tag={}))[h]||s&&(this.tag[h]={tag:h,to:e._={next:function(w){var m;(m=this.to)&&m.next(w)}}});if(s){var f={off:e.off||(e.off=function(){if(this.next===e._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=e._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:e._,next:u,the:h,on:this,as:l};return(f.back=h.last||h).to=f,h.last=f}return(h=h.to)&&c!==u&&h.next(u),h}})(t,"./onto"),t(function(a){a.exports=function(e){return e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"&&e!=1/0&&e!=-1/0&&e===e||!!e&&typeof e["#"]=="string"&&Object.keys(e).length===1&&e["#"]}})(t,"./valid"),t(function(a){t("./shim");function e(){var h=+new Date;return c<h?(u=0,c=h+e.drift):c=h+(u+=1)/l+e.drift}e.drift=0;var y=-1/0,u=0,l=999,c=y,s;e.is=function(h,f,w){var m=f&&h&&h._&&h._[">"]||w;if(m)return typeof(m=m[f])=="number"?m:y},e.ify=function(h,f,w,m,p){(h=h||{})._=h._||{},p&&(h._["#"]=p);var g=h._[">"]||(h._[">"]={});return s!==f&&f!=="_"&&(typeof w=="number"&&(g[f]=w),s!==m&&(h[f]=m)),h},a.exports=e})(t,"./state"),t(function(a){t("./shim");function e(y){var u={s:{}},l=u.s;y=y||{max:999,age:1e3*9},u.check=function(s){return l[s]?c(s):!1};var c=u.track=function(s){var h=l[s]||(l[s]={});return h.was=u.now=+new Date,u.to||(u.to=setTimeout(u.drop,y.age+9)),c.ed&&c.ed(s),h};return u.drop=function(s){u.to=null,u.now=+new Date;var h=Object.keys(l);console.STAT&&console.STAT(u.now,+new Date-u.now,"dup drop keys"),setTimeout.each(h,function(f){var w=l[f];w&&(s||y.age)>u.now-w.was||delete l[f]},0,99)},u}a.exports=e})(t,"./dup"),t(function(a){t("./onto"),a.exports=function(u,l){if(this.on){var c=(this.opt||{}).lack||9e3;if(typeof u!="function"){if(!u)return;var h=u["#"]||u,s=(this.tag||"")[h];return s?(l&&(s=this.on(h,l),clearTimeout(s.err),s.err=setTimeout(function(){s.off()},c)),!0):void 0}var h=l&&l["#"]||e(9);if(!u)return h;var f=this.on(h,u,l);return f.err=f.err||setTimeout(function(){f.off(),f.next({err:"Error: No ACK yet.",lack:!0})},c),h}};var e=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(a){function e(p){return p instanceof e?(this._={$:this}).$:this instanceof e?e.create(this._={$:this,opt:p}):new e(p)}e.is=function(p){return p instanceof e||p&&p._&&p===p._.$||!1},e.version=.202,e.chain=e.prototype,e.chain.toJSON=function(){},t("./shim"),e.valid=t("./valid"),e.state=t("./state"),e.on=t("./onto"),e.dup=t("./dup"),e.ask=t("./ask"),function(){e.create=function(r){r.root=r.root||r,r.graph=r.graph||{},r.on=r.on||e.on,r.ask=r.ask||e.ask,r.dup=r.dup||e.dup();var v=r.$.opt(r.opt);return r.once||(r.on("in",p,r),r.on("out",p,r),r.on("put",x,r),e.on("create",r),r.on("create",r)),r.once=1,v};function p(r){if(r){if(r.out===p){this.to.next(r);return}var v=this,k=v.as,E=k.at||k,G=E.$,S=E.dup,N,C=r.DBG;if((N=r["#"])||(N=r["#"]=u(9)),!S.check(N)){if(S.track(N),N=r._,r._=typeof N=="function"?N:function(){},r.$&&r.$===(r.$._||"").$||(r.$=G),r["@"]&&!r.put&&o(r),!E.ask(r["@"],r))if(C&&(C.u=+new Date),r.put){g(r);return}else r.get&&e.on.get(r,G);C&&(C.uc=+new Date),v.to.next(r),C&&(C.ua=+new Date),!(r.nts||r.NTS)&&(r.out=p,E.on("out",r),C&&(C.ue=+new Date))}}}function g(r){if(r){var v=r._||"",k=v.root=((v.$=r.$||"")._||"").root;if(r["@"]&&v.faith&&!v.miss){r.out=p,k.on("out",r);return}v.latch=k.hatch,v.match=k.hatch=[];var E=r.put,G=v.DBG=r.DBG,S=+new Date;if(M=M||S,!(E["#"]&&E["."])){G&&(G.p=S),v["#"]=r["#"],v.msg=r,v.all=0,v.stun=1;var N=Object.keys(E);console.STAT&&console.STAT(S,((G||v).pk=+new Date)-S,"put sort");var C=0,B,H,P,W,L,Z,_t;(function ut($t){if(B!=C){if(B=C,!(P=N[C])){console.STAT&&console.STAT(S,((G||v).pd=+new Date)-S,"put"),j(v);return}(W=E[P])?(_t=W._)?P!==_t["#"]?Z=T+D(P)+"soul not same.":(L=_t[">"])||(Z=T+D(P)+"no state."):Z=T+D(P)+"no meta.":Z=T+D(P)+"no node.",H=Object.keys(W||{})}if(Z){r.err=v.err=Z,j(v);return}var Ht=0,ft;for($t=$t||0;$t++<9&&(ft=H[Ht++]);)if(ft!=="_"){var mt=W[ft],Pt=L[ft];if(f===Pt){Z=T+D(ft)+"on"+D(P)+"no state.";break}if(!c(mt)){Z=T+D(ft)+"on"+D(P)+"bad "+typeof mt+D(mt);break}b(mt,ft,P,Pt,r),++I}if((H=H.slice(Ht)).length){l(ut);return}++C,H=null,ut($t)})()}}}e.on.put=g;function b(r,v,k,E,G){var S=G._||"",N=S.root,C=N.graph,B,H=C[k]||w,P=s(H,v,1),W=H[v],L=S.DBG;(B=console.STAT)&&(!C[k]||!W)&&(B.has=(B.has||0)+1);var Z=A();if(E>Z){setTimeout(function(){b(r,v,k,E,G)},(B=E-Z)>O?O:B),console.STAT&&console.STAT((L||S).Hf=+new Date,B,"future");return}if(!(E<P)&&!(!S.faith&&E===P&&(r===W||$(r)<=$(W))&&!S.miss)){S.stun++;var _t=G["#"]+S.all++,ut={toString:function(){return _t},_:S};ut.toJSON=ut.toString,N.dup.track(ut)["#"]=G["#"],L&&(L.ph=L.ph||+new Date),N.on("put",{"#":ut,"@":G["@"],put:{"#":k,".":v,":":r,">":E},ok:G.ok,_:S})}}function x(r){var v;(v=(r._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var k=this,E=k.as,G=E.graph,S=r._,N=r.put,C=N["#"],B=N["."],H=N[":"],P=N[">"];r["#"];var W;(W=S.msg)&&(W=W.put)&&(W=W[C])&&h(W,B,P,H,C),G[C]=h(G[C],B,P,H,C),(W=(E.next||"")[C])&&W.on("in",r),j(S),k.to.next(r)}function j(r,v){var k;if(!r.stop&&!(!r.err&&0<--r.stun)&&(r.stop=1,!!(k=r.root))){var E=r.match;E.end=1,E===k.hatch&&(!(E=r.latch)||E.end?delete k.hatch:k.hatch=E),r.hatch&&r.hatch(),setTimeout.each(r.match,function(G){G&&G()}),!(!(v=r.msg)||r.err||v.err)&&(v.out=p,r.root.on("out",v),d())}}function o(r){var v=r["@"]||"",k;if(!(k=v._)){var E=(E=r.$)&&(E=E._)&&(E=E.root)&&(E=E.dup);if(!(E=E.check(v)))return;r["@"]=E["#"]||r["@"];return}k.acks=(k.acks||0)+1,(k.err=r.err)&&(r["@"]=k["#"],j(k)),k.ok=r.ok||k.ok,!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){_(k)})),_(k)}function _(r){!r||!r.root||r.stun||r.acks!==r.all||r.root.on("in",{"@":r["#"],err:r.err,ok:r.err?f:r.ok||{"":1}})}var T="Error: Invalid graph!",D=function(r){return" '"+(""+r).slice(0,9)+"...' "},$=JSON.stringify,O=2147483647,A=e.state,I=0,M,d=function(){I>999&&I/-(M-(M=+new Date))>1&&(e.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),d=function(){I=0})}}(),function(){e.on.get=function(g,b){var x=b._,j=g.get,o=j["#"],_=x.graph[o],T=j["."],D=x.next||(x.next={}),$=D[o],O=g._||{},A=O.DBG=g.DBG;if(A&&(A.g=+new Date),!_)return x.on("get",g);if(T){if((typeof T!="string"||f===_[T])&&!(($||"").next||"")[T]){x.on("get",g);return}_=h({},T,s(_,T),_[T],o)}_&&p(g,_),x.on("get",g)};function p(g,b){var x=+new Date,j=g._||{},o=j.DBG=g.DBG,_=g["#"],T=u(9),D=Object.keys(b||"").sort(),$=((b||"")._||"")["#"];D.length;var O=g.$._.root,A=b===O.graph[$];console.STAT&&console.STAT(x,((o||j).gk=+new Date)-x,"got keys"),b&&function I(){x=+new Date;for(var M=0,d,r={},v;M<9&&(d=D[M++]);)h(r,d,s(b,d),b[d],$);D=D.slice(M),(v={})[$]=r,r=v;var k;A&&(k=function(){},k.ram=k.faith=!0),v=D.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),o&&(o.ga=+new Date),O.on("in",{"@":_,"#":T,put:r,"%":v?T=u(9):f,$:O.$,_:k,DBG:o,FOO:1}),console.STAT&&console.STAT(x,+new Date-x,"got in"),v&&setTimeout.turn(I)}(),b||O.on("in",{"@":g["#"]})}e.on.get.ack=p}(),function(){e.chain.opt=function(p){p=p||{};var g=this,b=g._,x=p.peers||p;return Object.plain(p)||(p={}),Object.plain(b.opt)||(b.opt=p),typeof x=="string"&&(x=[x]),Object.plain(b.opt.peers)||(b.opt.peers={}),x instanceof Array&&(p.peers={},x.forEach(function(j){var o={};o.id=o.url=j,p.peers[j]=b.opt.peers[j]=b.opt.peers[j]||o})),y(p,function j(o){var _=this[o];if(this&&this.hasOwnProperty(o)||typeof _=="string"||Object.empty(_)){this[o]=_;return}_&&_.constructor!==Object&&!(_ instanceof Array)||y(_,j)}),b.opt.from=p,e.on("opt",b),b.opt.uuid=b.opt.uuid||function(o){return e.state().toString(36).replace(".","")+String.random(o||12)},g}}();var y=function(p,g){Object.keys(p).forEach(g,p)},u=String.random,l=setTimeout.turn,c=e.valid,s=e.state.is,h=e.state.ify,f,w={},m;e.log=function(){return!e.log.off&&m.log.apply(m,arguments),[].slice.call(arguments).join(" ")},e.log.once=function(p,g,b){return(b=e.log.once)[p]=b[p]||0,b[p]++||e.log(g)},typeof window<"u"&&((window.GUN=window.Gun=e).window=window);try{typeof n<"u"&&(n.exports=e)}catch{}a.exports=e,(e.window||{}).console=(e.window||{}).console||{log:function(){}},(m=console).only=function(p,g){return m.only.i&&p===m.only.i&&m.only.i++&&(m.log.apply(m,arguments)||g)},e.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(a){var e=t("./root");e.chain.back=function(l,c){var s;if(l=l||1,l===-1||l===1/0)return this._.root.$;if(l===1)return(this._.back||this._).$;var h=this,f=h._;if(typeof l=="string"&&(l=l.split(".")),l instanceof Array){var w=0,m=l.length,s=f;for(w;w<m;w++)s=(s||y)[l[w]];return u!==s?c?h:s:(s=f.back)?s.$.back(l,c):void 0}if(typeof l=="function"){for(var p,s={back:f};(s=s.back)&&u===(p=l(s,c)););return p}return typeof l=="number"?(f.back||f).$.back(l-1):this};var y={},u})(t,"./back"),t(function(a){var e=t("./root");e.chain.chain=function(j){var o=this,_=o._,T=new(j||o).constructor(o),D=T._,$;return D.root=$=_.root,D.id=++$.once,D.back=o._,D.on=e.on,D.on("in",e.on.in,D),D.on("out",e.on.out,D),T};function y(j){var o,_=this.as,T=_.back,D=_.root,$;if(j.$||(j.$=_.$),this.to.next(j),_.err){_.on("in",{put:_.put=f,$:_.$});return}if(o=j.get){if(D.pass&&(D.pass[_.id]=_),_.lex&&Object.keys(_.lex).forEach(function(O){$[O]=_.lex[O]},$=j.get=j.get||{}),o["#"]||_.soul){if(o["#"]=o["#"]||_.soul,j["#"]||(j["#"]=w(9)),T=D.$.get(o["#"])._,o=o["."]){if(p(T.put,o)&&($=T.ask&&T.ask[o],(T.ask||(T.ask={}))[o]=T.$.get(o)._,T.on("in",{get:o,put:{"#":T.soul,".":o,":":T.put[o],">":b(D.graph[T.soul],o)}}),$))return}else{if($=T.ask&&T.ask[""],(T.ask||(T.ask={}))[""]=T,f!==T.put&&(T.on("in",T),$))return;j.$=T.$}return D.ask(s,j),D.on("in",j)}if(o["."])return _.get?(j={get:{".":_.get},$:_.$},(T.ask||(T.ask={}))[_.get]=j.$._,T.on("out",j)):(j={get:_.lex?j.get:{},$:_.$},T.on("out",j));if((_.ask||(_.ask={}))[""]=_,_.get)return o["."]=_.get,(T.ask||(T.ask={}))[_.get]=j.$._,T.on("out",j)}return T.on("out",j)}e.on.out=y;function u(j,o){o=o||this.as;var _=o.root,T=j.$||(j.$=o.$),D=(T||"")._||h,$=j.put||"",O=$["#"],A=$["."],I=f!==$["="]?$["="]:$[":"],M=$[">"]||-1/0,d;if(f!==j.put&&(f===$["#"]||f===$["."]||f===$[":"]&&f===$["="]||f===$[">"])){if(!m($)){if(!(O=(($||"")._||"")["#"])){console.log("chain not yet supported for",$,"...",j,o);return}return T=o.root.$.get(O),setTimeout.each(Object.keys($).sort(),function(r){r=="_"||f===(M=b($,r))||o.on("in",{$:T,put:{"#":O,".":r,"=":$[r],">":M},VIA:j})})}o.on("in",{$:D.back.$,put:{"#":O=D.back.soul,".":A=D.has||D.get,"=":$,">":b(D.back.put,A)},via:j});return}(j.seen||"")[o.id]||((j.seen||(j.seen=function(){}))[o.id]=o,o!==D&&(Object.keys(j).forEach(function(r){$[r]=j[r]},$={}),$.get=o.get||$.get,!o.soul&&!o.has?$.$$$=$.$$$||o.$:D.soul&&($.$=o.$,$.$$=$.$$||D.$),j=$),c(j,o),(o.soul||j.$$)&&M>=b(_.graph[O],A)&&(($=_.$.get(O)._).put=x($.put,A,M,I,O)),!D.soul&&M>=b(_.graph[O],A)&&(d=(_.$.get(O)._.next||"")[A])&&(d.put=I,typeof($=m(I))=="string"&&(d.put=_.$.get($)._.put||I)),this.to&&this.to.next(j),o.any&&setTimeout.each(Object.keys(o.any),function(r){(r=o.any[r])&&r(j)},0,99),o.echo&&setTimeout.each(Object.keys(o.echo),function(r){(r=o.echo[r])&&r.on("in",j)},0,99),((j.$$||"")._||D).soul&&(d=o.next)&&(d=d[A])&&($={},Object.keys(j).forEach(function(r){$[r]=j[r]}),$.$=(j.$$||j.$).get($.get=A),delete $.$$,delete $.$$$,d.on("in",$)),l(j,o))}e.on.in=u;function l(j,o){if(o=o||this.as||j.$._,!(j.$$&&this!==e.on)&&!(!j.put||o.soul)){var _=j.put||"",T=_["="]||_[":"],A,D=o.root,$=D.$.get(_["#"]).get(_["."])._;if(typeof(T=m(T))!="string"){this===e.on&&(($.echo||($.echo={}))[o.id]=o);return}if(!(($.echo||($.echo={}))[o.id]&&!(D.pass||"")[o.id])){if(A=D.pass){if(A[T+o.id])return;A[T+o.id]=1}($.echo||($.echo={}))[o.id]=o,o.has&&(o.link=T);var O=D.$.get($.link=T)._;(O.echo||(O.echo={}))[$.id]=$;var A=o.ask||"";(A[""]||o.lex)&&O.on("out",{get:{"#":T}}),setTimeout.each(Object.keys(A),function(I,M){!I||!(M=A[I])||M.on("out",{get:{"#":T,".":I}})},0,99)}}}e.on.link=l;function c(j,o){var _=j.put||"",T=f!==_["="]?_["="]:_[":"],D=o.root,$,O;if(f===T){if(o.soul&&f!==o.put||(O=(j.$$||j.$||"")._||"",j["@"]&&(f!==O.put||f!==o.put)))return;($=o.link||j.linked)&&delete(D.$.get($)._.echo||"")[o.id],o.has&&(o.link=null),o.put=f,setTimeout.each(Object.keys(o.next||""),function(A,I){(I=o.next[A])&&($&&delete(D.$.get($).get(A)._.echo||"")[I.id],I.on("in",{get:A,put:f,$:I.$}))},0,99);return}o.soul||j.$$||($=m(T),O=j.$._||"",!(($===O.link||o.has&&!O.link)&&!((D.pass||"")[o.id]&&typeof $!="string"))&&(delete(O.echo||"")[o.id],c({get:o.get,put:f,$:j.$,linked:j.linked=j.linked||O.link},o)))}e.on.unlink=c;function s(j,o){var _=this.as,T=_.$._;T.root;var D=_.get||"",$=(j.put||"")[D["#"]]||"";if(!j.put||typeof D["."]=="string"&&f===$[D["."]]){if(f!==T.put||!T.soul&&!T.has)return;T.ack=(T.ack||0)+1,T.on("in",{get:T.get,put:T.put=f,$:T.$,"@":j["@"]});return}(j._||{}).miss=1,e.on.put(j)}var h={},f,w=String.random,m=e.valid,p=function(j,o){return j&&Object.prototype.hasOwnProperty.call(j,o)},g=e.state,b=g.is,x=g.ify})(t,"./chain"),t(function(a){var e=t("./root");e.chain.get=function(f,w,m){var p,g;if(typeof f=="string"){if(f.length==0)return(p=this.chain())._.err={err:e.log("0 length key!",f)},w&&w.call(p,p._.err),p;var b=this,x=b._,j=x.next||c;(p=j[f])||(p=f&&y(f,b)),p=p&&p.$}else if(typeof f=="function"){let A=function(I,M,d){if(!A.stun&&!((S=_.pass)&&!S[T])){var r=I.$._,v=(I.$$||"")._,k=(v||r).put,E=!r.has&&!r.soul,G={},S;if((E||h===k)&&(k=h===((S=I.put)||"")["="]?h===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=e.valid(k))=="string"&&(k=h===(S=_.$.get(S)._.put)?o.not?h:k:S),!(o.not&&h===k)){if(h===o.stun){if((S=_.stun)&&S.on&&(x.$.back(function(N){if(S.on(""+N.id,G={}),(G.run||0)<A.id)return G}),!G.run&&S.on(""+r.id,G={}),!G.run&&v&&S.on(""+v.id,G={}),A.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=S.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[T]=function(){A(I,M,1)};return}if(h===k&&(d=0),(S=_.hatch)&&!S.end&&h===o.hatch&&!d){if(D[r.$._.id])return;D[r.$._.id]=1,S.push(function(){A(I,M,1)});return}D={}}if(_.pass){if(_.pass[T+r.id])return;_.pass[T+r.id]=1}if(o.on){o.ok.call(r.$,k,r.get,I,M||A);return}if(o.v2020){o.ok(I,M||A);return}Object.keys(I).forEach(function(N){S[N]=I[N]},S={}),I=S,I.put=k,o.ok.call(o.as,I,M||A)}}};var $=A;if(w===!0)return u(this,f,w,m),this;p=this;var x=p._,o=w||{},_=x.root,T;o.at=x,o.ok=f;var D={};return A.at=x,(x.any||(x.any={}))[T=String.random(7)]=A,A.off=function(){A.stun=1,x.any&&delete x.any[T]},A.rid=l,A.id=o.run||++_.once,g=_.pass,(_.pass={})[T]=1,o.out=o.out||{get:{}},x.on("out",o.out),_.pass=g,p}else{if(typeof f=="number")return this.get(""+f,w,m);if(typeof(g=s(f))=="string")return this.get(g,w,m);(g=this.get.next)&&(p=g(this,f))}return p?(w&&typeof w=="function"&&p.get(w,m),p):((p=this.chain())._.err={err:e.log("Invalid get request!",f)},w&&w.call(p,p._.err),p)};function y(f,w){var m=w._,p=m.next,g=w.chain(),b=g._;return p||(p=m.next={}),p[b.get=f]=b,w===m.root.$?b.soul=f:(m.soul||m.has)&&(b.has=f),b}function u(f,w,m,p){var g=f._,b=0,x;return(x=g.soul||g.link)?w(x,p,g):g.jam?g.jam.push([w,p]):(g.jam=[[w,p]],f.get(function(o,_){if(!(h===o.put&&!g.root.opt.super&&(x=Object.keys(g.root.opt.peers).length)&&++b<=x)){_.rid(o);var T=(T=o.$)&&T._||{},D=0,$;for(x=g.jam,delete g.jam;$=x[D++];){var O=$[0];$=$[1],O&&O(T.link||T.soul||e.valid(o.put)||((o.put||{})._||{})["#"],$,o,_)}}},{out:{get:{".":!0}}}),f)}function l(f){var w=this.at||this.on;if(!f||w.soul||w.has)return this.off();if(f=(f=(f=f.$||f)._||f).id){w.map;var m;if((m=this.seen||(this.seen={}))[f])return!0;m[f]=!0}}var c={},s=e.valid,h})(t,"./get"),t(function(a){var e=t("./root");e.chain.put=function(p,g,b){var x=this,j=x._,o=j.root;b=b||{},b.root=j.root,b.run||(b.run=o.once),y(b,j.id),b.ack=b.ack||g,b.via=b.via||x,b.data=b.data||p,b.soul||(b.soul=j.soul||typeof g=="string"&&g);var _=b.state=b.state||e.state();return typeof p=="function"?(p(function(T){b.data=T,x.put(s,s,b)}),x):b.soul?(b.$=o.$.get(b.soul),b.todo=[{it:b.data,ref:b.$}],b.turn=b.turn||f,b.ran=b.ran||u,function T(){var D=b.todo,$=D.pop(),O=$.it;$.ref&&$.ref._.id;var A,I,M,d,r;if(y(b,$.ref),(d=$.todo)&&(I=d.pop(),O=O[I],d.length&&D.push($)),I&&(D.path||(D.path=[])).push(I),!(A=w(O))&&!(r=e.is(O))){if(!Object.plain(O)){u.err(b,"Invalid data: "+c(O)+" at "+(b.via.back(function(S){S.get&&d.push(S.get)},d=[])||d.join("."))+"."+(D.path||[]).join("."));return}for(var v=b.seen||(b.seen=[]),k=v.length;k--;)if(O===(d=v[k]).it){A=O=d.link;break}}if(I&&A)$.node=m($.node,I,_,O);else{let S=function(N,C){var B=M.link["#"];C&&(C.off(),C.rid(N));var H=B||N.soul||(d=(N.$$||N.$)._||"").soul||d.link||((d=d.put||"")._||"")["#"]||d["#"]||((d=N.put||"")&&N.$$?d["#"]:(d["="]||d[":"]||"")["#"]);if(!B&&y(b,N.$),!H&&!$.link["#"]){($.wait||($.wait=[])).push(function(){S(N,C)});return}H||(H=[],(N.$$||N.$).back(function(P){if(d=P.soul||P.link)return H.push(d);H.push(P.get)}),H=H.reverse().join("/")),M.link["#"]=H,!r&&(((b.graph||(b.graph={}))[H]=M.node||(M.node={_:{}}))._["#"]=H),delete b.wait[E],M.wait&&setTimeout.each(M.wait,function(P){P&&P()}),b.ran(b)};var G=S;if(!b.seen){u.err(b,"Data at root of graph must be a node (an object).");return}b.seen.push(M={it:O,link:{},todo:r?[]:Object.keys(O).sort().reverse(),path:(D.path||[]).slice(),up:$}),$.node=m($.node,I,_,M.link),!r&&M.todo.length&&D.push(M);var E=b.seen.length;(b.wait||(b.wait={}))[E]="",d=(M.ref=r?O:I?$.ref.get(I):$.ref)._,(d=O&&(O._||"")["#"]||d.soul||d.link)?S({soul:d}):M.ref.get(S,{run:b.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return b.ran(b);b.turn(T)}(),x):(l(b),x)};function y(p,g){if(g){g=(g._||"").id||g;var b=p.root.stun||(p.root.stun={on:e.on}),x={},j;p.stun||(p.stun=b.on("stun",function(){})),(j=b.on(""+g))&&j.the.last.next(x),!(x.run>=p.run)&&b.on(""+g,function(o){if(p.stun.end){this.off(),this.to.next(o);return}o.run=o.run||p.run,o.stun=o.stun||p.stun})}}function u(p){if(p.err){u.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,b=g.root,x=g.ask(function(T){b.on("ack",T),T.err&&!T.lack&&e.log(T),++j>(p.acks||0)&&this.off(),p.ack&&p.ack(T,this)},p.opt),j=0,o=p.stun,_;(_=function(){o&&(u.end(o,b),setTimeout.each(Object.keys(o=o.add||""),function(T){(T=o[T])&&T()}))}).hatch=_,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":x,_})}}u.end=function(p,g){p.end=h,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()},u.err=function(p,g){(p.ack||h).call(p,p.out={err:p.err=e.log(g)}),p.ran(p)};function l(p){var g=p.via._,b;p.via=p.via.back(function(x){if(x.soul||!x.get)return x.$;b=p.data,(p.data={})[x.get]=b}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function c(p,g){return p&&(g=p.constructor)&&g.name||typeof p}var s,h=function(){},f=setTimeout.turn,w=e.valid,m=e.state.ify})(t,"./put"),t(function(a){var e=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),a.exports=e})(t,"./index"),t(function(a){var e=t("./index");e.chain.on=function(l,c,s,h){var f=this,w=f._;w.root;var m;if(typeof l=="string")return c?(m=w.on(l,c,s||w,h),s&&s.$&&(s.subs||(s.subs=[])).push(m),f):w.on(l);var p=c;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,f.get(l,p),f},e.chain.once=function(l,c){if(c=c||{},!l)return y(this);var s=this,h=s._,f=h.root;h.put;var w=String.random(7),m;return s.get(function(p,g,b,x){var j=this,o=j._,_=o.one||(o.one={});if(x.stun||_[w]==="")return;if((m=e.valid(p))===!0){T();return}if(typeof m=="string")return;clearTimeout((h.one||"")[w]),clearTimeout(_[w]),_[w]=setTimeout(T,c.wait||99);function T(D){if(!o.has&&!o.soul&&(o={put:p,get:g}),u===(m=o.put)&&(m=((b.$$||"")._||"").put),typeof e.valid(m)=="string"&&(m=f.$.get(m)._.put,m===u&&!D)){_[w]=setTimeout(function(){T(1)},c.wait||99);return}x.stun||_[w]!==""&&(_[w]="",(h.soul||h.has)&&x.off(),l.call(j,m,o.get),clearTimeout(_[w]))}},{on:1}),s};function y(l,c,s){return e.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(s=l.chain())._.nix=l.once(function(h,f){s._.on("in",this._)}),s._.lex=l._.lex,s}e.chain.off=function(){var l=this,c=l._,s,h=c.back;if(h)return c.ack=0,(s=h.next)&&s[c.get]&&delete s[c.get],(s=h.any)&&(delete h.any,h.any={}),(s=h.ask)&&delete s[c.get],(s=h.put)&&delete s[c.get],(s=c.soul)&&delete h.root.graph[s],(s=c.map)&&Object.keys(s).forEach(function(f,w){w=s[f],w.link&&h.root.$.get(w.link).off()}),(s=c.next)&&Object.keys(s).forEach(function(f,w){w=s[f],w.$.off()}),c.on("off",{}),l};var u})(t,"./on"),t(function(a){var e=t("./index"),y=e.chain.get.next;e.chain.get.next=function(s,h){var f;return Object.plain(h)?(f=((f=h["#"])||"")["="]||f)?s.get(f):((f=s.chain()._).lex=h,s.on("in",function(w){String.match(w.get||(w.put||"")["."],h["."]||h["#"]||h)&&f.on("in",w),this.to.next(w)}),f.$):(y||l)(s,h)},e.chain.map=function(s,h,f){var w=this,m=w._,p,g;return Object.plain(s)&&(p=s["."]?s:{".":s},s=c),s?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=w.chain(),w.map().on(function(b,x,j,o){var _=(s||l).call(this,b,x,j,o);if(c!==_){if(b===_)return g._.on("in",j);if(e.is(_))return g._.on("in",_._);var T={};Object.keys(j.put).forEach(function(D){T[D]=j.put[D]},T),T["="]=_,g._.on("in",{get:x,put:T})}}),g):((g=m.each)||((m.each=g=w.chain())._.lex=p||g._.lex||m.lex,g._.nix=w.back("nix"),w.on("in",u,g._)),g)};function u(s){this.to.next(s);var h=this.as,f=s.$,w=f._,m=s.put,p;!w.soul&&!s.$$||(p=h.lex)&&!String.match(s.get||(m||"")["."],p["."]||p["#"]||p)||e.on.link(s,h)}var l=function(){},c})(t,"./map"),t(function(a){var e=t("./index");e.chain.set=function(y,u,l){var c=this,s=c.back(-1),h,f;return u=u||function(){},l=l||{},l.item=l.item||y,(h=((y||"")._||"")["#"])&&((y={})["#"]=h),typeof(f=e.valid(y))=="string"?c.get(h=f).put(y,u,l):e.is(y)?(c.put(function(w){y.get(function(m,p,g){if(!m)return u.call(c,{err:e.log('Only a node can be linked! Not "'+g.put+'"!')});(f={})[m]={"#":m},w(f)},!0)}),y):(Object.plain(y)&&(y=s.get(h=c.back("opt.uuid")()).put(y)),c.get(h||s.back("opt.uuid")(7)).put(y,u,l))}})(t,"./set"),t(function(a){t("./shim");var e=function(){},y=JSON.parseAsync||function(s,h,f){var w,m=+new Date;try{h(w,JSON.parse(s,f),u.sucks(+new Date-m))}catch(p){h(p)}},u=JSON.stringifyAsync||function(s,h,f,w){var m,p=+new Date;try{h(m,JSON.stringify(s,f,w),u.sucks(+new Date-p))}catch(g){h(g)}};u.sucks=function(s){s>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),u.sucks=e)};function l(s){var h=function(){},f=s.opt||{};f.log=f.log||console.log,f.gap=f.gap||f.wait||0,f.max=f.max||(f.memory?f.memory*999*999:3e8)*.3,f.pack=f.pack||f.max*.01*.01,f.puff=f.puff||9;var w=setTimeout.turn||setTimeout,m=s.dup,p=m.check,g=m.track,b=h.hear=function(o,_){if(o){if(f.max<=o.length)return h.say({dam:"!",err:"Message too big!"},_);h===this&&(b.d+=o.length||0,++b.c);var T=_.SH=+new Date,D=o[0],$;if(D==="["){y(o,function(O,A){if(O||!A)return h.say({dam:"!",err:"DAM JSON parse error."},_);console.STAT&&console.STAT(+new Date,A.length,"# on hear batch");var I=f.puff;(function M(){for(var d=+new Date,r=0,v;r<I&&(v=A[r++]);)h.hear(v,_);A=A.slice(r),console.STAT&&console.STAT(d,+new Date-d,"hear loop"),x(_),A.length&&w(M,0)})()}),o="";return}if(D==="{"||(o["#"]||Object.plain(o))&&($=o)){if($)return b.one($,_,T);y(o,function(O,A){if(O||!A)return h.say({dam:"!",err:"DAM JSON parse error."},_);b.one(A,_,T)});return}}};b.one=function(o,_,M){var D,$,O,A,I;if(o.DBG&&(o.DBG=I={DBG:o.DBG}),I&&(I.h=M),I&&(I.hp=+new Date),(D=o["#"])||(D=o["#"]=String.random(9)),!(O=p(D))&&($=o["##"],!($&&(O=o["@"]||o.get&&D)&&m.check(A=O+$)))){if((o._=function(){}).via=h.leap=_,(O=o["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(d){this[d]=1},o._.yo={}),O=o.dam){(O=h.hear[O])&&O(o,_,s),g(D);return}(O=o.ok)&&(o._.near=O["/"]);var M=+new Date;I&&(I.is=M),_.SI=D,g.ed=function(d){D===d&&(g.ed=0,(d=m.s[D])&&(d.via=_,o.get&&(d.it=o)))},s.on("in",h.last=o),I&&(I.hd=+new Date),console.STAT&&console.STAT(M,+new Date-M,o.get?"msg get":o.put?"msg put":"msg"),g(D),A&&g(A),h.leap=h.last=null}},b.c=b.d=0,function(){var o=0,_;h.hash=function($,O){var A,I,M,d=+new Date;u($.put,function r(v,k){var E=(I||(I=M=k||"")).slice(0,32768);if(A=String.hash(E,A),I=I.slice(32768),I){w(r,0);return}console.STAT&&console.STAT(d,+new Date-d,"say json+hash"),$._.$put=M,$["##"]=A,h.say($,O),delete $._.$put},T)};function T($,O){var A;return O instanceof Object?(Object.keys(O).sort().forEach(D,{to:A={},on:O}),A):O}function D($){this.to[$]=this.on[$]}h.say=function($,O){var A;if((A=this)&&(A=A.to)&&A.next&&A.next($),!$)return!1;var I,M,d,r=$["@"],v=$._||($._=function(){}),k=$.DBG,E=+new Date;if(v.y=v.y||E,O||k&&(k.y=E),(I=$["#"])||(I=$["#"]=String.random(9)),!_&&g(I),!(M=$["##"])&&c!==$.put&&!v.via&&r){h.hash($,O);return}if(!O&&r&&(O=(A=m.s[r])&&(A.via||(A=A.it)&&(A=A._)&&A.via)||(A=h.last)&&r===A["#"]&&h.leap),!O&&r)return m.s[r]?void 0:(console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1);if(r&&!$.put&&!M&&((m.s[r]||"").it||"")["##"])return!1;if(!O&&h.way)return h.way($);if(k&&(k.yh=+new Date),!(d=v.raw)){h.raw($,O);return}if(k&&(k.yr=+new Date),!O||!O.id){if(!Object.plain(O||f.peers))return!1;var E=+new Date;f.puff;var G=f.peers,S=Object.keys(O||f.peers||{});console.STAT&&console.STAT(E,+new Date-E,"peer keys"),function B(){var H=+new Date;_=1;var P=v.raw;v.raw=d;for(var W=0,L;W<9&&(L=(S||"")[W++]);)(L=G[L]||(O||"")[L])&&h.say($,L);v.raw=P,_=0,S=S.slice(W),console.STAT&&console.STAT(H,+new Date-H,"say loop"),S.length&&(w(B,0),r&&g(r))}();return}if(!O.wire&&h.wire&&h.wire(O),I!==O.last){if(O.last=I,O===v.via||(A=v.yo)&&(A[O.url]||A[O.pid]||A[O.id]))return!1;if(console.STAT&&console.STAT(E,((k||v).yp=+new Date)-(v.y||E),"say prep"),!_&&r&&g(r),O.batch){if(O.tail=(A=O.tail||0)+d.length,O.tail<=f.pack){O.batch+=(A?",":"")+d;return}x(O)}O.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),x(O)},f.gap),j(d,O),console.STAT&&r===O.SI&&console.STAT(E,+new Date-O.SH,"say ack")}},h.say.c=h.say.d=0,h.raw=function($,O){if(!$)return"";var A=$._||{},I,M;if(M=A.raw)return M;if(typeof $=="string")return $;var d=$["##"],r=$["@"];if(d&&r){if(!A.via&&p(r+d))return!1;if(M=(m.s[r]||"").it){if(d===M["##"])return!1;M["##"]||(M["##"]=d)}}if(!$.dam&&!$["@"]){var v=0,k=[];M=f.peers;for(var E in M){var G=M[E];if(k.push(G.url||G.pid||G.id),++v>6)break}v>1&&($["><"]=k.join())}if($.put&&(M=$.ok)&&($.ok={"@":(M["@"]||1)-1,"/":M["/"]==$._.near?h.near:M["/"]}),I=A.$put){M={},Object.keys($).forEach(function(N){M[N]=$[N]}),M.put=":])([:",u(M,function(N,C){if(!N){var B=+new Date;M=C.indexOf('"put":":])([:"'),S(c,C=C.slice(0,M+6)+I+C.slice(M+14)),console.STAT&&console.STAT(B,+new Date-B,"say slice")}});return}u($,S);function S(N,C){N||(A.raw=C,h.say($,O))}}}();function x(o){var _=o.batch,T=typeof _=="string";if(T&&(_+="]"),o.batch=o.tail=null,!!_&&!(T?3>_.length:!_.length)){if(!T)try{_=_.length===1?_[0]:JSON.stringify(_)}catch(D){return f.log("DAM JSON stringify error",D)}_&&j(_,o)}}function j(o,_){try{var T=_.wire;_.say?_.say(o):T.send&&T.send(o),h.say.d+=o.length||0,++h.say.c}catch{(_.queue=_.queue||[]).push(o)}}return h.near=0,h.hi=function(o){var _=o.wire,T;if(!_){h.wire(o.length&&{url:o,id:o}||o);return}o.id?f.peers[o.url||o.id]=o:(T=o.id=o.id||o.url||String.random(9),h.say({dam:"?",pid:s.opt.pid},f.peers[T]=o),delete m.s[o.last]),o.met||(h.near++,o.met=+new Date,s.on("hi",o)),T=o.queue,o.queue=[],setTimeout.each(T||[],function(D){j(D,o)},0,9)},h.bye=function(o){o.met&&--h.near,delete o.met,s.on("bye",o);var _=+new Date;_=_-(o.met||_),h.bye.time=((h.bye.time||_)+_)/2},h.hear["!"]=function(o,_){f.log("Error:",o.err)},h.hear["?"]=function(o,_){o.pid&&(_.pid||(_.pid=o.pid),o["@"])||(h.say({dam:"?",pid:f.pid,"@":o["#"]},_),delete m.s[_.last])},h.hear.mob=function(o,_){if(o.peers){var T=Object.keys(o.peers),D=T[Math.random()*T.length>>0];D&&(h.bye(_),h.hi(D))}},s.on("create",function(o){o.opt.pid=o.opt.pid||String.random(9),this.to.next(o),o.on("out",h.say)}),s.on("bye",function(o,_){o=f.peers[o.id||o]||o,this.to.next(o),o.bye?o.bye():(_=o.wire)&&_.close&&_.close(),delete f.peers[o.id],o.wire=null}),s.on("bye",function(o,_){this.to.next(o),(_=console.STAT)&&(_.peers=h.near),(_=o.url)&&setTimeout(function(){},f.lack||9e3)}),s.on("hi",function(o,_){if(this.to.next(o),(_=console.STAT)&&(_.peers=h.near),!f.super){var T=Object.keys(s.next||"");T.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(T,function(D){var $=s.next[D];if(f.super||($.ask||"")[""]){h.say({get:{"#":D}},o);return}setTimeout.each(Object.keys($.ask||""),function(O){O&&h.say({"##":String.hash((s.graph[D]||"")[O]),get:{"#":D,".":O}},o)})})}}),h}var c;try{a.exports=l}catch{}})(t,"./mesh"),t(function(a){var e=t("./index");e.Mesh=t("./mesh"),e.on("opt",function(u){if(this.to.next(u),u.once)return;var l=u.opt;if(l.WebSocket===!1)return;var c=e.window||{},s=l.WebSocket||c.WebSocket||c.webkitWebSocket||c.mozWebSocket;if(!s)return;l.WebSocket=s;var h=l.mesh=l.mesh||e.Mesh(u);h.wire||l.wire,h.wire=l.wire=f;function f(g){try{if(!g||!g.url)return x&&x(g);var b=g.url.replace(/^http/,"ws"),x=g.wire=new l.WebSocket(b);return x.onclose=function(){m(g),l.mesh.bye(g)},x.onerror=function(j){m(g)},x.onopen=function(){l.mesh.hi(g)},x.onmessage=function(j){j&&l.mesh.hear(j.data||j,g)},x}catch{l.mesh.bye(g)}}setTimeout(function(){!l.super&&u.on("out",{dam:"hi"})},1);var w=2*999;function m(g){clearTimeout(g.defer),l.peers[g.url]&&(p&&g.retry<=0||(g.retry=(g.retry||l.retry+1||60)-(-g.tried+(g.tried=+new Date)<w*4?1:0),g.defer=setTimeout(function b(){if(p&&p.hidden)return setTimeout(b,w);f(g)},w)))}var p=""+y!=typeof document&&document});var y})(t,"./websocket"),t(function(a){if(!(typeof Gun>"u")){var e=function(){},y;try{y=(Gun.window||e).localStorage}catch{}y||(Gun.log("Warning: No localStorage exists to persist data to!"),y={setItem:function(l,c){this[l]=c},removeItem:function(l){delete this[l]},getItem:function(l){return this[l]}});var u=JSON.stringifyAsync||function(l,c,s,h){var f;try{c(f,JSON.stringify(l,s,h))}catch(w){c(w)}};Gun.on("create",function l(c){this.to.next(c);var s=c.opt;c.graph;var h=[],f,w,m,p;if(s.localStorage===!1)return;s.prefix=s.file||"gun/";try{f=l[s.prefix]=l[s.prefix]||JSON.parse(m=y.getItem(s.prefix))||{}}catch{f=l[s.prefix]={}}m=(m||"").length,c.on("get",function(b){this.to.next(b);var x=b.get,j,o,_,T;!x||!(j=x["#"])||(o=f[j]||T,o&&(_=x["."])&&!Object.plain(_)&&(o=Gun.state.ify({},_,Gun.state.is(o,_),o[_],j)),Gun.on.get.ack(b,o))}),c.on("put",function(b){this.to.next(b);var x=b.put,j=x["#"],o=x["."],_=b["#"],T=b.ok||"";if(f[j]=Gun.state.ify(f[j],o,x[">"],x[":"],j),p&&m>4999880){c.on("in",{"@":_,err:"localStorage max!"});return}!b["@"]&&(!b._.via||Math.random()<T["@"]/T["/"])&&h.push(_),!w&&(w=setTimeout(g,9+m/333))});function g(){if(!h.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var b=h;clearTimeout(w),w=!1,h=[],u(f,function(x,j){try{!x&&y.setItem(s.prefix,j)}catch(o){x=p=o||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),c.on("localStorage:error",{err:x,get:s.prefix,put:f})),m=j.length,setTimeout.each(b,function(o){c.on("in",{"@":o,err:x,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var M;if(""+M!=typeof Gun){var t=function(d){console.warn("Warning! Deprecated internal utility will break in next version:",d)},n=Gun;n.fn=n.fn||{is:function(d){return t("fn"),!!d&&typeof d=="function"}},n.bi=n.bi||{is:function(d){return t("bi"),d instanceof Boolean||typeof d=="boolean"}},n.num=n.num||{is:function(d){return t("num"),!a(d)&&(d-parseFloat(d)+1>=0||d===1/0||d===-1/0)}},n.text=n.text||{is:function(d){return t("text"),typeof d=="string"}},n.text.ify=n.text.ify||function(d){return t("text.ify"),n.text.is(d)?d:typeof JSON<"u"?JSON.stringify(d):d&&d.toString?d.toString():d},n.text.random=n.text.random||function(d,r){t("text.random");var v="";for(d=d||24,r=r||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";d>0;)v+=r.charAt(Math.floor(Math.random()*r.length)),d--;return v},n.text.match=n.text.match||function(d,r){var v,k;return t("text.match"),typeof d!="string"?!1:(typeof r=="string"&&(r={"=":r}),r=r||{},v=r["="]||r["*"]||r[">"]||r["<"],d===v?!0:k!==r["="]?!1:(v=r["*"]||r[">"]||r["<"],d.slice(0,(v||"").length)===v?!0:k!==r["*"]?!1:k!==r[">"]&&k!==r["<"]?d>=r[">"]&&d<=r["<"]:k!==r[">"]&&d>=r[">"]||k!==r["<"]&&d<=r["<"]))},n.text.hash=n.text.hash||function(d,r){if(t("text.hash"),typeof d=="string"){if(r=r||0,!d.length)return r;for(var v=0,k=d.length,E;v<k;++v)E=d.charCodeAt(v),r=(r<<5)-r+E,r|=0;return r}},n.list=n.list||{is:function(d){return t("list"),d instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(d){return t("list.sort"),function(r,v){return!r||!v?0:(r=r[d],v=v[d],r<v?-1:r>v?1:0)}},n.list.map=n.list.map||function(d,r,v){return t("list.map"),A(d,r,v)},n.list.index=1,n.obj=n.boj||{is:function(d){return t("obj"),d?d instanceof Object&&d.constructor===Object||Object.prototype.toString.call(d).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(d,r,v){return t("obj.put"),(d||{})[r]=v,d},n.obj.has=n.obj.has||function(d,r){return t("obj.has"),d&&Object.prototype.hasOwnProperty.call(d,r)},n.obj.del=n.obj.del||function(d,r){if(t("obj.del"),!!d)return d[r]=null,delete d[r],d},n.obj.as=n.obj.as||function(d,r,v,k){return t("obj.as"),d[r]=d[r]||(k===v?{}:v)},n.obj.ify=n.obj.ify||function(d){if(t("obj.ify"),_(d))return d;try{d=JSON.parse(d)}catch{d={}}return d},function(){var d;function r(v,k){D(this,k)&&d!==this[k]||(this[k]=v)}n.obj.to=n.obj.to||function(v,k){return t("obj.to"),k=k||{},A(v,r,k),k}}(),n.obj.copy=n.obj.copy||function(d){return t("obj.copy"),d&&JSON.parse(JSON.stringify(d))},function(){function d(r,v){var k=this.n,E;if(!(k&&(v===k||_(k)&&D(k,v)))&&E!==v)return!0}n.obj.empty=n.obj.empty||function(r,v){return t("obj.empty"),r?!A(r,d,{n:v}):!0}}(),function(){function d(k,E){if(arguments.length===2){d.r=d.r||{},d.r[k]=E;return}d.r=d.r||[],d.r.push(k)}var r=Object.keys,v;Object.keys=Object.keys||function(k){return v(k,function(E,G,S){S(G)})},n.obj.map=v=n.obj.map||function(k,E,G){t("obj.map");var S,N=0,C,B,H,P,W=typeof E=="function";if(d.r=S,r&&_(k)&&(H=r(k),P=!0),G=G||{},a(k)||H)for(C=(H||k).length;N<C;N++){var L=N+n.list.index;if(W){if(B=P?E.call(G,k[H[N]],H[N],d):E.call(G,k[N],L,d),B!==S)return B}else if(E===k[P?H[N]:N])return H?H[N]:L}else for(N in k)if(W){if(D(k,N)&&(B=G?E.call(G,k[N],N,d):E(k[N],N,d),B!==S))return B}else if(E===k[N])return N;return W?d.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(d){return t("time"),d?d instanceof Date:+new Date().getTime()};var j=n.fn.is,a=n.list.is,o=n.obj,_=o.is,D=o.has,A=o.map,e={};e.is=function(d){return t("val.is"),d===M?!1:d===null?!0:d===1/0?!1:l(d)||u(d)||p(d)?!0:e.link.is(d)||!1},e.link=e.rel={_:"#"},function(){e.link.is=function(r){if(t("val.link.is"),r&&r[y]&&!r._&&_(r)){var v={};if(A(r,d,v),v.id)return v.id}return!1};function d(r,v){var k=this;if(k.id)return k.id=!1;if(v==y&&l(r))k.id=r;else return k.id=!1}}(),e.link.ify=function(d){return t("val.link.ify"),O({},y,d)},n.obj.has._=".";var y=e.link._,M,u=n.bi.is,p=n.num.is,l=n.text.is,o=n.obj,_=o.is,O=o.put,A=o.map;n.val=n.val||e;var c={_:"_"};c.soul=function(d,r){return t("node.soul"),d&&d._&&d._[r||f]},c.soul.ify=function(d,r){return t("node.soul.ify"),r=typeof r=="string"?{soul:r}:r||{},d=d||{},d._=d._||{},d._[f]=r.soul||d._[f]||h(),d},c.soul._=e.link._,function(){c.is=function(r,v,k){t("node.is");var E;return _(r)&&(E=c.soul(r))?!A(r,d,{as:k,cb:v,s:E,n:r}):!1};function d(r,v){if(v!==c._){if(!e.is(r))return!0;this.cb&&this.cb.call(this.as,r,v,this.n,this.s)}}}(),function(){c.ify=function(r,v,k){return t("node.ify"),v?typeof v=="string"?v={soul:v}:typeof v=="function"&&(v={map:v}):v={},v.map&&(v.node=v.map.call(k,r,M,v.node||{})),(v.node=c.soul.ify(v.node||{},v))&&A(r,d,{o:v,as:k}),v.node};function d(r,v){var k=this.o,E,G;if(k.map){E=k.map.call(this.as,r,""+v,k.node),G===E?T(k.node,v):k.node&&(k.node[v]=E);return}e.is(r)&&(k.node[v]=r)}}();var o=n.obj,_=o.is,T=o.del,A=o.map,s=n.text,h=s.random,f=c.soul._,M;n.node=n.node||c;var w=n.state;w.lex=function(){return t("state.lex"),w().toString(36).replace(".","")},w.to=function(d,r,v){t("state.to");var k=(d||{})[r];return _(k)&&(k=I(k)),w.ify(v,r,w.is(d,r),k,c.soul(d))},function(){w.map=function(r,v,k){t("state.map");var E,G=_(G=r||v)?G:null;return r=j(r=r||v)?r:null,G&&!r?(v=p(v)?v:w(),G[b]=G[b]||{},A(G,d,{o:G,s:v}),G):(k=k||_(v)?v:E,v=p(v)?v:w(),function(S,N,C,B){if(!r)return d.call({o:C,s:v},S,N),S;r.call(k||this||{},S,N,C,B),!(D(C,N)&&E===C[N])&&d.call({o:C,s:v},S,N)})};function d(r,v){b!==v&&w.ify(this.o,v,this.s)}}();var o=n.obj;o.as;var D=o.has,_=o.is,A=o.map,I=o.copy,m=n.num,p=m.is,g=n.fn,j=g.is,b=c._,M,x={};(function(){x.is=function(v,k,E,G){return t("graph.is"),!v||!_(v)||$(v)?!1:!A(v,d,{cb:k,fn:E,as:G})};function d(v,k){if(!v||k!==c.soul(v)||!c.is(v,this.fn,this.as))return!0;this.cb&&(r.n=v,r.as=this.as,this.cb.call(r.as,v,k,r))}function r(v){v&&c.is(r.n,v,r.as)}})(),function(){x.ify=function(G,S,N){t("graph.ify");var C={path:[],obj:G};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof N=="string"&&(S.soul=S.soul||N,N=M),S.soul&&(C.link=e.link.ify(S.soul)),S.shell=(N||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||N,d(S,C),S.root=C.node,S.graph};function d(G,S){var N;return(N=E(G,S))?N:(S.env=G,S.soul=v,c.ify(S.obj,r,S)&&(S.link=S.link||e.link.ify(c.soul(S.node)),S.obj!==G.shell&&(G.graph[e.link.is(S.link)]=S.node)),S)}function r(G,S,N){var C=this,B=C.env,H,P;if(c._===S&&D(G,e.link._))return N._;if(H=k(G,S,N,C,B)){if(S||(C.node=C.node||N||{},D(G,c._)&&c.soul(G)&&(C.node._=I(G._)),C.node=c.soul.ify(C.node,e.link.is(C.link)),C.link=C.link||e.link.ify(c.soul(C.node))),(P=B.map)&&(P.call(B.as||{},G,S,N,C),D(N,S))){if(G=N[S],M===G){T(N,S);return}if(!(H=k(G,S,N,C,B)))return}if(!S)return C.node;if(H===!0)return G;if(P=d(B,{obj:G,path:C.path.concat(S)}),!!P.node)return P.link}}function v(G){var S=this,N=e.link.is(S.link),C=S.env.graph;S.link=S.link||e.link.ify(G),S.link[e.link._]=G,S.node&&S.node[c._]&&(S.node[c._][e.link._]=G),D(C,N)&&(C[G]=C[N],T(C,N))}function k(G,S,N,C,B){var H;if(e.is(G))return!0;if(_(G))return 1;if(H=B.invalid)return G=H.call(B.as||{},G,S,N),k(G,S,N,C,B);B.err="Invalid value at '"+C.path.concat(S).join(".")+"'!",n.list.is(G)&&(B.err+=" Use `.set(item)` instead of an Array.")}function E(G,S){for(var N=G.seen,C=N.length,B;C--;)if(B=N[C],S.obj===B.obj)return B;N.push(S)}}(),x.node=function(d){t("graph.node");var r=c.soul(d);if(r)return O({},r,d)},function(){x.to=function(r,v,k){if(t("graph.to"),!!r){var E={};return k=k||{seen:{}},A(r[v],d,{obj:E,graph:r,opt:k}),E}};function d(r,v){var k,E;if(c._===v){if($(r,e.link._))return;this.obj[v]=I(r);return}if(!(k=e.link.is(r))){this.obj[v]=r;return}if(E=this.opt.seen[k]){this.obj[v]=E;return}this.obj[v]=this.opt.seen[k]=x.to(this.graph,k,this.opt)}}();var j=n.fn.is,o=n.obj,_=o.is,T=o.del,D=o.has,$=o.empty,O=o.put,A=o.map,I=o.copy,M;n.graph=n.graph||x}}()})(Bt);var We=Bt.exports,ze=We;const Re=Je(ze),Ue=Re({peers:["http://gun-manhattan.herokuapp.com/gun"]}),ie=Ue.get("cards"),Tt=Ct([]),Vt=i=>{ie.put({data:JSON.stringify(i)})};ie.on(i=>{Tt.set(JSON.parse(i.data))});function Qt(i,t,n){const a=i.slice();return a[5]=t[n],a}function Le(i){let t;return{c(){t=rt("add two sided")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Ke(i){let t;return{c(){t=rt("add one sided")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Ve(i){let t;return{c(){t=rt("save")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Qe(i){let t;return{c(){t=rt("remove")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function Xt(i){let t,n,a,e,y,u;n=new Fe({props:{card:i[5]}});function l(){return i[4](i[5])}return e=new vt({props:{colour:"red",$$slots:{default:[Qe]},$$scope:{ctx:i}}}),e.$on("click",l),{c(){t=z("div"),Y(n.$$.fragment),a=V(),Y(e.$$.fragment),y=V(),F(t,"class","wrapper svelte-z9e1s4")},m(c,s){q(c,t,s),Q(n,t,null),K(t,a),Q(e,t,null),K(t,y),u=!0},p(c,s){i=c;const h={};s&1&&(h.card=i[5]),n.$set(h);const f={};s&256&&(f.$$scope={dirty:s,ctx:i}),e.$set(f)},i(c){u||(R(n.$$.fragment,c),R(e.$$.fragment,c),u=!0)},o(c){U(n.$$.fragment,c),U(e.$$.fragment,c),u=!1},d(c){c&&J(t),X(n),X(e)}}}function Xe(i){let t,n,a,e,y,u,l,c,s,h,f;n=new vt({props:{colour:"blue",$$slots:{default:[Le]},$$scope:{ctx:i}}}),n.$on("click",i[1]),e=new vt({props:{colour:"blue",$$slots:{default:[Ke]},$$scope:{ctx:i}}}),e.$on("click",i[2]),u=new vt({props:{$$slots:{default:[Ve]},$$scope:{ctx:i}}}),u.$on("click",i[3]);let w=St(i[0]),m=[];for(let g=0;g<w.length;g+=1)m[g]=Xt(Qt(i,w,g));const p=g=>U(m[g],1,1,()=>{m[g]=null});return{c(){t=z("section"),Y(n.$$.fragment),a=V(),Y(e.$$.fragment),y=V(),Y(u.$$.fragment),l=V(),c=z("h1"),c.textContent="cards",s=V(),h=z("section");for(let g=0;g<m.length;g+=1)m[g].c();F(t,"class","button-container svelte-z9e1s4"),F(h,"class","container svelte-z9e1s4")},m(g,b){q(g,t,b),Q(n,t,null),K(t,a),Q(e,t,null),K(t,y),Q(u,t,null),q(g,l,b),q(g,c,b),q(g,s,b),q(g,h,b);for(let x=0;x<m.length;x+=1)m[x]&&m[x].m(h,null);f=!0},p(g,[b]){const x={};b&256&&(x.$$scope={dirty:b,ctx:g}),n.$set(x);const j={};b&256&&(j.$$scope={dirty:b,ctx:g}),e.$set(j);const o={};if(b&256&&(o.$$scope={dirty:b,ctx:g}),u.$set(o),b&1){w=St(g[0]);let _;for(_=0;_<w.length;_+=1){const T=Qt(g,w,_);m[_]?(m[_].p(T,b),R(m[_],1)):(m[_]=Xt(T),m[_].c(),R(m[_],1),m[_].m(h,null))}for(Mt(),_=w.length;_<m.length;_+=1)p(_);It()}},i(g){if(!f){R(n.$$.fragment,g),R(e.$$.fragment,g),R(u.$$.fragment,g);for(let b=0;b<w.length;b+=1)R(m[b]);f=!0}},o(g){U(n.$$.fragment,g),U(e.$$.fragment,g),U(u.$$.fragment,g),m=m.filter(Boolean);for(let b=0;b<m.length;b+=1)U(m[b]);f=!1},d(g){g&&(J(t),J(l),J(c),J(s),J(h)),X(n),X(e),X(u),ne(m,g)}}}function Ye(i,t,n){let a;return te(i,Tt,c=>n(0,a=c)),[a,()=>{Tt.set([...a,zt(2)])},()=>{Tt.set([...a,zt(1)]),console.log(a.length)},()=>{Vt(a)},c=>{Vt(a.filter(s=>s.id!==c.id))}]}class Ze extends ot{constructor(t){super(),it(this,t,Ye,Xe,et,{})}}const xt=Ct(window.location.pathname),tn=Ct([]);xt.subscribe(i=>{tn.set(i.split("/").filter(Boolean).splice(1))});const en=[{name:"passive aggressive",path:"/",component:Ze}],nn=i=>{history.pushState({},"",i),xt.update(t=>(localStorage.setItem("redirectPage",t),i.split("?")[0]))};function rn(i){let t;return{c(){t=rt("HOME")},m(n,a){q(n,t,a)},d(n){n&&J(t)}}}function on(i){let t,n,a,e,y,u,l;return u=new vt({props:{$$slots:{default:[rn]},$$scope:{ctx:i}}}),u.$on("click",i[0]),{c(){t=z("section"),n=z("h1"),n.textContent="404",a=V(),e=z("p"),e.textContent="Page not found",y=V(),Y(u.$$.fragment),F(t,"class","center svelte-nfvh92")},m(c,s){q(c,t,s),K(t,n),K(t,a),K(t,e),K(t,y),Q(u,t,null),l=!0},p(c,[s]){const h={};s&2&&(h.$$scope={dirty:s,ctx:c}),u.$set(h)},i(c){l||(R(u.$$.fragment,c),l=!0)},o(c){U(u.$$.fragment,c),l=!1},d(c){c&&J(t),X(u)}}}function un(i){const t=()=>nn("/");return console.log(`404 page
href: ${window.location.href}`),[t]}class fn extends ot{constructor(t){super(),it(this,t,un,on,et,{})}}function an(i){let t,n,a;var e=i[0].component;function y(u,l){return{}}return e&&(t=Jt(e,y())),{c(){t&&Y(t.$$.fragment),n=_e()},m(u,l){t&&Q(t,u,l),q(u,n,l),a=!0},p(u,[l]){if(l&1&&e!==(e=u[0].component)){if(t){Mt();const c=t;U(c.$$.fragment,1,0,()=>{X(c,1)}),It()}e?(t=Jt(e,y()),Y(t.$$.fragment),R(t.$$.fragment,1),Q(t,n.parentNode,n)):t=null}},i(u){a||(t&&R(t.$$.fragment,u),a=!0)},o(u){t&&U(t.$$.fragment,u),a=!1},d(u){u&&J(n),t&&X(t,u)}}}function sn(i,t,n){let a,e;te(i,xt,u=>n(1,e=u));const y={name:"404",path:"/404",component:fn};return window.onpopstate=()=>{pe(xt,e=window.location.pathname,e)},i.$$.update=()=>{i.$$.dirty&2&&n(0,a=en.find(u=>(document.title=u.name,u.path===e||u.path===e.split("/").filter(Boolean)[0]))??y)},[a,e]}class cn extends ot{constructor(t){super(),it(this,t,sn,an,et,{})}}new cn({target:document.getElementById("app")});
