var Oe=Object.defineProperty;var De=(r,t,e)=>t in r?Oe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Bt=(r,t,e)=>De(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function et(){}function Ae(r,t){for(const e in t)r[e]=t[e];return r}function ye(r){return r()}function Qt(){return Object.create(null)}function At(r){r.forEach(ye)}function be(r){return typeof r=="function"}function it(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function at(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function Ne(r){return Object.keys(r).length===0}function ge(r,...t){if(r==null){for(const o of t)o(void 0);return et}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Ge(r){let t;return ge(r,e=>t=e)(),t}function It(r,t,e){r.$$.on_destroy.push(ge(t,e))}function xe(r,t,e,o){if(r){const n=me(r,t,e,o);return r[0](n)}}function me(r,t,e,o){return r[1]&&o?Ae(e.ctx.slice(),r[1](o(t))):e.ctx}function Ee(r,t,e,o){if(r[2]&&o){const n=r[2](o(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const c=[],l=Math.max(t.dirty.length,n.length);for(let f=0;f<l;f+=1)c[f]=t.dirty[f]|n[f];return c}return t.dirty|n}return t.dirty}function Ce(r,t,e,o,n,c){if(n){const l=me(t,e,o,c);r.p(l,n)}}function Fe(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let o=0;o<e;o++)t[o]=-1;return t}return-1}function Xt(r){return r??""}function L(r,t){r.appendChild(t)}function M(r,t,e){r.insertBefore(t,e||null)}function H(r){r.parentNode&&r.parentNode.removeChild(r)}function $t(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function R(r){return document.createElement(r)}function Z(r){return document.createTextNode(r)}function K(){return Z(" ")}function Ht(){return Z("")}function yt(r,t,e,o){return r.addEventListener(t,e,o),()=>r.removeEventListener(t,e,o)}function B(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Ie(r){return Array.from(r.childNodes)}function _t(r,t){t=""+t,r.data!==t&&(r.data=t)}function nt(r,t,e,o){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function He(r,t,{bubbles:e=!1,cancelable:o=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:o})}function Yt(r,t){return new r(t)}let St;function jt(r){St=r}function Me(){if(!St)throw new Error("Function called outside component initialization");return St}function Be(){const r=Me();return(t,e,{cancelable:o=!1}={})=>{const n=r.$$.callbacks[t];if(n){const c=He(t,e,{cancelable:o});return n.slice().forEach(l=>{l.call(r,c)}),!c.defaultPrevented}return!0}}function Pe(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(o=>o.call(this,t))}const mt=[],Ot=[];let kt=[];const qt=[],Je=Promise.resolve();let zt=!1;function qe(){zt||(zt=!0,Je.then($e))}function Dt(r){kt.push(r)}function ke(r){qt.push(r)}const Pt=new Set;let bt=0;function $e(){if(bt!==0)return;const r=St;do{try{for(;bt<mt.length;){const t=mt[bt];bt++,jt(t),ze(t.$$)}}catch(t){throw mt.length=0,bt=0,t}for(jt(null),mt.length=0,bt=0;Ot.length;)Ot.pop()();for(let t=0;t<kt.length;t+=1){const e=kt[t];Pt.has(e)||(Pt.add(e),e())}kt.length=0}while(mt.length);for(;qt.length;)qt.pop()();zt=!1,Pt.clear(),jt(r)}function ze(r){if(r.fragment!==null){r.update(),At(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Dt)}}function We(r){const t=[],e=[];kt.forEach(o=>r.indexOf(o)===-1?t.push(o):e.push(o)),e.forEach(o=>o()),kt=t}const Et=new Set;let pt;function lt(){pt={r:0,c:[],p:pt}}function ct(){pt.r||At(pt.c),pt=pt.p}function J(r,t){r&&r.i&&(Et.delete(r),r.i(t))}function z(r,t,e,o){if(r&&r.o){if(Et.has(r))return;Et.add(r),pt.c.push(()=>{Et.delete(r),o&&(e&&r.d(1),o())}),r.o(t)}else o&&o()}function rt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function we(r,t,e){const o=r.$$.props[t];o!==void 0&&(r.$$.bound[o]=e,e(r.$$.ctx[o]))}function Y(r){r&&r.c()}function Q(r,t,e){const{fragment:o,after_update:n}=r.$$;o&&o.m(t,e),Dt(()=>{const c=r.$$.on_mount.map(ye).filter(be);r.$$.on_destroy?r.$$.on_destroy.push(...c):At(c),r.$$.on_mount=[]}),n.forEach(Dt)}function X(r,t){const e=r.$$;e.fragment!==null&&(We(e.after_update),At(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Re(r,t){r.$$.dirty[0]===-1&&(mt.push(r),qe(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function ot(r,t,e,o,n,c,l=null,f=[-1]){const p=St;jt(r);const a=r.$$={fragment:null,ctx:[],props:c,update:et,not_equal:n,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Qt(),dirty:f,skip_bound:!1,root:t.target||p.$$.root};l&&l(a.root);let s=!1;if(a.ctx=e?e(r,t.props||{},(d,m,...w)=>{const _=w.length?w[0]:m;return a.ctx&&n(a.ctx[d],a.ctx[d]=_)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](_),s&&Re(r,d)),m}):[],a.update(),s=!0,At(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const d=Ie(t.target);a.fragment&&a.fragment.l(d),d.forEach(H)}else a.fragment&&a.fragment.c();t.intro&&J(r.$$.fragment),Q(r,t.target,t.anchor),$e()}jt(p)}class ut{constructor(){Bt(this,"$$");Bt(this,"$$set")}$destroy(){X(this,1),this.$destroy=et}$on(t,e){if(!be(e))return et;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const n=o.indexOf(e);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ue);const gt=[];function Te(r,t=et){let e;const o=new Set;function n(f){if(it(r,f)&&(r=f,e)){const p=!gt.length;for(const a of o)a[1](),gt.push(a,r);if(p){for(let a=0;a<gt.length;a+=2)gt[a][0](gt[a+1]);gt.length=0}}}function c(f){n(f(r))}function l(f,p=et){const a=[f,p];return o.add(a),o.size===1&&(e=t(n,c)||et),f(r),()=>{o.delete(a),o.size===0&&e&&(e(),e=null)}}return{set:n,update:c,subscribe:l}}const Ct=Te(""),wt=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},st=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,Zt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Le(r){let t,e=r[0].text+"",o;return{c(){t=R("div"),o=Z(e),B(t,"class","cardText svelte-13kvtzw")},m(n,c){M(n,t,c),L(t,o)},p(n,c){c&1&&e!==(e=n[0].text+"")&&_t(o,e)},d(n){n&&H(t)}}}function Ke(r){let t,e,o;return{c(){t=R("div"),B(t,"contenteditable","true"),B(t,"class","cardText svelte-13kvtzw"),r[0].text===void 0&&Dt(()=>r[5].call(t))},m(n,c){M(n,t,c),r[0].text!==void 0&&(t.innerText=r[0].text),e||(o=yt(t,"input",r[5]),e=!0)},p(n,c){c&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&H(t),e=!1,o()}}}function Ve(r){let t,e,o,n,c=r[0].cardType.passive&&te();return{c(){t=R("img"),o=K(),c&&c.c(),n=Ht(),at(t.src,e=st(r[0].cardType.type))||B(t,"src",e),B(t,"alt","My Icon"),B(t,"class","cardIcon svelte-13kvtzw")},m(l,f){M(l,t,f),M(l,o,f),c&&c.m(l,f),M(l,n,f)},p(l,f){f&1&&!at(t.src,e=st(l[0].cardType.type))&&B(t,"src",e),l[0].cardType.passive?c||(c=te(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(l){l&&(H(t),H(o),H(n)),c&&c.d(l)}}}function te(r){let t;return{c(){t=R("p"),t.textContent="Passive",B(t,"class","mirrored svelte-13kvtzw")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function Qe(r){let t,e;function o(l,f){return l[2]?Ve:l[3]?Ke:Le}let n=o(r),c=n(r);return{c(){t=R("div"),e=R("div"),c.c(),B(e,"class","card svelte-13kvtzw"),nt(e,"--colour",r[4]),B(t,"class","wrapper svelte-13kvtzw"),nt(t,"--rotation",r[1]+"deg")},m(l,f){M(l,t,f),L(t,e),c.m(e,null)},p(l,[f]){n===(n=o(l))&&c?c.p(l,f):(c.d(1),c=n(l),c&&(c.c(),c.m(e,null))),f&16&&nt(e,"--colour",l[4]),f&2&&nt(t,"--rotation",l[1]+"deg")},i:et,o:et,d(l){l&&H(t),c.d()}}}function Xe(r,t,e){let o,{card:n}=t,{rotation:c=0}=t,{back:l=!1}=t,{editable:f=!0}=t;function p(){n.text=this.innerText,e(0,n)}return r.$$set=a=>{"card"in a&&e(0,n=a.card),"rotation"in a&&e(1,c=a.rotation),"back"in a&&e(2,l=a.back),"editable"in a&&e(3,f=a.editable)},r.$$.update=()=>{r.$$.dirty&1&&e(4,o=wt(n.cardType.type))},[n,c,l,f,o,p]}class Wt extends ut{constructor(t){super(),ot(this,t,Xe,Qe,it,{card:0,rotation:1,back:2,editable:3})}}function ee(r,t,e){const o=r.slice();return o[12]=t[e],o}function ne(r){let t,e,o,n,c,l,f,p,a=r[5]&&re(r),s=!r[3]&&oe(r);return{c(){t=R("div"),e=R("img"),n=K(),a&&a.c(),c=K(),s&&s.c(),l=Ht(),at(e.src,o=st(r[0]))||B(e,"src",o),B(e,"alt","My Icon"),B(e,"class","cardIcon svelte-lm5vvd"),B(t,"class","select svelte-lm5vvd")},m(d,m){M(d,t,m),L(t,e),L(t,n),a&&a.m(t,null),M(d,c,m),s&&s.m(d,m),M(d,l,m),f||(p=yt(e,"click",r[8]),f=!0)},p(d,m){m&1&&!at(e.src,o=st(d[0]))&&B(e,"src",o),d[5]?a?a.p(d,m):(a=re(d),a.c(),a.m(t,null)):a&&(a.d(1),a=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,m):(s=oe(d),s.c(),s.m(l.parentNode,l))},d(d){d&&(H(t),H(c),H(l)),a&&a.d(),s&&s.d(d),f=!1,p()}}}function re(r){let t,e=rt(r[4]),o=[];for(let n=0;n<e.length;n+=1)o[n]=ie(ee(r,e,n));return{c(){t=R("div");for(let n=0;n<o.length;n+=1)o[n].c();B(t,"class","options svelte-lm5vvd"),nt(t,"--colour",r[6])},m(n,c){M(n,t,c);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null)},p(n,c){if(c&49){e=rt(n[4]);let l;for(l=0;l<e.length;l+=1){const f=ee(n,e,l);o[l]?o[l].p(f,c):(o[l]=ie(f),o[l].c(),o[l].m(t,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=e.length}c&64&&nt(t,"--colour",n[6])},d(n){n&&H(t),$t(o,n)}}}function ie(r){let t,e,o,n,c;function l(){return r[9](r[12])}return{c(){t=R("img"),at(t.src,e=st(r[12]))||B(t,"src",e),B(t,"alt","My Icon"),B(t,"class",o="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(f,p){M(f,t,p),n||(c=yt(t,"click",l),n=!0)},p(f,p){r=f,p&16&&!at(t.src,e=st(r[12]))&&B(t,"src",e),p&17&&o!==(o="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&B(t,"class",o)},d(f){f&&H(t),n=!1,c()}}}function oe(r){let t,e,o,n,c,l,f;return{c(){t=R("input"),e=K(),o=R("label"),n=Z("Passive"),B(t,"type","checkbox"),B(t,"id",r[7]),B(t,"class","hidden"),B(o,"for",r[7]),B(o,"class",c="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(p,a){M(p,t,a),t.checked=r[1],M(p,e,a),M(p,o,a),L(o,n),l||(f=yt(t,"change",r[10]),l=!0)},p(p,a){a&2&&(t.checked=p[1]),a&2&&c!==(c="passive no-select "+(p[1]?"":"invisible")+" svelte-lm5vvd")&&B(o,"class",c)},d(p){p&&(H(t),H(e),H(o)),l=!1,f()}}}function Ye(r){let t,e=!r[2]&&ne(r);return{c(){e&&e.c(),t=Ht()},m(o,n){e&&e.m(o,n),M(o,t,n)},p(o,[n]){o[2]?e&&(e.d(1),e=null):e?e.p(o,n):(e=ne(o),e.c(),e.m(t.parentNode,t))},i:et,o:et,d(o){o&&H(t),e&&e.d(o)}}}function Ze(r,t,e){let o,{cardType:n}=t,{passive:c=!1}=t,{back:l=!1}=t,{noPassive:f=!1}=t;const p=Math.random().toString(36).substring(7),a=Be();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const m=()=>e(5,s=!s),w=b=>{e(0,n=b),e(5,s=!1)};function _(){c=this.checked,e(1,c)}return r.$$set=b=>{"cardType"in b&&e(0,n=b.cardType),"passive"in b&&e(1,c=b.passive),"back"in b&&e(2,l=b.back),"noPassive"in b&&e(3,f=b.noPassive),"names"in b&&e(4,d=b.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,o=wt(n)),r.$$.dirty&1&&a("type",n),r.$$.dirty&2&&a("passive",c)},[n,c,l,f,d,s,o,p,m,w,_]}class Ft extends ut{constructor(t){super(),ot(this,t,Ze,Ye,it,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function tn(r){let t,e;return{c(){t=R("img"),at(t.src,e=st(r[0].cardType.type))||B(t,"src",e),B(t,"alt","My Icon"),B(t,"class","cardIcon svelte-15hk4fg")},m(o,n){M(o,t,n)},p(o,n){n&1&&!at(t.src,e=st(o[0].cardType.type))&&B(t,"src",e)},i:et,o:et,d(o){o&&H(t)}}}function en(r){let t,e,o,n,c,l,f;return e=new Ft({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=R("p"),Y(e.$$.fragment),o=K(),n=R("div"),B(t,"class","svelte-15hk4fg"),B(n,"contenteditable","true"),B(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&Dt(()=>r[3].call(n))},m(p,a){M(p,t,a),Q(e,t,null),M(p,o,a),M(p,n,a),r[0].text!==void 0&&(n.innerText=r[0].text),c=!0,l||(f=yt(n,"input",r[3]),l=!0)},p(p,a){const s={};a&1&&(s.cardType=p[0].cardType.type),a&1&&(s.passive=p[0].cardType.passive),e.$set(s),a&1&&p[0].text!==n.innerText&&(n.innerText=p[0].text)},i(p){c||(J(e.$$.fragment,p),c=!0)},o(p){z(e.$$.fragment,p),c=!1},d(p){p&&(H(t),H(o),H(n)),X(e),l=!1,f()}}}function nn(r){let t,e,o,n;const c=[en,tn],l=[];function f(p,a){return p[1]?1:0}return e=f(r),o=l[e]=c[e](r),{c(){t=R("div"),o.c(),B(t,"class","card svelte-15hk4fg"),nt(t,"--colour",wt(r[0].cardType.type))},m(p,a){M(p,t,a),l[e].m(t,null),n=!0},p(p,[a]){let s=e;e=f(p),e===s?l[e].p(p,a):(lt(),z(l[s],1,1,()=>{l[s]=null}),ct(),o=l[e],o?o.p(p,a):(o=l[e]=c[e](p),o.c()),J(o,1),o.m(t,null)),(!n||a&1)&&nt(t,"--colour",wt(p[0].cardType.type))},i(p){n||(J(o),n=!0)},o(p){z(o),n=!1},d(p){p&&H(t),l[e].d()}}}function rn(r,t,e){let{card:o}=t,{back:n=!1}=t;const c=({detail:f})=>e(0,o.cardType.type=f,o);function l(){o.text=this.innerText,e(0,o)}return r.$$set=f=>{"card"in f&&e(0,o=f.card),"back"in f&&e(1,n=f.back)},[o,n,c,l]}class on extends ut{constructor(t){super(),ot(this,t,rn,nn,it,{card:0,back:1})}}function un(r){let t,e;return t=new on({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){Y(t.$$.fragment)},m(o,n){Q(t,o,n),e=!0},p(o,n){const c={};n&1&&(c.card=o[0].cardHalf1),n&2&&(c.back=o[1]),t.$set(c)},i(o){e||(J(t.$$.fragment,o),e=!0)},o(o){z(t.$$.fragment,o),e=!1},d(o){X(t,o)}}}function fn(r){let t,e,o,n,c,l,f,p,a,s,d,m,w,_;return o=new Ft({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),o.$on("type",r[4]),o.$on("passive",r[5]),c=new Wt({props:{card:r[0].cardHalf1,back:r[1]}}),p=new Wt({props:{card:r[0].cardHalf2,rotation:r[2]?0:180,back:r[1]}}),d=new Ft({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),d.$on("type",r[6]),d.$on("passive",r[7]),{c(){t=R("div"),e=R("p"),Y(o.$$.fragment),n=K(),Y(c.$$.fragment),l=K(),f=R("div"),Y(p.$$.fragment),a=K(),s=R("p"),Y(d.$$.fragment),m=K(),w=R("div"),B(e,"class","first svelte-1ubeuca"),B(t,"class","first-half half"),B(s,"class","second svelte-1ubeuca"),B(f,"class","second-half half svelte-1ubeuca"),B(w,"class","fill svelte-1ubeuca")},m(b,k){M(b,t,k),L(t,e),Q(o,e,null),L(t,n),Q(c,t,null),M(b,l,k),M(b,f,k),Q(p,f,null),L(f,a),L(f,s),Q(d,s,null),M(b,m,k),M(b,w,k),_=!0},p(b,k){const A={};k&1&&(A.cardType=b[0].cardHalf1.cardType.type),k&1&&(A.passive=b[0].cardHalf1.cardType.passive),k&2&&(A.back=b[1]),o.$set(A);const j={};k&1&&(j.card=b[0].cardHalf1),k&2&&(j.back=b[1]),c.$set(j);const u={};k&1&&(u.card=b[0].cardHalf2),k&4&&(u.rotation=b[2]?0:180),k&2&&(u.back=b[1]),p.$set(u);const y={};k&1&&(y.cardType=b[0].cardHalf2.cardType.type),k&1&&(y.passive=b[0].cardHalf2.cardType.passive),k&2&&(y.back=b[1]),d.$set(y)},i(b){_||(J(o.$$.fragment,b),J(c.$$.fragment,b),J(p.$$.fragment,b),J(d.$$.fragment,b),_=!0)},o(b){z(o.$$.fragment,b),z(c.$$.fragment,b),z(p.$$.fragment,b),z(d.$$.fragment,b),_=!1},d(b){b&&(H(t),H(l),H(f),H(m),H(w)),X(o),X(c),X(p),X(d)}}}function an(r){let t,e,o,n,c;const l=[fn,un],f=[];function p(a,s){return a[0].cardHalf2?0:1}return e=p(r),o=f[e]=l[e](r),{c(){t=R("div"),o.c(),B(t,"class",n=Xt(`card ${r[1]&&"back"}`)+" svelte-1ubeuca"),nt(t,"--colour",r[3])},m(a,s){M(a,t,s),f[e].m(t,null),c=!0},p(a,[s]){let d=e;e=p(a),e===d?f[e].p(a,s):(lt(),z(f[d],1,1,()=>{f[d]=null}),ct(),o=f[e],o?o.p(a,s):(o=f[e]=l[e](a),o.c()),J(o,1),o.m(t,null)),(!c||s&2&&n!==(n=Xt(`card ${a[1]&&"back"}`)+" svelte-1ubeuca"))&&B(t,"class",n),(!c||s&8)&&nt(t,"--colour",a[3])},i(a){c||(J(o),c=!0)},o(a){z(o),c=!1},d(a){a&&H(t),f[e].d()}}}function ln(r,t,e){let o,{card:n}=t,{back:c=!1}=t,{readable:l=!1}=t;const f=({detail:d})=>e(0,n.cardHalf1.cardType.type=d,n),p=({detail:d})=>e(0,n.cardHalf1.cardType.passive=d,n),a=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.type=d,n)},s=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.passive=d,n)};return r.$$set=d=>{"card"in d&&e(0,n=d.card),"back"in d&&e(1,c=d.back),"readable"in d&&e(2,l=d.readable)},r.$$.update=()=>{r.$$.dirty&1&&e(3,o=wt(n.cardHalf1.cardType.type))},[n,c,l,o,f,p,a,s]}class Ut extends ut{constructor(t){super(),ot(this,t,ln,an,it,{card:0,back:1,readable:2})}}const ue=(r,t=9)=>{const e=[];let o=0;for(;o<r.length;)e.push(r.slice(o,t+o)),o+=t;return e};function cn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function sn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}};Lt.exports;(function(r){(function(){function t(o,n){return n?sn(o):o.slice?t[c(o)]:function(l,f){o(l={exports:{}}),t[c(f)]=l.exports};function c(l){return l.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(o){String.random=function(c,l){var f="";for(c=c||24,l=l||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)f+=l.charAt(Math.floor(Math.random()*l.length));return f},String.match=function(c,l){var f,p;return typeof c!="string"?!1:(typeof l=="string"&&(l={"=":l}),l=l||{},f=l["="]||l["*"]||l[">"]||l["<"],c===f?!0:p!==l["="]?!1:(f=l["*"]||l[">"],c.slice(0,(f||"").length)===f?!0:p!==l["*"]?!1:p!==l[">"]&&p!==l["<"]?c>=l[">"]&&c<=l["<"]:p!==l[">"]&&c>=l[">"]||p!==l["<"]&&c<=l["<"]))},String.hash=function(c,l){if(typeof c=="string"){if(l=l||0,!c.length)return l;for(var f=0,p=c.length,a;f<p;++f)a=c.charCodeAt(f),l=(l<<5)-l+a,l|=0;return l}};var n=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,l){for(var f in c)if(n.call(c,f)&&(!l||l.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var l=[];for(var f in c)n.call(c,f)&&l.push(f);return l},function(){var c,l=setTimeout,f=0,p=0,a=typeof setImmediate!=""+c&&setImmediate||function(d,m){return typeof MessageChannel==""+c?l:((d=new MessageChannel).port1.onmessage=function(w){w.data==""&&m()},function(w){m=w,d.port2.postMessage("")})}(),s=l.check=l.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};l.hold=l.hold||9,l.poll=l.poll||function(d){if(l.hold>=s.now()-f&&p++<3333){d();return}a(function(){f=s.now(),d()},p=0)}}(),function(){var c=setTimeout,l=c.turn=c.turn||function(m){f.push(m)==1&&p(d)},f=l.s=[],p=c.poll,a=0,s,d=function(){(s=f[a++])&&s(),(a==f.length||a==99)&&(f=l.s=f.slice(a),a=0),f.length&&p(d)}}(),function(){var c,l=setTimeout,f=l.turn;(l.each=l.each||function(p,a,s,d){d=d||9,function m(w,_,b){if(_=(w=(p||[]).splice(0,d)).length){for(var k=0;k<_&&c===(b=a(w[k]));k++);if(c===b){f(m);return}}s&&s(b)}()})()}()})(t,"./shim"),t(function(o){o.exports=function n(s,l,f){if(!s)return{to:n};var p,a=typeof l=="function",s=(this.tag||(this.tag={}))[s]||a&&(this.tag[s]={tag:s,to:n._={next:function(m){var w;(w=this.to)&&w.next(m)}}});if(a){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:l,the:s,on:this,as:f};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&p!==l&&s.next(l),s}})(t,"./onto"),t(function(o){o.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(o){t("./shim");function n(){var s=+new Date;return p<s?(l=0,p=s+n.drift):p=s+(l+=1)/f+n.drift}n.drift=0;var c=-1/0,l=0,f=999,p=c,a;n.is=function(s,d,m){var w=d&&s&&s._&&s._[">"]||m;if(w)return typeof(w=w[d])=="number"?w:c},n.ify=function(s,d,m,w,_){(s=s||{})._=s._||{},_&&(s._["#"]=_);var b=s._[">"]||(s._[">"]={});return a!==d&&d!=="_"&&(typeof m=="number"&&(b[d]=m),a!==w&&(s[d]=w)),s},o.exports=n})(t,"./state"),t(function(o){t("./shim");function n(c){var l={s:{}},f=l.s;c=c||{max:999,age:1e3*9},l.check=function(a){return f[a]?p(a):!1};var p=l.track=function(a){var s=f[a]||(f[a]={});return s.was=l.now=+new Date,l.to||(l.to=setTimeout(l.drop,c.age+9)),p.ed&&p.ed(a),s};return l.drop=function(a){l.to=null,l.now=+new Date;var s=Object.keys(f);console.STAT&&console.STAT(l.now,+new Date-l.now,"dup drop keys"),setTimeout.each(s,function(d){var m=f[d];m&&(a||c.age)>l.now-m.was||delete f[d]},0,99)},l}o.exports=n})(t,"./dup"),t(function(o){t("./onto"),o.exports=function(l,f){if(this.on){var p=(this.opt||{}).lack||9e3;if(typeof l!="function"){if(!l)return;var s=l["#"]||l,a=(this.tag||"")[s];return a?(f&&(a=this.on(s,f),clearTimeout(a.err),a.err=setTimeout(function(){a.off()},p)),!0):void 0}var s=f&&f["#"]||n(9);if(!l)return s;var d=this.on(s,l,f);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},p),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(o){function n(_){return _ instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:_}):new n(_)}n.is=function(_){return _ instanceof n||_&&_._&&_===_._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(i){i.root=i.root||i,i.graph=i.graph||{},i.on=i.on||n.on,i.ask=i.ask||n.ask,i.dup=i.dup||n.dup();var g=i.$.opt(i.opt);return i.once||(i.on("in",_,i),i.on("out",_,i),i.on("put",A,i),n.on("create",i),i.on("create",i)),i.once=1,g};function _(i){if(i){if(i.out===_){this.to.next(i);return}var g=this,v=g.as,S=v.at||v,x=S.$,O=S.dup,C,I=i.DBG;if((C=i["#"])||(C=i["#"]=l(9)),!O.check(C)){if(O.track(C),C=i._,i._=typeof C=="function"?C:function(){},i.$&&i.$===(i.$._||"").$||(i.$=x),i["@"]&&!i.put&&u(i),!S.ask(i["@"],i))if(I&&(I.u=+new Date),i.put){b(i);return}else i.get&&n.on.get(i,x);I&&(I.uc=+new Date),g.to.next(i),I&&(I.ua=+new Date),!(i.nts||i.NTS)&&(i.out=_,S.on("out",i),I&&(I.ue=+new Date))}}}function b(i){if(i){var g=i._||"",v=g.root=((g.$=i.$||"")._||"").root;if(i["@"]&&g.faith&&!g.miss){i.out=_,v.on("out",i);return}g.latch=v.hatch,g.match=v.hatch=[];var S=i.put,x=g.DBG=i.DBG,O=+new Date;if(F=F||O,!(S["#"]&&S["."])){x&&(x.p=O),g["#"]=i["#"],g.msg=i,g.all=0,g.stun=1;var C=Object.keys(S);console.STAT&&console.STAT(O,((x||g).pk=+new Date)-O,"put sort");var I=0,P,q,W,V,U,tt,Tt;(function dt(Nt){if(P!=I){if(P=I,!(W=C[I])){console.STAT&&console.STAT(O,((x||g).pd=+new Date)-O,"put"),j(g);return}(V=S[W])?(Tt=V._)?W!==Tt["#"]?tt=T+N(W)+"soul not same.":(U=Tt[">"])||(tt=T+N(W)+"no state."):tt=T+N(W)+"no meta.":tt=T+N(W)+"no node.",q=Object.keys(V||{})}if(tt){i.err=g.err=tt,j(g);return}var Kt=0,ht;for(Nt=Nt||0;Nt++<9&&(ht=q[Kt++]);)if(ht!=="_"){var Gt=V[ht],Vt=U[ht];if(d===Vt){tt=T+N(ht)+"on"+N(W)+"no state.";break}if(!p(Gt)){tt=T+N(ht)+"on"+N(W)+"bad "+typeof Gt+N(Gt);break}k(Gt,ht,W,Vt,i),++E}if((q=q.slice(Kt)).length){f(dt);return}++I,q=null,dt(Nt)})()}}}n.on.put=b;function k(i,g,v,S,x){var O=x._||"",C=O.root,I=C.graph,P,q=I[v]||m,W=a(q,g,1),V=q[g],U=O.DBG;(P=console.STAT)&&(!I[v]||!V)&&(P.has=(P.has||0)+1);var tt=G();if(S>tt){setTimeout(function(){k(i,g,v,S,x)},(P=S-tt)>D?D:P),console.STAT&&console.STAT((U||O).Hf=+new Date,P,"future");return}if(!(S<W)&&!(!O.faith&&S===W&&(i===V||$(i)<=$(V))&&!O.miss)){O.stun++;var Tt=x["#"]+O.all++,dt={toString:function(){return Tt},_:O};dt.toJSON=dt.toString,C.dup.track(dt)["#"]=x["#"],U&&(U.ph=U.ph||+new Date),C.on("put",{"#":dt,"@":x["@"],put:{"#":v,".":g,":":i,">":S},ok:x.ok,_:O})}}function A(i){var g;(g=(i._||"").DBG)&&(g.pa=+new Date,g.pm=g.pm||+new Date);var v=this,S=v.as,x=S.graph,O=i._,C=i.put,I=C["#"],P=C["."],q=C[":"],W=C[">"];i["#"];var V;(V=O.msg)&&(V=V.put)&&(V=V[I])&&s(V,P,W,q,I),x[I]=s(x[I],P,W,q,I),(V=(S.next||"")[I])&&V.on("in",i),j(O),v.to.next(i)}function j(i,g){var v;if(!i.stop&&!(!i.err&&0<--i.stun)&&(i.stop=1,!!(v=i.root))){var S=i.match;S.end=1,S===v.hatch&&(!(S=i.latch)||S.end?delete v.hatch:v.hatch=S),i.hatch&&i.hatch(),setTimeout.each(i.match,function(x){x&&x()}),!(!(g=i.msg)||i.err||g.err)&&(g.out=_,i.root.on("out",g),h())}}function u(i){var g=i["@"]||"",v;if(!(v=g._)){var S=(S=i.$)&&(S=S._)&&(S=S.root)&&(S=S.dup);if(!(S=S.check(g)))return;i["@"]=S["#"]||i["@"];return}v.acks=(v.acks||0)+1,(v.err=i.err)&&(i["@"]=v["#"],j(v)),v.ok=i.ok||v.ok,!v.stop&&!v.crack&&(v.crack=v.match&&v.match.push(function(){y(v)})),y(v)}function y(i){!i||!i.root||i.stun||i.acks!==i.all||i.root.on("in",{"@":i["#"],err:i.err,ok:i.err?d:i.ok||{"":1}})}var T="Error: Invalid graph!",N=function(i){return" '"+(""+i).slice(0,9)+"...' "},$=JSON.stringify,D=2147483647,G=n.state,E=0,F,h=function(){E>999&&E/-(F-(F=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),h=function(){E=0})}}(),function(){n.on.get=function(b,k){var A=k._,j=b.get,u=j["#"],y=A.graph[u],T=j["."],N=A.next||(A.next={}),$=N[u],D=b._||{},G=D.DBG=b.DBG;if(G&&(G.g=+new Date),!y)return A.on("get",b);if(T){if((typeof T!="string"||d===y[T])&&!(($||"").next||"")[T]){A.on("get",b);return}y=s({},T,a(y,T),y[T],u)}y&&_(b,y),A.on("get",b)};function _(b,k){var A=+new Date,j=b._||{},u=j.DBG=b.DBG,y=b["#"],T=l(9),N=Object.keys(k||"").sort(),$=((k||"")._||"")["#"];N.length;var D=b.$._.root,G=k===D.graph[$];console.STAT&&console.STAT(A,((u||j).gk=+new Date)-A,"got keys"),k&&function E(){A=+new Date;for(var F=0,h,i={},g;F<9&&(h=N[F++]);)s(i,h,a(k,h),k[h],$);N=N.slice(F),(g={})[$]=i,i=g;var v;G&&(v=function(){},v.ram=v.faith=!0),g=N.length,console.STAT&&console.STAT(A,-(A-(A=+new Date)),"got copied some"),u&&(u.ga=+new Date),D.on("in",{"@":y,"#":T,put:i,"%":g?T=l(9):d,$:D.$,_:v,DBG:u,FOO:1}),console.STAT&&console.STAT(A,+new Date-A,"got in"),g&&setTimeout.turn(E)}(),k||D.on("in",{"@":b["#"]})}n.on.get.ack=_}(),function(){n.chain.opt=function(_){_=_||{};var b=this,k=b._,A=_.peers||_;return Object.plain(_)||(_={}),Object.plain(k.opt)||(k.opt=_),typeof A=="string"&&(A=[A]),Object.plain(k.opt.peers)||(k.opt.peers={}),A instanceof Array&&(_.peers={},A.forEach(function(j){var u={};u.id=u.url=j,_.peers[j]=k.opt.peers[j]=k.opt.peers[j]||u})),c(_,function j(u){var y=this[u];if(this&&this.hasOwnProperty(u)||typeof y=="string"||Object.empty(y)){this[u]=y;return}y&&y.constructor!==Object&&!(y instanceof Array)||c(y,j)}),k.opt.from=_,n.on("opt",k),k.opt.uuid=k.opt.uuid||function(u){return n.state().toString(36).replace(".","")+String.random(u||12)},b}}();var c=function(_,b){Object.keys(_).forEach(b,_)},l=String.random,f=setTimeout.turn,p=n.valid,a=n.state.is,s=n.state.ify,d,m={},w;n.log=function(){return!n.log.off&&w.log.apply(w,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(_,b,k){return(k=n.log.once)[_]=k[_]||0,k[_]++||n.log(b)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}o.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(w=console).only=function(_,b){return w.only.i&&_===w.only.i&&w.only.i++&&(w.log.apply(w,arguments)||b)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(o){var n=t("./root");n.chain.back=function(f,p){var a;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var m=0,w=f.length,a=d;for(m;m<w;m++)a=(a||c)[f[m]];return l!==a?p?s:a:(a=d.back)?a.$.back(f,p):void 0}if(typeof f=="function"){for(var _,a={back:d};(a=a.back)&&l===(_=f(a,p)););return _}return typeof f=="number"?(d.back||d).$.back(f-1):this};var c={},l})(t,"./back"),t(function(o){var n=t("./root");n.chain.chain=function(j){var u=this,y=u._,T=new(j||u).constructor(u),N=T._,$;return N.root=$=y.root,N.id=++$.once,N.back=u._,N.on=n.on,N.on("in",n.on.in,N),N.on("out",n.on.out,N),T};function c(j){var u,y=this.as,T=y.back,N=y.root,$;if(j.$||(j.$=y.$),this.to.next(j),y.err){y.on("in",{put:y.put=d,$:y.$});return}if(u=j.get){if(N.pass&&(N.pass[y.id]=y),y.lex&&Object.keys(y.lex).forEach(function(D){$[D]=y.lex[D]},$=j.get=j.get||{}),u["#"]||y.soul){if(u["#"]=u["#"]||y.soul,j["#"]||(j["#"]=m(9)),T=N.$.get(u["#"])._,u=u["."]){if(_(T.put,u)&&($=T.ask&&T.ask[u],(T.ask||(T.ask={}))[u]=T.$.get(u)._,T.on("in",{get:u,put:{"#":T.soul,".":u,":":T.put[u],">":k(N.graph[T.soul],u)}}),$))return}else{if($=T.ask&&T.ask[""],(T.ask||(T.ask={}))[""]=T,d!==T.put&&(T.on("in",T),$))return;j.$=T.$}return N.ask(a,j),N.on("in",j)}if(u["."])return y.get?(j={get:{".":y.get},$:y.$},(T.ask||(T.ask={}))[y.get]=j.$._,T.on("out",j)):(j={get:y.lex?j.get:{},$:y.$},T.on("out",j));if((y.ask||(y.ask={}))[""]=y,y.get)return u["."]=y.get,(T.ask||(T.ask={}))[y.get]=j.$._,T.on("out",j)}return T.on("out",j)}n.on.out=c;function l(j,u){u=u||this.as;var y=u.root,T=j.$||(j.$=u.$),N=(T||"")._||s,$=j.put||"",D=$["#"],G=$["."],E=d!==$["="]?$["="]:$[":"],F=$[">"]||-1/0,h;if(d!==j.put&&(d===$["#"]||d===$["."]||d===$[":"]&&d===$["="]||d===$[">"])){if(!w($)){if(!(D=(($||"")._||"")["#"])){console.log("chain not yet supported for",$,"...",j,u);return}return T=u.root.$.get(D),setTimeout.each(Object.keys($).sort(),function(i){i=="_"||d===(F=k($,i))||u.on("in",{$:T,put:{"#":D,".":i,"=":$[i],">":F},VIA:j})})}u.on("in",{$:N.back.$,put:{"#":D=N.back.soul,".":G=N.has||N.get,"=":$,">":k(N.back.put,G)},via:j});return}(j.seen||"")[u.id]||((j.seen||(j.seen=function(){}))[u.id]=u,u!==N&&(Object.keys(j).forEach(function(i){$[i]=j[i]},$={}),$.get=u.get||$.get,!u.soul&&!u.has?$.$$$=$.$$$||u.$:N.soul&&($.$=u.$,$.$$=$.$$||N.$),j=$),p(j,u),(u.soul||j.$$)&&F>=k(y.graph[D],G)&&(($=y.$.get(D)._).put=A($.put,G,F,E,D)),!N.soul&&F>=k(y.graph[D],G)&&(h=(y.$.get(D)._.next||"")[G])&&(h.put=E,typeof($=w(E))=="string"&&(h.put=y.$.get($)._.put||E)),this.to&&this.to.next(j),u.any&&setTimeout.each(Object.keys(u.any),function(i){(i=u.any[i])&&i(j)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(i){(i=u.echo[i])&&i.on("in",j)},0,99),((j.$$||"")._||N).soul&&(h=u.next)&&(h=h[G])&&($={},Object.keys(j).forEach(function(i){$[i]=j[i]}),$.$=(j.$$||j.$).get($.get=G),delete $.$$,delete $.$$$,h.on("in",$)),f(j,u))}n.on.in=l;function f(j,u){if(u=u||this.as||j.$._,!(j.$$&&this!==n.on)&&!(!j.put||u.soul)){var y=j.put||"",T=y["="]||y[":"],G,N=u.root,$=N.$.get(y["#"]).get(y["."])._;if(typeof(T=w(T))!="string"){this===n.on&&(($.echo||($.echo={}))[u.id]=u);return}if(!(($.echo||($.echo={}))[u.id]&&!(N.pass||"")[u.id])){if(G=N.pass){if(G[T+u.id])return;G[T+u.id]=1}($.echo||($.echo={}))[u.id]=u,u.has&&(u.link=T);var D=N.$.get($.link=T)._;(D.echo||(D.echo={}))[$.id]=$;var G=u.ask||"";(G[""]||u.lex)&&D.on("out",{get:{"#":T}}),setTimeout.each(Object.keys(G),function(E,F){!E||!(F=G[E])||F.on("out",{get:{"#":T,".":E}})},0,99)}}}n.on.link=f;function p(j,u){var y=j.put||"",T=d!==y["="]?y["="]:y[":"],N=u.root,$,D;if(d===T){if(u.soul&&d!==u.put||(D=(j.$$||j.$||"")._||"",j["@"]&&(d!==D.put||d!==u.put)))return;($=u.link||j.linked)&&delete(N.$.get($)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(G,E){(E=u.next[G])&&($&&delete(N.$.get($).get(G)._.echo||"")[E.id],E.on("in",{get:G,put:d,$:E.$}))},0,99);return}u.soul||j.$$||($=w(T),D=j.$._||"",!(($===D.link||u.has&&!D.link)&&!((N.pass||"")[u.id]&&typeof $!="string"))&&(delete(D.echo||"")[u.id],p({get:u.get,put:d,$:j.$,linked:j.linked=j.linked||D.link},u)))}n.on.unlink=p;function a(j,u){var y=this.as,T=y.$._;T.root;var N=y.get||"",$=(j.put||"")[N["#"]]||"";if(!j.put||typeof N["."]=="string"&&d===$[N["."]]){if(d!==T.put||!T.soul&&!T.has)return;T.ack=(T.ack||0)+1,T.on("in",{get:T.get,put:T.put=d,$:T.$,"@":j["@"]});return}(j._||{}).miss=1,n.on.put(j)}var s={},d,m=String.random,w=n.valid,_=function(j,u){return j&&Object.prototype.hasOwnProperty.call(j,u)},b=n.state,k=b.is,A=b.ify})(t,"./chain"),t(function(o){var n=t("./root");n.chain.get=function(d,m,w){var _,b;if(typeof d=="string"){if(d.length==0)return(_=this.chain())._.err={err:n.log("0 length key!",d)},m&&m.call(_,_._.err),_;var k=this,A=k._,j=A.next||p;(_=j[d])||(_=d&&c(d,k)),_=_&&_.$}else if(typeof d=="function"){let G=function(E,F,h){if(!G.stun&&!((O=y.pass)&&!O[T])){var i=E.$._,g=(E.$$||"")._,v=(g||i).put,S=!i.has&&!i.soul,x={},O;if((S||s===v)&&(v=s===((O=E.put)||"")["="]?s===(O||"")[":"]?O:O[":"]:O["="]),typeof(O=n.valid(v))=="string"&&(v=s===(O=y.$.get(O)._.put)?u.not?s:v:O),!(u.not&&s===v)){if(s===u.stun){if((O=y.stun)&&O.on&&(A.$.back(function(C){if(O.on(""+C.id,x={}),(x.run||0)<G.id)return x}),!x.run&&O.on(""+i.id,x={}),!x.run&&g&&O.on(""+g.id,x={}),G.id>x.run&&((!x.stun||x.stun.end)&&(x.stun=O.on("stun"),x.stun=x.stun&&x.stun.last),x.stun&&!x.stun.end))){(x.stun.add||(x.stun.add={}))[T]=function(){G(E,F,1)};return}if(s===v&&(h=0),(O=y.hatch)&&!O.end&&s===u.hatch&&!h){if(N[i.$._.id])return;N[i.$._.id]=1,O.push(function(){G(E,F,1)});return}N={}}if(y.pass){if(y.pass[T+i.id])return;y.pass[T+i.id]=1}if(u.on){u.ok.call(i.$,v,i.get,E,F||G);return}if(u.v2020){u.ok(E,F||G);return}Object.keys(E).forEach(function(C){O[C]=E[C]},O={}),E=O,E.put=v,u.ok.call(u.as,E,F||G)}}};var $=G;if(m===!0)return l(this,d,m,w),this;_=this;var A=_._,u=m||{},y=A.root,T;u.at=A,u.ok=d;var N={};return G.at=A,(A.any||(A.any={}))[T=String.random(7)]=G,G.off=function(){G.stun=1,A.any&&delete A.any[T]},G.rid=f,G.id=u.run||++y.once,b=y.pass,(y.pass={})[T]=1,u.out=u.out||{get:{}},A.on("out",u.out),y.pass=b,_}else{if(typeof d=="number")return this.get(""+d,m,w);if(typeof(b=a(d))=="string")return this.get(b,m,w);(b=this.get.next)&&(_=b(this,d))}return _?(m&&typeof m=="function"&&_.get(m,w),_):((_=this.chain())._.err={err:n.log("Invalid get request!",d)},m&&m.call(_,_._.err),_)};function c(d,m){var w=m._,_=w.next,b=m.chain(),k=b._;return _||(_=w.next={}),_[k.get=d]=k,m===w.root.$?k.soul=d:(w.soul||w.has)&&(k.has=d),k}function l(d,m,w,_){var b=d._,k=0,A;return(A=b.soul||b.link)?m(A,_,b):b.jam?b.jam.push([m,_]):(b.jam=[[m,_]],d.get(function(u,y){if(!(s===u.put&&!b.root.opt.super&&(A=Object.keys(b.root.opt.peers).length)&&++k<=A)){y.rid(u);var T=(T=u.$)&&T._||{},N=0,$;for(A=b.jam,delete b.jam;$=A[N++];){var D=$[0];$=$[1],D&&D(T.link||T.soul||n.valid(u.put)||((u.put||{})._||{})["#"],$,u,y)}}},{out:{get:{".":!0}}}),d)}function f(d){var m=this.at||this.on;if(!d||m.soul||m.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){m.map;var w;if((w=this.seen||(this.seen={}))[d])return!0;w[d]=!0}}var p={},a=n.valid,s})(t,"./get"),t(function(o){var n=t("./root");n.chain.put=function(_,b,k){var A=this,j=A._,u=j.root;k=k||{},k.root=j.root,k.run||(k.run=u.once),c(k,j.id),k.ack=k.ack||b,k.via=k.via||A,k.data=k.data||_,k.soul||(k.soul=j.soul||typeof b=="string"&&b);var y=k.state=k.state||n.state();return typeof _=="function"?(_(function(T){k.data=T,A.put(a,a,k)}),A):k.soul?(k.$=u.$.get(k.soul),k.todo=[{it:k.data,ref:k.$}],k.turn=k.turn||d,k.ran=k.ran||l,function T(){var N=k.todo,$=N.pop(),D=$.it;$.ref&&$.ref._.id;var G,E,F,h,i;if(c(k,$.ref),(h=$.todo)&&(E=h.pop(),D=D[E],h.length&&N.push($)),E&&(N.path||(N.path=[])).push(E),!(G=m(D))&&!(i=n.is(D))){if(!Object.plain(D)){l.err(k,"Invalid data: "+p(D)+" at "+(k.via.back(function(O){O.get&&h.push(O.get)},h=[])||h.join("."))+"."+(N.path||[]).join("."));return}for(var g=k.seen||(k.seen=[]),v=g.length;v--;)if(D===(h=g[v]).it){G=D=h.link;break}}if(E&&G)$.node=w($.node,E,y,D);else{let O=function(C,I){var P=F.link["#"];I&&(I.off(),I.rid(C));var q=P||C.soul||(h=(C.$$||C.$)._||"").soul||h.link||((h=h.put||"")._||"")["#"]||h["#"]||((h=C.put||"")&&C.$$?h["#"]:(h["="]||h[":"]||"")["#"]);if(!P&&c(k,C.$),!q&&!$.link["#"]){($.wait||($.wait=[])).push(function(){O(C,I)});return}q||(q=[],(C.$$||C.$).back(function(W){if(h=W.soul||W.link)return q.push(h);q.push(W.get)}),q=q.reverse().join("/")),F.link["#"]=q,!i&&(((k.graph||(k.graph={}))[q]=F.node||(F.node={_:{}}))._["#"]=q),delete k.wait[S],F.wait&&setTimeout.each(F.wait,function(W){W&&W()}),k.ran(k)};var x=O;if(!k.seen){l.err(k,"Data at root of graph must be a node (an object).");return}k.seen.push(F={it:D,link:{},todo:i?[]:Object.keys(D).sort().reverse(),path:(N.path||[]).slice(),up:$}),$.node=w($.node,E,y,F.link),!i&&F.todo.length&&N.push(F);var S=k.seen.length;(k.wait||(k.wait={}))[S]="",h=(F.ref=i?D:E?$.ref.get(E):$.ref)._,(h=D&&(D._||"")["#"]||h.soul||h.link)?O({soul:h}):F.ref.get(O,{run:k.run,v2020:1,out:{get:{".":" "}}})}if(!N.length)return k.ran(k);k.turn(T)}(),A):(f(k),A)};function c(_,b){if(b){b=(b._||"").id||b;var k=_.root.stun||(_.root.stun={on:n.on}),A={},j;_.stun||(_.stun=k.on("stun",function(){})),(j=k.on(""+b))&&j.the.last.next(A),!(A.run>=_.run)&&k.on(""+b,function(u){if(_.stun.end){this.off(),this.to.next(u);return}u.run=u.run||_.run,u.stun=u.stun||_.stun})}}function l(_){if(_.err){l.end(_.stun,_.root);return}if(!(_.todo.length||_.end||!Object.empty(_.wait))){_.end=1;var b=_.$.back(-1)._,k=b.root,A=b.ask(function(T){k.on("ack",T),T.err&&!T.lack&&n.log(T),++j>(_.acks||0)&&this.off(),_.ack&&_.ack(T,this)},_.opt),j=0,u=_.stun,y;(y=function(){u&&(l.end(u,k),setTimeout.each(Object.keys(u=u.add||""),function(T){(T=u[T])&&T()}))}).hatch=y,_.ack&&!_.ok&&(_.ok=_.acks||9),_.via._.on("out",{put:_.out=_.graph,ok:_.ok&&{"@":_.ok+1},opt:_.opt,"#":A,_:y})}}l.end=function(_,b){_.end=s,_.the.to===_&&_===_.the.last&&delete b.stun,_.off()},l.err=function(_,b){(_.ack||s).call(_,_.out={err:_.err=n.log(b)}),_.ran(_)};function f(_){var b=_.via._,k;_.via=_.via.back(function(A){if(A.soul||!A.get)return A.$;k=_.data,(_.data={})[A.get]=k}),(!_.via||!_.via._.soul)&&(_.via=b.root.$.get(((_.data||"")._||"")["#"]||b.$.back("opt.uuid")())),_.via.put(_.data,_.ack,_)}function p(_,b){return _&&(b=_.constructor)&&b.name||typeof _}var a,s=function(){},d=setTimeout.turn,m=n.valid,w=n.state.ify})(t,"./put"),t(function(o){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),o.exports=n})(t,"./index"),t(function(o){var n=t("./index");n.chain.on=function(f,p,a,s){var d=this,m=d._;m.root;var w;if(typeof f=="string")return p?(w=m.on(f,p,a||m,s),a&&a.$&&(a.subs||(a.subs=[])).push(w),d):m.on(f);var _=p;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,d.get(f,_),d},n.chain.once=function(f,p){if(p=p||{},!f)return c(this);var a=this,s=a._,d=s.root;s.put;var m=String.random(7),w;return a.get(function(_,b,k,A){var j=this,u=j._,y=u.one||(u.one={});if(A.stun||y[m]==="")return;if((w=n.valid(_))===!0){T();return}if(typeof w=="string")return;clearTimeout((s.one||"")[m]),clearTimeout(y[m]),y[m]=setTimeout(T,p.wait||99);function T(N){if(!u.has&&!u.soul&&(u={put:_,get:b}),l===(w=u.put)&&(w=((k.$$||"")._||"").put),typeof n.valid(w)=="string"&&(w=d.$.get(w)._.put,w===l&&!N)){y[m]=setTimeout(function(){T(1)},p.wait||99);return}A.stun||y[m]!==""&&(y[m]="",(s.soul||s.has)&&A.off(),f.call(j,w,u.get),clearTimeout(y[m]))}},{on:1}),a};function c(f,p,a){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(a=f.chain())._.nix=f.once(function(s,d){a._.on("in",this._)}),a._.lex=f._.lex,a}n.chain.off=function(){var f=this,p=f._,a,s=p.back;if(s)return p.ack=0,(a=s.next)&&a[p.get]&&delete a[p.get],(a=s.any)&&(delete s.any,s.any={}),(a=s.ask)&&delete a[p.get],(a=s.put)&&delete a[p.get],(a=p.soul)&&delete s.root.graph[a],(a=p.map)&&Object.keys(a).forEach(function(d,m){m=a[d],m.link&&s.root.$.get(m.link).off()}),(a=p.next)&&Object.keys(a).forEach(function(d,m){m=a[d],m.$.off()}),p.on("off",{}),f};var l})(t,"./on"),t(function(o){var n=t("./index"),c=n.chain.get.next;n.chain.get.next=function(a,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?a.get(d):((d=a.chain()._).lex=s,a.on("in",function(m){String.match(m.get||(m.put||"")["."],s["."]||s["#"]||s)&&d.on("in",m),this.to.next(m)}),d.$):(c||f)(a,s)},n.chain.map=function(a,s,d){var m=this,w=m._,_,b;return Object.plain(a)&&(_=a["."]?a:{".":a},a=p),a?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=m.chain(),m.map().on(function(k,A,j,u){var y=(a||f).call(this,k,A,j,u);if(p!==y){if(k===y)return b._.on("in",j);if(n.is(y))return b._.on("in",y._);var T={};Object.keys(j.put).forEach(function(N){T[N]=j.put[N]},T),T["="]=y,b._.on("in",{get:A,put:T})}}),b):((b=w.each)||((w.each=b=m.chain())._.lex=_||b._.lex||w.lex,b._.nix=m.back("nix"),m.on("in",l,b._)),b)};function l(a){this.to.next(a);var s=this.as,d=a.$,m=d._,w=a.put,_;!m.soul&&!a.$$||(_=s.lex)&&!String.match(a.get||(w||"")["."],_["."]||_["#"]||_)||n.on.link(a,s)}var f=function(){},p})(t,"./map"),t(function(o){var n=t("./index");n.chain.set=function(c,l,f){var p=this,a=p.back(-1),s,d;return l=l||function(){},f=f||{},f.item=f.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=n.valid(c))=="string"?p.get(s=d).put(c,l,f):n.is(c)?(p.put(function(m){c.get(function(w,_,b){if(!w)return l.call(p,{err:n.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[w]={"#":w},m(d)},!0)}),c):(Object.plain(c)&&(c=a.get(s=p.back("opt.uuid")()).put(c)),p.get(s||a.back("opt.uuid")(7)).put(c,l,f))}})(t,"./set"),t(function(o){t("./shim");var n=function(){},c=JSON.parseAsync||function(a,s,d){var m,w=+new Date;try{s(m,JSON.parse(a,d),l.sucks(+new Date-w))}catch(_){s(_)}},l=JSON.stringifyAsync||function(a,s,d,m){var w,_=+new Date;try{s(w,JSON.stringify(a,d,m),l.sucks(+new Date-_))}catch(b){s(b)}};l.sucks=function(a){a>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),l.sucks=n)};function f(a){var s=function(){},d=a.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var m=setTimeout.turn||setTimeout,w=a.dup,_=w.check,b=w.track,k=s.hear=function(u,y){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},y);s===this&&(k.d+=u.length||0,++k.c);var T=y.SH=+new Date,N=u[0],$;if(N==="["){c(u,function(D,G){if(D||!G)return s.say({dam:"!",err:"DAM JSON parse error."},y);console.STAT&&console.STAT(+new Date,G.length,"# on hear batch");var E=d.puff;(function F(){for(var h=+new Date,i=0,g;i<E&&(g=G[i++]);)s.hear(g,y);G=G.slice(i),console.STAT&&console.STAT(h,+new Date-h,"hear loop"),A(y),G.length&&m(F,0)})()}),u="";return}if(N==="{"||(u["#"]||Object.plain(u))&&($=u)){if($)return k.one($,y,T);c(u,function(D,G){if(D||!G)return s.say({dam:"!",err:"DAM JSON parse error."},y);k.one(G,y,T)});return}}};k.one=function(u,y,F){var N,$,D,G,E;if(u.DBG&&(u.DBG=E={DBG:u.DBG}),E&&(E.h=F),E&&(E.hp=+new Date),(N=u["#"])||(N=u["#"]=String.random(9)),!(D=_(N))&&($=u["##"],!($&&(D=u["@"]||u.get&&N)&&w.check(G=D+$)))){if((u._=function(){}).via=s.leap=y,(D=u["><"])&&typeof D=="string"&&D.slice(0,99).split(",").forEach(function(h){this[h]=1},u._.yo={}),D=u.dam){(D=s.hear[D])&&D(u,y,a),b(N);return}(D=u.ok)&&(u._.near=D["/"]);var F=+new Date;E&&(E.is=F),y.SI=N,b.ed=function(h){N===h&&(b.ed=0,(h=w.s[N])&&(h.via=y,u.get&&(h.it=u)))},a.on("in",s.last=u),E&&(E.hd=+new Date),console.STAT&&console.STAT(F,+new Date-F,u.get?"msg get":u.put?"msg put":"msg"),b(N),G&&b(G),s.leap=s.last=null}},k.c=k.d=0,function(){var u=0,y;s.hash=function($,D){var G,E,F,h=+new Date;l($.put,function i(g,v){var S=(E||(E=F=v||"")).slice(0,32768);if(G=String.hash(S,G),E=E.slice(32768),E){m(i,0);return}console.STAT&&console.STAT(h,+new Date-h,"say json+hash"),$._.$put=F,$["##"]=G,s.say($,D),delete $._.$put},T)};function T($,D){var G;return D instanceof Object?(Object.keys(D).sort().forEach(N,{to:G={},on:D}),G):D}function N($){this.to[$]=this.on[$]}s.say=function($,D){var G;if((G=this)&&(G=G.to)&&G.next&&G.next($),!$)return!1;var E,F,h,i=$["@"],g=$._||($._=function(){}),v=$.DBG,S=+new Date;if(g.y=g.y||S,D||v&&(v.y=S),(E=$["#"])||(E=$["#"]=String.random(9)),!y&&b(E),!(F=$["##"])&&p!==$.put&&!g.via&&i){s.hash($,D);return}if(!D&&i&&(D=(G=w.s[i])&&(G.via||(G=G.it)&&(G=G._)&&G.via)||(G=s.last)&&i===G["#"]&&s.leap),!D&&i)return w.s[i]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(i&&!$.put&&!F&&((w.s[i]||"").it||"")["##"])return!1;if(!D&&s.way)return s.way($);if(v&&(v.yh=+new Date),!(h=g.raw)){s.raw($,D);return}if(v&&(v.yr=+new Date),!D||!D.id){if(!Object.plain(D||d.peers))return!1;var S=+new Date;d.puff;var x=d.peers,O=Object.keys(D||d.peers||{});console.STAT&&console.STAT(S,+new Date-S,"peer keys"),function P(){var q=+new Date;y=1;var W=g.raw;g.raw=h;for(var V=0,U;V<9&&(U=(O||"")[V++]);)(U=x[U]||(D||"")[U])&&s.say($,U);g.raw=W,y=0,O=O.slice(V),console.STAT&&console.STAT(q,+new Date-q,"say loop"),O.length&&(m(P,0),i&&b(i))}();return}if(!D.wire&&s.wire&&s.wire(D),E!==D.last){if(D.last=E,D===g.via||(G=g.yo)&&(G[D.url]||G[D.pid]||G[D.id]))return!1;if(console.STAT&&console.STAT(S,((v||g).yp=+new Date)-(g.y||S),"say prep"),!y&&i&&b(i),D.batch){if(D.tail=(G=D.tail||0)+h.length,D.tail<=d.pack){D.batch+=(G?",":"")+h;return}A(D)}D.batch="[";var C=+new Date;setTimeout(function(){console.STAT&&console.STAT(C,+new Date-C,"0ms TO"),A(D)},d.gap),j(h,D),console.STAT&&i===D.SI&&console.STAT(S,+new Date-D.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function($,D){if(!$)return"";var G=$._||{},E,F;if(F=G.raw)return F;if(typeof $=="string")return $;var h=$["##"],i=$["@"];if(h&&i){if(!G.via&&_(i+h))return!1;if(F=(w.s[i]||"").it){if(h===F["##"])return!1;F["##"]||(F["##"]=h)}}if(!$.dam&&!$["@"]){var g=0,v=[];F=d.peers;for(var S in F){var x=F[S];if(v.push(x.url||x.pid||x.id),++g>6)break}g>1&&($["><"]=v.join())}if($.put&&(F=$.ok)&&($.ok={"@":(F["@"]||1)-1,"/":F["/"]==$._.near?s.near:F["/"]}),E=G.$put){F={},Object.keys($).forEach(function(C){F[C]=$[C]}),F.put=":])([:",l(F,function(C,I){if(!C){var P=+new Date;F=I.indexOf('"put":":])([:"'),O(p,I=I.slice(0,F+6)+E+I.slice(F+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}l($,O);function O(C,I){C||(G.raw=I,s.say($,D))}}}();function A(u){var y=u.batch,T=typeof y=="string";if(T&&(y+="]"),u.batch=u.tail=null,!!y&&!(T?3>y.length:!y.length)){if(!T)try{y=y.length===1?y[0]:JSON.stringify(y)}catch(N){return d.log("DAM JSON stringify error",N)}y&&j(y,u)}}function j(u,y){try{var T=y.wire;y.say?y.say(u):T.send&&T.send(u),s.say.d+=u.length||0,++s.say.c}catch{(y.queue=y.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var y=u.wire,T;if(!y){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(T=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:a.opt.pid},d.peers[T]=u),delete w.s[u.last]),u.met||(s.near++,u.met=+new Date,a.on("hi",u)),T=u.queue,u.queue=[],setTimeout.each(T||[],function(N){j(N,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,a.on("bye",u);var y=+new Date;y=y-(u.met||y),s.bye.time=((s.bye.time||y)+y)/2},s.hear["!"]=function(u,y){d.log("Error:",u.err)},s.hear["?"]=function(u,y){u.pid&&(y.pid||(y.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},y),delete w.s[y.last])},s.hear.mob=function(u,y){if(u.peers){var T=Object.keys(u.peers),N=T[Math.random()*T.length>>0];N&&(s.bye(y),s.hi(N))}},a.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),a.on("bye",function(u,y){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(y=u.wire)&&y.close&&y.close(),delete d.peers[u.id],u.wire=null}),a.on("bye",function(u,y){this.to.next(u),(y=console.STAT)&&(y.peers=s.near),(y=u.url)&&setTimeout(function(){},d.lack||9e3)}),a.on("hi",function(u,y){if(this.to.next(u),(y=console.STAT)&&(y.peers=s.near),!d.super){var T=Object.keys(a.next||"");T.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(T,function(N){var $=a.next[N];if(d.super||($.ask||"")[""]){s.say({get:{"#":N}},u);return}setTimeout.each(Object.keys($.ask||""),function(D){D&&s.say({"##":String.hash((a.graph[N]||"")[D]),get:{"#":N,".":D}},u)})})}}),s}var p;try{o.exports=f}catch{}})(t,"./mesh"),t(function(o){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(l){if(this.to.next(l),l.once)return;var f=l.opt;if(f.WebSocket===!1)return;var p=n.window||{},a=f.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!a)return;f.WebSocket=a;var s=f.mesh=f.mesh||n.Mesh(l);s.wire||f.wire,s.wire=f.wire=d;function d(b){try{if(!b||!b.url)return A&&A(b);var k=b.url.replace(/^http/,"ws"),A=b.wire=new f.WebSocket(k);return A.onclose=function(){w(b),f.mesh.bye(b)},A.onerror=function(j){w(b)},A.onopen=function(){f.mesh.hi(b)},A.onmessage=function(j){j&&f.mesh.hear(j.data||j,b)},A}catch{f.mesh.bye(b)}}setTimeout(function(){!f.super&&l.on("out",{dam:"hi"})},1);var m=2*999;function w(b){clearTimeout(b.defer),f.peers[b.url]&&(_&&b.retry<=0||(b.retry=(b.retry||f.retry+1||60)-(-b.tried+(b.tried=+new Date)<m*4?1:0),b.defer=setTimeout(function k(){if(_&&_.hidden)return setTimeout(k,m);d(b)},m)))}var _=""+c!=typeof document&&document});var c})(t,"./websocket"),t(function(o){if(!(typeof Gun>"u")){var n=function(){},c;try{c=(Gun.window||n).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(f,p){this[f]=p},removeItem:function(f){delete this[f]},getItem:function(f){return this[f]}});var l=JSON.stringifyAsync||function(f,p,a,s){var d;try{p(d,JSON.stringify(f,a,s))}catch(m){p(m)}};Gun.on("create",function f(p){this.to.next(p);var a=p.opt;p.graph;var s=[],d,m,w,_;if(a.localStorage===!1)return;a.prefix=a.file||"gun/";try{d=f[a.prefix]=f[a.prefix]||JSON.parse(w=c.getItem(a.prefix))||{}}catch{d=f[a.prefix]={}}w=(w||"").length,p.on("get",function(k){this.to.next(k);var A=k.get,j,u,y,T;!A||!(j=A["#"])||(u=d[j]||T,u&&(y=A["."])&&!Object.plain(y)&&(u=Gun.state.ify({},y,Gun.state.is(u,y),u[y],j)),Gun.on.get.ack(k,u))}),p.on("put",function(k){this.to.next(k);var A=k.put,j=A["#"],u=A["."],y=k["#"],T=k.ok||"";if(d[j]=Gun.state.ify(d[j],u,A[">"],A[":"],j),_&&w>4999880){p.on("in",{"@":y,err:"localStorage max!"});return}!k["@"]&&(!k._.via||Math.random()<T["@"]/T["/"])&&s.push(y),!m&&(m=setTimeout(b,9+w/333))});function b(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var k=s;clearTimeout(m),m=!1,s=[],l(d,function(A,j){try{!A&&c.setItem(a.prefix,j)}catch(u){A=_=u||"localStorage failure"}A&&(Gun.log(A+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:A,get:a.prefix,put:d})),w=j.length,setTimeout.each(k,function(u){p.on("in",{"@":u,err:A,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var F;if(""+F!=typeof Gun){var t=function(h){console.warn("Warning! Deprecated internal utility will break in next version:",h)},e=Gun;e.fn=e.fn||{is:function(h){return t("fn"),!!h&&typeof h=="function"}},e.bi=e.bi||{is:function(h){return t("bi"),h instanceof Boolean||typeof h=="boolean"}},e.num=e.num||{is:function(h){return t("num"),!o(h)&&(h-parseFloat(h)+1>=0||h===1/0||h===-1/0)}},e.text=e.text||{is:function(h){return t("text"),typeof h=="string"}},e.text.ify=e.text.ify||function(h){return t("text.ify"),e.text.is(h)?h:typeof JSON<"u"?JSON.stringify(h):h&&h.toString?h.toString():h},e.text.random=e.text.random||function(h,i){t("text.random");var g="";for(h=h||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";h>0;)g+=i.charAt(Math.floor(Math.random()*i.length)),h--;return g},e.text.match=e.text.match||function(h,i){var g,v;return t("text.match"),typeof h!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},g=i["="]||i["*"]||i[">"]||i["<"],h===g?!0:v!==i["="]?!1:(g=i["*"]||i[">"]||i["<"],h.slice(0,(g||"").length)===g?!0:v!==i["*"]?!1:v!==i[">"]&&v!==i["<"]?h>=i[">"]&&h<=i["<"]:v!==i[">"]&&h>=i[">"]||v!==i["<"]&&h<=i["<"]))},e.text.hash=e.text.hash||function(h,i){if(t("text.hash"),typeof h=="string"){if(i=i||0,!h.length)return i;for(var g=0,v=h.length,S;g<v;++g)S=h.charCodeAt(g),i=(i<<5)-i+S,i|=0;return i}},e.list=e.list||{is:function(h){return t("list"),h instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(h){return t("list.sort"),function(i,g){return!i||!g?0:(i=i[h],g=g[h],i<g?-1:i>g?1:0)}},e.list.map=e.list.map||function(h,i,g){return t("list.map"),G(h,i,g)},e.list.index=1,e.obj=e.boj||{is:function(h){return t("obj"),h?h instanceof Object&&h.constructor===Object||Object.prototype.toString.call(h).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(h,i,g){return t("obj.put"),(h||{})[i]=g,h},e.obj.has=e.obj.has||function(h,i){return t("obj.has"),h&&Object.prototype.hasOwnProperty.call(h,i)},e.obj.del=e.obj.del||function(h,i){if(t("obj.del"),!!h)return h[i]=null,delete h[i],h},e.obj.as=e.obj.as||function(h,i,g,v){return t("obj.as"),h[i]=h[i]||(v===g?{}:g)},e.obj.ify=e.obj.ify||function(h){if(t("obj.ify"),y(h))return h;try{h=JSON.parse(h)}catch{h={}}return h},function(){var h;function i(g,v){N(this,v)&&h!==this[v]||(this[v]=g)}e.obj.to=e.obj.to||function(g,v){return t("obj.to"),v=v||{},G(g,i,v),v}}(),e.obj.copy=e.obj.copy||function(h){return t("obj.copy"),h&&JSON.parse(JSON.stringify(h))},function(){function h(i,g){var v=this.n,S;if(!(v&&(g===v||y(v)&&N(v,g)))&&S!==g)return!0}e.obj.empty=e.obj.empty||function(i,g){return t("obj.empty"),i?!G(i,h,{n:g}):!0}}(),function(){function h(v,S){if(arguments.length===2){h.r=h.r||{},h.r[v]=S;return}h.r=h.r||[],h.r.push(v)}var i=Object.keys,g;Object.keys=Object.keys||function(v){return g(v,function(S,x,O){O(x)})},e.obj.map=g=e.obj.map||function(v,S,x){t("obj.map");var O,C=0,I,P,q,W,V=typeof S=="function";if(h.r=O,i&&y(v)&&(q=i(v),W=!0),x=x||{},o(v)||q)for(I=(q||v).length;C<I;C++){var U=C+e.list.index;if(V){if(P=W?S.call(x,v[q[C]],q[C],h):S.call(x,v[C],U,h),P!==O)return P}else if(S===v[W?q[C]:C])return q?q[C]:U}else for(C in v)if(V){if(N(v,C)&&(P=x?S.call(x,v[C],C,h):S(v[C],C,h),P!==O))return P}else if(S===v[C])return C;return V?h.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(h){return t("time"),h?h instanceof Date:+new Date().getTime()};var j=e.fn.is,o=e.list.is,u=e.obj,y=u.is,N=u.has,G=u.map,n={};n.is=function(h){return t("val.is"),h===F?!1:h===null?!0:h===1/0?!1:f(h)||l(h)||_(h)?!0:n.link.is(h)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(i){if(t("val.link.is"),i&&i[c]&&!i._&&y(i)){var g={};if(G(i,h,g),g.id)return g.id}return!1};function h(i,g){var v=this;if(v.id)return v.id=!1;if(g==c&&f(i))v.id=i;else return v.id=!1}}(),n.link.ify=function(h){return t("val.link.ify"),D({},c,h)},e.obj.has._=".";var c=n.link._,F,l=e.bi.is,_=e.num.is,f=e.text.is,u=e.obj,y=u.is,D=u.put,G=u.map;e.val=e.val||n;var p={_:"_"};p.soul=function(h,i){return t("node.soul"),h&&h._&&h._[i||d]},p.soul.ify=function(h,i){return t("node.soul.ify"),i=typeof i=="string"?{soul:i}:i||{},h=h||{},h._=h._||{},h._[d]=i.soul||h._[d]||s(),h},p.soul._=n.link._,function(){p.is=function(i,g,v){t("node.is");var S;return y(i)&&(S=p.soul(i))?!G(i,h,{as:v,cb:g,s:S,n:i}):!1};function h(i,g){if(g!==p._){if(!n.is(i))return!0;this.cb&&this.cb.call(this.as,i,g,this.n,this.s)}}}(),function(){p.ify=function(i,g,v){return t("node.ify"),g?typeof g=="string"?g={soul:g}:typeof g=="function"&&(g={map:g}):g={},g.map&&(g.node=g.map.call(v,i,F,g.node||{})),(g.node=p.soul.ify(g.node||{},g))&&G(i,h,{o:g,as:v}),g.node};function h(i,g){var v=this.o,S,x;if(v.map){S=v.map.call(this.as,i,""+g,v.node),x===S?T(v.node,g):v.node&&(v.node[g]=S);return}n.is(i)&&(v.node[g]=i)}}();var u=e.obj,y=u.is,T=u.del,G=u.map,a=e.text,s=a.random,d=p.soul._,F;e.node=e.node||p;var m=e.state;m.lex=function(){return t("state.lex"),m().toString(36).replace(".","")},m.to=function(h,i,g){t("state.to");var v=(h||{})[i];return y(v)&&(v=E(v)),m.ify(g,i,m.is(h,i),v,p.soul(h))},function(){m.map=function(i,g,v){t("state.map");var S,x=y(x=i||g)?x:null;return i=j(i=i||g)?i:null,x&&!i?(g=_(g)?g:m(),x[k]=x[k]||{},G(x,h,{o:x,s:g}),x):(v=v||y(g)?g:S,g=_(g)?g:m(),function(O,C,I,P){if(!i)return h.call({o:I,s:g},O,C),O;i.call(v||this||{},O,C,I,P),!(N(I,C)&&S===I[C])&&h.call({o:I,s:g},O,C)})};function h(i,g){k!==g&&m.ify(this.o,g,this.s)}}();var u=e.obj;u.as;var N=u.has,y=u.is,G=u.map,E=u.copy,w=e.num,_=w.is,b=e.fn,j=b.is,k=p._,F,A={};(function(){A.is=function(g,v,S,x){return t("graph.is"),!g||!y(g)||$(g)?!1:!G(g,h,{cb:v,fn:S,as:x})};function h(g,v){if(!g||v!==p.soul(g)||!p.is(g,this.fn,this.as))return!0;this.cb&&(i.n=g,i.as=this.as,this.cb.call(i.as,g,v,i))}function i(g){g&&p.is(i.n,g,i.as)}})(),function(){A.ify=function(x,O,C){t("graph.ify");var I={path:[],obj:x};return O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O.map=O):O={},typeof C=="string"&&(O.soul=O.soul||C,C=F),O.soul&&(I.link=n.link.ify(O.soul)),O.shell=(C||{}).shell,O.graph=O.graph||{},O.seen=O.seen||[],O.as=O.as||C,h(O,I),O.root=I.node,O.graph};function h(x,O){var C;return(C=S(x,O))?C:(O.env=x,O.soul=g,p.ify(O.obj,i,O)&&(O.link=O.link||n.link.ify(p.soul(O.node)),O.obj!==x.shell&&(x.graph[n.link.is(O.link)]=O.node)),O)}function i(x,O,C){var I=this,P=I.env,q,W;if(p._===O&&N(x,n.link._))return C._;if(q=v(x,O,C,I,P)){if(O||(I.node=I.node||C||{},N(x,p._)&&p.soul(x)&&(I.node._=E(x._)),I.node=p.soul.ify(I.node,n.link.is(I.link)),I.link=I.link||n.link.ify(p.soul(I.node))),(W=P.map)&&(W.call(P.as||{},x,O,C,I),N(C,O))){if(x=C[O],F===x){T(C,O);return}if(!(q=v(x,O,C,I,P)))return}if(!O)return I.node;if(q===!0)return x;if(W=h(P,{obj:x,path:I.path.concat(O)}),!!W.node)return W.link}}function g(x){var O=this,C=n.link.is(O.link),I=O.env.graph;O.link=O.link||n.link.ify(x),O.link[n.link._]=x,O.node&&O.node[p._]&&(O.node[p._][n.link._]=x),N(I,C)&&(I[x]=I[C],T(I,C))}function v(x,O,C,I,P){var q;if(n.is(x))return!0;if(y(x))return 1;if(q=P.invalid)return x=q.call(P.as||{},x,O,C),v(x,O,C,I,P);P.err="Invalid value at '"+I.path.concat(O).join(".")+"'!",e.list.is(x)&&(P.err+=" Use `.set(item)` instead of an Array.")}function S(x,O){for(var C=x.seen,I=C.length,P;I--;)if(P=C[I],O.obj===P.obj)return P;C.push(O)}}(),A.node=function(h){t("graph.node");var i=p.soul(h);if(i)return D({},i,h)},function(){A.to=function(i,g,v){if(t("graph.to"),!!i){var S={};return v=v||{seen:{}},G(i[g],h,{obj:S,graph:i,opt:v}),S}};function h(i,g){var v,S;if(p._===g){if($(i,n.link._))return;this.obj[g]=E(i);return}if(!(v=n.link.is(i))){this.obj[g]=i;return}if(S=this.opt.seen[v]){this.obj[g]=S;return}this.obj[g]=this.opt.seen[v]=A.to(this.graph,v,this.opt)}}();var j=e.fn.is,u=e.obj,y=u.is,T=u.del,N=u.has,$=u.empty,D=u.put,G=u.map,E=u.copy,F;e.graph=e.graph||A}}()})(Lt);var dn=Lt.exports,hn=dn;const pn=cn(hn),_n=pn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),je=_n.get("cards"),Jt=document.createElement("a"),Mt=document.createElement("input");Mt.type="file";Mt.accept=".json";Mt.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const o=await t.text();Rt(JSON.parse(o))}};const vt=Te([]),Rt=r=>{je.put({data:JSON.stringify(r)})};je.on(r=>{vt.set(JSON.parse(r.data))});const vn=()=>{Jt.href=URL.createObjectURL(new Blob([JSON.stringify(Ge(vt))],{type:"application/json"})),Jt.download="cards.json",Jt.click()},yn=()=>{Mt.click()};function fe(r,t,e){const o=r.slice();return o[3]=t[e],o}function ae(r,t,e){const o=r.slice();return o[6]=t[e],o}function le(r,t,e){const o=r.slice();return o[6]=t[e],o}function ce(r){let t,e;return t=new Ut({props:{card:r[6]}}),{c(){Y(t.$$.fragment)},m(o,n){Q(t,o,n),e=!0},p(o,n){const c={};n&2&&(c.card=o[6]),t.$set(c)},i(o){e||(J(t.$$.fragment,o),e=!0)},o(o){z(t.$$.fragment,o),e=!1},d(o){X(t,o)}}}function se(r){let t,e;return t=new Ut({props:{card:r[6],back:!0}}),{c(){Y(t.$$.fragment)},m(o,n){Q(t,o,n),e=!0},p(o,n){const c={};n&2&&(c.card=o[6]),t.$set(c)},i(o){e||(J(t.$$.fragment,o),e=!0)},o(o){z(t.$$.fragment,o),e=!1},d(o){X(t,o)}}}function de(r){let t,e,o,n,c,l=rt(r[3]),f=[];for(let m=0;m<l.length;m+=1)f[m]=ce(le(r,l,m));const p=m=>z(f[m],1,1,()=>{f[m]=null});let a=rt(r[3]),s=[];for(let m=0;m<a.length;m+=1)s[m]=se(ae(r,a,m));const d=m=>z(s[m],1,1,()=>{s[m]=null});return{c(){t=R("div");for(let m=0;m<f.length;m+=1)f[m].c();e=K(),o=R("div");for(let m=0;m<s.length;m+=1)s[m].c();n=K(),B(t,"class","page svelte-1bs53cn"),B(o,"class","page svelte-1bs53cn")},m(m,w){M(m,t,w);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(t,null);M(m,e,w),M(m,o,w);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(o,null);L(o,n),c=!0},p(m,w){if(w&2){l=rt(m[3]);let _;for(_=0;_<l.length;_+=1){const b=le(m,l,_);f[_]?(f[_].p(b,w),J(f[_],1)):(f[_]=ce(b),f[_].c(),J(f[_],1),f[_].m(t,null))}for(lt(),_=l.length;_<f.length;_+=1)p(_);ct()}if(w&2){a=rt(m[3]);let _;for(_=0;_<a.length;_+=1){const b=ae(m,a,_);s[_]?(s[_].p(b,w),J(s[_],1)):(s[_]=se(b),s[_].c(),J(s[_],1),s[_].m(o,n))}for(lt(),_=a.length;_<s.length;_+=1)d(_);ct()}},i(m){if(!c){for(let w=0;w<l.length;w+=1)J(f[w]);for(let w=0;w<a.length;w+=1)J(s[w]);c=!0}},o(m){f=f.filter(Boolean);for(let w=0;w<f.length;w+=1)z(f[w]);s=s.filter(Boolean);for(let w=0;w<s.length;w+=1)z(s[w]);c=!1},d(m){m&&(H(t),H(e),H(o)),$t(f,m),$t(s,m)}}}function bn(r){let t,e,o,n=rt(ue(r[1])),c=[];for(let f=0;f<n.length;f+=1)c[f]=de(fe(r,n,f));const l=f=>z(c[f],1,1,()=>{c[f]=null});return{c(){t=R("div"),e=R("section");for(let f=0;f<c.length;f+=1)c[f].c();B(e,"class","print")},m(f,p){M(f,t,p),L(t,e);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(e,null);r[2](e),o=!0},p(f,[p]){if(p&2){n=rt(ue(f[1]));let a;for(a=0;a<n.length;a+=1){const s=fe(f,n,a);c[a]?(c[a].p(s,p),J(c[a],1)):(c[a]=de(s),c[a].c(),J(c[a],1),c[a].m(e,null))}for(lt(),a=n.length;a<c.length;a+=1)l(a);ct()}},i(f){if(!o){for(let p=0;p<n.length;p+=1)J(c[p]);o=!0}},o(f){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)z(c[p]);o=!1},d(f){f&&H(t),$t(c,f),r[2](null)}}}function gn(r,t,e){let o;It(r,vt,l=>e(1,o=l));let n;function c(l){Ot[l?"unshift":"push"](()=>{n=l,e(0,n)})}return[n,o,c]}class mn extends ut{constructor(t){super(),ot(this,t,gn,bn,it,{})}}function kn(r){let t,e,o,n,c;const l=r[2].default,f=xe(l,r,r[1],null);return{c(){t=R("button"),f&&f.c(),B(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(p,a){M(p,t,a),f&&f.m(t,null),o=!0,n||(c=yt(t,"click",r[3]),n=!0)},p(p,[a]){f&&f.p&&(!o||a&2)&&Ce(f,l,p,p[1],o?Ee(l,p[1],a,null):Fe(p[1]),null),(!o||a&1&&e!==(e="button "+p[0]+" svelte-zqnkwt"))&&B(t,"class",e)},i(p){o||(J(f,p),o=!0)},o(p){z(f,p),o=!1},d(p){p&&H(t),f&&f.d(p),n=!1,c()}}}function $n(r,t,e){let{$$slots:o={},$$scope:n}=t,{colour:c="green"}=t;function l(f){Pe.call(this,r,f)}return r.$$set=f=>{"colour"in f&&e(0,c=f.colour),"$$scope"in f&&e(1,n=f.$$scope)},[c,n,o,l]}class ft extends ut{constructor(t){super(),ot(this,t,$n,kn,it,{colour:0})}}function wn(r){let t,e,o;return e=new Ft({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),e.$on("type",r[2]),{c(){t=R("div"),Y(e.$$.fragment),B(t,"class","select-wrapper svelte-1wgwrdq"),nt(t,"background-color",r[1])},m(n,c){M(n,t,c),Q(e,t,null),o=!0},p(n,[c]){const l={};c&1&&(l.cardType=n[0]),e.$set(l),(!o||c&2)&&nt(t,"background-color",n[1])},i(n){o||(J(e.$$.fragment,n),o=!0)},o(n){z(e.$$.fragment,n),o=!1},d(n){n&&H(t),X(e)}}}function Tn(r,t,e){let o,{currentFilter:n="None"}=t;const c=({detail:l})=>e(0,n=l);return r.$$set=l=>{"currentFilter"in l&&e(0,n=l.currentFilter)},r.$$.update=()=>{r.$$.dirty&1&&e(1,o=wt(n))},[n,o,c]}class Se extends ut{constructor(t){super(),ot(this,t,Tn,wn,it,{currentFilter:0})}}function he(r,t,e){const o=r.slice();return o[7]=t[e],o}function jn(r){let t;return{c(){t=Z("home")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function pe(r){let t,e=r[7].cardType.passive?"passive":"",o,n,c=r[7].cardType.type+"",l,f,p,a,s;return p=new Wt({props:{card:r[7],editable:!1}}),{c(){t=R("div"),o=Z(e),n=K(),l=Z(c),f=K(),Y(p.$$.fragment),a=K()},m(d,m){M(d,t,m),L(t,o),L(t,n),L(t,l),L(t,f),Q(p,t,null),L(t,a),s=!0},p(d,m){(!s||m&4)&&e!==(e=d[7].cardType.passive?"passive":"")&&_t(o,e),(!s||m&4)&&c!==(c=d[7].cardType.type+"")&&_t(l,c);const w={};m&4&&(w.card=d[7]),p.$set(w)},i(d){s||(J(p.$$.fragment,d),s=!0)},o(d){z(p.$$.fragment,d),s=!1},d(d){d&&H(t),X(p)}}}function Sn(r){let t,e,o,n,c,l,f,p,a=r[2].length+"",s,d,m,w,_=r[1]?"stop sorting passive":"sort passive",b,k,A,j,u,y,T,N;e=new ft({props:{$$slots:{default:[jn]},$$scope:{ctx:r}}}),e.$on("click",r[4]);function $(h){r[5](h)}let D={};r[0]!==void 0&&(D.currentFilter=r[0]),n=new Se({props:D}),Ot.push(()=>we(n,"currentFilter",$));let G=rt(r[2]),E=[];for(let h=0;h<G.length;h+=1)E[h]=pe(he(r,G,h));const F=h=>z(E[h],1,1,()=>{E[h]=null});return{c(){t=R("header"),Y(e.$$.fragment),o=K(),Y(n.$$.fragment),l=K(),f=Z(r[0]),p=Z(": "),s=Z(a),d=K(),m=R("section"),w=R("label"),b=Z(_),k=K(),A=R("input"),j=K(),u=R("section");for(let h=0;h<E.length;h+=1)E[h].c();B(t,"class","svelte-hn041v"),B(w,"for","passive"),B(A,"type","checkbox"),B(A,"name","passive"),B(A,"id","passive"),B(A,"class","svelte-hn041v"),B(u,"class","container svelte-hn041v")},m(h,i){M(h,t,i),Q(e,t,null),L(t,o),Q(n,t,null),M(h,l,i),M(h,f,i),M(h,p,i),M(h,s,i),M(h,d,i),M(h,m,i),L(m,w),L(w,b),L(m,k),L(m,A),A.checked=r[1],M(h,j,i),M(h,u,i);for(let g=0;g<E.length;g+=1)E[g]&&E[g].m(u,null);y=!0,T||(N=yt(A,"change",r[6]),T=!0)},p(h,[i]){const g={};i&1024&&(g.$$scope={dirty:i,ctx:h}),e.$set(g);const v={};if(!c&&i&1&&(c=!0,v.currentFilter=h[0],ke(()=>c=!1)),n.$set(v),(!y||i&1)&&_t(f,h[0]),(!y||i&4)&&a!==(a=h[2].length+"")&&_t(s,a),(!y||i&2)&&_!==(_=h[1]?"stop sorting passive":"sort passive")&&_t(b,_),i&2&&(A.checked=h[1]),i&4){G=rt(h[2]);let S;for(S=0;S<G.length;S+=1){const x=he(h,G,S);E[S]?(E[S].p(x,i),J(E[S],1)):(E[S]=pe(x),E[S].c(),J(E[S],1),E[S].m(u,null))}for(lt(),S=G.length;S<E.length;S+=1)F(S);ct()}},i(h){if(!y){J(e.$$.fragment,h),J(n.$$.fragment,h);for(let i=0;i<G.length;i+=1)J(E[i]);y=!0}},o(h){z(e.$$.fragment,h),z(n.$$.fragment,h),E=E.filter(Boolean);for(let i=0;i<E.length;i+=1)z(E[i]);y=!1},d(h){h&&(H(t),H(l),H(f),H(p),H(s),H(d),H(m),H(j),H(u)),X(e),X(n),$t(E,h),T=!1,N()}}}function On(r,t,e){let o,n;It(r,vt,s=>e(3,n=s));let c="None",l=!1;const f=()=>{Ct.set("")};function p(s){c=s,e(0,c)}function a(){l=this.checked,e(1,l)}return r.$$.update=()=>{r.$$.dirty&11&&e(2,o=n.map(s=>{const d=[s.cardHalf1];return s.cardHalf2&&d.push(s.cardHalf2),d}).flat().filter(s=>{if(c==="None"||s.cardType.type===c)return s}).sort((s,d)=>l?-Number(s.cardType.passive)-Number(d.cardType.passive):0))},[c,l,o,n,f,p,a]}class Dn extends ut{constructor(t){super(),ot(this,t,On,Sn,it,{})}}function _e(r,t,e){const o=r.slice();return o[11]=t[e],o}function An(r){let t;return{c(){t=Z("add two sided")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function Nn(r){let t;return{c(){t=Z("add one sided")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function Gn(r){let t;return{c(){t=Z("save")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function xn(r){let t;return{c(){t=Z("import JSON")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function En(r){let t;return{c(){t=Z("export JSON")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function Cn(r){let t;return{c(){t=Z("Download")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function Fn(r){let t;return{c(){t=Z("view halves")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function In(r){let t;return{c(){t=Z("remove")},m(e,o){M(e,t,o)},d(e){e&&H(t)}}}function ve(r){let t,e,o,n,c,l;e=new Ut({props:{card:r[11],readable:!0}});function f(){return r[9](r[11])}return n=new ft({props:{colour:"red",$$slots:{default:[In]},$$scope:{ctx:r}}}),n.$on("click",f),{c(){t=R("div"),Y(e.$$.fragment),o=K(),Y(n.$$.fragment),c=K(),B(t,"class","wrapper svelte-z9e1s4")},m(p,a){M(p,t,a),Q(e,t,null),L(t,o),Q(n,t,null),L(t,c),l=!0},p(p,a){r=p;const s={};a&4&&(s.card=r[11]),e.$set(s);const d={};a&16384&&(d.$$scope={dirty:a,ctx:r}),n.$set(d)},i(p){l||(J(e.$$.fragment,p),J(n.$$.fragment,p),l=!0)},o(p){z(e.$$.fragment,p),z(n.$$.fragment,p),l=!1},d(p){p&&H(t),X(e),X(n)}}}function Hn(r){let t,e,o,n,c,l,f,p,a,s,d,m,w,_,b,k,A,j,u,y,T=r[2].length+"",N,$,D,G;function E(v){r[3](v)}let F={};r[0]!==void 0&&(F.currentFilter=r[0]),e=new Se({props:F}),Ot.push(()=>we(e,"currentFilter",E)),c=new ft({props:{colour:"blue",$$slots:{default:[An]},$$scope:{ctx:r}}}),c.$on("click",r[4]),f=new ft({props:{colour:"blue",$$slots:{default:[Nn]},$$scope:{ctx:r}}}),f.$on("click",r[5]),a=new ft({props:{$$slots:{default:[Gn]},$$scope:{ctx:r}}}),a.$on("click",r[6]),d=new ft({props:{$$slots:{default:[xn]},$$scope:{ctx:r}}}),d.$on("click",yn),w=new ft({props:{$$slots:{default:[En]},$$scope:{ctx:r}}}),w.$on("click",vn),b=new ft({props:{$$slots:{default:[Cn]},$$scope:{ctx:r}}}),b.$on("click",r[7]),A=new ft({props:{$$slots:{default:[Fn]},$$scope:{ctx:r}}}),A.$on("click",r[8]);let h=rt(r[2]),i=[];for(let v=0;v<h.length;v+=1)i[v]=ve(_e(r,h,v));const g=v=>z(i[v],1,1,()=>{i[v]=null});return{c(){t=R("section"),Y(e.$$.fragment),n=K(),Y(c.$$.fragment),l=K(),Y(f.$$.fragment),p=K(),Y(a.$$.fragment),s=K(),Y(d.$$.fragment),m=K(),Y(w.$$.fragment),_=K(),Y(b.$$.fragment),k=K(),Y(A.$$.fragment),j=K(),u=R("h1"),y=Z("cards "),N=Z(T),$=K(),D=R("section");for(let v=0;v<i.length;v+=1)i[v].c();B(t,"class","button-container svelte-z9e1s4"),B(D,"class","container svelte-z9e1s4")},m(v,S){M(v,t,S),Q(e,t,null),L(t,n),Q(c,t,null),L(t,l),Q(f,t,null),L(t,p),Q(a,t,null),L(t,s),Q(d,t,null),L(t,m),Q(w,t,null),L(t,_),Q(b,t,null),L(t,k),Q(A,t,null),M(v,j,S),M(v,u,S),L(u,y),L(u,N),M(v,$,S),M(v,D,S);for(let x=0;x<i.length;x+=1)i[x]&&i[x].m(D,null);G=!0},p(v,[S]){const x={};!o&&S&1&&(o=!0,x.currentFilter=v[0],ke(()=>o=!1)),e.$set(x);const O={};S&16384&&(O.$$scope={dirty:S,ctx:v}),c.$set(O);const C={};S&16384&&(C.$$scope={dirty:S,ctx:v}),f.$set(C);const I={};S&16384&&(I.$$scope={dirty:S,ctx:v}),a.$set(I);const P={};S&16384&&(P.$$scope={dirty:S,ctx:v}),d.$set(P);const q={};S&16384&&(q.$$scope={dirty:S,ctx:v}),w.$set(q);const W={};S&16384&&(W.$$scope={dirty:S,ctx:v}),b.$set(W);const V={};if(S&16384&&(V.$$scope={dirty:S,ctx:v}),A.$set(V),(!G||S&4)&&T!==(T=v[2].length+"")&&_t(N,T),S&6){h=rt(v[2]);let U;for(U=0;U<h.length;U+=1){const tt=_e(v,h,U);i[U]?(i[U].p(tt,S),J(i[U],1)):(i[U]=ve(tt),i[U].c(),J(i[U],1),i[U].m(D,null))}for(lt(),U=h.length;U<i.length;U+=1)g(U);ct()}},i(v){if(!G){J(e.$$.fragment,v),J(c.$$.fragment,v),J(f.$$.fragment,v),J(a.$$.fragment,v),J(d.$$.fragment,v),J(w.$$.fragment,v),J(b.$$.fragment,v),J(A.$$.fragment,v);for(let S=0;S<h.length;S+=1)J(i[S]);G=!0}},o(v){z(e.$$.fragment,v),z(c.$$.fragment,v),z(f.$$.fragment,v),z(a.$$.fragment,v),z(d.$$.fragment,v),z(w.$$.fragment,v),z(b.$$.fragment,v),z(A.$$.fragment,v),i=i.filter(Boolean);for(let S=0;S<i.length;S+=1)z(i[S]);G=!1},d(v){v&&(H(t),H(j),H(u),H($),H(D)),X(e),X(c),X(f),X(a),X(d),X(w),X(b),X(A),$t(i,v)}}}function Mn(r,t,e){let o,n;It(r,vt,_=>e(1,n=_));let c="None";const l=(_,b)=>b==="None"?_:_.filter(k=>k.cardHalf1.cardType.type===b||k.cardHalf2&&k.cardHalf2.cardType.type===b);function f(_){c=_,e(0,c)}const p=()=>{vt.set([...n,Zt(2)])},a=()=>{vt.set([...n,Zt(1)]),console.log(n.length)},s=()=>{Rt(n)},d=()=>{Ct.set("download")},m=()=>{Ct.set("half")},w=_=>{Rt(n.filter(b=>b.id!==_.id))};return r.$$.update=()=>{r.$$.dirty&3&&e(2,o=l(n,c))},[c,n,o,f,p,a,s,d,m,w]}class Bn extends ut{constructor(t){super(),ot(this,t,Mn,Hn,it,{})}}function Pn(r){let t,e,o;var n=r[0];function c(l,f){return{}}return n&&(t=Yt(n,c())),{c(){t&&Y(t.$$.fragment),e=Ht()},m(l,f){t&&Q(t,l,f),M(l,e,f),o=!0},p(l,[f]){if(f&1&&n!==(n=l[0])){if(t){lt();const p=t;z(p.$$.fragment,1,0,()=>{X(p,1)}),ct()}n?(t=Yt(n,c()),Y(t.$$.fragment),J(t.$$.fragment,1),Q(t,e.parentNode,e)):t=null}},i(l){o||(t&&J(t.$$.fragment,l),o=!0)},o(l){t&&z(t.$$.fragment,l),o=!1},d(l){l&&H(e),t&&X(t,l)}}}function Jn(r,t,e){let o,n;It(r,Ct,l=>e(1,n=l));const c={"":Bn,download:mn,half:Dn};return r.$$.update=()=>{r.$$.dirty&2&&e(0,o=c[n])},[o,n]}class qn extends ut{constructor(t){super(),ot(this,t,Jn,Pn,it,{})}}new qn({target:document.getElementById("app")});
