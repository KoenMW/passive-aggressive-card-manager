var be=Object.defineProperty;var ge=(r,t,e)=>t in r?be(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Ct=(r,t,e)=>ge(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function Z(){}function ke(r,t){for(const e in t)r[e]=t[e];return r}function se(r){return r()}function zt(){return Object.create(null)}function Ot(r){r.forEach(se)}function he(r){return typeof r=="function"}function ht(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function it(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function me(r){return Object.keys(r).length===0}function de(r,...t){if(r==null){for(const i of t)i(void 0);return Z}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function $e(r){let t;return de(r,e=>t=e)(),t}function we(r,t,e){r.$$.on_destroy.push(de(t,e))}function Te(r,t,e,i){if(r){const n=pe(r,t,e,i);return r[0](n)}}function pe(r,t,e,i){return r[1]&&i?ke(e.ctx.slice(),r[1](i(t))):e.ctx}function je(r,t,e,i){if(r[2]&&i){const n=r[2](i(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const c=[],l=Math.max(t.dirty.length,n.length);for(let a=0;a<l;a+=1)c[a]=t.dirty[a]|n[a];return c}return t.dirty|n}return t.dirty}function Se(r,t,e,i,n,c){if(n){const l=pe(t,e,i,c);r.p(l,n)}}function Oe(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function Ut(r){return r??""}function Q(r,t){r.appendChild(t)}function J(r,t,e){r.insertBefore(t,e||null)}function P(r){r.parentNode&&r.parentNode.removeChild(r)}function wt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function z(r){return document.createElement(r)}function tt(r){return document.createTextNode(r)}function L(){return tt(" ")}function Et(){return tt("")}function vt(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function H(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function De(r){return Array.from(r.childNodes)}function Ae(r,t){t=""+t,r.data!==t&&(r.data=t)}function nt(r,t,e,i){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function xe(r,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:i})}let Tt;function mt(r){Tt=r}function _e(){if(!Tt)throw new Error("Function called outside component initialization");return Tt}function Ge(r){_e().$$.on_mount.push(r)}function Ne(){const r=_e();return(t,e,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[t];if(n){const c=xe(t,e,{cancelable:i});return n.slice().forEach(l=>{l.call(r,c)}),!c.defaultPrevented}return!0}}function Ee(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const _t=[],Ht=[];let yt=[];const Lt=[],Ie=Promise.resolve();let Pt=!1;function Ce(){Pt||(Pt=!0,Ie.then(ye))}function jt(r){yt.push(r)}const Mt=new Set;let dt=0;function ye(){if(dt!==0)return;const r=Tt;do{try{for(;dt<_t.length;){const t=_t[dt];dt++,mt(t),Me(t.$$)}}catch(t){throw _t.length=0,dt=0,t}for(mt(null),_t.length=0,dt=0;Ht.length;)Ht.pop()();for(let t=0;t<yt.length;t+=1){const e=yt[t];Mt.has(e)||(Mt.add(e),e())}yt.length=0}while(_t.length);for(;Lt.length;)Lt.pop()();Pt=!1,Mt.clear(),mt(r)}function Me(r){if(r.fragment!==null){r.update(),Ot(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(jt)}}function Be(r){const t=[],e=[];yt.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),yt=t}const Gt=new Set;let lt;function ct(){lt={r:0,c:[],p:lt}}function st(){lt.r||Ot(lt.c),lt=lt.p}function q(r,t){r&&r.i&&(Gt.delete(r),r.i(t))}function W(r,t,e,i){if(r&&r.o){if(Gt.has(r))return;Gt.add(r),lt.c.push(()=>{Gt.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}function rt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function X(r){r&&r.c()}function K(r,t,e){const{fragment:i,after_update:n}=r.$$;i&&i.m(t,e),jt(()=>{const c=r.$$.on_mount.map(se).filter(he);r.$$.on_destroy?r.$$.on_destroy.push(...c):Ot(c),r.$$.on_mount=[]}),n.forEach(jt)}function V(r,t){const e=r.$$;e.fragment!==null&&(Be(e.after_update),Ot(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function He(r,t){r.$$.dirty[0]===-1&&(_t.push(r),Ce(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function bt(r,t,e,i,n,c,l=null,a=[-1]){const d=Tt;mt(r);const u=r.$$={fragment:null,ctx:[],props:c,update:Z,not_equal:n,bound:zt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:zt(),dirty:a,skip_bound:!1,root:t.target||d.$$.root};l&&l(u.root);let h=!1;if(u.ctx=e?e(r,t.props||{},(s,y,...T)=>{const _=T.length?T[0]:y;return u.ctx&&n(u.ctx[s],u.ctx[s]=_)&&(!u.skip_bound&&u.bound[s]&&u.bound[s](_),h&&He(r,s)),y}):[],u.update(),h=!0,Ot(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const s=De(t.target);u.fragment&&u.fragment.l(s),s.forEach(P)}else u.fragment&&u.fragment.c();t.intro&&q(r.$$.fragment),K(r,t.target,t.anchor),ye()}mt(d)}class gt{constructor(){Ct(this,"$$");Ct(this,"$$set")}$destroy(){V(this,1),this.$destroy=Z}$on(t,e){if(!he(e))return Z;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!me(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pe);function Je(r){let t,e,i,n,c;const l=r[2].default,a=Te(l,r,r[1],null);return{c(){t=z("button"),a&&a.c(),H(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(d,u){J(d,t,u),a&&a.m(t,null),i=!0,n||(c=vt(t,"click",r[3]),n=!0)},p(d,[u]){a&&a.p&&(!i||u&2)&&Se(a,l,d,d[1],i?je(l,d[1],u,null):Oe(d[1]),null),(!i||u&1&&e!==(e="button "+d[0]+" svelte-zqnkwt"))&&H(t,"class",e)},i(d){i||(q(a,d),i=!0)},o(d){W(a,d),i=!1},d(d){d&&P(t),a&&a.d(d),n=!1,c()}}}function Fe(r,t,e){let{$$slots:i={},$$scope:n}=t,{colour:c="green"}=t;function l(a){Ee.call(this,r,a)}return r.$$set=a=>{"colour"in a&&e(0,c=a.colour),"$$scope"in a&&e(1,n=a.$$scope)},[c,n,i,l]}class at extends gt{constructor(t){super(),bt(this,t,Fe,Je,ht,{colour:0})}}const St=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},ot=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,Kt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function qe(r){let t,e,i;return{c(){t=z("div"),H(t,"contenteditable","true"),H(t,"class","cardText svelte-1jzdt29"),r[0].text===void 0&&jt(()=>r[4].call(t))},m(n,c){J(n,t,c),r[0].text!==void 0&&(t.innerText=r[0].text),e||(i=vt(t,"input",r[4]),e=!0)},p(n,c){c&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&P(t),e=!1,i()}}}function Re(r){let t,e,i,n,c=r[0].cardType.passive&&Vt();return{c(){t=z("img"),i=L(),c&&c.c(),n=Et(),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-1jzdt29")},m(l,a){J(l,t,a),J(l,i,a),c&&c.m(l,a),J(l,n,a)},p(l,a){a&1&&!it(t.src,e=ot(l[0].cardType.type))&&H(t,"src",e),l[0].cardType.passive?c||(c=Vt(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(l){l&&(P(t),P(i),P(n)),c&&c.d(l)}}}function Vt(r){let t;return{c(){t=z("p"),t.textContent="Passive",H(t,"class","mirrored svelte-1jzdt29")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function We(r){let t,e;function i(l,a){return l[2]?Re:qe}let n=i(r),c=n(r);return{c(){t=z("div"),e=z("div"),c.c(),H(e,"class","card svelte-1jzdt29"),nt(e,"--colour",r[3]),H(t,"class","wrapper svelte-1jzdt29"),nt(t,"--rotation",r[1]+"deg")},m(l,a){J(l,t,a),Q(t,e),c.m(e,null)},p(l,[a]){n===(n=i(l))&&c?c.p(l,a):(c.d(1),c=n(l),c&&(c.c(),c.m(e,null))),a&8&&nt(e,"--colour",l[3]),a&2&&nt(t,"--rotation",l[1]+"deg")},i:Z,o:Z,d(l){l&&P(t),c.d()}}}function ze(r,t,e){let i,{card:n}=t,{rotation:c=0}=t,{back:l=!1}=t;function a(){n.text=this.innerText,e(0,n)}return r.$$set=d=>{"card"in d&&e(0,n=d.card),"rotation"in d&&e(1,c=d.rotation),"back"in d&&e(2,l=d.back)},r.$$.update=()=>{r.$$.dirty&1&&e(3,i=St(n.cardType.type))},[n,c,l,i,a]}class Qt extends gt{constructor(t){super(),bt(this,t,ze,We,ht,{card:0,rotation:1,back:2})}}function Xt(r,t,e){const i=r.slice();return i[12]=t[e],i}function Yt(r){let t,e,i,n,c,l,a,d,u=r[5]&&Zt(r),h=!r[3]&&ee(r);return{c(){t=z("div"),e=z("img"),n=L(),u&&u.c(),c=L(),h&&h.c(),l=Et(),it(e.src,i=ot(r[0]))||H(e,"src",i),H(e,"alt","My Icon"),H(e,"class","cardIcon svelte-lm5vvd"),H(t,"class","select svelte-lm5vvd")},m(s,y){J(s,t,y),Q(t,e),Q(t,n),u&&u.m(t,null),J(s,c,y),h&&h.m(s,y),J(s,l,y),a||(d=vt(e,"click",r[8]),a=!0)},p(s,y){y&1&&!it(e.src,i=ot(s[0]))&&H(e,"src",i),s[5]?u?u.p(s,y):(u=Zt(s),u.c(),u.m(t,null)):u&&(u.d(1),u=null),s[3]?h&&(h.d(1),h=null):h?h.p(s,y):(h=ee(s),h.c(),h.m(l.parentNode,l))},d(s){s&&(P(t),P(c),P(l)),u&&u.d(),h&&h.d(s),a=!1,d()}}}function Zt(r){let t,e=rt(r[4]),i=[];for(let n=0;n<e.length;n+=1)i[n]=te(Xt(r,e,n));return{c(){t=z("div");for(let n=0;n<i.length;n+=1)i[n].c();H(t,"class","options svelte-lm5vvd"),nt(t,"--colour",r[6])},m(n,c){J(n,t,c);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(t,null)},p(n,c){if(c&49){e=rt(n[4]);let l;for(l=0;l<e.length;l+=1){const a=Xt(n,e,l);i[l]?i[l].p(a,c):(i[l]=te(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}c&64&&nt(t,"--colour",n[6])},d(n){n&&P(t),wt(i,n)}}}function te(r){let t,e,i,n,c;function l(){return r[9](r[12])}return{c(){t=z("img"),it(t.src,e=ot(r[12]))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class",i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(a,d){J(a,t,d),n||(c=vt(t,"click",l),n=!0)},p(a,d){r=a,d&16&&!it(t.src,e=ot(r[12]))&&H(t,"src",e),d&17&&i!==(i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&H(t,"class",i)},d(a){a&&P(t),n=!1,c()}}}function ee(r){let t,e,i,n,c,l,a;return{c(){t=z("input"),e=L(),i=z("label"),n=tt("Passive"),H(t,"type","checkbox"),H(t,"id",r[7]),H(t,"class","hidden"),H(i,"for",r[7]),H(i,"class",c="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(d,u){J(d,t,u),t.checked=r[1],J(d,e,u),J(d,i,u),Q(i,n),l||(a=vt(t,"change",r[10]),l=!0)},p(d,u){u&2&&(t.checked=d[1]),u&2&&c!==(c="passive no-select "+(d[1]?"":"invisible")+" svelte-lm5vvd")&&H(i,"class",c)},d(d){d&&(P(t),P(e),P(i)),l=!1,a()}}}function Ue(r){let t,e=!r[2]&&Yt(r);return{c(){e&&e.c(),t=Et()},m(i,n){e&&e.m(i,n),J(i,t,n)},p(i,[n]){i[2]?e&&(e.d(1),e=null):e?e.p(i,n):(e=Yt(i),e.c(),e.m(t.parentNode,t))},i:Z,o:Z,d(i){i&&P(t),e&&e.d(i)}}}function Le(r,t,e){let i,{cardType:n}=t,{passive:c=!1}=t,{back:l=!1}=t,{noPassive:a=!1}=t;const d=Math.random().toString(36).substring(7),u=Ne();let h=!1,{names:s=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const y=()=>e(5,h=!h),T=g=>{e(0,n=g),e(5,h=!1)};function _(){c=this.checked,e(1,c)}return r.$$set=g=>{"cardType"in g&&e(0,n=g.cardType),"passive"in g&&e(1,c=g.passive),"back"in g&&e(2,l=g.back),"noPassive"in g&&e(3,a=g.noPassive),"names"in g&&e(4,s=g.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,i=St(n)),r.$$.dirty&1&&u("type",n),r.$$.dirty&2&&u("passive",c)},[n,c,l,a,s,h,i,d,y,T,_]}class Nt extends gt{constructor(t){super(),bt(this,t,Le,Ue,ht,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function Ke(r){let t,e;return{c(){t=z("img"),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-15hk4fg")},m(i,n){J(i,t,n)},p(i,n){n&1&&!it(t.src,e=ot(i[0].cardType.type))&&H(t,"src",e)},i:Z,o:Z,d(i){i&&P(t)}}}function Ve(r){let t,e,i,n,c,l,a;return e=new Nt({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=z("p"),X(e.$$.fragment),i=L(),n=z("div"),H(t,"class","svelte-15hk4fg"),H(n,"contenteditable","true"),H(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&jt(()=>r[3].call(n))},m(d,u){J(d,t,u),K(e,t,null),J(d,i,u),J(d,n,u),r[0].text!==void 0&&(n.innerText=r[0].text),c=!0,l||(a=vt(n,"input",r[3]),l=!0)},p(d,u){const h={};u&1&&(h.cardType=d[0].cardType.type),u&1&&(h.passive=d[0].cardType.passive),e.$set(h),u&1&&d[0].text!==n.innerText&&(n.innerText=d[0].text)},i(d){c||(q(e.$$.fragment,d),c=!0)},o(d){W(e.$$.fragment,d),c=!1},d(d){d&&(P(t),P(i),P(n)),V(e),l=!1,a()}}}function Qe(r){let t,e,i,n;const c=[Ve,Ke],l=[];function a(d,u){return d[1]?1:0}return e=a(r),i=l[e]=c[e](r),{c(){t=z("div"),i.c(),H(t,"class","card svelte-15hk4fg"),nt(t,"--colour",St(r[0].cardType.type))},m(d,u){J(d,t,u),l[e].m(t,null),n=!0},p(d,[u]){let h=e;e=a(d),e===h?l[e].p(d,u):(ct(),W(l[h],1,1,()=>{l[h]=null}),st(),i=l[e],i?i.p(d,u):(i=l[e]=c[e](d),i.c()),q(i,1),i.m(t,null)),(!n||u&1)&&nt(t,"--colour",St(d[0].cardType.type))},i(d){n||(q(i),n=!0)},o(d){W(i),n=!1},d(d){d&&P(t),l[e].d()}}}function Xe(r,t,e){let{card:i}=t,{back:n=!1}=t;const c=({detail:a})=>e(0,i.cardType.type=a,i);function l(){i.text=this.innerText,e(0,i)}return r.$$set=a=>{"card"in a&&e(0,i=a.card),"back"in a&&e(1,n=a.back)},[i,n,c,l]}class Ye extends gt{constructor(t){super(),bt(this,t,Xe,Qe,ht,{card:0,back:1})}}function Ze(r){let t,e;return t=new Ye({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const c={};n&1&&(c.card=i[0].cardHalf1),n&2&&(c.back=i[1]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function tn(r){let t,e,i,n,c,l,a,d,u,h;return e=new Nt({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),e.$on("type",r[2]),e.$on("passive",r[3]),n=new Qt({props:{card:r[0].cardHalf1,back:r[1]}}),l=new Qt({props:{card:r[0].cardHalf2,rotation:180,back:r[1]}}),u=new Nt({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),u.$on("type",r[4]),u.$on("passive",r[5]),{c(){t=z("p"),X(e.$$.fragment),i=L(),X(n.$$.fragment),c=L(),X(l.$$.fragment),a=L(),d=z("p"),X(u.$$.fragment),H(t,"class","first svelte-1fv14re"),H(d,"class","second svelte-1fv14re")},m(s,y){J(s,t,y),K(e,t,null),J(s,i,y),K(n,s,y),J(s,c,y),K(l,s,y),J(s,a,y),J(s,d,y),K(u,d,null),h=!0},p(s,y){const T={};y&1&&(T.cardType=s[0].cardHalf1.cardType.type),y&1&&(T.passive=s[0].cardHalf1.cardType.passive),y&2&&(T.back=s[1]),e.$set(T);const _={};y&1&&(_.card=s[0].cardHalf1),y&2&&(_.back=s[1]),n.$set(_);const g={};y&1&&(g.card=s[0].cardHalf2),y&2&&(g.back=s[1]),l.$set(g);const $={};y&1&&($.cardType=s[0].cardHalf2.cardType.type),y&1&&($.passive=s[0].cardHalf2.cardType.passive),y&2&&($.back=s[1]),u.$set($)},i(s){h||(q(e.$$.fragment,s),q(n.$$.fragment,s),q(l.$$.fragment,s),q(u.$$.fragment,s),h=!0)},o(s){W(e.$$.fragment,s),W(n.$$.fragment,s),W(l.$$.fragment,s),W(u.$$.fragment,s),h=!1},d(s){s&&(P(t),P(i),P(c),P(a),P(d)),V(e),V(n,s),V(l,s),V(u)}}}function en(r){let t,e,i,n,c;const l=[tn,Ze],a=[];function d(u,h){return u[0].cardHalf2?0:1}return e=d(r),i=a[e]=l[e](r),{c(){t=z("div"),i.c(),H(t,"class",n=Ut(`card ${r[1]&&"back"}`)+" svelte-1fv14re")},m(u,h){J(u,t,h),a[e].m(t,null),c=!0},p(u,[h]){let s=e;e=d(u),e===s?a[e].p(u,h):(ct(),W(a[s],1,1,()=>{a[s]=null}),st(),i=a[e],i?i.p(u,h):(i=a[e]=l[e](u),i.c()),q(i,1),i.m(t,null)),(!c||h&2&&n!==(n=Ut(`card ${u[1]&&"back"}`)+" svelte-1fv14re"))&&H(t,"class",n)},i(u){c||(q(i),c=!0)},o(u){W(i),c=!1},d(u){u&&P(t),a[e].d()}}}function nn(r,t,e){let{card:i}=t,{back:n=!1}=t;const c=({detail:u})=>e(0,i.cardHalf1.cardType.type=u,i),l=({detail:u})=>e(0,i.cardHalf1.cardType.passive=u,i),a=({detail:u})=>{i.cardHalf2&&e(0,i.cardHalf2.cardType.type=u,i)},d=({detail:u})=>{i.cardHalf2&&e(0,i.cardHalf2.cardType.passive=u,i)};return r.$$set=u=>{"card"in u&&e(0,i=u.card),"back"in u&&e(1,n=u.back)},[i,n,c,l,a,d]}class Ft extends gt{constructor(t){super(),bt(this,t,nn,en,ht,{card:0,back:1})}}const ne=(r,t=9)=>{const e=[];let i=0;for(;i<r.length;)e.push(r.slice(i,t+i)),i+=t;return e};function rn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function on(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qt={exports:{}};qt.exports;(function(r){(function(){function t(i,n){return n?on(i):i.slice?t[c(i)]:function(l,a){i(l={exports:{}}),t[c(a)]=l.exports};function c(l){return l.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(i){String.random=function(c,l){var a="";for(c=c||24,l=l||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)a+=l.charAt(Math.floor(Math.random()*l.length));return a},String.match=function(c,l){var a,d;return typeof c!="string"?!1:(typeof l=="string"&&(l={"=":l}),l=l||{},a=l["="]||l["*"]||l[">"]||l["<"],c===a?!0:d!==l["="]?!1:(a=l["*"]||l[">"],c.slice(0,(a||"").length)===a?!0:d!==l["*"]?!1:d!==l[">"]&&d!==l["<"]?c>=l[">"]&&c<=l["<"]:d!==l[">"]&&c>=l[">"]||d!==l["<"]&&c<=l["<"]))},String.hash=function(c,l){if(typeof c=="string"){if(l=l||0,!c.length)return l;for(var a=0,d=c.length,u;a<d;++a)u=c.charCodeAt(a),l=(l<<5)-l+u,l|=0;return l}};var n=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,l){for(var a in c)if(n.call(c,a)&&(!l||l.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var l=[];for(var a in c)n.call(c,a)&&l.push(a);return l},function(){var c,l=setTimeout,a=0,d=0,u=typeof setImmediate!=""+c&&setImmediate||function(s,y){return typeof MessageChannel==""+c?l:((s=new MessageChannel).port1.onmessage=function(T){T.data==""&&y()},function(T){y=T,s.port2.postMessage("")})}(),h=l.check=l.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};l.hold=l.hold||9,l.poll=l.poll||function(s){if(l.hold>=h.now()-a&&d++<3333){s();return}u(function(){a=h.now(),s()},d=0)}}(),function(){var c=setTimeout,l=c.turn=c.turn||function(y){a.push(y)==1&&d(s)},a=l.s=[],d=c.poll,u=0,h,s=function(){(h=a[u++])&&h(),(u==a.length||u==99)&&(a=l.s=a.slice(u),u=0),a.length&&d(s)}}(),function(){var c,l=setTimeout,a=l.turn;(l.each=l.each||function(d,u,h,s){s=s||9,function y(T,_,g){if(_=(T=(d||[]).splice(0,s)).length){for(var $=0;$<_&&c===(g=u(T[$]));$++);if(c===g){a(y);return}}h&&h(g)}()})()}()})(t,"./shim"),t(function(i){i.exports=function n(h,l,a){if(!h)return{to:n};var d,u=typeof l=="function",h=(this.tag||(this.tag={}))[h]||u&&(this.tag[h]={tag:h,to:n._={next:function(y){var T;(T=this.to)&&T.next(y)}}});if(u){var s={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:l,the:h,on:this,as:a};return(s.back=h.last||h).to=s,h.last=s}return(h=h.to)&&d!==l&&h.next(l),h}})(t,"./onto"),t(function(i){i.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(i){t("./shim");function n(){var h=+new Date;return d<h?(l=0,d=h+n.drift):d=h+(l+=1)/a+n.drift}n.drift=0;var c=-1/0,l=0,a=999,d=c,u;n.is=function(h,s,y){var T=s&&h&&h._&&h._[">"]||y;if(T)return typeof(T=T[s])=="number"?T:c},n.ify=function(h,s,y,T,_){(h=h||{})._=h._||{},_&&(h._["#"]=_);var g=h._[">"]||(h._[">"]={});return u!==s&&s!=="_"&&(typeof y=="number"&&(g[s]=y),u!==T&&(h[s]=T)),h},i.exports=n})(t,"./state"),t(function(i){t("./shim");function n(c){var l={s:{}},a=l.s;c=c||{max:999,age:1e3*9},l.check=function(u){return a[u]?d(u):!1};var d=l.track=function(u){var h=a[u]||(a[u]={});return h.was=l.now=+new Date,l.to||(l.to=setTimeout(l.drop,c.age+9)),d.ed&&d.ed(u),h};return l.drop=function(u){l.to=null,l.now=+new Date;var h=Object.keys(a);console.STAT&&console.STAT(l.now,+new Date-l.now,"dup drop keys"),setTimeout.each(h,function(s){var y=a[s];y&&(u||c.age)>l.now-y.was||delete a[s]},0,99)},l}i.exports=n})(t,"./dup"),t(function(i){t("./onto"),i.exports=function(l,a){if(this.on){var d=(this.opt||{}).lack||9e3;if(typeof l!="function"){if(!l)return;var h=l["#"]||l,u=(this.tag||"")[h];return u?(a&&(u=this.on(h,a),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},d)),!0):void 0}var h=a&&a["#"]||n(9);if(!l)return h;var s=this.on(h,l,a);return s.err=s.err||setTimeout(function(){s.off(),s.next({err:"Error: No ACK yet.",lack:!0})},d),h}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(i){function n(_){return _ instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:_}):new n(_)}n.is=function(_){return _ instanceof n||_&&_._&&_===_._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||n.on,o.ask=o.ask||n.ask,o.dup=o.dup||n.dup();var b=o.$.opt(o.opt);return o.once||(o.on("in",_,o),o.on("out",_,o),o.on("put",A,o),n.on("create",o),o.on("create",o)),o.once=1,b};function _(o){if(o){if(o.out===_){this.to.next(o);return}var b=this,m=b.as,I=m.at||m,N=I.$,S=I.dup,E,C=o.DBG;if((E=o["#"])||(E=o["#"]=l(9)),!S.check(E)){if(S.track(E),E=o._,o._=typeof E=="function"?E:function(){},o.$&&o.$===(o.$._||"").$||(o.$=N),o["@"]&&!o.put&&f(o),!I.ask(o["@"],o))if(C&&(C.u=+new Date),o.put){g(o);return}else o.get&&n.on.get(o,N);C&&(C.uc=+new Date),b.to.next(o),C&&(C.ua=+new Date),!(o.nts||o.NTS)&&(o.out=_,I.on("out",o),C&&(C.ue=+new Date))}}}function g(o){if(o){var b=o._||"",m=b.root=((b.$=o.$||"")._||"").root;if(o["@"]&&b.faith&&!b.miss){o.out=_,m.on("out",o);return}b.latch=m.hatch,b.match=m.hatch=[];var I=o.put,N=b.DBG=o.DBG,S=+new Date;if(D=D||S,!(I["#"]&&I["."])){N&&(N.p=S),b["#"]=o["#"],b.msg=o,b.all=0,b.stun=1;var E=Object.keys(I);console.STAT&&console.STAT(S,((N||b).pk=+new Date)-S,"put sort");var C=0,B,F,R,U,Y,et,kt;(function ut(Dt){if(B!=C){if(B=C,!(R=E[C])){console.STAT&&console.STAT(S,((N||b).pd=+new Date)-S,"put"),j(b);return}(U=I[R])?(kt=U._)?R!==kt["#"]?et=w+G(R)+"soul not same.":(Y=kt[">"])||(et=w+G(R)+"no state."):et=w+G(R)+"no meta.":et=w+G(R)+"no node.",F=Object.keys(U||{})}if(et){o.err=b.err=et,j(b);return}var Rt=0,ft;for(Dt=Dt||0;Dt++<9&&(ft=F[Rt++]);)if(ft!=="_"){var At=U[ft],Wt=Y[ft];if(s===Wt){et=w+G(ft)+"on"+G(R)+"no state.";break}if(!d(At)){et=w+G(ft)+"on"+G(R)+"bad "+typeof At+G(At);break}$(At,ft,R,Wt,o),++M}if((F=F.slice(Rt)).length){a(ut);return}++C,F=null,ut(Dt)})()}}}n.on.put=g;function $(o,b,m,I,N){var S=N._||"",E=S.root,C=E.graph,B,F=C[m]||y,R=u(F,b,1),U=F[b],Y=S.DBG;(B=console.STAT)&&(!C[m]||!U)&&(B.has=(B.has||0)+1);var et=O();if(I>et){setTimeout(function(){$(o,b,m,I,N)},(B=I-et)>x?x:B),console.STAT&&console.STAT((Y||S).Hf=+new Date,B,"future");return}if(!(I<R)&&!(!S.faith&&I===R&&(o===U||k(o)<=k(U))&&!S.miss)){S.stun++;var kt=N["#"]+S.all++,ut={toString:function(){return kt},_:S};ut.toJSON=ut.toString,E.dup.track(ut)["#"]=N["#"],Y&&(Y.ph=Y.ph||+new Date),E.on("put",{"#":ut,"@":N["@"],put:{"#":m,".":b,":":o,">":I},ok:N.ok,_:S})}}function A(o){var b;(b=(o._||"").DBG)&&(b.pa=+new Date,b.pm=b.pm||+new Date);var m=this,I=m.as,N=I.graph,S=o._,E=o.put,C=E["#"],B=E["."],F=E[":"],R=E[">"];o["#"];var U;(U=S.msg)&&(U=U.put)&&(U=U[C])&&h(U,B,R,F,C),N[C]=h(N[C],B,R,F,C),(U=(I.next||"")[C])&&U.on("in",o),j(S),m.to.next(o)}function j(o,b){var m;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(m=o.root))){var I=o.match;I.end=1,I===m.hatch&&(!(I=o.latch)||I.end?delete m.hatch:m.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(N){N&&N()}),!(!(b=o.msg)||o.err||b.err)&&(b.out=_,o.root.on("out",b),p())}}function f(o){var b=o["@"]||"",m;if(!(m=b._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(b)))return;o["@"]=I["#"]||o["@"];return}m.acks=(m.acks||0)+1,(m.err=o.err)&&(o["@"]=m["#"],j(m)),m.ok=o.ok||m.ok,!m.stop&&!m.crack&&(m.crack=m.match&&m.match.push(function(){v(m)})),v(m)}function v(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?s:o.ok||{"":1}})}var w="Error: Invalid graph!",G=function(o){return" '"+(""+o).slice(0,9)+"...' "},k=JSON.stringify,x=2147483647,O=n.state,M=0,D,p=function(){M>999&&M/-(D-(D=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),p=function(){M=0})}}(),function(){n.on.get=function(g,$){var A=$._,j=g.get,f=j["#"],v=A.graph[f],w=j["."],G=A.next||(A.next={}),k=G[f],x=g._||{},O=x.DBG=g.DBG;if(O&&(O.g=+new Date),!v)return A.on("get",g);if(w){if((typeof w!="string"||s===v[w])&&!((k||"").next||"")[w]){A.on("get",g);return}v=h({},w,u(v,w),v[w],f)}v&&_(g,v),A.on("get",g)};function _(g,$){var A=+new Date,j=g._||{},f=j.DBG=g.DBG,v=g["#"],w=l(9),G=Object.keys($||"").sort(),k=(($||"")._||"")["#"];G.length;var x=g.$._.root,O=$===x.graph[k];console.STAT&&console.STAT(A,((f||j).gk=+new Date)-A,"got keys"),$&&function M(){A=+new Date;for(var D=0,p,o={},b;D<9&&(p=G[D++]);)h(o,p,u($,p),$[p],k);G=G.slice(D),(b={})[k]=o,o=b;var m;O&&(m=function(){},m.ram=m.faith=!0),b=G.length,console.STAT&&console.STAT(A,-(A-(A=+new Date)),"got copied some"),f&&(f.ga=+new Date),x.on("in",{"@":v,"#":w,put:o,"%":b?w=l(9):s,$:x.$,_:m,DBG:f,FOO:1}),console.STAT&&console.STAT(A,+new Date-A,"got in"),b&&setTimeout.turn(M)}(),$||x.on("in",{"@":g["#"]})}n.on.get.ack=_}(),function(){n.chain.opt=function(_){_=_||{};var g=this,$=g._,A=_.peers||_;return Object.plain(_)||(_={}),Object.plain($.opt)||($.opt=_),typeof A=="string"&&(A=[A]),Object.plain($.opt.peers)||($.opt.peers={}),A instanceof Array&&(_.peers={},A.forEach(function(j){var f={};f.id=f.url=j,_.peers[j]=$.opt.peers[j]=$.opt.peers[j]||f})),c(_,function j(f){var v=this[f];if(this&&this.hasOwnProperty(f)||typeof v=="string"||Object.empty(v)){this[f]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||c(v,j)}),$.opt.from=_,n.on("opt",$),$.opt.uuid=$.opt.uuid||function(f){return n.state().toString(36).replace(".","")+String.random(f||12)},g}}();var c=function(_,g){Object.keys(_).forEach(g,_)},l=String.random,a=setTimeout.turn,d=n.valid,u=n.state.is,h=n.state.ify,s,y={},T;n.log=function(){return!n.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(_,g,$){return($=n.log.once)[_]=$[_]||0,$[_]++||n.log(g)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}i.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(T=console).only=function(_,g){return T.only.i&&_===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||g)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(i){var n=t("./root");n.chain.back=function(a,d){var u;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var h=this,s=h._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var y=0,T=a.length,u=s;for(y;y<T;y++)u=(u||c)[a[y]];return l!==u?d?h:u:(u=s.back)?u.$.back(a,d):void 0}if(typeof a=="function"){for(var _,u={back:s};(u=u.back)&&l===(_=a(u,d)););return _}return typeof a=="number"?(s.back||s).$.back(a-1):this};var c={},l})(t,"./back"),t(function(i){var n=t("./root");n.chain.chain=function(j){var f=this,v=f._,w=new(j||f).constructor(f),G=w._,k;return G.root=k=v.root,G.id=++k.once,G.back=f._,G.on=n.on,G.on("in",n.on.in,G),G.on("out",n.on.out,G),w};function c(j){var f,v=this.as,w=v.back,G=v.root,k;if(j.$||(j.$=v.$),this.to.next(j),v.err){v.on("in",{put:v.put=s,$:v.$});return}if(f=j.get){if(G.pass&&(G.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(x){k[x]=v.lex[x]},k=j.get=j.get||{}),f["#"]||v.soul){if(f["#"]=f["#"]||v.soul,j["#"]||(j["#"]=y(9)),w=G.$.get(f["#"])._,f=f["."]){if(_(w.put,f)&&(k=w.ask&&w.ask[f],(w.ask||(w.ask={}))[f]=w.$.get(f)._,w.on("in",{get:f,put:{"#":w.soul,".":f,":":w.put[f],">":$(G.graph[w.soul],f)}}),k))return}else{if(k=w.ask&&w.ask[""],(w.ask||(w.ask={}))[""]=w,s!==w.put&&(w.on("in",w),k))return;j.$=w.$}return G.ask(u,j),G.on("in",j)}if(f["."])return v.get?(j={get:{".":v.get},$:v.$},(w.ask||(w.ask={}))[v.get]=j.$._,w.on("out",j)):(j={get:v.lex?j.get:{},$:v.$},w.on("out",j));if((v.ask||(v.ask={}))[""]=v,v.get)return f["."]=v.get,(w.ask||(w.ask={}))[v.get]=j.$._,w.on("out",j)}return w.on("out",j)}n.on.out=c;function l(j,f){f=f||this.as;var v=f.root,w=j.$||(j.$=f.$),G=(w||"")._||h,k=j.put||"",x=k["#"],O=k["."],M=s!==k["="]?k["="]:k[":"],D=k[">"]||-1/0,p;if(s!==j.put&&(s===k["#"]||s===k["."]||s===k[":"]&&s===k["="]||s===k[">"])){if(!T(k)){if(!(x=((k||"")._||"")["#"])){console.log("chain not yet supported for",k,"...",j,f);return}return w=f.root.$.get(x),setTimeout.each(Object.keys(k).sort(),function(o){o=="_"||s===(D=$(k,o))||f.on("in",{$:w,put:{"#":x,".":o,"=":k[o],">":D},VIA:j})})}f.on("in",{$:G.back.$,put:{"#":x=G.back.soul,".":O=G.has||G.get,"=":k,">":$(G.back.put,O)},via:j});return}(j.seen||"")[f.id]||((j.seen||(j.seen=function(){}))[f.id]=f,f!==G&&(Object.keys(j).forEach(function(o){k[o]=j[o]},k={}),k.get=f.get||k.get,!f.soul&&!f.has?k.$$$=k.$$$||f.$:G.soul&&(k.$=f.$,k.$$=k.$$||G.$),j=k),d(j,f),(f.soul||j.$$)&&D>=$(v.graph[x],O)&&((k=v.$.get(x)._).put=A(k.put,O,D,M,x)),!G.soul&&D>=$(v.graph[x],O)&&(p=(v.$.get(x)._.next||"")[O])&&(p.put=M,typeof(k=T(M))=="string"&&(p.put=v.$.get(k)._.put||M)),this.to&&this.to.next(j),f.any&&setTimeout.each(Object.keys(f.any),function(o){(o=f.any[o])&&o(j)},0,99),f.echo&&setTimeout.each(Object.keys(f.echo),function(o){(o=f.echo[o])&&o.on("in",j)},0,99),((j.$$||"")._||G).soul&&(p=f.next)&&(p=p[O])&&(k={},Object.keys(j).forEach(function(o){k[o]=j[o]}),k.$=(j.$$||j.$).get(k.get=O),delete k.$$,delete k.$$$,p.on("in",k)),a(j,f))}n.on.in=l;function a(j,f){if(f=f||this.as||j.$._,!(j.$$&&this!==n.on)&&!(!j.put||f.soul)){var v=j.put||"",w=v["="]||v[":"],O,G=f.root,k=G.$.get(v["#"]).get(v["."])._;if(typeof(w=T(w))!="string"){this===n.on&&((k.echo||(k.echo={}))[f.id]=f);return}if(!((k.echo||(k.echo={}))[f.id]&&!(G.pass||"")[f.id])){if(O=G.pass){if(O[w+f.id])return;O[w+f.id]=1}(k.echo||(k.echo={}))[f.id]=f,f.has&&(f.link=w);var x=G.$.get(k.link=w)._;(x.echo||(x.echo={}))[k.id]=k;var O=f.ask||"";(O[""]||f.lex)&&x.on("out",{get:{"#":w}}),setTimeout.each(Object.keys(O),function(M,D){!M||!(D=O[M])||D.on("out",{get:{"#":w,".":M}})},0,99)}}}n.on.link=a;function d(j,f){var v=j.put||"",w=s!==v["="]?v["="]:v[":"],G=f.root,k,x;if(s===w){if(f.soul&&s!==f.put||(x=(j.$$||j.$||"")._||"",j["@"]&&(s!==x.put||s!==f.put)))return;(k=f.link||j.linked)&&delete(G.$.get(k)._.echo||"")[f.id],f.has&&(f.link=null),f.put=s,setTimeout.each(Object.keys(f.next||""),function(O,M){(M=f.next[O])&&(k&&delete(G.$.get(k).get(O)._.echo||"")[M.id],M.on("in",{get:O,put:s,$:M.$}))},0,99);return}f.soul||j.$$||(k=T(w),x=j.$._||"",!((k===x.link||f.has&&!x.link)&&!((G.pass||"")[f.id]&&typeof k!="string"))&&(delete(x.echo||"")[f.id],d({get:f.get,put:s,$:j.$,linked:j.linked=j.linked||x.link},f)))}n.on.unlink=d;function u(j,f){var v=this.as,w=v.$._;w.root;var G=v.get||"",k=(j.put||"")[G["#"]]||"";if(!j.put||typeof G["."]=="string"&&s===k[G["."]]){if(s!==w.put||!w.soul&&!w.has)return;w.ack=(w.ack||0)+1,w.on("in",{get:w.get,put:w.put=s,$:w.$,"@":j["@"]});return}(j._||{}).miss=1,n.on.put(j)}var h={},s,y=String.random,T=n.valid,_=function(j,f){return j&&Object.prototype.hasOwnProperty.call(j,f)},g=n.state,$=g.is,A=g.ify})(t,"./chain"),t(function(i){var n=t("./root");n.chain.get=function(s,y,T){var _,g;if(typeof s=="string"){if(s.length==0)return(_=this.chain())._.err={err:n.log("0 length key!",s)},y&&y.call(_,_._.err),_;var $=this,A=$._,j=A.next||d;(_=j[s])||(_=s&&c(s,$)),_=_&&_.$}else if(typeof s=="function"){let O=function(M,D,p){if(!O.stun&&!((S=v.pass)&&!S[w])){var o=M.$._,b=(M.$$||"")._,m=(b||o).put,I=!o.has&&!o.soul,N={},S;if((I||h===m)&&(m=h===((S=M.put)||"")["="]?h===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=n.valid(m))=="string"&&(m=h===(S=v.$.get(S)._.put)?f.not?h:m:S),!(f.not&&h===m)){if(h===f.stun){if((S=v.stun)&&S.on&&(A.$.back(function(E){if(S.on(""+E.id,N={}),(N.run||0)<O.id)return N}),!N.run&&S.on(""+o.id,N={}),!N.run&&b&&S.on(""+b.id,N={}),O.id>N.run&&((!N.stun||N.stun.end)&&(N.stun=S.on("stun"),N.stun=N.stun&&N.stun.last),N.stun&&!N.stun.end))){(N.stun.add||(N.stun.add={}))[w]=function(){O(M,D,1)};return}if(h===m&&(p=0),(S=v.hatch)&&!S.end&&h===f.hatch&&!p){if(G[o.$._.id])return;G[o.$._.id]=1,S.push(function(){O(M,D,1)});return}G={}}if(v.pass){if(v.pass[w+o.id])return;v.pass[w+o.id]=1}if(f.on){f.ok.call(o.$,m,o.get,M,D||O);return}if(f.v2020){f.ok(M,D||O);return}Object.keys(M).forEach(function(E){S[E]=M[E]},S={}),M=S,M.put=m,f.ok.call(f.as,M,D||O)}}};var k=O;if(y===!0)return l(this,s,y,T),this;_=this;var A=_._,f=y||{},v=A.root,w;f.at=A,f.ok=s;var G={};return O.at=A,(A.any||(A.any={}))[w=String.random(7)]=O,O.off=function(){O.stun=1,A.any&&delete A.any[w]},O.rid=a,O.id=f.run||++v.once,g=v.pass,(v.pass={})[w]=1,f.out=f.out||{get:{}},A.on("out",f.out),v.pass=g,_}else{if(typeof s=="number")return this.get(""+s,y,T);if(typeof(g=u(s))=="string")return this.get(g,y,T);(g=this.get.next)&&(_=g(this,s))}return _?(y&&typeof y=="function"&&_.get(y,T),_):((_=this.chain())._.err={err:n.log("Invalid get request!",s)},y&&y.call(_,_._.err),_)};function c(s,y){var T=y._,_=T.next,g=y.chain(),$=g._;return _||(_=T.next={}),_[$.get=s]=$,y===T.root.$?$.soul=s:(T.soul||T.has)&&($.has=s),$}function l(s,y,T,_){var g=s._,$=0,A;return(A=g.soul||g.link)?y(A,_,g):g.jam?g.jam.push([y,_]):(g.jam=[[y,_]],s.get(function(f,v){if(!(h===f.put&&!g.root.opt.super&&(A=Object.keys(g.root.opt.peers).length)&&++$<=A)){v.rid(f);var w=(w=f.$)&&w._||{},G=0,k;for(A=g.jam,delete g.jam;k=A[G++];){var x=k[0];k=k[1],x&&x(w.link||w.soul||n.valid(f.put)||((f.put||{})._||{})["#"],k,f,v)}}},{out:{get:{".":!0}}}),s)}function a(s){var y=this.at||this.on;if(!s||y.soul||y.has)return this.off();if(s=(s=(s=s.$||s)._||s).id){y.map;var T;if((T=this.seen||(this.seen={}))[s])return!0;T[s]=!0}}var d={},u=n.valid,h})(t,"./get"),t(function(i){var n=t("./root");n.chain.put=function(_,g,$){var A=this,j=A._,f=j.root;$=$||{},$.root=j.root,$.run||($.run=f.once),c($,j.id),$.ack=$.ack||g,$.via=$.via||A,$.data=$.data||_,$.soul||($.soul=j.soul||typeof g=="string"&&g);var v=$.state=$.state||n.state();return typeof _=="function"?(_(function(w){$.data=w,A.put(u,u,$)}),A):$.soul?($.$=f.$.get($.soul),$.todo=[{it:$.data,ref:$.$}],$.turn=$.turn||s,$.ran=$.ran||l,function w(){var G=$.todo,k=G.pop(),x=k.it;k.ref&&k.ref._.id;var O,M,D,p,o;if(c($,k.ref),(p=k.todo)&&(M=p.pop(),x=x[M],p.length&&G.push(k)),M&&(G.path||(G.path=[])).push(M),!(O=y(x))&&!(o=n.is(x))){if(!Object.plain(x)){l.err($,"Invalid data: "+d(x)+" at "+($.via.back(function(S){S.get&&p.push(S.get)},p=[])||p.join("."))+"."+(G.path||[]).join("."));return}for(var b=$.seen||($.seen=[]),m=b.length;m--;)if(x===(p=b[m]).it){O=x=p.link;break}}if(M&&O)k.node=T(k.node,M,v,x);else{let S=function(E,C){var B=D.link["#"];C&&(C.off(),C.rid(E));var F=B||E.soul||(p=(E.$$||E.$)._||"").soul||p.link||((p=p.put||"")._||"")["#"]||p["#"]||((p=E.put||"")&&E.$$?p["#"]:(p["="]||p[":"]||"")["#"]);if(!B&&c($,E.$),!F&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){S(E,C)});return}F||(F=[],(E.$$||E.$).back(function(R){if(p=R.soul||R.link)return F.push(p);F.push(R.get)}),F=F.reverse().join("/")),D.link["#"]=F,!o&&((($.graph||($.graph={}))[F]=D.node||(D.node={_:{}}))._["#"]=F),delete $.wait[I],D.wait&&setTimeout.each(D.wait,function(R){R&&R()}),$.ran($)};var N=S;if(!$.seen){l.err($,"Data at root of graph must be a node (an object).");return}$.seen.push(D={it:x,link:{},todo:o?[]:Object.keys(x).sort().reverse(),path:(G.path||[]).slice(),up:k}),k.node=T(k.node,M,v,D.link),!o&&D.todo.length&&G.push(D);var I=$.seen.length;($.wait||($.wait={}))[I]="",p=(D.ref=o?x:M?k.ref.get(M):k.ref)._,(p=x&&(x._||"")["#"]||p.soul||p.link)?S({soul:p}):D.ref.get(S,{run:$.run,v2020:1,out:{get:{".":" "}}})}if(!G.length)return $.ran($);$.turn(w)}(),A):(a($),A)};function c(_,g){if(g){g=(g._||"").id||g;var $=_.root.stun||(_.root.stun={on:n.on}),A={},j;_.stun||(_.stun=$.on("stun",function(){})),(j=$.on(""+g))&&j.the.last.next(A),!(A.run>=_.run)&&$.on(""+g,function(f){if(_.stun.end){this.off(),this.to.next(f);return}f.run=f.run||_.run,f.stun=f.stun||_.stun})}}function l(_){if(_.err){l.end(_.stun,_.root);return}if(!(_.todo.length||_.end||!Object.empty(_.wait))){_.end=1;var g=_.$.back(-1)._,$=g.root,A=g.ask(function(w){$.on("ack",w),w.err&&!w.lack&&n.log(w),++j>(_.acks||0)&&this.off(),_.ack&&_.ack(w,this)},_.opt),j=0,f=_.stun,v;(v=function(){f&&(l.end(f,$),setTimeout.each(Object.keys(f=f.add||""),function(w){(w=f[w])&&w()}))}).hatch=v,_.ack&&!_.ok&&(_.ok=_.acks||9),_.via._.on("out",{put:_.out=_.graph,ok:_.ok&&{"@":_.ok+1},opt:_.opt,"#":A,_:v})}}l.end=function(_,g){_.end=h,_.the.to===_&&_===_.the.last&&delete g.stun,_.off()},l.err=function(_,g){(_.ack||h).call(_,_.out={err:_.err=n.log(g)}),_.ran(_)};function a(_){var g=_.via._,$;_.via=_.via.back(function(A){if(A.soul||!A.get)return A.$;$=_.data,(_.data={})[A.get]=$}),(!_.via||!_.via._.soul)&&(_.via=g.root.$.get(((_.data||"")._||"")["#"]||g.$.back("opt.uuid")())),_.via.put(_.data,_.ack,_)}function d(_,g){return _&&(g=_.constructor)&&g.name||typeof _}var u,h=function(){},s=setTimeout.turn,y=n.valid,T=n.state.ify})(t,"./put"),t(function(i){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),i.exports=n})(t,"./index"),t(function(i){var n=t("./index");n.chain.on=function(a,d,u,h){var s=this,y=s._;y.root;var T;if(typeof a=="string")return d?(T=y.on(a,d,u||y,h),u&&u.$&&(u.subs||(u.subs=[])).push(T),s):y.on(a);var _=d;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,s.get(a,_),s},n.chain.once=function(a,d){if(d=d||{},!a)return c(this);var u=this,h=u._,s=h.root;h.put;var y=String.random(7),T;return u.get(function(_,g,$,A){var j=this,f=j._,v=f.one||(f.one={});if(A.stun||v[y]==="")return;if((T=n.valid(_))===!0){w();return}if(typeof T=="string")return;clearTimeout((h.one||"")[y]),clearTimeout(v[y]),v[y]=setTimeout(w,d.wait||99);function w(G){if(!f.has&&!f.soul&&(f={put:_,get:g}),l===(T=f.put)&&(T=(($.$$||"")._||"").put),typeof n.valid(T)=="string"&&(T=s.$.get(T)._.put,T===l&&!G)){v[y]=setTimeout(function(){w(1)},d.wait||99);return}A.stun||v[y]!==""&&(v[y]="",(h.soul||h.has)&&A.off(),a.call(j,T,f.get),clearTimeout(v[y]))}},{on:1}),u};function c(a,d,u){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=a.chain())._.nix=a.once(function(h,s){u._.on("in",this._)}),u._.lex=a._.lex,u}n.chain.off=function(){var a=this,d=a._,u,h=d.back;if(h)return d.ack=0,(u=h.next)&&u[d.get]&&delete u[d.get],(u=h.any)&&(delete h.any,h.any={}),(u=h.ask)&&delete u[d.get],(u=h.put)&&delete u[d.get],(u=d.soul)&&delete h.root.graph[u],(u=d.map)&&Object.keys(u).forEach(function(s,y){y=u[s],y.link&&h.root.$.get(y.link).off()}),(u=d.next)&&Object.keys(u).forEach(function(s,y){y=u[s],y.$.off()}),d.on("off",{}),a};var l})(t,"./on"),t(function(i){var n=t("./index"),c=n.chain.get.next;n.chain.get.next=function(u,h){var s;return Object.plain(h)?(s=((s=h["#"])||"")["="]||s)?u.get(s):((s=u.chain()._).lex=h,u.on("in",function(y){String.match(y.get||(y.put||"")["."],h["."]||h["#"]||h)&&s.on("in",y),this.to.next(y)}),s.$):(c||a)(u,h)},n.chain.map=function(u,h,s){var y=this,T=y._,_,g;return Object.plain(u)&&(_=u["."]?u:{".":u},u=d),u?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=y.chain(),y.map().on(function($,A,j,f){var v=(u||a).call(this,$,A,j,f);if(d!==v){if($===v)return g._.on("in",j);if(n.is(v))return g._.on("in",v._);var w={};Object.keys(j.put).forEach(function(G){w[G]=j.put[G]},w),w["="]=v,g._.on("in",{get:A,put:w})}}),g):((g=T.each)||((T.each=g=y.chain())._.lex=_||g._.lex||T.lex,g._.nix=y.back("nix"),y.on("in",l,g._)),g)};function l(u){this.to.next(u);var h=this.as,s=u.$,y=s._,T=u.put,_;!y.soul&&!u.$$||(_=h.lex)&&!String.match(u.get||(T||"")["."],_["."]||_["#"]||_)||n.on.link(u,h)}var a=function(){},d})(t,"./map"),t(function(i){var n=t("./index");n.chain.set=function(c,l,a){var d=this,u=d.back(-1),h,s;return l=l||function(){},a=a||{},a.item=a.item||c,(h=((c||"")._||"")["#"])&&((c={})["#"]=h),typeof(s=n.valid(c))=="string"?d.get(h=s).put(c,l,a):n.is(c)?(d.put(function(y){c.get(function(T,_,g){if(!T)return l.call(d,{err:n.log('Only a node can be linked! Not "'+g.put+'"!')});(s={})[T]={"#":T},y(s)},!0)}),c):(Object.plain(c)&&(c=u.get(h=d.back("opt.uuid")()).put(c)),d.get(h||u.back("opt.uuid")(7)).put(c,l,a))}})(t,"./set"),t(function(i){t("./shim");var n=function(){},c=JSON.parseAsync||function(u,h,s){var y,T=+new Date;try{h(y,JSON.parse(u,s),l.sucks(+new Date-T))}catch(_){h(_)}},l=JSON.stringifyAsync||function(u,h,s,y){var T,_=+new Date;try{h(T,JSON.stringify(u,s,y),l.sucks(+new Date-_))}catch(g){h(g)}};l.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),l.sucks=n)};function a(u){var h=function(){},s=u.opt||{};s.log=s.log||console.log,s.gap=s.gap||s.wait||0,s.max=s.max||(s.memory?s.memory*999*999:3e8)*.3,s.pack=s.pack||s.max*.01*.01,s.puff=s.puff||9;var y=setTimeout.turn||setTimeout,T=u.dup,_=T.check,g=T.track,$=h.hear=function(f,v){if(f){if(s.max<=f.length)return h.say({dam:"!",err:"Message too big!"},v);h===this&&($.d+=f.length||0,++$.c);var w=v.SH=+new Date,G=f[0],k;if(G==="["){c(f,function(x,O){if(x||!O)return h.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,O.length,"# on hear batch");var M=s.puff;(function D(){for(var p=+new Date,o=0,b;o<M&&(b=O[o++]);)h.hear(b,v);O=O.slice(o),console.STAT&&console.STAT(p,+new Date-p,"hear loop"),A(v),O.length&&y(D,0)})()}),f="";return}if(G==="{"||(f["#"]||Object.plain(f))&&(k=f)){if(k)return $.one(k,v,w);c(f,function(x,O){if(x||!O)return h.say({dam:"!",err:"DAM JSON parse error."},v);$.one(O,v,w)});return}}};$.one=function(f,v,D){var G,k,x,O,M;if(f.DBG&&(f.DBG=M={DBG:f.DBG}),M&&(M.h=D),M&&(M.hp=+new Date),(G=f["#"])||(G=f["#"]=String.random(9)),!(x=_(G))&&(k=f["##"],!(k&&(x=f["@"]||f.get&&G)&&T.check(O=x+k)))){if((f._=function(){}).via=h.leap=v,(x=f["><"])&&typeof x=="string"&&x.slice(0,99).split(",").forEach(function(p){this[p]=1},f._.yo={}),x=f.dam){(x=h.hear[x])&&x(f,v,u),g(G);return}(x=f.ok)&&(f._.near=x["/"]);var D=+new Date;M&&(M.is=D),v.SI=G,g.ed=function(p){G===p&&(g.ed=0,(p=T.s[G])&&(p.via=v,f.get&&(p.it=f)))},u.on("in",h.last=f),M&&(M.hd=+new Date),console.STAT&&console.STAT(D,+new Date-D,f.get?"msg get":f.put?"msg put":"msg"),g(G),O&&g(O),h.leap=h.last=null}},$.c=$.d=0,function(){var f=0,v;h.hash=function(k,x){var O,M,D,p=+new Date;l(k.put,function o(b,m){var I=(M||(M=D=m||"")).slice(0,32768);if(O=String.hash(I,O),M=M.slice(32768),M){y(o,0);return}console.STAT&&console.STAT(p,+new Date-p,"say json+hash"),k._.$put=D,k["##"]=O,h.say(k,x),delete k._.$put},w)};function w(k,x){var O;return x instanceof Object?(Object.keys(x).sort().forEach(G,{to:O={},on:x}),O):x}function G(k){this.to[k]=this.on[k]}h.say=function(k,x){var O;if((O=this)&&(O=O.to)&&O.next&&O.next(k),!k)return!1;var M,D,p,o=k["@"],b=k._||(k._=function(){}),m=k.DBG,I=+new Date;if(b.y=b.y||I,x||m&&(m.y=I),(M=k["#"])||(M=k["#"]=String.random(9)),!v&&g(M),!(D=k["##"])&&d!==k.put&&!b.via&&o){h.hash(k,x);return}if(!x&&o&&(x=(O=T.s[o])&&(O.via||(O=O.it)&&(O=O._)&&O.via)||(O=h.last)&&o===O["#"]&&h.leap),!x&&o)return T.s[o]?void 0:(console.STAT&&console.STAT(+new Date,++f,"total no peer to ack to"),!1);if(o&&!k.put&&!D&&((T.s[o]||"").it||"")["##"])return!1;if(!x&&h.way)return h.way(k);if(m&&(m.yh=+new Date),!(p=b.raw)){h.raw(k,x);return}if(m&&(m.yr=+new Date),!x||!x.id){if(!Object.plain(x||s.peers))return!1;var I=+new Date;s.puff;var N=s.peers,S=Object.keys(x||s.peers||{});console.STAT&&console.STAT(I,+new Date-I,"peer keys"),function B(){var F=+new Date;v=1;var R=b.raw;b.raw=p;for(var U=0,Y;U<9&&(Y=(S||"")[U++]);)(Y=N[Y]||(x||"")[Y])&&h.say(k,Y);b.raw=R,v=0,S=S.slice(U),console.STAT&&console.STAT(F,+new Date-F,"say loop"),S.length&&(y(B,0),o&&g(o))}();return}if(!x.wire&&h.wire&&h.wire(x),M!==x.last){if(x.last=M,x===b.via||(O=b.yo)&&(O[x.url]||O[x.pid]||O[x.id]))return!1;if(console.STAT&&console.STAT(I,((m||b).yp=+new Date)-(b.y||I),"say prep"),!v&&o&&g(o),x.batch){if(x.tail=(O=x.tail||0)+p.length,x.tail<=s.pack){x.batch+=(O?",":"")+p;return}A(x)}x.batch="[";var E=+new Date;setTimeout(function(){console.STAT&&console.STAT(E,+new Date-E,"0ms TO"),A(x)},s.gap),j(p,x),console.STAT&&o===x.SI&&console.STAT(I,+new Date-x.SH,"say ack")}},h.say.c=h.say.d=0,h.raw=function(k,x){if(!k)return"";var O=k._||{},M,D;if(D=O.raw)return D;if(typeof k=="string")return k;var p=k["##"],o=k["@"];if(p&&o){if(!O.via&&_(o+p))return!1;if(D=(T.s[o]||"").it){if(p===D["##"])return!1;D["##"]||(D["##"]=p)}}if(!k.dam&&!k["@"]){var b=0,m=[];D=s.peers;for(var I in D){var N=D[I];if(m.push(N.url||N.pid||N.id),++b>6)break}b>1&&(k["><"]=m.join())}if(k.put&&(D=k.ok)&&(k.ok={"@":(D["@"]||1)-1,"/":D["/"]==k._.near?h.near:D["/"]}),M=O.$put){D={},Object.keys(k).forEach(function(E){D[E]=k[E]}),D.put=":])([:",l(D,function(E,C){if(!E){var B=+new Date;D=C.indexOf('"put":":])([:"'),S(d,C=C.slice(0,D+6)+M+C.slice(D+14)),console.STAT&&console.STAT(B,+new Date-B,"say slice")}});return}l(k,S);function S(E,C){E||(O.raw=C,h.say(k,x))}}}();function A(f){var v=f.batch,w=typeof v=="string";if(w&&(v+="]"),f.batch=f.tail=null,!!v&&!(w?3>v.length:!v.length)){if(!w)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(G){return s.log("DAM JSON stringify error",G)}v&&j(v,f)}}function j(f,v){try{var w=v.wire;v.say?v.say(f):w.send&&w.send(f),h.say.d+=f.length||0,++h.say.c}catch{(v.queue=v.queue||[]).push(f)}}return h.near=0,h.hi=function(f){var v=f.wire,w;if(!v){h.wire(f.length&&{url:f,id:f}||f);return}f.id?s.peers[f.url||f.id]=f:(w=f.id=f.id||f.url||String.random(9),h.say({dam:"?",pid:u.opt.pid},s.peers[w]=f),delete T.s[f.last]),f.met||(h.near++,f.met=+new Date,u.on("hi",f)),w=f.queue,f.queue=[],setTimeout.each(w||[],function(G){j(G,f)},0,9)},h.bye=function(f){f.met&&--h.near,delete f.met,u.on("bye",f);var v=+new Date;v=v-(f.met||v),h.bye.time=((h.bye.time||v)+v)/2},h.hear["!"]=function(f,v){s.log("Error:",f.err)},h.hear["?"]=function(f,v){f.pid&&(v.pid||(v.pid=f.pid),f["@"])||(h.say({dam:"?",pid:s.pid,"@":f["#"]},v),delete T.s[v.last])},h.hear.mob=function(f,v){if(f.peers){var w=Object.keys(f.peers),G=w[Math.random()*w.length>>0];G&&(h.bye(v),h.hi(G))}},u.on("create",function(f){f.opt.pid=f.opt.pid||String.random(9),this.to.next(f),f.on("out",h.say)}),u.on("bye",function(f,v){f=s.peers[f.id||f]||f,this.to.next(f),f.bye?f.bye():(v=f.wire)&&v.close&&v.close(),delete s.peers[f.id],f.wire=null}),u.on("bye",function(f,v){this.to.next(f),(v=console.STAT)&&(v.peers=h.near),(v=f.url)&&setTimeout(function(){},s.lack||9e3)}),u.on("hi",function(f,v){if(this.to.next(f),(v=console.STAT)&&(v.peers=h.near),!s.super){var w=Object.keys(u.next||"");w.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(w,function(G){var k=u.next[G];if(s.super||(k.ask||"")[""]){h.say({get:{"#":G}},f);return}setTimeout.each(Object.keys(k.ask||""),function(x){x&&h.say({"##":String.hash((u.graph[G]||"")[x]),get:{"#":G,".":x}},f)})})}}),h}var d;try{i.exports=a}catch{}})(t,"./mesh"),t(function(i){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(l){if(this.to.next(l),l.once)return;var a=l.opt;if(a.WebSocket===!1)return;var d=n.window||{},u=a.WebSocket||d.WebSocket||d.webkitWebSocket||d.mozWebSocket;if(!u)return;a.WebSocket=u;var h=a.mesh=a.mesh||n.Mesh(l);h.wire||a.wire,h.wire=a.wire=s;function s(g){try{if(!g||!g.url)return A&&A(g);var $=g.url.replace(/^http/,"ws"),A=g.wire=new a.WebSocket($);return A.onclose=function(){T(g),a.mesh.bye(g)},A.onerror=function(j){T(g)},A.onopen=function(){a.mesh.hi(g)},A.onmessage=function(j){j&&a.mesh.hear(j.data||j,g)},A}catch{a.mesh.bye(g)}}setTimeout(function(){!a.super&&l.on("out",{dam:"hi"})},1);var y=2*999;function T(g){clearTimeout(g.defer),a.peers[g.url]&&(_&&g.retry<=0||(g.retry=(g.retry||a.retry+1||60)-(-g.tried+(g.tried=+new Date)<y*4?1:0),g.defer=setTimeout(function $(){if(_&&_.hidden)return setTimeout($,y);s(g)},y)))}var _=""+c!=typeof document&&document});var c})(t,"./websocket"),t(function(i){if(!(typeof Gun>"u")){var n=function(){},c;try{c=(Gun.window||n).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(a,d){this[a]=d},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var l=JSON.stringifyAsync||function(a,d,u,h){var s;try{d(s,JSON.stringify(a,u,h))}catch(y){d(y)}};Gun.on("create",function a(d){this.to.next(d);var u=d.opt;d.graph;var h=[],s,y,T,_;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{s=a[u.prefix]=a[u.prefix]||JSON.parse(T=c.getItem(u.prefix))||{}}catch{s=a[u.prefix]={}}T=(T||"").length,d.on("get",function($){this.to.next($);var A=$.get,j,f,v,w;!A||!(j=A["#"])||(f=s[j]||w,f&&(v=A["."])&&!Object.plain(v)&&(f=Gun.state.ify({},v,Gun.state.is(f,v),f[v],j)),Gun.on.get.ack($,f))}),d.on("put",function($){this.to.next($);var A=$.put,j=A["#"],f=A["."],v=$["#"],w=$.ok||"";if(s[j]=Gun.state.ify(s[j],f,A[">"],A[":"],j),_&&T>4999880){d.on("in",{"@":v,err:"localStorage max!"});return}!$["@"]&&(!$._.via||Math.random()<w["@"]/w["/"])&&h.push(v),!y&&(y=setTimeout(g,9+T/333))});function g(){if(!h.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var $=h;clearTimeout(y),y=!1,h=[],l(s,function(A,j){try{!A&&c.setItem(u.prefix,j)}catch(f){A=_=f||"localStorage failure"}A&&(Gun.log(A+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),d.on("localStorage:error",{err:A,get:u.prefix,put:s})),T=j.length,setTimeout.each($,function(f){d.on("in",{"@":f,err:A,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var D;if(""+D!=typeof Gun){var t=function(p){console.warn("Warning! Deprecated internal utility will break in next version:",p)},e=Gun;e.fn=e.fn||{is:function(p){return t("fn"),!!p&&typeof p=="function"}},e.bi=e.bi||{is:function(p){return t("bi"),p instanceof Boolean||typeof p=="boolean"}},e.num=e.num||{is:function(p){return t("num"),!i(p)&&(p-parseFloat(p)+1>=0||p===1/0||p===-1/0)}},e.text=e.text||{is:function(p){return t("text"),typeof p=="string"}},e.text.ify=e.text.ify||function(p){return t("text.ify"),e.text.is(p)?p:typeof JSON<"u"?JSON.stringify(p):p&&p.toString?p.toString():p},e.text.random=e.text.random||function(p,o){t("text.random");var b="";for(p=p||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";p>0;)b+=o.charAt(Math.floor(Math.random()*o.length)),p--;return b},e.text.match=e.text.match||function(p,o){var b,m;return t("text.match"),typeof p!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},b=o["="]||o["*"]||o[">"]||o["<"],p===b?!0:m!==o["="]?!1:(b=o["*"]||o[">"]||o["<"],p.slice(0,(b||"").length)===b?!0:m!==o["*"]?!1:m!==o[">"]&&m!==o["<"]?p>=o[">"]&&p<=o["<"]:m!==o[">"]&&p>=o[">"]||m!==o["<"]&&p<=o["<"]))},e.text.hash=e.text.hash||function(p,o){if(t("text.hash"),typeof p=="string"){if(o=o||0,!p.length)return o;for(var b=0,m=p.length,I;b<m;++b)I=p.charCodeAt(b),o=(o<<5)-o+I,o|=0;return o}},e.list=e.list||{is:function(p){return t("list"),p instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(p){return t("list.sort"),function(o,b){return!o||!b?0:(o=o[p],b=b[p],o<b?-1:o>b?1:0)}},e.list.map=e.list.map||function(p,o,b){return t("list.map"),O(p,o,b)},e.list.index=1,e.obj=e.boj||{is:function(p){return t("obj"),p?p instanceof Object&&p.constructor===Object||Object.prototype.toString.call(p).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(p,o,b){return t("obj.put"),(p||{})[o]=b,p},e.obj.has=e.obj.has||function(p,o){return t("obj.has"),p&&Object.prototype.hasOwnProperty.call(p,o)},e.obj.del=e.obj.del||function(p,o){if(t("obj.del"),!!p)return p[o]=null,delete p[o],p},e.obj.as=e.obj.as||function(p,o,b,m){return t("obj.as"),p[o]=p[o]||(m===b?{}:b)},e.obj.ify=e.obj.ify||function(p){if(t("obj.ify"),v(p))return p;try{p=JSON.parse(p)}catch{p={}}return p},function(){var p;function o(b,m){G(this,m)&&p!==this[m]||(this[m]=b)}e.obj.to=e.obj.to||function(b,m){return t("obj.to"),m=m||{},O(b,o,m),m}}(),e.obj.copy=e.obj.copy||function(p){return t("obj.copy"),p&&JSON.parse(JSON.stringify(p))},function(){function p(o,b){var m=this.n,I;if(!(m&&(b===m||v(m)&&G(m,b)))&&I!==b)return!0}e.obj.empty=e.obj.empty||function(o,b){return t("obj.empty"),o?!O(o,p,{n:b}):!0}}(),function(){function p(m,I){if(arguments.length===2){p.r=p.r||{},p.r[m]=I;return}p.r=p.r||[],p.r.push(m)}var o=Object.keys,b;Object.keys=Object.keys||function(m){return b(m,function(I,N,S){S(N)})},e.obj.map=b=e.obj.map||function(m,I,N){t("obj.map");var S,E=0,C,B,F,R,U=typeof I=="function";if(p.r=S,o&&v(m)&&(F=o(m),R=!0),N=N||{},i(m)||F)for(C=(F||m).length;E<C;E++){var Y=E+e.list.index;if(U){if(B=R?I.call(N,m[F[E]],F[E],p):I.call(N,m[E],Y,p),B!==S)return B}else if(I===m[R?F[E]:E])return F?F[E]:Y}else for(E in m)if(U){if(G(m,E)&&(B=N?I.call(N,m[E],E,p):I(m[E],E,p),B!==S))return B}else if(I===m[E])return E;return U?p.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(p){return t("time"),p?p instanceof Date:+new Date().getTime()};var j=e.fn.is,i=e.list.is,f=e.obj,v=f.is,G=f.has,O=f.map,n={};n.is=function(p){return t("val.is"),p===D?!1:p===null?!0:p===1/0?!1:a(p)||l(p)||_(p)?!0:n.link.is(p)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(o){if(t("val.link.is"),o&&o[c]&&!o._&&v(o)){var b={};if(O(o,p,b),b.id)return b.id}return!1};function p(o,b){var m=this;if(m.id)return m.id=!1;if(b==c&&a(o))m.id=o;else return m.id=!1}}(),n.link.ify=function(p){return t("val.link.ify"),x({},c,p)},e.obj.has._=".";var c=n.link._,D,l=e.bi.is,_=e.num.is,a=e.text.is,f=e.obj,v=f.is,x=f.put,O=f.map;e.val=e.val||n;var d={_:"_"};d.soul=function(p,o){return t("node.soul"),p&&p._&&p._[o||s]},d.soul.ify=function(p,o){return t("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},p=p||{},p._=p._||{},p._[s]=o.soul||p._[s]||h(),p},d.soul._=n.link._,function(){d.is=function(o,b,m){t("node.is");var I;return v(o)&&(I=d.soul(o))?!O(o,p,{as:m,cb:b,s:I,n:o}):!1};function p(o,b){if(b!==d._){if(!n.is(o))return!0;this.cb&&this.cb.call(this.as,o,b,this.n,this.s)}}}(),function(){d.ify=function(o,b,m){return t("node.ify"),b?typeof b=="string"?b={soul:b}:typeof b=="function"&&(b={map:b}):b={},b.map&&(b.node=b.map.call(m,o,D,b.node||{})),(b.node=d.soul.ify(b.node||{},b))&&O(o,p,{o:b,as:m}),b.node};function p(o,b){var m=this.o,I,N;if(m.map){I=m.map.call(this.as,o,""+b,m.node),N===I?w(m.node,b):m.node&&(m.node[b]=I);return}n.is(o)&&(m.node[b]=o)}}();var f=e.obj,v=f.is,w=f.del,O=f.map,u=e.text,h=u.random,s=d.soul._,D;e.node=e.node||d;var y=e.state;y.lex=function(){return t("state.lex"),y().toString(36).replace(".","")},y.to=function(p,o,b){t("state.to");var m=(p||{})[o];return v(m)&&(m=M(m)),y.ify(b,o,y.is(p,o),m,d.soul(p))},function(){y.map=function(o,b,m){t("state.map");var I,N=v(N=o||b)?N:null;return o=j(o=o||b)?o:null,N&&!o?(b=_(b)?b:y(),N[$]=N[$]||{},O(N,p,{o:N,s:b}),N):(m=m||v(b)?b:I,b=_(b)?b:y(),function(S,E,C,B){if(!o)return p.call({o:C,s:b},S,E),S;o.call(m||this||{},S,E,C,B),!(G(C,E)&&I===C[E])&&p.call({o:C,s:b},S,E)})};function p(o,b){$!==b&&y.ify(this.o,b,this.s)}}();var f=e.obj;f.as;var G=f.has,v=f.is,O=f.map,M=f.copy,T=e.num,_=T.is,g=e.fn,j=g.is,$=d._,D,A={};(function(){A.is=function(b,m,I,N){return t("graph.is"),!b||!v(b)||k(b)?!1:!O(b,p,{cb:m,fn:I,as:N})};function p(b,m){if(!b||m!==d.soul(b)||!d.is(b,this.fn,this.as))return!0;this.cb&&(o.n=b,o.as=this.as,this.cb.call(o.as,b,m,o))}function o(b){b&&d.is(o.n,b,o.as)}})(),function(){A.ify=function(N,S,E){t("graph.ify");var C={path:[],obj:N};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof E=="string"&&(S.soul=S.soul||E,E=D),S.soul&&(C.link=n.link.ify(S.soul)),S.shell=(E||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||E,p(S,C),S.root=C.node,S.graph};function p(N,S){var E;return(E=I(N,S))?E:(S.env=N,S.soul=b,d.ify(S.obj,o,S)&&(S.link=S.link||n.link.ify(d.soul(S.node)),S.obj!==N.shell&&(N.graph[n.link.is(S.link)]=S.node)),S)}function o(N,S,E){var C=this,B=C.env,F,R;if(d._===S&&G(N,n.link._))return E._;if(F=m(N,S,E,C,B)){if(S||(C.node=C.node||E||{},G(N,d._)&&d.soul(N)&&(C.node._=M(N._)),C.node=d.soul.ify(C.node,n.link.is(C.link)),C.link=C.link||n.link.ify(d.soul(C.node))),(R=B.map)&&(R.call(B.as||{},N,S,E,C),G(E,S))){if(N=E[S],D===N){w(E,S);return}if(!(F=m(N,S,E,C,B)))return}if(!S)return C.node;if(F===!0)return N;if(R=p(B,{obj:N,path:C.path.concat(S)}),!!R.node)return R.link}}function b(N){var S=this,E=n.link.is(S.link),C=S.env.graph;S.link=S.link||n.link.ify(N),S.link[n.link._]=N,S.node&&S.node[d._]&&(S.node[d._][n.link._]=N),G(C,E)&&(C[N]=C[E],w(C,E))}function m(N,S,E,C,B){var F;if(n.is(N))return!0;if(v(N))return 1;if(F=B.invalid)return N=F.call(B.as||{},N,S,E),m(N,S,E,C,B);B.err="Invalid value at '"+C.path.concat(S).join(".")+"'!",e.list.is(N)&&(B.err+=" Use `.set(item)` instead of an Array.")}function I(N,S){for(var E=N.seen,C=E.length,B;C--;)if(B=E[C],S.obj===B.obj)return B;E.push(S)}}(),A.node=function(p){t("graph.node");var o=d.soul(p);if(o)return x({},o,p)},function(){A.to=function(o,b,m){if(t("graph.to"),!!o){var I={};return m=m||{seen:{}},O(o[b],p,{obj:I,graph:o,opt:m}),I}};function p(o,b){var m,I;if(d._===b){if(k(o,n.link._))return;this.obj[b]=M(o);return}if(!(m=n.link.is(o))){this.obj[b]=o;return}if(I=this.opt.seen[m]){this.obj[b]=I;return}this.obj[b]=this.opt.seen[m]=A.to(this.graph,m,this.opt)}}();var j=e.fn.is,f=e.obj,v=f.is,w=f.del,G=f.has,k=f.empty,x=f.put,O=f.map,M=f.copy,D;e.graph=e.graph||A}}()})(qt);var un=qt.exports,fn=un;const an=rn(fn),pt=[];function ln(r,t=Z){let e;const i=new Set;function n(a){if(ht(r,a)&&(r=a,e)){const d=!pt.length;for(const u of i)u[1](),pt.push(u,r);if(d){for(let u=0;u<pt.length;u+=2)pt[u][0](pt[u+1]);pt.length=0}}}function c(a){n(a(r))}function l(a,d=Z){const u=[a,d];return i.add(u),i.size===1&&(e=t(n,c)||Z),a(r),()=>{i.delete(u),i.size===0&&e&&(e(),e=null)}}return{set:n,update:c,subscribe:l}}const cn=an({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),ve=cn.get("cards"),Bt=document.createElement("a"),It=document.createElement("input");It.type="file";It.accept=".json";It.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const i=await t.text();Jt(JSON.parse(i))}};const $t=ln([]),Jt=r=>{ve.put({data:JSON.stringify(r)})};ve.on(r=>{$t.set(JSON.parse(r.data))});const sn=()=>{Bt.href=URL.createObjectURL(new Blob([JSON.stringify($e($t))],{type:"application/json"})),Bt.download="cards.json",Bt.click()},hn=()=>{It.click()};function re(r,t,e){const i=r.slice();return i[17]=t[e],i}function ie(r,t,e){const i=r.slice();return i[14]=t[e],i}function oe(r,t,e){const i=r.slice();return i[14]=t[e],i}function ue(r,t,e){const i=r.slice();return i[14]=t[e],i}function dn(r){let t,e,i,n=rt(ne(r[1])),c=[];for(let a=0;a<n.length;a+=1)c[a]=le(re(r,n,a));const l=a=>W(c[a],1,1,()=>{c[a]=null});return{c(){t=z("div"),e=z("section");for(let a=0;a<c.length;a+=1)c[a].c();H(e,"class","print")},m(a,d){J(a,t,d),Q(t,e);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(e,null);r[12](e),i=!0},p(a,d){if(d&2){n=rt(ne(a[1]));let u;for(u=0;u<n.length;u+=1){const h=re(a,n,u);c[u]?(c[u].p(h,d),q(c[u],1)):(c[u]=le(h),c[u].c(),q(c[u],1),c[u].m(e,null))}for(ct(),u=n.length;u<c.length;u+=1)l(u);st()}},i(a){if(!i){for(let d=0;d<n.length;d+=1)q(c[d]);i=!0}},o(a){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)W(c[d]);i=!1},d(a){a&&P(t),wt(c,a),r[12](null)}}}function pn(r){let t,e,i,n,c,l,a,d,u,h,s,y,T,_,g,$,A,j,f=r[4].length+"",v,w,G,k;i=new Nt({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),i.$on("type",r[6]),c=new at({props:{colour:"blue",$$slots:{default:[_n]},$$scope:{ctx:r}}}),c.$on("click",r[7]),a=new at({props:{colour:"blue",$$slots:{default:[yn]},$$scope:{ctx:r}}}),a.$on("click",r[8]),u=new at({props:{$$slots:{default:[vn]},$$scope:{ctx:r}}}),u.$on("click",r[9]),s=new at({props:{$$slots:{default:[bn]},$$scope:{ctx:r}}}),s.$on("click",hn),T=new at({props:{$$slots:{default:[gn]},$$scope:{ctx:r}}}),T.$on("click",sn),g=new at({props:{$$slots:{default:[kn]},$$scope:{ctx:r}}}),g.$on("click",r[10]);let x=rt(r[4]),O=[];for(let D=0;D<x.length;D+=1)O[D]=ce(ue(r,x,D));const M=D=>W(O[D],1,1,()=>{O[D]=null});return{c(){t=z("section"),e=z("div"),X(i.$$.fragment),n=L(),X(c.$$.fragment),l=L(),X(a.$$.fragment),d=L(),X(u.$$.fragment),h=L(),X(s.$$.fragment),y=L(),X(T.$$.fragment),_=L(),X(g.$$.fragment),$=L(),A=z("h1"),j=tt("cards "),v=tt(f),w=L(),G=z("section");for(let D=0;D<O.length;D+=1)O[D].c();H(e,"class","select-wrapper svelte-54h2p3"),nt(e,"background-color",r[5]),H(t,"class","button-container svelte-54h2p3"),H(G,"class","container svelte-54h2p3")},m(D,p){J(D,t,p),Q(t,e),K(i,e,null),Q(t,n),K(c,t,null),Q(t,l),K(a,t,null),Q(t,d),K(u,t,null),Q(t,h),K(s,t,null),Q(t,y),K(T,t,null),Q(t,_),K(g,t,null),J(D,$,p),J(D,A,p),Q(A,j),Q(A,v),J(D,w,p),J(D,G,p);for(let o=0;o<O.length;o+=1)O[o]&&O[o].m(G,null);k=!0},p(D,p){const o={};p&1&&(o.cardType=D[0]),i.$set(o),(!k||p&32)&&nt(e,"background-color",D[5]);const b={};p&16777216&&(b.$$scope={dirty:p,ctx:D}),c.$set(b);const m={};p&16777216&&(m.$$scope={dirty:p,ctx:D}),a.$set(m);const I={};p&16777216&&(I.$$scope={dirty:p,ctx:D}),u.$set(I);const N={};p&16777216&&(N.$$scope={dirty:p,ctx:D}),s.$set(N);const S={};p&16777216&&(S.$$scope={dirty:p,ctx:D}),T.$set(S);const E={};if(p&16777216&&(E.$$scope={dirty:p,ctx:D}),g.$set(E),(!k||p&16)&&f!==(f=D[4].length+"")&&Ae(v,f),p&18){x=rt(D[4]);let C;for(C=0;C<x.length;C+=1){const B=ue(D,x,C);O[C]?(O[C].p(B,p),q(O[C],1)):(O[C]=ce(B),O[C].c(),q(O[C],1),O[C].m(G,null))}for(ct(),C=x.length;C<O.length;C+=1)M(C);st()}},i(D){if(!k){q(i.$$.fragment,D),q(c.$$.fragment,D),q(a.$$.fragment,D),q(u.$$.fragment,D),q(s.$$.fragment,D),q(T.$$.fragment,D),q(g.$$.fragment,D);for(let p=0;p<x.length;p+=1)q(O[p]);k=!0}},o(D){W(i.$$.fragment,D),W(c.$$.fragment,D),W(a.$$.fragment,D),W(u.$$.fragment,D),W(s.$$.fragment,D),W(T.$$.fragment,D),W(g.$$.fragment,D),O=O.filter(Boolean);for(let p=0;p<O.length;p+=1)W(O[p]);k=!1},d(D){D&&(P(t),P($),P(A),P(w),P(G)),V(i),V(c),V(a),V(u),V(s),V(T),V(g),wt(O,D)}}}function fe(r){let t,e;return t=new Ft({props:{card:r[14]}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[14]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function ae(r){let t,e;return t=new Ft({props:{card:r[14],back:!0}}),{c(){X(t.$$.fragment)},m(i,n){K(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[14]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function le(r){let t,e,i,n,c,l=rt(r[17]),a=[];for(let y=0;y<l.length;y+=1)a[y]=fe(oe(r,l,y));const d=y=>W(a[y],1,1,()=>{a[y]=null});let u=rt(r[17]),h=[];for(let y=0;y<u.length;y+=1)h[y]=ae(ie(r,u,y));const s=y=>W(h[y],1,1,()=>{h[y]=null});return{c(){t=z("div");for(let y=0;y<a.length;y+=1)a[y].c();e=L(),i=z("div");for(let y=0;y<h.length;y+=1)h[y].c();n=L(),H(t,"class","page svelte-54h2p3"),H(i,"class","page svelte-54h2p3")},m(y,T){J(y,t,T);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(t,null);J(y,e,T),J(y,i,T);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(i,null);Q(i,n),c=!0},p(y,T){if(T&2){l=rt(y[17]);let _;for(_=0;_<l.length;_+=1){const g=oe(y,l,_);a[_]?(a[_].p(g,T),q(a[_],1)):(a[_]=fe(g),a[_].c(),q(a[_],1),a[_].m(t,null))}for(ct(),_=l.length;_<a.length;_+=1)d(_);st()}if(T&2){u=rt(y[17]);let _;for(_=0;_<u.length;_+=1){const g=ie(y,u,_);h[_]?(h[_].p(g,T),q(h[_],1)):(h[_]=ae(g),h[_].c(),q(h[_],1),h[_].m(i,n))}for(ct(),_=u.length;_<h.length;_+=1)s(_);st()}},i(y){if(!c){for(let T=0;T<l.length;T+=1)q(a[T]);for(let T=0;T<u.length;T+=1)q(h[T]);c=!0}},o(y){a=a.filter(Boolean);for(let T=0;T<a.length;T+=1)W(a[T]);h=h.filter(Boolean);for(let T=0;T<h.length;T+=1)W(h[T]);c=!1},d(y){y&&(P(t),P(e),P(i)),wt(a,y),wt(h,y)}}}function _n(r){let t;return{c(){t=tt("add two sided")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function yn(r){let t;return{c(){t=tt("add one sided")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function vn(r){let t;return{c(){t=tt("save")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function bn(r){let t;return{c(){t=tt("import JSON")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function gn(r){let t;return{c(){t=tt("export JSON")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function kn(r){let t;return{c(){t=tt("Download")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function mn(r){let t;return{c(){t=tt("remove")},m(e,i){J(e,t,i)},d(e){e&&P(t)}}}function ce(r){let t,e,i,n,c,l;e=new Ft({props:{card:r[14]}});function a(){return r[11](r[14])}return n=new at({props:{colour:"red",$$slots:{default:[mn]},$$scope:{ctx:r}}}),n.$on("click",a),{c(){t=z("div"),X(e.$$.fragment),i=L(),X(n.$$.fragment),c=L(),H(t,"class","wrapper svelte-54h2p3")},m(d,u){J(d,t,u),K(e,t,null),Q(t,i),K(n,t,null),Q(t,c),l=!0},p(d,u){r=d;const h={};u&16&&(h.card=r[14]),e.$set(h);const s={};u&16777216&&(s.$$scope={dirty:u,ctx:r}),n.$set(s)},i(d){l||(q(e.$$.fragment,d),q(n.$$.fragment,d),l=!0)},o(d){W(e.$$.fragment,d),W(n.$$.fragment,d),l=!1},d(d){d&&P(t),V(e),V(n)}}}function $n(r){let t,e,i,n;const c=[pn,dn],l=[];function a(d,u){return d[3]?1:0}return t=a(r),e=l[t]=c[t](r),{c(){e.c(),i=Et()},m(d,u){l[t].m(d,u),J(d,i,u),n=!0},p(d,[u]){let h=t;t=a(d),t===h?l[t].p(d,u):(ct(),W(l[h],1,1,()=>{l[h]=null}),st(),e=l[t],e?e.p(d,u):(e=l[t]=c[t](d),e.c()),q(e,1),e.m(i.parentNode,i))},i(d){n||(q(e),n=!0)},o(d){W(e),n=!1},d(d){d&&P(i),l[t].d(d)}}}function wn(r,t,e){let i,n,c;we(r,$t,A=>e(1,c=A));let l,a,d="None";const u=(A,j)=>j==="None"?A:A.filter(f=>f.cardHalf1.cardType.type===j||f.cardHalf2&&f.cardHalf2.cardType.type===j);Ge(()=>{const A=new URLSearchParams(window.location.search);e(3,a=!!A.get("download"))});const h=({detail:A})=>e(0,d=A),s=()=>{$t.set([...c,Kt(2)])},y=()=>{$t.set([...c,Kt(1)]),console.log(c.length)},T=()=>{Jt(c)},_=()=>{const A=document.createElement("a");A.href=`${window.location.href}?download=true`,A.click()},g=A=>{Jt(c.filter(j=>j.id!==A.id))};function $(A){Ht[A?"unshift":"push"](()=>{l=A,e(2,l)})}return r.$$.update=()=>{r.$$.dirty&1&&e(5,i=St(d)),r.$$.dirty&3&&e(4,n=u(c,d))},[d,c,l,a,n,i,h,s,y,T,_,g,$]}class Tn extends gt{constructor(t){super(),bt(this,t,wn,$n,ht,{})}}new Tn({target:document.getElementById("app")});
