var ye=Object.defineProperty;var ve=(r,t,e)=>t in r?ye(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Et=(r,t,e)=>ve(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const l of p.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerPolicy&&(p.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?p.credentials="include":n.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(n){if(n.ep)return;n.ep=!0;const p=e(n);fetch(n.href,p)}})();function Z(){}function be(r,t){for(const e in t)r[e]=t[e];return r}function ae(r){return r()}function Wt(){return Object.create(null)}function bt(r){r.forEach(ae)}function le(r){return typeof r=="function"}function ht(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function it(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function ge(r){return Object.keys(r).length===0}function ce(r,...t){if(r==null){for(const u of t)u(void 0);return Z}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function ke(r){let t;return ce(r,e=>t=e)(),t}function me(r,t,e){r.$$.on_destroy.push(ce(t,e))}function $e(r,t,e,u){if(r){const n=se(r,t,e,u);return r[0](n)}}function se(r,t,e,u){return r[1]&&u?be(e.ctx.slice(),r[1](u(t))):e.ctx}function we(r,t,e,u){if(r[2]&&u){const n=r[2](u(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const p=[],l=Math.max(t.dirty.length,n.length);for(let a=0;a<l;a+=1)p[a]=t.dirty[a]|n[a];return p}return t.dirty|n}return t.dirty}function Te(r,t,e,u,n,p){if(n){const l=se(t,e,u,p);r.p(l,n)}}function je(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let u=0;u<e;u++)t[u]=-1;return t}return-1}function Ut(r){return r??""}function Y(r,t){r.appendChild(t)}function F(r,t,e){r.insertBefore(t,e||null)}function J(r){r.parentNode&&r.parentNode.removeChild(r)}function Tt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function U(r){return document.createElement(r)}function nt(r){return document.createTextNode(r)}function z(){return nt(" ")}function he(){return nt("")}function vt(r,t,e,u){return r.addEventListener(t,e,u),()=>r.removeEventListener(t,e,u)}function H(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Se(r){return Array.from(r.childNodes)}function rt(r,t,e,u){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function Oe(r,t,{bubbles:e=!1,cancelable:u=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:u})}let jt;function $t(r){jt=r}function de(){if(!jt)throw new Error("Function called outside component initialization");return jt}function De(r){de().$$.on_mount.push(r)}function xe(){const r=de();return(t,e,{cancelable:u=!1}={})=>{const n=r.$$.callbacks[t];if(n){const p=Oe(t,e,{cancelable:u});return n.slice().forEach(l=>{l.call(r,p)}),!p.defaultPrevented}return!0}}function Ae(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(u=>u.call(this,t))}const _t=[],Ct=[];let yt=[];const Lt=[],Ge=Promise.resolve();let Bt=!1;function Ne(){Bt||(Bt=!0,Ge.then(pe))}function St(r){yt.push(r)}const It=new Set;let dt=0;function pe(){if(dt!==0)return;const r=jt;do{try{for(;dt<_t.length;){const t=_t[dt];dt++,$t(t),Ee(t.$$)}}catch(t){throw _t.length=0,dt=0,t}for($t(null),_t.length=0,dt=0;Ct.length;)Ct.pop()();for(let t=0;t<yt.length;t+=1){const e=yt[t];It.has(e)||(It.add(e),e())}yt.length=0}while(_t.length);for(;Lt.length;)Lt.pop()();Bt=!1,It.clear(),$t(r)}function Ee(r){if(r.fragment!==null){r.update(),bt(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(St)}}function Ie(r){const t=[],e=[];yt.forEach(u=>r.indexOf(u)===-1?t.push(u):e.push(u)),e.forEach(u=>u()),yt=t}const At=new Set;let lt;function ct(){lt={r:0,c:[],p:lt}}function st(){lt.r||bt(lt.c),lt=lt.p}function q(r,t){r&&r.i&&(At.delete(r),r.i(t))}function W(r,t,e,u){if(r&&r.o){if(At.has(r))return;At.add(r),lt.c.push(()=>{At.delete(r),u&&(e&&r.d(1),u())}),r.o(t)}else u&&u()}function et(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function X(r){r&&r.c()}function K(r,t,e){const{fragment:u,after_update:n}=r.$$;u&&u.m(t,e),St(()=>{const p=r.$$.on_mount.map(ae).filter(le);r.$$.on_destroy?r.$$.on_destroy.push(...p):bt(p),r.$$.on_mount=[]}),n.forEach(St)}function V(r,t){const e=r.$$;e.fragment!==null&&(Ie(e.after_update),bt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Me(r,t){r.$$.dirty[0]===-1&&(_t.push(r),Ne(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function gt(r,t,e,u,n,p,l=null,a=[-1]){const s=jt;$t(r);const f=r.$$={fragment:null,ctx:[],props:p,update:Z,not_equal:n,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Wt(),dirty:a,skip_bound:!1,root:t.target||s.$$.root};l&&l(f.root);let h=!1;if(f.ctx=e?e(r,t.props||{},(d,y,...$)=>{const c=$.length?$[0]:y;return f.ctx&&n(f.ctx[d],f.ctx[d]=c)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](c),h&&Me(r,d)),y}):[],f.update(),h=!0,bt(f.before_update),f.fragment=u?u(f.ctx):!1,t.target){if(t.hydrate){const d=Se(t.target);f.fragment&&f.fragment.l(d),d.forEach(J)}else f.fragment&&f.fragment.c();t.intro&&q(r.$$.fragment),K(r,t.target,t.anchor),pe()}$t(s)}class kt{constructor(){Et(this,"$$");Et(this,"$$set")}$destroy(){V(this,1),this.$destroy=Z}$on(t,e){if(!le(e))return Z;const u=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return u.push(e),()=>{const n=u.indexOf(e);n!==-1&&u.splice(n,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ce="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ce);function Be(r){let t,e,u,n,p;const l=r[2].default,a=$e(l,r,r[1],null);return{c(){t=U("button"),a&&a.c(),H(t,"class",e="button "+r[0]+" svelte-1x4k1pl")},m(s,f){F(s,t,f),a&&a.m(t,null),u=!0,n||(p=vt(t,"click",r[3]),n=!0)},p(s,[f]){a&&a.p&&(!u||f&2)&&Te(a,l,s,s[1],u?we(l,s[1],f,null):je(s[1]),null),(!u||f&1&&e!==(e="button "+s[0]+" svelte-1x4k1pl"))&&H(t,"class",e)},i(s){u||(q(a,s),u=!0)},o(s){W(a,s),u=!1},d(s){s&&J(t),a&&a.d(s),n=!1,p()}}}function He(r,t,e){let{$$slots:u={},$$scope:n}=t,{colour:p="green"}=t;function l(a){Ae.call(this,r,a)}return r.$$set=a=>{"colour"in a&&e(0,p=a.colour),"$$scope"in a&&e(1,n=a.$$scope)},[p,n,u,l]}class at extends kt{constructor(t){super(),gt(this,t,He,Be,ht,{colour:0})}}const Gt=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";default:return"#FFFFFF"}},ot=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,zt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Je(r){let t,e,u;return{c(){t=U("div"),H(t,"contenteditable","true"),H(t,"class","cardText svelte-1udja8b"),r[0].text===void 0&&St(()=>r[4].call(t))},m(n,p){F(n,t,p),r[0].text!==void 0&&(t.innerText=r[0].text),e||(u=vt(t,"input",r[4]),e=!0)},p(n,p){p&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&J(t),e=!1,u()}}}function Pe(r){let t,e;return{c(){t=U("img"),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-1udja8b")},m(u,n){F(u,t,n)},p(u,n){n&1&&!it(t.src,e=ot(u[0].cardType.type))&&H(t,"src",e)},d(u){u&&J(t)}}}function Fe(r){let t,e;function u(l,a){return l[2]?Pe:Je}let n=u(r),p=n(r);return{c(){t=U("div"),e=U("div"),p.c(),H(e,"class","card svelte-1udja8b"),rt(e,"--colour",r[3]),H(t,"class","wrapper svelte-1udja8b"),rt(t,"--rotation",r[1]+"deg")},m(l,a){F(l,t,a),Y(t,e),p.m(e,null)},p(l,[a]){n===(n=u(l))&&p?p.p(l,a):(p.d(1),p=n(l),p&&(p.c(),p.m(e,null))),a&8&&rt(e,"--colour",l[3]),a&2&&rt(t,"--rotation",l[1]+"deg")},i:Z,o:Z,d(l){l&&J(t),p.d()}}}function qe(r,t,e){let u,{card:n}=t,{rotation:p=0}=t,{back:l=!1}=t;function a(){n.text=this.innerText,e(0,n)}return r.$$set=s=>{"card"in s&&e(0,n=s.card),"rotation"in s&&e(1,p=s.rotation),"back"in s&&e(2,l=s.back)},r.$$.update=()=>{r.$$.dirty&1&&e(3,u=Gt(n.cardType.type))},[n,p,l,u,a]}class Kt extends kt{constructor(t){super(),gt(this,t,qe,Fe,ht,{card:0,rotation:1,back:2})}}function Vt(r,t,e){const u=r.slice();return u[11]=t[e],u}function Qt(r){let t,e,u,n,p,l,a,s,f,h,d,y,$=r[4]&&Xt(r);return{c(){t=U("div"),e=U("img"),n=z(),$&&$.c(),p=z(),l=U("input"),a=z(),s=U("label"),f=nt("Passive"),it(e.src,u=ot(r[0]))||H(e,"src",u),H(e,"alt","My Icon"),H(e,"class","cardIcon svelte-lm5vvd"),H(t,"class","select svelte-lm5vvd"),H(l,"type","checkbox"),H(l,"id",r[6]),H(l,"class","hidden"),H(s,"for",r[6]),H(s,"class",h="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(c,m){F(c,t,m),Y(t,e),Y(t,n),$&&$.m(t,null),F(c,p,m),F(c,l,m),l.checked=r[1],F(c,a,m),F(c,s,m),Y(s,f),d||(y=[vt(e,"click",r[7]),vt(l,"change",r[9])],d=!0)},p(c,m){m&1&&!it(e.src,u=ot(c[0]))&&H(e,"src",u),c[4]?$?$.p(c,m):($=Xt(c),$.c(),$.m(t,null)):$&&($.d(1),$=null),m&2&&(l.checked=c[1]),m&2&&h!==(h="passive no-select "+(c[1]?"":"invisible")+" svelte-lm5vvd")&&H(s,"class",h)},d(c){c&&(J(t),J(p),J(l),J(a),J(s)),$&&$.d(),d=!1,bt(y)}}}function Xt(r){let t,e=et(r[3]),u=[];for(let n=0;n<e.length;n+=1)u[n]=Yt(Vt(r,e,n));return{c(){t=U("div");for(let n=0;n<u.length;n+=1)u[n].c();H(t,"class","options svelte-lm5vvd"),rt(t,"--colour",r[5])},m(n,p){F(n,t,p);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(t,null)},p(n,p){if(p&25){e=et(n[3]);let l;for(l=0;l<e.length;l+=1){const a=Vt(n,e,l);u[l]?u[l].p(a,p):(u[l]=Yt(a),u[l].c(),u[l].m(t,null))}for(;l<u.length;l+=1)u[l].d(1);u.length=e.length}p&32&&rt(t,"--colour",n[5])},d(n){n&&J(t),Tt(u,n)}}}function Yt(r){let t,e,u,n,p;function l(){return r[8](r[11])}return{c(){t=U("img"),it(t.src,e=ot(r[11]))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class",u="cardIcon "+(r[0]===r[11]?"hidden":"")+" svelte-lm5vvd")},m(a,s){F(a,t,s),n||(p=vt(t,"click",l),n=!0)},p(a,s){r=a,s&8&&!it(t.src,e=ot(r[11]))&&H(t,"src",e),s&9&&u!==(u="cardIcon "+(r[0]===r[11]?"hidden":"")+" svelte-lm5vvd")&&H(t,"class",u)},d(a){a&&J(t),n=!1,p()}}}function Re(r){let t,e=!r[2]&&Qt(r);return{c(){e&&e.c(),t=he()},m(u,n){e&&e.m(u,n),F(u,t,n)},p(u,[n]){u[2]?e&&(e.d(1),e=null):e?e.p(u,n):(e=Qt(u),e.c(),e.m(t.parentNode,t))},i:Z,o:Z,d(u){u&&J(t),e&&e.d(u)}}}function We(r,t,e){let u,{cardType:n}=t,{passive:p=!1}=t,{back:l=!1}=t;const a=Math.random().toString(36).substring(7),s=xe();let f=!1,{names:h=["Board","Change","Deck","Movement","Mystery","Curse"]}=t;const d=()=>e(4,f=!f),y=c=>{e(0,n=c),e(4,f=!1)};function $(){p=this.checked,e(1,p)}return r.$$set=c=>{"cardType"in c&&e(0,n=c.cardType),"passive"in c&&e(1,p=c.passive),"back"in c&&e(2,l=c.back),"names"in c&&e(3,h=c.names)},r.$$.update=()=>{r.$$.dirty&1&&e(5,u=Gt(n)),r.$$.dirty&1&&s("type",n),r.$$.dirty&2&&s("passive",p)},[n,p,l,h,f,u,a,d,y,$]}class Ht extends kt{constructor(t){super(),gt(this,t,We,Re,ht,{cardType:0,passive:1,back:2,names:3})}}function Ue(r){let t,e;return{c(){t=U("img"),it(t.src,e=ot(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-15hk4fg")},m(u,n){F(u,t,n)},p(u,n){n&1&&!it(t.src,e=ot(u[0].cardType.type))&&H(t,"src",e)},i:Z,o:Z,d(u){u&&J(t)}}}function Le(r){let t,e,u,n,p,l,a;return e=new Ht({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse"]}}),e.$on("type",r[2]),{c(){t=U("p"),X(e.$$.fragment),u=z(),n=U("div"),H(t,"class","svelte-15hk4fg"),H(n,"contenteditable","true"),H(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&St(()=>r[3].call(n))},m(s,f){F(s,t,f),K(e,t,null),F(s,u,f),F(s,n,f),r[0].text!==void 0&&(n.innerText=r[0].text),p=!0,l||(a=vt(n,"input",r[3]),l=!0)},p(s,f){const h={};f&1&&(h.cardType=s[0].cardType.type),f&1&&(h.passive=s[0].cardType.passive),e.$set(h),f&1&&s[0].text!==n.innerText&&(n.innerText=s[0].text)},i(s){p||(q(e.$$.fragment,s),p=!0)},o(s){W(e.$$.fragment,s),p=!1},d(s){s&&(J(t),J(u),J(n)),V(e),l=!1,a()}}}function ze(r){let t,e,u,n;const p=[Le,Ue],l=[];function a(s,f){return s[1]?1:0}return e=a(r),u=l[e]=p[e](r),{c(){t=U("div"),u.c(),H(t,"class","card svelte-15hk4fg"),rt(t,"--colour",Gt(r[0].cardType.type))},m(s,f){F(s,t,f),l[e].m(t,null),n=!0},p(s,[f]){let h=e;e=a(s),e===h?l[e].p(s,f):(ct(),W(l[h],1,1,()=>{l[h]=null}),st(),u=l[e],u?u.p(s,f):(u=l[e]=p[e](s),u.c()),q(u,1),u.m(t,null)),(!n||f&1)&&rt(t,"--colour",Gt(s[0].cardType.type))},i(s){n||(q(u),n=!0)},o(s){W(u),n=!1},d(s){s&&J(t),l[e].d()}}}function Ke(r,t,e){let{card:u}=t,{back:n=!1}=t;const p=({detail:a})=>e(0,u.cardType.type=a,u);function l(){u.text=this.innerText,e(0,u)}return r.$$set=a=>{"card"in a&&e(0,u=a.card),"back"in a&&e(1,n=a.back)},[u,n,p,l]}class Ve extends kt{constructor(t){super(),gt(this,t,Ke,ze,ht,{card:0,back:1})}}function Qe(r){let t,e;return t=new Ve({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){X(t.$$.fragment)},m(u,n){K(t,u,n),e=!0},p(u,n){const p={};n&1&&(p.card=u[0].cardHalf1),n&2&&(p.back=u[1]),t.$set(p)},i(u){e||(q(t.$$.fragment,u),e=!0)},o(u){W(t.$$.fragment,u),e=!1},d(u){V(t,u)}}}function Xe(r){let t,e,u,n,p,l,a,s,f,h;return e=new Ht({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),e.$on("type",r[2]),e.$on("passive",r[3]),n=new Kt({props:{card:r[0].cardHalf1,back:r[1]}}),l=new Kt({props:{card:r[0].cardHalf2,rotation:180,back:r[1]}}),f=new Ht({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),f.$on("type",r[4]),f.$on("passive",r[5]),{c(){t=U("p"),X(e.$$.fragment),u=z(),X(n.$$.fragment),p=z(),X(l.$$.fragment),a=z(),s=U("p"),X(f.$$.fragment),H(t,"class","first svelte-1fv14re"),H(s,"class","second svelte-1fv14re")},m(d,y){F(d,t,y),K(e,t,null),F(d,u,y),K(n,d,y),F(d,p,y),K(l,d,y),F(d,a,y),F(d,s,y),K(f,s,null),h=!0},p(d,y){const $={};y&1&&($.cardType=d[0].cardHalf1.cardType.type),y&1&&($.passive=d[0].cardHalf1.cardType.passive),y&2&&($.back=d[1]),e.$set($);const c={};y&1&&(c.card=d[0].cardHalf1),y&2&&(c.back=d[1]),n.$set(c);const m={};y&1&&(m.card=d[0].cardHalf2),y&2&&(m.back=d[1]),l.$set(m);const w={};y&1&&(w.cardType=d[0].cardHalf2.cardType.type),y&1&&(w.passive=d[0].cardHalf2.cardType.passive),y&2&&(w.back=d[1]),f.$set(w)},i(d){h||(q(e.$$.fragment,d),q(n.$$.fragment,d),q(l.$$.fragment,d),q(f.$$.fragment,d),h=!0)},o(d){W(e.$$.fragment,d),W(n.$$.fragment,d),W(l.$$.fragment,d),W(f.$$.fragment,d),h=!1},d(d){d&&(J(t),J(u),J(p),J(a),J(s)),V(e),V(n,d),V(l,d),V(f)}}}function Ye(r){let t,e,u,n,p;const l=[Xe,Qe],a=[];function s(f,h){return f[0].cardHalf2?0:1}return e=s(r),u=a[e]=l[e](r),{c(){t=U("div"),u.c(),H(t,"class",n=Ut(`card ${r[1]&&"back"}`)+" svelte-1fv14re")},m(f,h){F(f,t,h),a[e].m(t,null),p=!0},p(f,[h]){let d=e;e=s(f),e===d?a[e].p(f,h):(ct(),W(a[d],1,1,()=>{a[d]=null}),st(),u=a[e],u?u.p(f,h):(u=a[e]=l[e](f),u.c()),q(u,1),u.m(t,null)),(!p||h&2&&n!==(n=Ut(`card ${f[1]&&"back"}`)+" svelte-1fv14re"))&&H(t,"class",n)},i(f){p||(q(u),p=!0)},o(f){W(u),p=!1},d(f){f&&J(t),a[e].d()}}}function Ze(r,t,e){let{card:u}=t,{back:n=!1}=t;const p=({detail:f})=>e(0,u.cardHalf1.cardType.type=f,u),l=({detail:f})=>e(0,u.cardHalf1.cardType.passive=f,u),a=({detail:f})=>{u.cardHalf2&&e(0,u.cardHalf2.cardType.type=f,u)},s=({detail:f})=>{u.cardHalf2&&e(0,u.cardHalf2.cardType.passive=f,u)};return r.$$set=f=>{"card"in f&&e(0,u=f.card),"back"in f&&e(1,n=f.back)},[u,n,p,l,a,s]}class Pt extends kt{constructor(t){super(),gt(this,t,Ze,Ye,ht,{card:0,back:1})}}const Zt=(r,t=9)=>{const e=[];let u=0;for(;u<r.length;)e.push(r.slice(u,t+u)),u+=t;return e};function tn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function en(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ft={exports:{}};Ft.exports;(function(r){(function(){function t(u,n){return n?en(u):u.slice?t[p(u)]:function(l,a){u(l={exports:{}}),t[p(a)]=l.exports};function p(l){return l.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(u){String.random=function(p,l){var a="";for(p=p||24,l=l||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";p-- >0;)a+=l.charAt(Math.floor(Math.random()*l.length));return a},String.match=function(p,l){var a,s;return typeof p!="string"?!1:(typeof l=="string"&&(l={"=":l}),l=l||{},a=l["="]||l["*"]||l[">"]||l["<"],p===a?!0:s!==l["="]?!1:(a=l["*"]||l[">"],p.slice(0,(a||"").length)===a?!0:s!==l["*"]?!1:s!==l[">"]&&s!==l["<"]?p>=l[">"]&&p<=l["<"]:s!==l[">"]&&p>=l[">"]||s!==l["<"]&&p<=l["<"]))},String.hash=function(p,l){if(typeof p=="string"){if(l=l||0,!p.length)return l;for(var a=0,s=p.length,f;a<s;++a)f=p.charCodeAt(a),l=(l<<5)-l+f,l|=0;return l}};var n=Object.prototype.hasOwnProperty;Object.plain=function(p){return p?p instanceof Object&&p.constructor===Object||Object.prototype.toString.call(p).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(p,l){for(var a in p)if(n.call(p,a)&&(!l||l.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(p){var l=[];for(var a in p)n.call(p,a)&&l.push(a);return l},function(){var p,l=setTimeout,a=0,s=0,f=typeof setImmediate!=""+p&&setImmediate||function(d,y){return typeof MessageChannel==""+p?l:((d=new MessageChannel).port1.onmessage=function($){$.data==""&&y()},function($){y=$,d.port2.postMessage("")})}(),h=l.check=l.check||typeof performance!=""+p&&performance||{now:function(){return+new Date}};l.hold=l.hold||9,l.poll=l.poll||function(d){if(l.hold>=h.now()-a&&s++<3333){d();return}f(function(){a=h.now(),d()},s=0)}}(),function(){var p=setTimeout,l=p.turn=p.turn||function(y){a.push(y)==1&&s(d)},a=l.s=[],s=p.poll,f=0,h,d=function(){(h=a[f++])&&h(),(f==a.length||f==99)&&(a=l.s=a.slice(f),f=0),a.length&&s(d)}}(),function(){var p,l=setTimeout,a=l.turn;(l.each=l.each||function(s,f,h,d){d=d||9,function y($,c,m){if(c=($=(s||[]).splice(0,d)).length){for(var w=0;w<c&&p===(m=f($[w]));w++);if(p===m){a(y);return}}h&&h(m)}()})()}()})(t,"./shim"),t(function(u){u.exports=function n(h,l,a){if(!h)return{to:n};var s,f=typeof l=="function",h=(this.tag||(this.tag={}))[h]||f&&(this.tag[h]={tag:h,to:n._={next:function(y){var $;($=this.to)&&$.next(y)}}});if(f){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:l,the:h,on:this,as:a};return(d.back=h.last||h).to=d,h.last=d}return(h=h.to)&&s!==l&&h.next(l),h}})(t,"./onto"),t(function(u){u.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(u){t("./shim");function n(){var h=+new Date;return s<h?(l=0,s=h+n.drift):s=h+(l+=1)/a+n.drift}n.drift=0;var p=-1/0,l=0,a=999,s=p,f;n.is=function(h,d,y){var $=d&&h&&h._&&h._[">"]||y;if($)return typeof($=$[d])=="number"?$:p},n.ify=function(h,d,y,$,c){(h=h||{})._=h._||{},c&&(h._["#"]=c);var m=h._[">"]||(h._[">"]={});return f!==d&&d!=="_"&&(typeof y=="number"&&(m[d]=y),f!==$&&(h[d]=$)),h},u.exports=n})(t,"./state"),t(function(u){t("./shim");function n(p){var l={s:{}},a=l.s;p=p||{max:999,age:1e3*9},l.check=function(f){return a[f]?s(f):!1};var s=l.track=function(f){var h=a[f]||(a[f]={});return h.was=l.now=+new Date,l.to||(l.to=setTimeout(l.drop,p.age+9)),s.ed&&s.ed(f),h};return l.drop=function(f){l.to=null,l.now=+new Date;var h=Object.keys(a);console.STAT&&console.STAT(l.now,+new Date-l.now,"dup drop keys"),setTimeout.each(h,function(d){var y=a[d];y&&(f||p.age)>l.now-y.was||delete a[d]},0,99)},l}u.exports=n})(t,"./dup"),t(function(u){t("./onto"),u.exports=function(l,a){if(this.on){var s=(this.opt||{}).lack||9e3;if(typeof l!="function"){if(!l)return;var h=l["#"]||l,f=(this.tag||"")[h];return f?(a&&(f=this.on(h,a),clearTimeout(f.err),f.err=setTimeout(function(){f.off()},s)),!0):void 0}var h=a&&a["#"]||n(9);if(!l)return h;var d=this.on(h,l,a);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},s),h}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(u){function n(c){return c instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:c}):new n(c)}n.is=function(c){return c instanceof n||c&&c._&&c===c._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(i){i.root=i.root||i,i.graph=i.graph||{},i.on=i.on||n.on,i.ask=i.ask||n.ask,i.dup=i.dup||n.dup();var b=i.$.opt(i.opt);return i.once||(i.on("in",c,i),i.on("out",c,i),i.on("put",A,i),n.on("create",i),i.on("create",i)),i.once=1,b};function c(i){if(i){if(i.out===c){this.to.next(i);return}var b=this,T=b.as,E=T.at||T,G=E.$,O=E.dup,N,C=i.DBG;if((N=i["#"])||(N=i["#"]=l(9)),!O.check(N)){if(O.track(N),N=i._,i._=typeof N=="function"?N:function(){},i.$&&i.$===(i.$._||"").$||(i.$=G),i["@"]&&!i.put&&o(i),!E.ask(i["@"],i))if(C&&(C.u=+new Date),i.put){m(i);return}else i.get&&n.on.get(i,G);C&&(C.uc=+new Date),b.to.next(i),C&&(C.ua=+new Date),!(i.nts||i.NTS)&&(i.out=c,E.on("out",i),C&&(C.ue=+new Date))}}}function m(i){if(i){var b=i._||"",T=b.root=((b.$=i.$||"")._||"").root;if(i["@"]&&b.faith&&!b.miss){i.out=c,T.on("out",i);return}b.latch=T.hatch,b.match=T.hatch=[];var E=i.put,G=b.DBG=i.DBG,O=+new Date;if(I=I||O,!(E["#"]&&E["."])){G&&(G.p=O),b["#"]=i["#"],b.msg=i,b.all=0,b.stun=1;var N=Object.keys(E);console.STAT&&console.STAT(O,((G||b).pk=+new Date)-O,"put sort");var C=0,B,P,R,L,Q,tt,mt;(function ut(Ot){if(B!=C){if(B=C,!(R=N[C])){console.STAT&&console.STAT(O,((G||b).pd=+new Date)-O,"put"),j(b);return}(L=E[R])?(mt=L._)?R!==mt["#"]?tt=g+S(R)+"soul not same.":(Q=mt[">"])||(tt=g+S(R)+"no state."):tt=g+S(R)+"no meta.":tt=g+S(R)+"no node.",P=Object.keys(L||{})}if(tt){i.err=b.err=tt,j(b);return}var qt=0,ft;for(Ot=Ot||0;Ot++<9&&(ft=P[qt++]);)if(ft!=="_"){var Dt=L[ft],Rt=Q[ft];if(d===Rt){tt=g+S(ft)+"on"+S(R)+"no state.";break}if(!s(Dt)){tt=g+S(ft)+"on"+S(R)+"bad "+typeof Dt+S(Dt);break}w(Dt,ft,R,Rt,i),++M}if((P=P.slice(qt)).length){a(ut);return}++C,P=null,ut(Ot)})()}}}n.on.put=m;function w(i,b,T,E,G){var O=G._||"",N=O.root,C=N.graph,B,P=C[T]||y,R=f(P,b,1),L=P[b],Q=O.DBG;(B=console.STAT)&&(!C[T]||!L)&&(B.has=(B.has||0)+1);var tt=x();if(E>tt){setTimeout(function(){w(i,b,T,E,G)},(B=E-tt)>D?D:B),console.STAT&&console.STAT((Q||O).Hf=+new Date,B,"future");return}if(!(E<R)&&!(!O.faith&&E===R&&(i===L||k(i)<=k(L))&&!O.miss)){O.stun++;var mt=G["#"]+O.all++,ut={toString:function(){return mt},_:O};ut.toJSON=ut.toString,N.dup.track(ut)["#"]=G["#"],Q&&(Q.ph=Q.ph||+new Date),N.on("put",{"#":ut,"@":G["@"],put:{"#":T,".":b,":":i,">":E},ok:G.ok,_:O})}}function A(i){var b;(b=(i._||"").DBG)&&(b.pa=+new Date,b.pm=b.pm||+new Date);var T=this,E=T.as,G=E.graph,O=i._,N=i.put,C=N["#"],B=N["."],P=N[":"],R=N[">"];i["#"];var L;(L=O.msg)&&(L=L.put)&&(L=L[C])&&h(L,B,R,P,C),G[C]=h(G[C],B,R,P,C),(L=(E.next||"")[C])&&L.on("in",i),j(O),T.to.next(i)}function j(i,b){var T;if(!i.stop&&!(!i.err&&0<--i.stun)&&(i.stop=1,!!(T=i.root))){var E=i.match;E.end=1,E===T.hatch&&(!(E=i.latch)||E.end?delete T.hatch:T.hatch=E),i.hatch&&i.hatch(),setTimeout.each(i.match,function(G){G&&G()}),!(!(b=i.msg)||i.err||b.err)&&(b.out=c,i.root.on("out",b),_())}}function o(i){var b=i["@"]||"",T;if(!(T=b._)){var E=(E=i.$)&&(E=E._)&&(E=E.root)&&(E=E.dup);if(!(E=E.check(b)))return;i["@"]=E["#"]||i["@"];return}T.acks=(T.acks||0)+1,(T.err=i.err)&&(i["@"]=T["#"],j(T)),T.ok=i.ok||T.ok,!T.stop&&!T.crack&&(T.crack=T.match&&T.match.push(function(){v(T)})),v(T)}function v(i){!i||!i.root||i.stun||i.acks!==i.all||i.root.on("in",{"@":i["#"],err:i.err,ok:i.err?d:i.ok||{"":1}})}var g="Error: Invalid graph!",S=function(i){return" '"+(""+i).slice(0,9)+"...' "},k=JSON.stringify,D=2147483647,x=n.state,M=0,I,_=function(){M>999&&M/-(I-(I=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){M=0})}}(),function(){n.on.get=function(m,w){var A=w._,j=m.get,o=j["#"],v=A.graph[o],g=j["."],S=A.next||(A.next={}),k=S[o],D=m._||{},x=D.DBG=m.DBG;if(x&&(x.g=+new Date),!v)return A.on("get",m);if(g){if((typeof g!="string"||d===v[g])&&!((k||"").next||"")[g]){A.on("get",m);return}v=h({},g,f(v,g),v[g],o)}v&&c(m,v),A.on("get",m)};function c(m,w){var A=+new Date,j=m._||{},o=j.DBG=m.DBG,v=m["#"],g=l(9),S=Object.keys(w||"").sort(),k=((w||"")._||"")["#"];S.length;var D=m.$._.root,x=w===D.graph[k];console.STAT&&console.STAT(A,((o||j).gk=+new Date)-A,"got keys"),w&&function M(){A=+new Date;for(var I=0,_,i={},b;I<9&&(_=S[I++]);)h(i,_,f(w,_),w[_],k);S=S.slice(I),(b={})[k]=i,i=b;var T;x&&(T=function(){},T.ram=T.faith=!0),b=S.length,console.STAT&&console.STAT(A,-(A-(A=+new Date)),"got copied some"),o&&(o.ga=+new Date),D.on("in",{"@":v,"#":g,put:i,"%":b?g=l(9):d,$:D.$,_:T,DBG:o,FOO:1}),console.STAT&&console.STAT(A,+new Date-A,"got in"),b&&setTimeout.turn(M)}(),w||D.on("in",{"@":m["#"]})}n.on.get.ack=c}(),function(){n.chain.opt=function(c){c=c||{};var m=this,w=m._,A=c.peers||c;return Object.plain(c)||(c={}),Object.plain(w.opt)||(w.opt=c),typeof A=="string"&&(A=[A]),Object.plain(w.opt.peers)||(w.opt.peers={}),A instanceof Array&&(c.peers={},A.forEach(function(j){var o={};o.id=o.url=j,c.peers[j]=w.opt.peers[j]=w.opt.peers[j]||o})),p(c,function j(o){var v=this[o];if(this&&this.hasOwnProperty(o)||typeof v=="string"||Object.empty(v)){this[o]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||p(v,j)}),w.opt.from=c,n.on("opt",w),w.opt.uuid=w.opt.uuid||function(o){return n.state().toString(36).replace(".","")+String.random(o||12)},m}}();var p=function(c,m){Object.keys(c).forEach(m,c)},l=String.random,a=setTimeout.turn,s=n.valid,f=n.state.is,h=n.state.ify,d,y={},$;n.log=function(){return!n.log.off&&$.log.apply($,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(c,m,w){return(w=n.log.once)[c]=w[c]||0,w[c]++||n.log(m)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}u.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},($=console).only=function(c,m){return $.only.i&&c===$.only.i&&$.only.i++&&($.log.apply($,arguments)||m)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(u){var n=t("./root");n.chain.back=function(a,s){var f;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var h=this,d=h._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var y=0,$=a.length,f=d;for(y;y<$;y++)f=(f||p)[a[y]];return l!==f?s?h:f:(f=d.back)?f.$.back(a,s):void 0}if(typeof a=="function"){for(var c,f={back:d};(f=f.back)&&l===(c=a(f,s)););return c}return typeof a=="number"?(d.back||d).$.back(a-1):this};var p={},l})(t,"./back"),t(function(u){var n=t("./root");n.chain.chain=function(j){var o=this,v=o._,g=new(j||o).constructor(o),S=g._,k;return S.root=k=v.root,S.id=++k.once,S.back=o._,S.on=n.on,S.on("in",n.on.in,S),S.on("out",n.on.out,S),g};function p(j){var o,v=this.as,g=v.back,S=v.root,k;if(j.$||(j.$=v.$),this.to.next(j),v.err){v.on("in",{put:v.put=d,$:v.$});return}if(o=j.get){if(S.pass&&(S.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(D){k[D]=v.lex[D]},k=j.get=j.get||{}),o["#"]||v.soul){if(o["#"]=o["#"]||v.soul,j["#"]||(j["#"]=y(9)),g=S.$.get(o["#"])._,o=o["."]){if(c(g.put,o)&&(k=g.ask&&g.ask[o],(g.ask||(g.ask={}))[o]=g.$.get(o)._,g.on("in",{get:o,put:{"#":g.soul,".":o,":":g.put[o],">":w(S.graph[g.soul],o)}}),k))return}else{if(k=g.ask&&g.ask[""],(g.ask||(g.ask={}))[""]=g,d!==g.put&&(g.on("in",g),k))return;j.$=g.$}return S.ask(f,j),S.on("in",j)}if(o["."])return v.get?(j={get:{".":v.get},$:v.$},(g.ask||(g.ask={}))[v.get]=j.$._,g.on("out",j)):(j={get:v.lex?j.get:{},$:v.$},g.on("out",j));if((v.ask||(v.ask={}))[""]=v,v.get)return o["."]=v.get,(g.ask||(g.ask={}))[v.get]=j.$._,g.on("out",j)}return g.on("out",j)}n.on.out=p;function l(j,o){o=o||this.as;var v=o.root,g=j.$||(j.$=o.$),S=(g||"")._||h,k=j.put||"",D=k["#"],x=k["."],M=d!==k["="]?k["="]:k[":"],I=k[">"]||-1/0,_;if(d!==j.put&&(d===k["#"]||d===k["."]||d===k[":"]&&d===k["="]||d===k[">"])){if(!$(k)){if(!(D=((k||"")._||"")["#"])){console.log("chain not yet supported for",k,"...",j,o);return}return g=o.root.$.get(D),setTimeout.each(Object.keys(k).sort(),function(i){i=="_"||d===(I=w(k,i))||o.on("in",{$:g,put:{"#":D,".":i,"=":k[i],">":I},VIA:j})})}o.on("in",{$:S.back.$,put:{"#":D=S.back.soul,".":x=S.has||S.get,"=":k,">":w(S.back.put,x)},via:j});return}(j.seen||"")[o.id]||((j.seen||(j.seen=function(){}))[o.id]=o,o!==S&&(Object.keys(j).forEach(function(i){k[i]=j[i]},k={}),k.get=o.get||k.get,!o.soul&&!o.has?k.$$$=k.$$$||o.$:S.soul&&(k.$=o.$,k.$$=k.$$||S.$),j=k),s(j,o),(o.soul||j.$$)&&I>=w(v.graph[D],x)&&((k=v.$.get(D)._).put=A(k.put,x,I,M,D)),!S.soul&&I>=w(v.graph[D],x)&&(_=(v.$.get(D)._.next||"")[x])&&(_.put=M,typeof(k=$(M))=="string"&&(_.put=v.$.get(k)._.put||M)),this.to&&this.to.next(j),o.any&&setTimeout.each(Object.keys(o.any),function(i){(i=o.any[i])&&i(j)},0,99),o.echo&&setTimeout.each(Object.keys(o.echo),function(i){(i=o.echo[i])&&i.on("in",j)},0,99),((j.$$||"")._||S).soul&&(_=o.next)&&(_=_[x])&&(k={},Object.keys(j).forEach(function(i){k[i]=j[i]}),k.$=(j.$$||j.$).get(k.get=x),delete k.$$,delete k.$$$,_.on("in",k)),a(j,o))}n.on.in=l;function a(j,o){if(o=o||this.as||j.$._,!(j.$$&&this!==n.on)&&!(!j.put||o.soul)){var v=j.put||"",g=v["="]||v[":"],x,S=o.root,k=S.$.get(v["#"]).get(v["."])._;if(typeof(g=$(g))!="string"){this===n.on&&((k.echo||(k.echo={}))[o.id]=o);return}if(!((k.echo||(k.echo={}))[o.id]&&!(S.pass||"")[o.id])){if(x=S.pass){if(x[g+o.id])return;x[g+o.id]=1}(k.echo||(k.echo={}))[o.id]=o,o.has&&(o.link=g);var D=S.$.get(k.link=g)._;(D.echo||(D.echo={}))[k.id]=k;var x=o.ask||"";(x[""]||o.lex)&&D.on("out",{get:{"#":g}}),setTimeout.each(Object.keys(x),function(M,I){!M||!(I=x[M])||I.on("out",{get:{"#":g,".":M}})},0,99)}}}n.on.link=a;function s(j,o){var v=j.put||"",g=d!==v["="]?v["="]:v[":"],S=o.root,k,D;if(d===g){if(o.soul&&d!==o.put||(D=(j.$$||j.$||"")._||"",j["@"]&&(d!==D.put||d!==o.put)))return;(k=o.link||j.linked)&&delete(S.$.get(k)._.echo||"")[o.id],o.has&&(o.link=null),o.put=d,setTimeout.each(Object.keys(o.next||""),function(x,M){(M=o.next[x])&&(k&&delete(S.$.get(k).get(x)._.echo||"")[M.id],M.on("in",{get:x,put:d,$:M.$}))},0,99);return}o.soul||j.$$||(k=$(g),D=j.$._||"",!((k===D.link||o.has&&!D.link)&&!((S.pass||"")[o.id]&&typeof k!="string"))&&(delete(D.echo||"")[o.id],s({get:o.get,put:d,$:j.$,linked:j.linked=j.linked||D.link},o)))}n.on.unlink=s;function f(j,o){var v=this.as,g=v.$._;g.root;var S=v.get||"",k=(j.put||"")[S["#"]]||"";if(!j.put||typeof S["."]=="string"&&d===k[S["."]]){if(d!==g.put||!g.soul&&!g.has)return;g.ack=(g.ack||0)+1,g.on("in",{get:g.get,put:g.put=d,$:g.$,"@":j["@"]});return}(j._||{}).miss=1,n.on.put(j)}var h={},d,y=String.random,$=n.valid,c=function(j,o){return j&&Object.prototype.hasOwnProperty.call(j,o)},m=n.state,w=m.is,A=m.ify})(t,"./chain"),t(function(u){var n=t("./root");n.chain.get=function(d,y,$){var c,m;if(typeof d=="string"){if(d.length==0)return(c=this.chain())._.err={err:n.log("0 length key!",d)},y&&y.call(c,c._.err),c;var w=this,A=w._,j=A.next||s;(c=j[d])||(c=d&&p(d,w)),c=c&&c.$}else if(typeof d=="function"){let x=function(M,I,_){if(!x.stun&&!((O=v.pass)&&!O[g])){var i=M.$._,b=(M.$$||"")._,T=(b||i).put,E=!i.has&&!i.soul,G={},O;if((E||h===T)&&(T=h===((O=M.put)||"")["="]?h===(O||"")[":"]?O:O[":"]:O["="]),typeof(O=n.valid(T))=="string"&&(T=h===(O=v.$.get(O)._.put)?o.not?h:T:O),!(o.not&&h===T)){if(h===o.stun){if((O=v.stun)&&O.on&&(A.$.back(function(N){if(O.on(""+N.id,G={}),(G.run||0)<x.id)return G}),!G.run&&O.on(""+i.id,G={}),!G.run&&b&&O.on(""+b.id,G={}),x.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=O.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[g]=function(){x(M,I,1)};return}if(h===T&&(_=0),(O=v.hatch)&&!O.end&&h===o.hatch&&!_){if(S[i.$._.id])return;S[i.$._.id]=1,O.push(function(){x(M,I,1)});return}S={}}if(v.pass){if(v.pass[g+i.id])return;v.pass[g+i.id]=1}if(o.on){o.ok.call(i.$,T,i.get,M,I||x);return}if(o.v2020){o.ok(M,I||x);return}Object.keys(M).forEach(function(N){O[N]=M[N]},O={}),M=O,M.put=T,o.ok.call(o.as,M,I||x)}}};var k=x;if(y===!0)return l(this,d,y,$),this;c=this;var A=c._,o=y||{},v=A.root,g;o.at=A,o.ok=d;var S={};return x.at=A,(A.any||(A.any={}))[g=String.random(7)]=x,x.off=function(){x.stun=1,A.any&&delete A.any[g]},x.rid=a,x.id=o.run||++v.once,m=v.pass,(v.pass={})[g]=1,o.out=o.out||{get:{}},A.on("out",o.out),v.pass=m,c}else{if(typeof d=="number")return this.get(""+d,y,$);if(typeof(m=f(d))=="string")return this.get(m,y,$);(m=this.get.next)&&(c=m(this,d))}return c?(y&&typeof y=="function"&&c.get(y,$),c):((c=this.chain())._.err={err:n.log("Invalid get request!",d)},y&&y.call(c,c._.err),c)};function p(d,y){var $=y._,c=$.next,m=y.chain(),w=m._;return c||(c=$.next={}),c[w.get=d]=w,y===$.root.$?w.soul=d:($.soul||$.has)&&(w.has=d),w}function l(d,y,$,c){var m=d._,w=0,A;return(A=m.soul||m.link)?y(A,c,m):m.jam?m.jam.push([y,c]):(m.jam=[[y,c]],d.get(function(o,v){if(!(h===o.put&&!m.root.opt.super&&(A=Object.keys(m.root.opt.peers).length)&&++w<=A)){v.rid(o);var g=(g=o.$)&&g._||{},S=0,k;for(A=m.jam,delete m.jam;k=A[S++];){var D=k[0];k=k[1],D&&D(g.link||g.soul||n.valid(o.put)||((o.put||{})._||{})["#"],k,o,v)}}},{out:{get:{".":!0}}}),d)}function a(d){var y=this.at||this.on;if(!d||y.soul||y.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){y.map;var $;if(($=this.seen||(this.seen={}))[d])return!0;$[d]=!0}}var s={},f=n.valid,h})(t,"./get"),t(function(u){var n=t("./root");n.chain.put=function(c,m,w){var A=this,j=A._,o=j.root;w=w||{},w.root=j.root,w.run||(w.run=o.once),p(w,j.id),w.ack=w.ack||m,w.via=w.via||A,w.data=w.data||c,w.soul||(w.soul=j.soul||typeof m=="string"&&m);var v=w.state=w.state||n.state();return typeof c=="function"?(c(function(g){w.data=g,A.put(f,f,w)}),A):w.soul?(w.$=o.$.get(w.soul),w.todo=[{it:w.data,ref:w.$}],w.turn=w.turn||d,w.ran=w.ran||l,function g(){var S=w.todo,k=S.pop(),D=k.it;k.ref&&k.ref._.id;var x,M,I,_,i;if(p(w,k.ref),(_=k.todo)&&(M=_.pop(),D=D[M],_.length&&S.push(k)),M&&(S.path||(S.path=[])).push(M),!(x=y(D))&&!(i=n.is(D))){if(!Object.plain(D)){l.err(w,"Invalid data: "+s(D)+" at "+(w.via.back(function(O){O.get&&_.push(O.get)},_=[])||_.join("."))+"."+(S.path||[]).join("."));return}for(var b=w.seen||(w.seen=[]),T=b.length;T--;)if(D===(_=b[T]).it){x=D=_.link;break}}if(M&&x)k.node=$(k.node,M,v,D);else{let O=function(N,C){var B=I.link["#"];C&&(C.off(),C.rid(N));var P=B||N.soul||(_=(N.$$||N.$)._||"").soul||_.link||((_=_.put||"")._||"")["#"]||_["#"]||((_=N.put||"")&&N.$$?_["#"]:(_["="]||_[":"]||"")["#"]);if(!B&&p(w,N.$),!P&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){O(N,C)});return}P||(P=[],(N.$$||N.$).back(function(R){if(_=R.soul||R.link)return P.push(_);P.push(R.get)}),P=P.reverse().join("/")),I.link["#"]=P,!i&&(((w.graph||(w.graph={}))[P]=I.node||(I.node={_:{}}))._["#"]=P),delete w.wait[E],I.wait&&setTimeout.each(I.wait,function(R){R&&R()}),w.ran(w)};var G=O;if(!w.seen){l.err(w,"Data at root of graph must be a node (an object).");return}w.seen.push(I={it:D,link:{},todo:i?[]:Object.keys(D).sort().reverse(),path:(S.path||[]).slice(),up:k}),k.node=$(k.node,M,v,I.link),!i&&I.todo.length&&S.push(I);var E=w.seen.length;(w.wait||(w.wait={}))[E]="",_=(I.ref=i?D:M?k.ref.get(M):k.ref)._,(_=D&&(D._||"")["#"]||_.soul||_.link)?O({soul:_}):I.ref.get(O,{run:w.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return w.ran(w);w.turn(g)}(),A):(a(w),A)};function p(c,m){if(m){m=(m._||"").id||m;var w=c.root.stun||(c.root.stun={on:n.on}),A={},j;c.stun||(c.stun=w.on("stun",function(){})),(j=w.on(""+m))&&j.the.last.next(A),!(A.run>=c.run)&&w.on(""+m,function(o){if(c.stun.end){this.off(),this.to.next(o);return}o.run=o.run||c.run,o.stun=o.stun||c.stun})}}function l(c){if(c.err){l.end(c.stun,c.root);return}if(!(c.todo.length||c.end||!Object.empty(c.wait))){c.end=1;var m=c.$.back(-1)._,w=m.root,A=m.ask(function(g){w.on("ack",g),g.err&&!g.lack&&n.log(g),++j>(c.acks||0)&&this.off(),c.ack&&c.ack(g,this)},c.opt),j=0,o=c.stun,v;(v=function(){o&&(l.end(o,w),setTimeout.each(Object.keys(o=o.add||""),function(g){(g=o[g])&&g()}))}).hatch=v,c.ack&&!c.ok&&(c.ok=c.acks||9),c.via._.on("out",{put:c.out=c.graph,ok:c.ok&&{"@":c.ok+1},opt:c.opt,"#":A,_:v})}}l.end=function(c,m){c.end=h,c.the.to===c&&c===c.the.last&&delete m.stun,c.off()},l.err=function(c,m){(c.ack||h).call(c,c.out={err:c.err=n.log(m)}),c.ran(c)};function a(c){var m=c.via._,w;c.via=c.via.back(function(A){if(A.soul||!A.get)return A.$;w=c.data,(c.data={})[A.get]=w}),(!c.via||!c.via._.soul)&&(c.via=m.root.$.get(((c.data||"")._||"")["#"]||m.$.back("opt.uuid")())),c.via.put(c.data,c.ack,c)}function s(c,m){return c&&(m=c.constructor)&&m.name||typeof c}var f,h=function(){},d=setTimeout.turn,y=n.valid,$=n.state.ify})(t,"./put"),t(function(u){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),u.exports=n})(t,"./index"),t(function(u){var n=t("./index");n.chain.on=function(a,s,f,h){var d=this,y=d._;y.root;var $;if(typeof a=="string")return s?($=y.on(a,s,f||y,h),f&&f.$&&(f.subs||(f.subs=[])).push($),d):y.on(a);var c=s;return(c=c===!0?{change:!0}:c||{}).not=1,c.on=1,d.get(a,c),d},n.chain.once=function(a,s){if(s=s||{},!a)return p(this);var f=this,h=f._,d=h.root;h.put;var y=String.random(7),$;return f.get(function(c,m,w,A){var j=this,o=j._,v=o.one||(o.one={});if(A.stun||v[y]==="")return;if(($=n.valid(c))===!0){g();return}if(typeof $=="string")return;clearTimeout((h.one||"")[y]),clearTimeout(v[y]),v[y]=setTimeout(g,s.wait||99);function g(S){if(!o.has&&!o.soul&&(o={put:c,get:m}),l===($=o.put)&&($=((w.$$||"")._||"").put),typeof n.valid($)=="string"&&($=d.$.get($)._.put,$===l&&!S)){v[y]=setTimeout(function(){g(1)},s.wait||99);return}A.stun||v[y]!==""&&(v[y]="",(h.soul||h.has)&&A.off(),a.call(j,$,o.get),clearTimeout(v[y]))}},{on:1}),f};function p(a,s,f){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(f=a.chain())._.nix=a.once(function(h,d){f._.on("in",this._)}),f._.lex=a._.lex,f}n.chain.off=function(){var a=this,s=a._,f,h=s.back;if(h)return s.ack=0,(f=h.next)&&f[s.get]&&delete f[s.get],(f=h.any)&&(delete h.any,h.any={}),(f=h.ask)&&delete f[s.get],(f=h.put)&&delete f[s.get],(f=s.soul)&&delete h.root.graph[f],(f=s.map)&&Object.keys(f).forEach(function(d,y){y=f[d],y.link&&h.root.$.get(y.link).off()}),(f=s.next)&&Object.keys(f).forEach(function(d,y){y=f[d],y.$.off()}),s.on("off",{}),a};var l})(t,"./on"),t(function(u){var n=t("./index"),p=n.chain.get.next;n.chain.get.next=function(f,h){var d;return Object.plain(h)?(d=((d=h["#"])||"")["="]||d)?f.get(d):((d=f.chain()._).lex=h,f.on("in",function(y){String.match(y.get||(y.put||"")["."],h["."]||h["#"]||h)&&d.on("in",y),this.to.next(y)}),d.$):(p||a)(f,h)},n.chain.map=function(f,h,d){var y=this,$=y._,c,m;return Object.plain(f)&&(c=f["."]?f:{".":f},f=s),f?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),m=y.chain(),y.map().on(function(w,A,j,o){var v=(f||a).call(this,w,A,j,o);if(s!==v){if(w===v)return m._.on("in",j);if(n.is(v))return m._.on("in",v._);var g={};Object.keys(j.put).forEach(function(S){g[S]=j.put[S]},g),g["="]=v,m._.on("in",{get:A,put:g})}}),m):((m=$.each)||(($.each=m=y.chain())._.lex=c||m._.lex||$.lex,m._.nix=y.back("nix"),y.on("in",l,m._)),m)};function l(f){this.to.next(f);var h=this.as,d=f.$,y=d._,$=f.put,c;!y.soul&&!f.$$||(c=h.lex)&&!String.match(f.get||($||"")["."],c["."]||c["#"]||c)||n.on.link(f,h)}var a=function(){},s})(t,"./map"),t(function(u){var n=t("./index");n.chain.set=function(p,l,a){var s=this,f=s.back(-1),h,d;return l=l||function(){},a=a||{},a.item=a.item||p,(h=((p||"")._||"")["#"])&&((p={})["#"]=h),typeof(d=n.valid(p))=="string"?s.get(h=d).put(p,l,a):n.is(p)?(s.put(function(y){p.get(function($,c,m){if(!$)return l.call(s,{err:n.log('Only a node can be linked! Not "'+m.put+'"!')});(d={})[$]={"#":$},y(d)},!0)}),p):(Object.plain(p)&&(p=f.get(h=s.back("opt.uuid")()).put(p)),s.get(h||f.back("opt.uuid")(7)).put(p,l,a))}})(t,"./set"),t(function(u){t("./shim");var n=function(){},p=JSON.parseAsync||function(f,h,d){var y,$=+new Date;try{h(y,JSON.parse(f,d),l.sucks(+new Date-$))}catch(c){h(c)}},l=JSON.stringifyAsync||function(f,h,d,y){var $,c=+new Date;try{h($,JSON.stringify(f,d,y),l.sucks(+new Date-c))}catch(m){h(m)}};l.sucks=function(f){f>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),l.sucks=n)};function a(f){var h=function(){},d=f.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var y=setTimeout.turn||setTimeout,$=f.dup,c=$.check,m=$.track,w=h.hear=function(o,v){if(o){if(d.max<=o.length)return h.say({dam:"!",err:"Message too big!"},v);h===this&&(w.d+=o.length||0,++w.c);var g=v.SH=+new Date,S=o[0],k;if(S==="["){p(o,function(D,x){if(D||!x)return h.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,x.length,"# on hear batch");var M=d.puff;(function I(){for(var _=+new Date,i=0,b;i<M&&(b=x[i++]);)h.hear(b,v);x=x.slice(i),console.STAT&&console.STAT(_,+new Date-_,"hear loop"),A(v),x.length&&y(I,0)})()}),o="";return}if(S==="{"||(o["#"]||Object.plain(o))&&(k=o)){if(k)return w.one(k,v,g);p(o,function(D,x){if(D||!x)return h.say({dam:"!",err:"DAM JSON parse error."},v);w.one(x,v,g)});return}}};w.one=function(o,v,I){var S,k,D,x,M;if(o.DBG&&(o.DBG=M={DBG:o.DBG}),M&&(M.h=I),M&&(M.hp=+new Date),(S=o["#"])||(S=o["#"]=String.random(9)),!(D=c(S))&&(k=o["##"],!(k&&(D=o["@"]||o.get&&S)&&$.check(x=D+k)))){if((o._=function(){}).via=h.leap=v,(D=o["><"])&&typeof D=="string"&&D.slice(0,99).split(",").forEach(function(_){this[_]=1},o._.yo={}),D=o.dam){(D=h.hear[D])&&D(o,v,f),m(S);return}(D=o.ok)&&(o._.near=D["/"]);var I=+new Date;M&&(M.is=I),v.SI=S,m.ed=function(_){S===_&&(m.ed=0,(_=$.s[S])&&(_.via=v,o.get&&(_.it=o)))},f.on("in",h.last=o),M&&(M.hd=+new Date),console.STAT&&console.STAT(I,+new Date-I,o.get?"msg get":o.put?"msg put":"msg"),m(S),x&&m(x),h.leap=h.last=null}},w.c=w.d=0,function(){var o=0,v;h.hash=function(k,D){var x,M,I,_=+new Date;l(k.put,function i(b,T){var E=(M||(M=I=T||"")).slice(0,32768);if(x=String.hash(E,x),M=M.slice(32768),M){y(i,0);return}console.STAT&&console.STAT(_,+new Date-_,"say json+hash"),k._.$put=I,k["##"]=x,h.say(k,D),delete k._.$put},g)};function g(k,D){var x;return D instanceof Object?(Object.keys(D).sort().forEach(S,{to:x={},on:D}),x):D}function S(k){this.to[k]=this.on[k]}h.say=function(k,D){var x;if((x=this)&&(x=x.to)&&x.next&&x.next(k),!k)return!1;var M,I,_,i=k["@"],b=k._||(k._=function(){}),T=k.DBG,E=+new Date;if(b.y=b.y||E,D||T&&(T.y=E),(M=k["#"])||(M=k["#"]=String.random(9)),!v&&m(M),!(I=k["##"])&&s!==k.put&&!b.via&&i){h.hash(k,D);return}if(!D&&i&&(D=(x=$.s[i])&&(x.via||(x=x.it)&&(x=x._)&&x.via)||(x=h.last)&&i===x["#"]&&h.leap),!D&&i)return $.s[i]?void 0:(console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1);if(i&&!k.put&&!I&&(($.s[i]||"").it||"")["##"])return!1;if(!D&&h.way)return h.way(k);if(T&&(T.yh=+new Date),!(_=b.raw)){h.raw(k,D);return}if(T&&(T.yr=+new Date),!D||!D.id){if(!Object.plain(D||d.peers))return!1;var E=+new Date;d.puff;var G=d.peers,O=Object.keys(D||d.peers||{});console.STAT&&console.STAT(E,+new Date-E,"peer keys"),function B(){var P=+new Date;v=1;var R=b.raw;b.raw=_;for(var L=0,Q;L<9&&(Q=(O||"")[L++]);)(Q=G[Q]||(D||"")[Q])&&h.say(k,Q);b.raw=R,v=0,O=O.slice(L),console.STAT&&console.STAT(P,+new Date-P,"say loop"),O.length&&(y(B,0),i&&m(i))}();return}if(!D.wire&&h.wire&&h.wire(D),M!==D.last){if(D.last=M,D===b.via||(x=b.yo)&&(x[D.url]||x[D.pid]||x[D.id]))return!1;if(console.STAT&&console.STAT(E,((T||b).yp=+new Date)-(b.y||E),"say prep"),!v&&i&&m(i),D.batch){if(D.tail=(x=D.tail||0)+_.length,D.tail<=d.pack){D.batch+=(x?",":"")+_;return}A(D)}D.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),A(D)},d.gap),j(_,D),console.STAT&&i===D.SI&&console.STAT(E,+new Date-D.SH,"say ack")}},h.say.c=h.say.d=0,h.raw=function(k,D){if(!k)return"";var x=k._||{},M,I;if(I=x.raw)return I;if(typeof k=="string")return k;var _=k["##"],i=k["@"];if(_&&i){if(!x.via&&c(i+_))return!1;if(I=($.s[i]||"").it){if(_===I["##"])return!1;I["##"]||(I["##"]=_)}}if(!k.dam&&!k["@"]){var b=0,T=[];I=d.peers;for(var E in I){var G=I[E];if(T.push(G.url||G.pid||G.id),++b>6)break}b>1&&(k["><"]=T.join())}if(k.put&&(I=k.ok)&&(k.ok={"@":(I["@"]||1)-1,"/":I["/"]==k._.near?h.near:I["/"]}),M=x.$put){I={},Object.keys(k).forEach(function(N){I[N]=k[N]}),I.put=":])([:",l(I,function(N,C){if(!N){var B=+new Date;I=C.indexOf('"put":":])([:"'),O(s,C=C.slice(0,I+6)+M+C.slice(I+14)),console.STAT&&console.STAT(B,+new Date-B,"say slice")}});return}l(k,O);function O(N,C){N||(x.raw=C,h.say(k,D))}}}();function A(o){var v=o.batch,g=typeof v=="string";if(g&&(v+="]"),o.batch=o.tail=null,!!v&&!(g?3>v.length:!v.length)){if(!g)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(S){return d.log("DAM JSON stringify error",S)}v&&j(v,o)}}function j(o,v){try{var g=v.wire;v.say?v.say(o):g.send&&g.send(o),h.say.d+=o.length||0,++h.say.c}catch{(v.queue=v.queue||[]).push(o)}}return h.near=0,h.hi=function(o){var v=o.wire,g;if(!v){h.wire(o.length&&{url:o,id:o}||o);return}o.id?d.peers[o.url||o.id]=o:(g=o.id=o.id||o.url||String.random(9),h.say({dam:"?",pid:f.opt.pid},d.peers[g]=o),delete $.s[o.last]),o.met||(h.near++,o.met=+new Date,f.on("hi",o)),g=o.queue,o.queue=[],setTimeout.each(g||[],function(S){j(S,o)},0,9)},h.bye=function(o){o.met&&--h.near,delete o.met,f.on("bye",o);var v=+new Date;v=v-(o.met||v),h.bye.time=((h.bye.time||v)+v)/2},h.hear["!"]=function(o,v){d.log("Error:",o.err)},h.hear["?"]=function(o,v){o.pid&&(v.pid||(v.pid=o.pid),o["@"])||(h.say({dam:"?",pid:d.pid,"@":o["#"]},v),delete $.s[v.last])},h.hear.mob=function(o,v){if(o.peers){var g=Object.keys(o.peers),S=g[Math.random()*g.length>>0];S&&(h.bye(v),h.hi(S))}},f.on("create",function(o){o.opt.pid=o.opt.pid||String.random(9),this.to.next(o),o.on("out",h.say)}),f.on("bye",function(o,v){o=d.peers[o.id||o]||o,this.to.next(o),o.bye?o.bye():(v=o.wire)&&v.close&&v.close(),delete d.peers[o.id],o.wire=null}),f.on("bye",function(o,v){this.to.next(o),(v=console.STAT)&&(v.peers=h.near),(v=o.url)&&setTimeout(function(){},d.lack||9e3)}),f.on("hi",function(o,v){if(this.to.next(o),(v=console.STAT)&&(v.peers=h.near),!d.super){var g=Object.keys(f.next||"");g.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(g,function(S){var k=f.next[S];if(d.super||(k.ask||"")[""]){h.say({get:{"#":S}},o);return}setTimeout.each(Object.keys(k.ask||""),function(D){D&&h.say({"##":String.hash((f.graph[S]||"")[D]),get:{"#":S,".":D}},o)})})}}),h}var s;try{u.exports=a}catch{}})(t,"./mesh"),t(function(u){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(l){if(this.to.next(l),l.once)return;var a=l.opt;if(a.WebSocket===!1)return;var s=n.window||{},f=a.WebSocket||s.WebSocket||s.webkitWebSocket||s.mozWebSocket;if(!f)return;a.WebSocket=f;var h=a.mesh=a.mesh||n.Mesh(l);h.wire||a.wire,h.wire=a.wire=d;function d(m){try{if(!m||!m.url)return A&&A(m);var w=m.url.replace(/^http/,"ws"),A=m.wire=new a.WebSocket(w);return A.onclose=function(){$(m),a.mesh.bye(m)},A.onerror=function(j){$(m)},A.onopen=function(){a.mesh.hi(m)},A.onmessage=function(j){j&&a.mesh.hear(j.data||j,m)},A}catch{a.mesh.bye(m)}}setTimeout(function(){!a.super&&l.on("out",{dam:"hi"})},1);var y=2*999;function $(m){clearTimeout(m.defer),a.peers[m.url]&&(c&&m.retry<=0||(m.retry=(m.retry||a.retry+1||60)-(-m.tried+(m.tried=+new Date)<y*4?1:0),m.defer=setTimeout(function w(){if(c&&c.hidden)return setTimeout(w,y);d(m)},y)))}var c=""+p!=typeof document&&document});var p})(t,"./websocket"),t(function(u){if(!(typeof Gun>"u")){var n=function(){},p;try{p=(Gun.window||n).localStorage}catch{}p||(Gun.log("Warning: No localStorage exists to persist data to!"),p={setItem:function(a,s){this[a]=s},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var l=JSON.stringifyAsync||function(a,s,f,h){var d;try{s(d,JSON.stringify(a,f,h))}catch(y){s(y)}};Gun.on("create",function a(s){this.to.next(s);var f=s.opt;s.graph;var h=[],d,y,$,c;if(f.localStorage===!1)return;f.prefix=f.file||"gun/";try{d=a[f.prefix]=a[f.prefix]||JSON.parse($=p.getItem(f.prefix))||{}}catch{d=a[f.prefix]={}}$=($||"").length,s.on("get",function(w){this.to.next(w);var A=w.get,j,o,v,g;!A||!(j=A["#"])||(o=d[j]||g,o&&(v=A["."])&&!Object.plain(v)&&(o=Gun.state.ify({},v,Gun.state.is(o,v),o[v],j)),Gun.on.get.ack(w,o))}),s.on("put",function(w){this.to.next(w);var A=w.put,j=A["#"],o=A["."],v=w["#"],g=w.ok||"";if(d[j]=Gun.state.ify(d[j],o,A[">"],A[":"],j),c&&$>4999880){s.on("in",{"@":v,err:"localStorage max!"});return}!w["@"]&&(!w._.via||Math.random()<g["@"]/g["/"])&&h.push(v),!y&&(y=setTimeout(m,9+$/333))});function m(){if(!h.length&&((setTimeout.turn||"").s||"").length){setTimeout(m,99);return}var w=h;clearTimeout(y),y=!1,h=[],l(d,function(A,j){try{!A&&p.setItem(f.prefix,j)}catch(o){A=c=o||"localStorage failure"}A&&(Gun.log(A+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),s.on("localStorage:error",{err:A,get:f.prefix,put:d})),$=j.length,setTimeout.each(w,function(o){s.on("in",{"@":o,err:A,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var I;if(""+I!=typeof Gun){var t=function(_){console.warn("Warning! Deprecated internal utility will break in next version:",_)},e=Gun;e.fn=e.fn||{is:function(_){return t("fn"),!!_&&typeof _=="function"}},e.bi=e.bi||{is:function(_){return t("bi"),_ instanceof Boolean||typeof _=="boolean"}},e.num=e.num||{is:function(_){return t("num"),!u(_)&&(_-parseFloat(_)+1>=0||_===1/0||_===-1/0)}},e.text=e.text||{is:function(_){return t("text"),typeof _=="string"}},e.text.ify=e.text.ify||function(_){return t("text.ify"),e.text.is(_)?_:typeof JSON<"u"?JSON.stringify(_):_&&_.toString?_.toString():_},e.text.random=e.text.random||function(_,i){t("text.random");var b="";for(_=_||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";_>0;)b+=i.charAt(Math.floor(Math.random()*i.length)),_--;return b},e.text.match=e.text.match||function(_,i){var b,T;return t("text.match"),typeof _!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},b=i["="]||i["*"]||i[">"]||i["<"],_===b?!0:T!==i["="]?!1:(b=i["*"]||i[">"]||i["<"],_.slice(0,(b||"").length)===b?!0:T!==i["*"]?!1:T!==i[">"]&&T!==i["<"]?_>=i[">"]&&_<=i["<"]:T!==i[">"]&&_>=i[">"]||T!==i["<"]&&_<=i["<"]))},e.text.hash=e.text.hash||function(_,i){if(t("text.hash"),typeof _=="string"){if(i=i||0,!_.length)return i;for(var b=0,T=_.length,E;b<T;++b)E=_.charCodeAt(b),i=(i<<5)-i+E,i|=0;return i}},e.list=e.list||{is:function(_){return t("list"),_ instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(_){return t("list.sort"),function(i,b){return!i||!b?0:(i=i[_],b=b[_],i<b?-1:i>b?1:0)}},e.list.map=e.list.map||function(_,i,b){return t("list.map"),x(_,i,b)},e.list.index=1,e.obj=e.boj||{is:function(_){return t("obj"),_?_ instanceof Object&&_.constructor===Object||Object.prototype.toString.call(_).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(_,i,b){return t("obj.put"),(_||{})[i]=b,_},e.obj.has=e.obj.has||function(_,i){return t("obj.has"),_&&Object.prototype.hasOwnProperty.call(_,i)},e.obj.del=e.obj.del||function(_,i){if(t("obj.del"),!!_)return _[i]=null,delete _[i],_},e.obj.as=e.obj.as||function(_,i,b,T){return t("obj.as"),_[i]=_[i]||(T===b?{}:b)},e.obj.ify=e.obj.ify||function(_){if(t("obj.ify"),v(_))return _;try{_=JSON.parse(_)}catch{_={}}return _},function(){var _;function i(b,T){S(this,T)&&_!==this[T]||(this[T]=b)}e.obj.to=e.obj.to||function(b,T){return t("obj.to"),T=T||{},x(b,i,T),T}}(),e.obj.copy=e.obj.copy||function(_){return t("obj.copy"),_&&JSON.parse(JSON.stringify(_))},function(){function _(i,b){var T=this.n,E;if(!(T&&(b===T||v(T)&&S(T,b)))&&E!==b)return!0}e.obj.empty=e.obj.empty||function(i,b){return t("obj.empty"),i?!x(i,_,{n:b}):!0}}(),function(){function _(T,E){if(arguments.length===2){_.r=_.r||{},_.r[T]=E;return}_.r=_.r||[],_.r.push(T)}var i=Object.keys,b;Object.keys=Object.keys||function(T){return b(T,function(E,G,O){O(G)})},e.obj.map=b=e.obj.map||function(T,E,G){t("obj.map");var O,N=0,C,B,P,R,L=typeof E=="function";if(_.r=O,i&&v(T)&&(P=i(T),R=!0),G=G||{},u(T)||P)for(C=(P||T).length;N<C;N++){var Q=N+e.list.index;if(L){if(B=R?E.call(G,T[P[N]],P[N],_):E.call(G,T[N],Q,_),B!==O)return B}else if(E===T[R?P[N]:N])return P?P[N]:Q}else for(N in T)if(L){if(S(T,N)&&(B=G?E.call(G,T[N],N,_):E(T[N],N,_),B!==O))return B}else if(E===T[N])return N;return L?_.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(_){return t("time"),_?_ instanceof Date:+new Date().getTime()};var j=e.fn.is,u=e.list.is,o=e.obj,v=o.is,S=o.has,x=o.map,n={};n.is=function(_){return t("val.is"),_===I?!1:_===null?!0:_===1/0?!1:a(_)||l(_)||c(_)?!0:n.link.is(_)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(i){if(t("val.link.is"),i&&i[p]&&!i._&&v(i)){var b={};if(x(i,_,b),b.id)return b.id}return!1};function _(i,b){var T=this;if(T.id)return T.id=!1;if(b==p&&a(i))T.id=i;else return T.id=!1}}(),n.link.ify=function(_){return t("val.link.ify"),D({},p,_)},e.obj.has._=".";var p=n.link._,I,l=e.bi.is,c=e.num.is,a=e.text.is,o=e.obj,v=o.is,D=o.put,x=o.map;e.val=e.val||n;var s={_:"_"};s.soul=function(_,i){return t("node.soul"),_&&_._&&_._[i||d]},s.soul.ify=function(_,i){return t("node.soul.ify"),i=typeof i=="string"?{soul:i}:i||{},_=_||{},_._=_._||{},_._[d]=i.soul||_._[d]||h(),_},s.soul._=n.link._,function(){s.is=function(i,b,T){t("node.is");var E;return v(i)&&(E=s.soul(i))?!x(i,_,{as:T,cb:b,s:E,n:i}):!1};function _(i,b){if(b!==s._){if(!n.is(i))return!0;this.cb&&this.cb.call(this.as,i,b,this.n,this.s)}}}(),function(){s.ify=function(i,b,T){return t("node.ify"),b?typeof b=="string"?b={soul:b}:typeof b=="function"&&(b={map:b}):b={},b.map&&(b.node=b.map.call(T,i,I,b.node||{})),(b.node=s.soul.ify(b.node||{},b))&&x(i,_,{o:b,as:T}),b.node};function _(i,b){var T=this.o,E,G;if(T.map){E=T.map.call(this.as,i,""+b,T.node),G===E?g(T.node,b):T.node&&(T.node[b]=E);return}n.is(i)&&(T.node[b]=i)}}();var o=e.obj,v=o.is,g=o.del,x=o.map,f=e.text,h=f.random,d=s.soul._,I;e.node=e.node||s;var y=e.state;y.lex=function(){return t("state.lex"),y().toString(36).replace(".","")},y.to=function(_,i,b){t("state.to");var T=(_||{})[i];return v(T)&&(T=M(T)),y.ify(b,i,y.is(_,i),T,s.soul(_))},function(){y.map=function(i,b,T){t("state.map");var E,G=v(G=i||b)?G:null;return i=j(i=i||b)?i:null,G&&!i?(b=c(b)?b:y(),G[w]=G[w]||{},x(G,_,{o:G,s:b}),G):(T=T||v(b)?b:E,b=c(b)?b:y(),function(O,N,C,B){if(!i)return _.call({o:C,s:b},O,N),O;i.call(T||this||{},O,N,C,B),!(S(C,N)&&E===C[N])&&_.call({o:C,s:b},O,N)})};function _(i,b){w!==b&&y.ify(this.o,b,this.s)}}();var o=e.obj;o.as;var S=o.has,v=o.is,x=o.map,M=o.copy,$=e.num,c=$.is,m=e.fn,j=m.is,w=s._,I,A={};(function(){A.is=function(b,T,E,G){return t("graph.is"),!b||!v(b)||k(b)?!1:!x(b,_,{cb:T,fn:E,as:G})};function _(b,T){if(!b||T!==s.soul(b)||!s.is(b,this.fn,this.as))return!0;this.cb&&(i.n=b,i.as=this.as,this.cb.call(i.as,b,T,i))}function i(b){b&&s.is(i.n,b,i.as)}})(),function(){A.ify=function(G,O,N){t("graph.ify");var C={path:[],obj:G};return O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O.map=O):O={},typeof N=="string"&&(O.soul=O.soul||N,N=I),O.soul&&(C.link=n.link.ify(O.soul)),O.shell=(N||{}).shell,O.graph=O.graph||{},O.seen=O.seen||[],O.as=O.as||N,_(O,C),O.root=C.node,O.graph};function _(G,O){var N;return(N=E(G,O))?N:(O.env=G,O.soul=b,s.ify(O.obj,i,O)&&(O.link=O.link||n.link.ify(s.soul(O.node)),O.obj!==G.shell&&(G.graph[n.link.is(O.link)]=O.node)),O)}function i(G,O,N){var C=this,B=C.env,P,R;if(s._===O&&S(G,n.link._))return N._;if(P=T(G,O,N,C,B)){if(O||(C.node=C.node||N||{},S(G,s._)&&s.soul(G)&&(C.node._=M(G._)),C.node=s.soul.ify(C.node,n.link.is(C.link)),C.link=C.link||n.link.ify(s.soul(C.node))),(R=B.map)&&(R.call(B.as||{},G,O,N,C),S(N,O))){if(G=N[O],I===G){g(N,O);return}if(!(P=T(G,O,N,C,B)))return}if(!O)return C.node;if(P===!0)return G;if(R=_(B,{obj:G,path:C.path.concat(O)}),!!R.node)return R.link}}function b(G){var O=this,N=n.link.is(O.link),C=O.env.graph;O.link=O.link||n.link.ify(G),O.link[n.link._]=G,O.node&&O.node[s._]&&(O.node[s._][n.link._]=G),S(C,N)&&(C[G]=C[N],g(C,N))}function T(G,O,N,C,B){var P;if(n.is(G))return!0;if(v(G))return 1;if(P=B.invalid)return G=P.call(B.as||{},G,O,N),T(G,O,N,C,B);B.err="Invalid value at '"+C.path.concat(O).join(".")+"'!",e.list.is(G)&&(B.err+=" Use `.set(item)` instead of an Array.")}function E(G,O){for(var N=G.seen,C=N.length,B;C--;)if(B=N[C],O.obj===B.obj)return B;N.push(O)}}(),A.node=function(_){t("graph.node");var i=s.soul(_);if(i)return D({},i,_)},function(){A.to=function(i,b,T){if(t("graph.to"),!!i){var E={};return T=T||{seen:{}},x(i[b],_,{obj:E,graph:i,opt:T}),E}};function _(i,b){var T,E;if(s._===b){if(k(i,n.link._))return;this.obj[b]=M(i);return}if(!(T=n.link.is(i))){this.obj[b]=i;return}if(E=this.opt.seen[T]){this.obj[b]=E;return}this.obj[b]=this.opt.seen[T]=A.to(this.graph,T,this.opt)}}();var j=e.fn.is,o=e.obj,v=o.is,g=o.del,S=o.has,k=o.empty,D=o.put,x=o.map,M=o.copy,I;e.graph=e.graph||A}}()})(Ft);var nn=Ft.exports,rn=nn;const on=tn(rn),pt=[];function un(r,t=Z){let e;const u=new Set;function n(a){if(ht(r,a)&&(r=a,e)){const s=!pt.length;for(const f of u)f[1](),pt.push(f,r);if(s){for(let f=0;f<pt.length;f+=2)pt[f][0](pt[f+1]);pt.length=0}}}function p(a){n(a(r))}function l(a,s=Z){const f=[a,s];return u.add(f),u.size===1&&(e=t(n,p)||Z),a(r),()=>{u.delete(f),u.size===0&&e&&(e(),e=null)}}return{set:n,update:p,subscribe:l}}const fn=on({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),_e=fn.get("cards"),Mt=document.createElement("a"),Nt=document.createElement("input");Nt.type="file";Nt.accept=".json";Nt.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const u=await t.text();Jt(JSON.parse(u))}};const wt=un([]),Jt=r=>{_e.put({data:JSON.stringify(r)})};_e.on(r=>{wt.set(JSON.parse(r.data))});const an=()=>{Mt.href=URL.createObjectURL(new Blob([JSON.stringify(ke(wt))],{type:"application/json"})),Mt.download="cards.json",Mt.click()},ln=()=>{Nt.click()};function te(r,t,e){const u=r.slice();return u[12]=t[e],u}function ee(r,t,e){const u=r.slice();return u[9]=t[e],u}function ne(r,t,e){const u=r.slice();return u[9]=t[e],u}function re(r,t,e){const u=r.slice();return u[9]=t[e],u}function cn(r){let t,e,u,n=et(Zt(r[2])),p=[];for(let a=0;a<n.length;a+=1)p[a]=ue(te(r,n,a));const l=a=>W(p[a],1,1,()=>{p[a]=null});return{c(){t=U("div"),e=U("section");for(let a=0;a<p.length;a+=1)p[a].c();H(e,"class","print")},m(a,s){F(a,t,s),Y(t,e);for(let f=0;f<p.length;f+=1)p[f]&&p[f].m(e,null);r[8](e),u=!0},p(a,s){if(s&4){n=et(Zt(a[2]));let f;for(f=0;f<n.length;f+=1){const h=te(a,n,f);p[f]?(p[f].p(h,s),q(p[f],1)):(p[f]=ue(h),p[f].c(),q(p[f],1),p[f].m(e,null))}for(ct(),f=n.length;f<p.length;f+=1)l(f);st()}},i(a){if(!u){for(let s=0;s<n.length;s+=1)q(p[s]);u=!0}},o(a){p=p.filter(Boolean);for(let s=0;s<p.length;s+=1)W(p[s]);u=!1},d(a){a&&J(t),Tt(p,a),r[8](null)}}}function sn(r){let t,e,u,n,p,l,a,s,f,h,d,y,$,c,m,w,A;e=new at({props:{colour:"blue",$$slots:{default:[hn]},$$scope:{ctx:r}}}),e.$on("click",r[3]),n=new at({props:{colour:"blue",$$slots:{default:[dn]},$$scope:{ctx:r}}}),n.$on("click",r[4]),l=new at({props:{$$slots:{default:[pn]},$$scope:{ctx:r}}}),l.$on("click",r[5]),s=new at({props:{$$slots:{default:[_n]},$$scope:{ctx:r}}}),s.$on("click",ln),h=new at({props:{$$slots:{default:[yn]},$$scope:{ctx:r}}}),h.$on("click",an),y=new at({props:{$$slots:{default:[vn]},$$scope:{ctx:r}}}),y.$on("click",r[6]);let j=et(r[2]),o=[];for(let g=0;g<j.length;g+=1)o[g]=fe(re(r,j,g));const v=g=>W(o[g],1,1,()=>{o[g]=null});return{c(){t=U("section"),X(e.$$.fragment),u=z(),X(n.$$.fragment),p=z(),X(l.$$.fragment),a=z(),X(s.$$.fragment),f=z(),X(h.$$.fragment),d=z(),X(y.$$.fragment),$=z(),c=U("h1"),c.textContent="cards",m=z(),w=U("section");for(let g=0;g<o.length;g+=1)o[g].c();H(t,"class","button-container svelte-1xvw0za"),H(w,"class","container svelte-1xvw0za")},m(g,S){F(g,t,S),K(e,t,null),Y(t,u),K(n,t,null),Y(t,p),K(l,t,null),Y(t,a),K(s,t,null),Y(t,f),K(h,t,null),Y(t,d),K(y,t,null),F(g,$,S),F(g,c,S),F(g,m,S),F(g,w,S);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(w,null);A=!0},p(g,S){const k={};S&524288&&(k.$$scope={dirty:S,ctx:g}),e.$set(k);const D={};S&524288&&(D.$$scope={dirty:S,ctx:g}),n.$set(D);const x={};S&524288&&(x.$$scope={dirty:S,ctx:g}),l.$set(x);const M={};S&524288&&(M.$$scope={dirty:S,ctx:g}),s.$set(M);const I={};S&524288&&(I.$$scope={dirty:S,ctx:g}),h.$set(I);const _={};if(S&524288&&(_.$$scope={dirty:S,ctx:g}),y.$set(_),S&4){j=et(g[2]);let i;for(i=0;i<j.length;i+=1){const b=re(g,j,i);o[i]?(o[i].p(b,S),q(o[i],1)):(o[i]=fe(b),o[i].c(),q(o[i],1),o[i].m(w,null))}for(ct(),i=j.length;i<o.length;i+=1)v(i);st()}},i(g){if(!A){q(e.$$.fragment,g),q(n.$$.fragment,g),q(l.$$.fragment,g),q(s.$$.fragment,g),q(h.$$.fragment,g),q(y.$$.fragment,g);for(let S=0;S<j.length;S+=1)q(o[S]);A=!0}},o(g){W(e.$$.fragment,g),W(n.$$.fragment,g),W(l.$$.fragment,g),W(s.$$.fragment,g),W(h.$$.fragment,g),W(y.$$.fragment,g),o=o.filter(Boolean);for(let S=0;S<o.length;S+=1)W(o[S]);A=!1},d(g){g&&(J(t),J($),J(c),J(m),J(w)),V(e),V(n),V(l),V(s),V(h),V(y),Tt(o,g)}}}function ie(r){let t,e;return t=new Pt({props:{card:r[9]}}),{c(){X(t.$$.fragment)},m(u,n){K(t,u,n),e=!0},p(u,n){const p={};n&4&&(p.card=u[9]),t.$set(p)},i(u){e||(q(t.$$.fragment,u),e=!0)},o(u){W(t.$$.fragment,u),e=!1},d(u){V(t,u)}}}function oe(r){let t,e;return t=new Pt({props:{card:r[9],back:!0}}),{c(){X(t.$$.fragment)},m(u,n){K(t,u,n),e=!0},p(u,n){const p={};n&4&&(p.card=u[9]),t.$set(p)},i(u){e||(q(t.$$.fragment,u),e=!0)},o(u){W(t.$$.fragment,u),e=!1},d(u){V(t,u)}}}function ue(r){let t,e,u,n,p,l=et(r[12]),a=[];for(let y=0;y<l.length;y+=1)a[y]=ie(ne(r,l,y));const s=y=>W(a[y],1,1,()=>{a[y]=null});let f=et(r[12]),h=[];for(let y=0;y<f.length;y+=1)h[y]=oe(ee(r,f,y));const d=y=>W(h[y],1,1,()=>{h[y]=null});return{c(){t=U("div");for(let y=0;y<a.length;y+=1)a[y].c();e=z(),u=U("div");for(let y=0;y<h.length;y+=1)h[y].c();n=z(),H(t,"class","page svelte-1xvw0za"),H(u,"class","page svelte-1xvw0za")},m(y,$){F(y,t,$);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(t,null);F(y,e,$),F(y,u,$);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(u,null);Y(u,n),p=!0},p(y,$){if($&4){l=et(y[12]);let c;for(c=0;c<l.length;c+=1){const m=ne(y,l,c);a[c]?(a[c].p(m,$),q(a[c],1)):(a[c]=ie(m),a[c].c(),q(a[c],1),a[c].m(t,null))}for(ct(),c=l.length;c<a.length;c+=1)s(c);st()}if($&4){f=et(y[12]);let c;for(c=0;c<f.length;c+=1){const m=ee(y,f,c);h[c]?(h[c].p(m,$),q(h[c],1)):(h[c]=oe(m),h[c].c(),q(h[c],1),h[c].m(u,n))}for(ct(),c=f.length;c<h.length;c+=1)d(c);st()}},i(y){if(!p){for(let $=0;$<l.length;$+=1)q(a[$]);for(let $=0;$<f.length;$+=1)q(h[$]);p=!0}},o(y){a=a.filter(Boolean);for(let $=0;$<a.length;$+=1)W(a[$]);h=h.filter(Boolean);for(let $=0;$<h.length;$+=1)W(h[$]);p=!1},d(y){y&&(J(t),J(e),J(u)),Tt(a,y),Tt(h,y)}}}function hn(r){let t;return{c(){t=nt("add two sided")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function dn(r){let t;return{c(){t=nt("add one sided")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function pn(r){let t;return{c(){t=nt("save")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function _n(r){let t;return{c(){t=nt("import JSON")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function yn(r){let t;return{c(){t=nt("export JSON")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function vn(r){let t;return{c(){t=nt("Download")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function bn(r){let t;return{c(){t=nt("remove")},m(e,u){F(e,t,u)},d(e){e&&J(t)}}}function fe(r){let t,e,u,n,p,l;e=new Pt({props:{card:r[9]}});function a(){return r[7](r[9])}return n=new at({props:{colour:"red",$$slots:{default:[bn]},$$scope:{ctx:r}}}),n.$on("click",a),{c(){t=U("div"),X(e.$$.fragment),u=z(),X(n.$$.fragment),p=z(),H(t,"class","wrapper svelte-1xvw0za")},m(s,f){F(s,t,f),K(e,t,null),Y(t,u),K(n,t,null),Y(t,p),l=!0},p(s,f){r=s;const h={};f&4&&(h.card=r[9]),e.$set(h);const d={};f&524288&&(d.$$scope={dirty:f,ctx:r}),n.$set(d)},i(s){l||(q(e.$$.fragment,s),q(n.$$.fragment,s),l=!0)},o(s){W(e.$$.fragment,s),W(n.$$.fragment,s),l=!1},d(s){s&&J(t),V(e),V(n)}}}function gn(r){let t,e,u,n;const p=[sn,cn],l=[];function a(s,f){return s[1]?1:0}return t=a(r),e=l[t]=p[t](r),{c(){e.c(),u=he()},m(s,f){l[t].m(s,f),F(s,u,f),n=!0},p(s,[f]){let h=t;t=a(s),t===h?l[t].p(s,f):(ct(),W(l[h],1,1,()=>{l[h]=null}),st(),e=l[t],e?e.p(s,f):(e=l[t]=p[t](s),e.c()),q(e,1),e.m(u.parentNode,u))},i(s){n||(q(e),n=!0)},o(s){W(e),n=!1},d(s){s&&J(u),l[t].d(s)}}}function kn(r,t,e){let u;me(r,wt,y=>e(2,u=y));let n,p;De(()=>{const y=new URLSearchParams(window.location.search);e(1,p=!!y.get("download"))});const l=()=>{wt.set([...u,zt(2)])},a=()=>{wt.set([...u,zt(1)]),console.log(u.length)},s=()=>{Jt(u)},f=()=>{const y=document.createElement("a");y.href=`${window.location.href}?download=true`,y.click()},h=y=>{Jt(u.filter($=>$.id!==y.id))};function d(y){Ct[y?"unshift":"push"](()=>{n=y,e(0,n)})}return[n,p,u,l,a,s,f,h,d]}class mn extends kt{constructor(t){super(),gt(this,t,kn,gn,ht,{})}}new mn({target:document.getElementById("app")});
