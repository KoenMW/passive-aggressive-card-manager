var Ct=Object.defineProperty;var Gt=(n,e,t)=>e in n?Ct(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var qe=(n,e,t)=>Gt(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}})();function re(){}function xt(n,e){for(const t in e)n[t]=e[t];return n}function mt(n){return n()}function et(){return Object.create(null)}function me(n){n.forEach(mt)}function $t(n){return typeof n=="function"}function ue(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ee;function he(n,e){return n===e?!0:(Ee||(Ee=document.createElement("a")),Ee.href=e,n===Ee.href)}function Ht(n){return Object.keys(n).length===0}function wt(n,...e){if(n==null){for(const o of e)o(void 0);return re}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Et(n){let e;return wt(n,t=>e=t)(),e}function Pe(n,e,t){n.$$.on_destroy.push(wt(e,t))}function Ft(n,e,t,o){if(n){const r=Tt(n,e,t,o);return n[0](r)}}function Tt(n,e,t,o){return n[1]&&o?xt(t.ctx.slice(),n[1](o(e))):t.ctx}function It(n,e,t,o){if(n[2]&&o){const r=n[2](o(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const c=[],a=Math.max(e.dirty.length,r.length);for(let f=0;f<a;f+=1)c[f]=e.dirty[f]|r[f];return c}return e.dirty|r}return e.dirty}function Mt(n,e,t,o,r,c){if(r){const a=Tt(e,t,o,c);n.p(a,r)}}function Bt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let o=0;o<t;o++)e[o]=-1;return e}return-1}function tt(n){return n??""}function U(n,e){n.appendChild(e)}function P(n,e,t){n.insertBefore(e,t||null)}function B(n){n.parentNode&&n.parentNode.removeChild(n)}function Se(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function R(n){return document.createElement(n)}function ee(n){return document.createTextNode(n)}function V(){return ee(" ")}function Je(){return ee("")}function le(n,e,t,o){return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}function M(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Pt(n){return Array.from(n.childNodes)}function Oe(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ie(n,e){n.value=e??""}function ie(n,e,t,o){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Jt(n,e,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:o})}function nt(n,e){return new n(e)}let Ge;function Ce(n){Ge=n}function Lt(){if(!Ge)throw new Error("Function called outside component initialization");return Ge}function qt(){const n=Lt();return(e,t,{cancelable:o=!1}={})=>{const r=n.$$.callbacks[e];if(r){const c=Jt(e,t,{cancelable:o});return r.slice().forEach(a=>{a.call(n,c)}),!c.defaultPrevented}return!0}}function zt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(o=>o.call(this,e))}const Te=[],xe=[];let je=[];const Re=[],Wt=Promise.resolve();let Ue=!1;function Rt(){Ue||(Ue=!0,Wt.then(St))}function He(n){je.push(n)}function jt(n){Re.push(n)}const ze=new Set;let $e=0;function St(){if($e!==0)return;const n=Ge;do{try{for(;$e<Te.length;){const e=Te[$e];$e++,Ce(e),Ut(e.$$)}}catch(e){throw Te.length=0,$e=0,e}for(Ce(null),Te.length=0,$e=0;xe.length;)xe.pop()();for(let e=0;e<je.length;e+=1){const t=je[e];ze.has(t)||(ze.add(t),t())}je.length=0}while(Te.length);for(;Re.length;)Re.pop()();Ue=!1,ze.clear(),Ce(n)}function Ut(n){if(n.fragment!==null){n.update(),me(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(He)}}function Kt(n){const e=[],t=[];je.forEach(o=>n.indexOf(o)===-1?e.push(o):t.push(o)),t.forEach(o=>o()),je=e}const Fe=new Set;let ge;function pe(){ge={r:0,c:[],p:ge}}function _e(){ge.r||me(ge.c),ge=ge.p}function W(n,e){n&&n.i&&(Fe.delete(n),n.i(e))}function K(n,e,t,o){if(n&&n.o){if(Fe.has(n))return;Fe.add(n),ge.c.push(()=>{Fe.delete(n),o&&(t&&n.d(1),o())}),n.o(e)}else o&&o()}function oe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ot(n,e,t){const o=n.$$.props[e];o!==void 0&&(n.$$.bound[o]=t,t(n.$$.ctx[o]))}function Z(n){n&&n.c()}function X(n,e,t){const{fragment:o,after_update:r}=n.$$;o&&o.m(e,t),He(()=>{const c=n.$$.on_mount.map(mt).filter($t);n.$$.on_destroy?n.$$.on_destroy.push(...c):me(c),n.$$.on_mount=[]}),r.forEach(He)}function Y(n,e){const t=n.$$;t.fragment!==null&&(Kt(t.after_update),me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vt(n,e){n.$$.dirty[0]===-1&&(Te.push(n),Rt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ce(n,e,t,o,r,c,a=null,f=[-1]){const h=Ge;Ce(n);const l=n.$$={fragment:null,ctx:[],props:c,update:re,not_equal:r,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:et(),dirty:f,skip_bound:!1,root:e.target||h.$$.root};a&&a(l.root);let s=!1;if(l.ctx=t?t(n,e.props||{},(d,b,...m)=>{const p=m.length?m[0]:b;return l.ctx&&r(l.ctx[d],l.ctx[d]=p)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](p),s&&Vt(n,d)),b}):[],l.update(),s=!0,me(l.before_update),l.fragment=o?o(l.ctx):!1,e.target){if(e.hydrate){const d=Pt(e.target);l.fragment&&l.fragment.l(d),d.forEach(B)}else l.fragment&&l.fragment.c();e.intro&&W(n.$$.fragment),X(n,e.target,e.anchor),St()}Ce(h)}class se{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){Y(this,1),this.$destroy=re}$on(e,t){if(!$t(t))return re;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(t),()=>{const r=o.indexOf(t);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!Ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qt);const we=[];function Dt(n,e=re){let t;const o=new Set;function r(f){if(ue(n,f)&&(n=f,t)){const h=!we.length;for(const l of o)l[1](),we.push(l,n);if(h){for(let l=0;l<we.length;l+=2)we[l][0](we[l+1]);we.length=0}}}function c(f){r(f(n))}function a(f,h=re){const l=[f,h];return o.add(l),o.size===1&&(t=e(r,c)||re),f(n),()=>{o.delete(l),o.size===0&&t&&(t(),t=null)}}return{set:r,update:c,subscribe:a}}const Me=Dt(""),De=n=>{switch(n){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},ve=n=>window.location.href.includes("localhost")?`${window.location.href}/${n}.svg`:`${n}.svg`,rt=n=>{const e=Math.random().toString(36);return n===1?{id:e,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:e,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Xt(n){let e,t=n[0].text+"",o;return{c(){e=R("div"),o=ee(t),M(e,"class","cardText svelte-13kvtzw")},m(r,c){P(r,e,c),U(e,o)},p(r,c){c&1&&t!==(t=r[0].text+"")&&Oe(o,t)},d(r){r&&B(e)}}}function Yt(n){let e,t,o;return{c(){e=R("div"),M(e,"contenteditable","true"),M(e,"class","cardText svelte-13kvtzw"),n[0].text===void 0&&He(()=>n[5].call(e))},m(r,c){P(r,e,c),n[0].text!==void 0&&(e.innerText=n[0].text),t||(o=le(e,"input",n[5]),t=!0)},p(r,c){c&1&&r[0].text!==e.innerText&&(e.innerText=r[0].text)},d(r){r&&B(e),t=!1,o()}}}function Zt(n){let e,t,o,r,c=n[0].cardType.passive&&it();return{c(){e=R("img"),o=V(),c&&c.c(),r=Je(),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-13kvtzw")},m(a,f){P(a,e,f),P(a,o,f),c&&c.m(a,f),P(a,r,f)},p(a,f){f&1&&!he(e.src,t=ve(a[0].cardType.type))&&M(e,"src",t),a[0].cardType.passive?c||(c=it(),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},d(a){a&&(B(e),B(o),B(r)),c&&c.d(a)}}}function it(n){let e;return{c(){e=R("p"),e.textContent="Passive",M(e,"class","mirrored svelte-13kvtzw")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function en(n){let e,t;function o(a,f){return a[2]?Zt:a[3]?Yt:Xt}let r=o(n),c=r(n);return{c(){e=R("div"),t=R("div"),c.c(),M(t,"class","card svelte-13kvtzw"),ie(t,"--colour",n[4]),M(e,"class","wrapper svelte-13kvtzw"),ie(e,"--rotation",n[1]+"deg")},m(a,f){P(a,e,f),U(e,t),c.m(t,null)},p(a,[f]){r===(r=o(a))&&c?c.p(a,f):(c.d(1),c=r(a),c&&(c.c(),c.m(t,null))),f&16&&ie(t,"--colour",a[4]),f&2&&ie(e,"--rotation",a[1]+"deg")},i:re,o:re,d(a){a&&B(e),c.d()}}}function tn(n,e,t){let o,{card:r}=e,{rotation:c=0}=e,{back:a=!1}=e,{editable:f=!0}=e;function h(){r.text=this.innerText,t(0,r)}return n.$$set=l=>{"card"in l&&t(0,r=l.card),"rotation"in l&&t(1,c=l.rotation),"back"in l&&t(2,a=l.back),"editable"in l&&t(3,f=l.editable)},n.$$.update=()=>{n.$$.dirty&1&&t(4,o=De(r.cardType.type))},[r,c,a,f,o,h]}class Ke extends se{constructor(e){super(),ce(this,e,tn,en,ue,{card:0,rotation:1,back:2,editable:3})}}function ot(n,e,t){const o=n.slice();return o[12]=e[t],o}function ut(n){let e,t,o,r,c,a,f,h,l=n[5]&&ft(n),s=!n[3]&&lt(n);return{c(){e=R("div"),t=R("img"),r=V(),l&&l.c(),c=V(),s&&s.c(),a=Je(),he(t.src,o=ve(n[0]))||M(t,"src",o),M(t,"alt","My Icon"),M(t,"class","cardIcon svelte-lm5vvd"),M(e,"class","select svelte-lm5vvd")},m(d,b){P(d,e,b),U(e,t),U(e,r),l&&l.m(e,null),P(d,c,b),s&&s.m(d,b),P(d,a,b),f||(h=le(t,"click",n[8]),f=!0)},p(d,b){b&1&&!he(t.src,o=ve(d[0]))&&M(t,"src",o),d[5]?l?l.p(d,b):(l=ft(d),l.c(),l.m(e,null)):l&&(l.d(1),l=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,b):(s=lt(d),s.c(),s.m(a.parentNode,a))},d(d){d&&(B(e),B(c),B(a)),l&&l.d(),s&&s.d(d),f=!1,h()}}}function ft(n){let e,t=oe(n[4]),o=[];for(let r=0;r<t.length;r+=1)o[r]=at(ot(n,t,r));return{c(){e=R("div");for(let r=0;r<o.length;r+=1)o[r].c();M(e,"class","options svelte-lm5vvd"),ie(e,"--colour",n[6])},m(r,c){P(r,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(r,c){if(c&49){t=oe(r[4]);let a;for(a=0;a<t.length;a+=1){const f=ot(r,t,a);o[a]?o[a].p(f,c):(o[a]=at(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=t.length}c&64&&ie(e,"--colour",r[6])},d(r){r&&B(e),Se(o,r)}}}function at(n){let e,t,o,r,c;function a(){return n[9](n[12])}return{c(){e=R("img"),he(e.src,t=ve(n[12]))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class",o="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")},m(f,h){P(f,e,h),r||(c=le(e,"click",a),r=!0)},p(f,h){n=f,h&16&&!he(e.src,t=ve(n[12]))&&M(e,"src",t),h&17&&o!==(o="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")&&M(e,"class",o)},d(f){f&&B(e),r=!1,c()}}}function lt(n){let e,t,o,r,c,a,f;return{c(){e=R("input"),t=V(),o=R("label"),r=ee("Passive"),M(e,"type","checkbox"),M(e,"id",n[7]),M(e,"class","hidden"),M(o,"for",n[7]),M(o,"class",c="passive no-select "+(n[1]?"":"invisible")+" svelte-lm5vvd")},m(h,l){P(h,e,l),e.checked=n[1],P(h,t,l),P(h,o,l),U(o,r),a||(f=le(e,"change",n[10]),a=!0)},p(h,l){l&2&&(e.checked=h[1]),l&2&&c!==(c="passive no-select "+(h[1]?"":"invisible")+" svelte-lm5vvd")&&M(o,"class",c)},d(h){h&&(B(e),B(t),B(o)),a=!1,f()}}}function nn(n){let e,t=!n[2]&&ut(n);return{c(){t&&t.c(),e=Je()},m(o,r){t&&t.m(o,r),P(o,e,r)},p(o,[r]){o[2]?t&&(t.d(1),t=null):t?t.p(o,r):(t=ut(o),t.c(),t.m(e.parentNode,e))},i:re,o:re,d(o){o&&B(e),t&&t.d(o)}}}function rn(n,e,t){let o,{cardType:r}=e,{passive:c=!1}=e,{back:a=!1}=e,{noPassive:f=!1}=e;const h=Math.random().toString(36).substring(7),l=qt();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=e;const b=()=>t(5,s=!s),m=g=>{t(0,r=g),t(5,s=!1)};function p(){c=this.checked,t(1,c)}return n.$$set=g=>{"cardType"in g&&t(0,r=g.cardType),"passive"in g&&t(1,c=g.passive),"back"in g&&t(2,a=g.back),"noPassive"in g&&t(3,f=g.noPassive),"names"in g&&t(4,d=g.names)},n.$$.update=()=>{n.$$.dirty&1&&t(6,o=De(r)),n.$$.dirty&1&&l("type",r),n.$$.dirty&2&&l("passive",c)},[r,c,a,f,d,s,o,h,b,m,p]}class Be extends se{constructor(e){super(),ce(this,e,rn,nn,ue,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function on(n){let e,t;return{c(){e=R("img"),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-15hk4fg")},m(o,r){P(o,e,r)},p(o,r){r&1&&!he(e.src,t=ve(o[0].cardType.type))&&M(e,"src",t)},i:re,o:re,d(o){o&&B(e)}}}function un(n){let e,t,o,r,c,a,f;return t=new Be({props:{cardType:n[0].cardType.type,passive:n[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),t.$on("type",n[2]),{c(){e=R("p"),Z(t.$$.fragment),o=V(),r=R("div"),M(e,"class","svelte-15hk4fg"),M(r,"contenteditable","true"),M(r,"class","cardText svelte-15hk4fg"),n[0].text===void 0&&He(()=>n[3].call(r))},m(h,l){P(h,e,l),X(t,e,null),P(h,o,l),P(h,r,l),n[0].text!==void 0&&(r.innerText=n[0].text),c=!0,a||(f=le(r,"input",n[3]),a=!0)},p(h,l){const s={};l&1&&(s.cardType=h[0].cardType.type),l&1&&(s.passive=h[0].cardType.passive),t.$set(s),l&1&&h[0].text!==r.innerText&&(r.innerText=h[0].text)},i(h){c||(W(t.$$.fragment,h),c=!0)},o(h){K(t.$$.fragment,h),c=!1},d(h){h&&(B(e),B(o),B(r)),Y(t),a=!1,f()}}}function fn(n){let e,t,o,r;const c=[un,on],a=[];function f(h,l){return h[1]?1:0}return t=f(n),o=a[t]=c[t](n),{c(){e=R("div"),o.c(),M(e,"class","card svelte-15hk4fg"),ie(e,"--colour",De(n[0].cardType.type))},m(h,l){P(h,e,l),a[t].m(e,null),r=!0},p(h,[l]){let s=t;t=f(h),t===s?a[t].p(h,l):(pe(),K(a[s],1,1,()=>{a[s]=null}),_e(),o=a[t],o?o.p(h,l):(o=a[t]=c[t](h),o.c()),W(o,1),o.m(e,null)),(!r||l&1)&&ie(e,"--colour",De(h[0].cardType.type))},i(h){r||(W(o),r=!0)},o(h){K(o),r=!1},d(h){h&&B(e),a[t].d()}}}function an(n,e,t){let{card:o}=e,{back:r=!1}=e;const c=({detail:f})=>t(0,o.cardType.type=f,o);function a(){o.text=this.innerText,t(0,o)}return n.$$set=f=>{"card"in f&&t(0,o=f.card),"back"in f&&t(1,r=f.back)},[o,r,c,a]}class ln extends se{constructor(e){super(),ce(this,e,an,fn,ue,{card:0,back:1})}}function cn(n){let e,t;return e=new ln({props:{card:n[0].cardHalf1,back:n[1]}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&1&&(c.card=o[0].cardHalf1),r&2&&(c.back=o[1]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function sn(n){let e,t,o,r,c,a,f,h,l,s,d,b,m,p;return o=new Be({props:{cardType:n[0].cardHalf1.cardType.type,passive:n[0].cardHalf1.cardType.passive,back:n[1]}}),o.$on("type",n[4]),o.$on("passive",n[5]),c=new Ke({props:{card:n[0].cardHalf1,back:n[1]}}),h=new Ke({props:{card:n[0].cardHalf2,rotation:n[2]?0:180,back:n[1]}}),d=new Be({props:{cardType:n[0].cardHalf2.cardType.type,passive:n[0].cardHalf2.cardType.passive,back:n[1]}}),d.$on("type",n[6]),d.$on("passive",n[7]),{c(){e=R("div"),t=R("p"),Z(o.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),f=R("div"),Z(h.$$.fragment),l=V(),s=R("p"),Z(d.$$.fragment),b=V(),m=R("div"),M(t,"class","first svelte-1ubeuca"),M(e,"class","first-half half"),M(s,"class","second svelte-1ubeuca"),M(f,"class","second-half half svelte-1ubeuca"),M(m,"class","fill svelte-1ubeuca")},m(g,k){P(g,e,k),U(e,t),X(o,t,null),U(e,r),X(c,e,null),P(g,a,k),P(g,f,k),X(h,f,null),U(f,l),U(f,s),X(d,s,null),P(g,b,k),P(g,m,k),p=!0},p(g,k){const N={};k&1&&(N.cardType=g[0].cardHalf1.cardType.type),k&1&&(N.passive=g[0].cardHalf1.cardType.passive),k&2&&(N.back=g[1]),o.$set(N);const T={};k&1&&(T.card=g[0].cardHalf1),k&2&&(T.back=g[1]),c.$set(T);const u={};k&1&&(u.card=g[0].cardHalf2),k&4&&(u.rotation=g[2]?0:180),k&2&&(u.back=g[1]),h.$set(u);const y={};k&1&&(y.cardType=g[0].cardHalf2.cardType.type),k&1&&(y.passive=g[0].cardHalf2.cardType.passive),k&2&&(y.back=g[1]),d.$set(y)},i(g){p||(W(o.$$.fragment,g),W(c.$$.fragment,g),W(h.$$.fragment,g),W(d.$$.fragment,g),p=!0)},o(g){K(o.$$.fragment,g),K(c.$$.fragment,g),K(h.$$.fragment,g),K(d.$$.fragment,g),p=!1},d(g){g&&(B(e),B(a),B(f),B(b),B(m)),Y(o),Y(c),Y(h),Y(d)}}}function dn(n){let e,t,o,r,c;const a=[sn,cn],f=[];function h(l,s){return l[0].cardHalf2?0:1}return t=h(n),o=f[t]=a[t](n),{c(){e=R("div"),o.c(),M(e,"class",r=tt(`card ${n[1]&&"back"}`)+" svelte-1ubeuca"),ie(e,"--colour",n[3])},m(l,s){P(l,e,s),f[t].m(e,null),c=!0},p(l,[s]){let d=t;t=h(l),t===d?f[t].p(l,s):(pe(),K(f[d],1,1,()=>{f[d]=null}),_e(),o=f[t],o?o.p(l,s):(o=f[t]=a[t](l),o.c()),W(o,1),o.m(e,null)),(!c||s&2&&r!==(r=tt(`card ${l[1]&&"back"}`)+" svelte-1ubeuca"))&&M(e,"class",r),(!c||s&8)&&ie(e,"--colour",l[3])},i(l){c||(W(o),c=!0)},o(l){K(o),c=!1},d(l){l&&B(e),f[t].d()}}}function hn(n,e,t){let o,{card:r}=e,{back:c=!1}=e,{readable:a=!1}=e;const f=({detail:d})=>t(0,r.cardHalf1.cardType.type=d,r),h=({detail:d})=>t(0,r.cardHalf1.cardType.passive=d,r),l=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.type=d,r)},s=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.passive=d,r)};return n.$$set=d=>{"card"in d&&t(0,r=d.card),"back"in d&&t(1,c=d.back),"readable"in d&&t(2,a=d.readable)},n.$$.update=()=>{n.$$.dirty&1&&t(3,o=De(r.cardHalf1.cardType.type))},[r,c,a,o,f,h,l,s]}class Qe extends se{constructor(e){super(),ce(this,e,hn,dn,ue,{card:0,back:1,readable:2})}}const ct=(n,e=9)=>{const t=[];let o=0;for(;o<n.length;)t.push(n.slice(o,e+o)),o+=e;return t},pn=(n,e)=>(e=e.toLocaleLowerCase(),!e||n.cardHalf1.text.toLocaleLowerCase().includes(e)||n.cardHalf2&&n.cardHalf2.text.toLocaleLowerCase().includes(e)),_n=(n,e)=>!e||n.cardHalf1.cardType.passive||n.cardHalf2&&n.cardHalf2.cardType.passive;function vn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yn(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xe={exports:{}};Xe.exports;(function(n){(function(){function e(o,r){return r?yn(o):o.slice?e[c(o)]:function(a,f){o(a={exports:{}}),e[c(f)]=a.exports};function c(a){return a.split("/").slice(-1).toString().replace(".js","")}}var t=n;e(function(o){String.random=function(c,a){var f="";for(c=c||24,a=a||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)f+=a.charAt(Math.floor(Math.random()*a.length));return f},String.match=function(c,a){var f,h;return typeof c!="string"?!1:(typeof a=="string"&&(a={"=":a}),a=a||{},f=a["="]||a["*"]||a[">"]||a["<"],c===f?!0:h!==a["="]?!1:(f=a["*"]||a[">"],c.slice(0,(f||"").length)===f?!0:h!==a["*"]?!1:h!==a[">"]&&h!==a["<"]?c>=a[">"]&&c<=a["<"]:h!==a[">"]&&c>=a[">"]||h!==a["<"]&&c<=a["<"]))},String.hash=function(c,a){if(typeof c=="string"){if(a=a||0,!c.length)return a;for(var f=0,h=c.length,l;f<h;++f)l=c.charCodeAt(f),a=(a<<5)-a+l,a|=0;return a}};var r=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,a){for(var f in c)if(r.call(c,f)&&(!a||a.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var a=[];for(var f in c)r.call(c,f)&&a.push(f);return a},function(){var c,a=setTimeout,f=0,h=0,l=typeof setImmediate!=""+c&&setImmediate||function(d,b){return typeof MessageChannel==""+c?a:((d=new MessageChannel).port1.onmessage=function(m){m.data==""&&b()},function(m){b=m,d.port2.postMessage("")})}(),s=a.check=a.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};a.hold=a.hold||9,a.poll=a.poll||function(d){if(a.hold>=s.now()-f&&h++<3333){d();return}l(function(){f=s.now(),d()},h=0)}}(),function(){var c=setTimeout,a=c.turn=c.turn||function(b){f.push(b)==1&&h(d)},f=a.s=[],h=c.poll,l=0,s,d=function(){(s=f[l++])&&s(),(l==f.length||l==99)&&(f=a.s=f.slice(l),l=0),f.length&&h(d)}}(),function(){var c,a=setTimeout,f=a.turn;(a.each=a.each||function(h,l,s,d){d=d||9,function b(m,p,g){if(p=(m=(h||[]).splice(0,d)).length){for(var k=0;k<p&&c===(g=l(m[k]));k++);if(c===g){f(b);return}}s&&s(g)}()})()}()})(e,"./shim"),e(function(o){o.exports=function r(s,a,f){if(!s)return{to:r};var h,l=typeof a=="function",s=(this.tag||(this.tag={}))[s]||l&&(this.tag[s]={tag:s,to:r._={next:function(b){var m;(m=this.to)&&m.next(b)}}});if(l){var d={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:a,the:s,on:this,as:f};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&h!==a&&s.next(a),s}})(e,"./onto"),e(function(o){o.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(o){e("./shim");function r(){var s=+new Date;return h<s?(a=0,h=s+r.drift):h=s+(a+=1)/f+r.drift}r.drift=0;var c=-1/0,a=0,f=999,h=c,l;r.is=function(s,d,b){var m=d&&s&&s._&&s._[">"]||b;if(m)return typeof(m=m[d])=="number"?m:c},r.ify=function(s,d,b,m,p){(s=s||{})._=s._||{},p&&(s._["#"]=p);var g=s._[">"]||(s._[">"]={});return l!==d&&d!=="_"&&(typeof b=="number"&&(g[d]=b),l!==m&&(s[d]=m)),s},o.exports=r})(e,"./state"),e(function(o){e("./shim");function r(c){var a={s:{}},f=a.s;c=c||{max:999,age:1e3*9},a.check=function(l){return f[l]?h(l):!1};var h=a.track=function(l){var s=f[l]||(f[l]={});return s.was=a.now=+new Date,a.to||(a.to=setTimeout(a.drop,c.age+9)),h.ed&&h.ed(l),s};return a.drop=function(l){a.to=null,a.now=+new Date;var s=Object.keys(f);console.STAT&&console.STAT(a.now,+new Date-a.now,"dup drop keys"),setTimeout.each(s,function(d){var b=f[d];b&&(l||c.age)>a.now-b.was||delete f[d]},0,99)},a}o.exports=r})(e,"./dup"),e(function(o){e("./onto"),o.exports=function(a,f){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof a!="function"){if(!a)return;var s=a["#"]||a,l=(this.tag||"")[s];return l?(f&&(l=this.on(s,f),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},h)),!0):void 0}var s=f&&f["#"]||r(9);if(!a)return s;var d=this.on(s,a,f);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(o){function r(p){return p instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:p}):new r(p)}r.is=function(p){return p instanceof r||p&&p._&&p===p._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(i){i.root=i.root||i,i.graph=i.graph||{},i.on=i.on||r.on,i.ask=i.ask||r.ask,i.dup=i.dup||r.dup();var _=i.$.opt(i.opt);return i.once||(i.on("in",p,i),i.on("out",p,i),i.on("put",N,i),r.on("create",i),i.on("create",i)),i.once=1,_};function p(i){if(i){if(i.out===p){this.to.next(i);return}var _=this,w=_.as,x=w.at||w,A=x.$,S=x.dup,H,F=i.DBG;if((H=i["#"])||(H=i["#"]=a(9)),!S.check(H)){if(S.track(H),H=i._,i._=typeof H=="function"?H:function(){},i.$&&i.$===(i.$._||"").$||(i.$=A),i["@"]&&!i.put&&u(i),!x.ask(i["@"],i))if(F&&(F.u=+new Date),i.put){g(i);return}else i.get&&r.on.get(i,A);F&&(F.uc=+new Date),_.to.next(i),F&&(F.ua=+new Date),!(i.nts||i.NTS)&&(i.out=p,x.on("out",i),F&&(F.ue=+new Date))}}}function g(i){if(i){var _=i._||"",w=_.root=((_.$=i.$||"")._||"").root;if(i["@"]&&_.faith&&!_.miss){i.out=p,w.on("out",i);return}_.latch=w.hatch,_.match=w.hatch=[];var x=i.put,A=_.DBG=i.DBG,S=+new Date;if(G=G||S,!(x["#"]&&x["."])){A&&(A.p=S),_["#"]=i["#"],_.msg=i,_.all=0,_.stun=1;var H=Object.keys(x);console.STAT&&console.STAT(S,((A||_).pk=+new Date)-S,"put sort");var F=0,q,L,J,Q,I,z,ne;(function fe(ye){if(q!=F){if(q=F,!(J=H[F])){console.STAT&&console.STAT(S,((A||_).pd=+new Date)-S,"put"),T(_);return}(Q=x[J])?(ne=Q._)?J!==ne["#"]?z=j+D(J)+"soul not same.":(I=ne[">"])||(z=j+D(J)+"no state."):z=j+D(J)+"no meta.":z=j+D(J)+"no node.",L=Object.keys(Q||{})}if(z){i.err=_.err=z,T(_);return}var Ae=0,ae;for(ye=ye||0;ye++<9&&(ae=L[Ae++]);)if(ae!=="_"){var be=Q[ae],Ne=I[ae];if(d===Ne){z=j+D(ae)+"on"+D(J)+"no state.";break}if(!h(be)){z=j+D(ae)+"on"+D(J)+"bad "+typeof be+D(be);break}k(be,ae,J,Ne,i),++E}if((L=L.slice(Ae)).length){f(fe);return}++F,L=null,fe(ye)})()}}}r.on.put=g;function k(i,_,w,x,A){var S=A._||"",H=S.root,F=H.graph,q,L=F[w]||b,J=l(L,_,1),Q=L[_],I=S.DBG;(q=console.STAT)&&(!F[w]||!Q)&&(q.has=(q.has||0)+1);var z=C();if(x>z){setTimeout(function(){k(i,_,w,x,A)},(q=x-z)>O?O:q),console.STAT&&console.STAT((I||S).Hf=+new Date,q,"future");return}if(!(x<J)&&!(!S.faith&&x===J&&(i===Q||$(i)<=$(Q))&&!S.miss)){S.stun++;var ne=A["#"]+S.all++,fe={toString:function(){return ne},_:S};fe.toJSON=fe.toString,H.dup.track(fe)["#"]=A["#"],I&&(I.ph=I.ph||+new Date),H.on("put",{"#":fe,"@":A["@"],put:{"#":w,".":_,":":i,">":x},ok:A.ok,_:S})}}function N(i){var _;(_=(i._||"").DBG)&&(_.pa=+new Date,_.pm=_.pm||+new Date);var w=this,x=w.as,A=x.graph,S=i._,H=i.put,F=H["#"],q=H["."],L=H[":"],J=H[">"];i["#"];var Q;(Q=S.msg)&&(Q=Q.put)&&(Q=Q[F])&&s(Q,q,J,L,F),A[F]=s(A[F],q,J,L,F),(Q=(x.next||"")[F])&&Q.on("in",i),T(S),w.to.next(i)}function T(i,_){var w;if(!i.stop&&!(!i.err&&0<--i.stun)&&(i.stop=1,!!(w=i.root))){var x=i.match;x.end=1,x===w.hatch&&(!(x=i.latch)||x.end?delete w.hatch:w.hatch=x),i.hatch&&i.hatch(),setTimeout.each(i.match,function(A){A&&A()}),!(!(_=i.msg)||i.err||_.err)&&(_.out=p,i.root.on("out",_),v())}}function u(i){var _=i["@"]||"",w;if(!(w=_._)){var x=(x=i.$)&&(x=x._)&&(x=x.root)&&(x=x.dup);if(!(x=x.check(_)))return;i["@"]=x["#"]||i["@"];return}w.acks=(w.acks||0)+1,(w.err=i.err)&&(i["@"]=w["#"],T(w)),w.ok=i.ok||w.ok,!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){y(w)})),y(w)}function y(i){!i||!i.root||i.stun||i.acks!==i.all||i.root.on("in",{"@":i["#"],err:i.err,ok:i.err?d:i.ok||{"":1}})}var j="Error: Invalid graph!",D=function(i){return" '"+(""+i).slice(0,9)+"...' "},$=JSON.stringify,O=2147483647,C=r.state,E=0,G,v=function(){E>999&&E/-(G-(G=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),v=function(){E=0})}}(),function(){r.on.get=function(g,k){var N=k._,T=g.get,u=T["#"],y=N.graph[u],j=T["."],D=N.next||(N.next={}),$=D[u],O=g._||{},C=O.DBG=g.DBG;if(C&&(C.g=+new Date),!y)return N.on("get",g);if(j){if((typeof j!="string"||d===y[j])&&!(($||"").next||"")[j]){N.on("get",g);return}y=s({},j,l(y,j),y[j],u)}y&&p(g,y),N.on("get",g)};function p(g,k){var N=+new Date,T=g._||{},u=T.DBG=g.DBG,y=g["#"],j=a(9),D=Object.keys(k||"").sort(),$=((k||"")._||"")["#"];D.length;var O=g.$._.root,C=k===O.graph[$];console.STAT&&console.STAT(N,((u||T).gk=+new Date)-N,"got keys"),k&&function E(){N=+new Date;for(var G=0,v,i={},_;G<9&&(v=D[G++]);)s(i,v,l(k,v),k[v],$);D=D.slice(G),(_={})[$]=i,i=_;var w;C&&(w=function(){},w.ram=w.faith=!0),_=D.length,console.STAT&&console.STAT(N,-(N-(N=+new Date)),"got copied some"),u&&(u.ga=+new Date),O.on("in",{"@":y,"#":j,put:i,"%":_?j=a(9):d,$:O.$,_:w,DBG:u,FOO:1}),console.STAT&&console.STAT(N,+new Date-N,"got in"),_&&setTimeout.turn(E)}(),k||O.on("in",{"@":g["#"]})}r.on.get.ack=p}(),function(){r.chain.opt=function(p){p=p||{};var g=this,k=g._,N=p.peers||p;return Object.plain(p)||(p={}),Object.plain(k.opt)||(k.opt=p),typeof N=="string"&&(N=[N]),Object.plain(k.opt.peers)||(k.opt.peers={}),N instanceof Array&&(p.peers={},N.forEach(function(T){var u={};u.id=u.url=T,p.peers[T]=k.opt.peers[T]=k.opt.peers[T]||u})),c(p,function T(u){var y=this[u];if(this&&this.hasOwnProperty(u)||typeof y=="string"||Object.empty(y)){this[u]=y;return}y&&y.constructor!==Object&&!(y instanceof Array)||c(y,T)}),k.opt.from=p,r.on("opt",k),k.opt.uuid=k.opt.uuid||function(u){return r.state().toString(36).replace(".","")+String.random(u||12)},g}}();var c=function(p,g){Object.keys(p).forEach(g,p)},a=String.random,f=setTimeout.turn,h=r.valid,l=r.state.is,s=r.state.ify,d,b={},m;r.log=function(){return!r.log.off&&m.log.apply(m,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(p,g,k){return(k=r.log.once)[p]=k[p]||0,k[p]++||r.log(g)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof t<"u"&&(t.exports=r)}catch{}o.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(m=console).only=function(p,g){return m.only.i&&p===m.only.i&&m.only.i++&&(m.log.apply(m,arguments)||g)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(o){var r=e("./root");r.chain.back=function(f,h){var l;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var b=0,m=f.length,l=d;for(b;b<m;b++)l=(l||c)[f[b]];return a!==l?h?s:l:(l=d.back)?l.$.back(f,h):void 0}if(typeof f=="function"){for(var p,l={back:d};(l=l.back)&&a===(p=f(l,h)););return p}return typeof f=="number"?(d.back||d).$.back(f-1):this};var c={},a})(e,"./back"),e(function(o){var r=e("./root");r.chain.chain=function(T){var u=this,y=u._,j=new(T||u).constructor(u),D=j._,$;return D.root=$=y.root,D.id=++$.once,D.back=u._,D.on=r.on,D.on("in",r.on.in,D),D.on("out",r.on.out,D),j};function c(T){var u,y=this.as,j=y.back,D=y.root,$;if(T.$||(T.$=y.$),this.to.next(T),y.err){y.on("in",{put:y.put=d,$:y.$});return}if(u=T.get){if(D.pass&&(D.pass[y.id]=y),y.lex&&Object.keys(y.lex).forEach(function(O){$[O]=y.lex[O]},$=T.get=T.get||{}),u["#"]||y.soul){if(u["#"]=u["#"]||y.soul,T["#"]||(T["#"]=b(9)),j=D.$.get(u["#"])._,u=u["."]){if(p(j.put,u)&&($=j.ask&&j.ask[u],(j.ask||(j.ask={}))[u]=j.$.get(u)._,j.on("in",{get:u,put:{"#":j.soul,".":u,":":j.put[u],">":k(D.graph[j.soul],u)}}),$))return}else{if($=j.ask&&j.ask[""],(j.ask||(j.ask={}))[""]=j,d!==j.put&&(j.on("in",j),$))return;T.$=j.$}return D.ask(l,T),D.on("in",T)}if(u["."])return y.get?(T={get:{".":y.get},$:y.$},(j.ask||(j.ask={}))[y.get]=T.$._,j.on("out",T)):(T={get:y.lex?T.get:{},$:y.$},j.on("out",T));if((y.ask||(y.ask={}))[""]=y,y.get)return u["."]=y.get,(j.ask||(j.ask={}))[y.get]=T.$._,j.on("out",T)}return j.on("out",T)}r.on.out=c;function a(T,u){u=u||this.as;var y=u.root,j=T.$||(T.$=u.$),D=(j||"")._||s,$=T.put||"",O=$["#"],C=$["."],E=d!==$["="]?$["="]:$[":"],G=$[">"]||-1/0,v;if(d!==T.put&&(d===$["#"]||d===$["."]||d===$[":"]&&d===$["="]||d===$[">"])){if(!m($)){if(!(O=(($||"")._||"")["#"])){console.log("chain not yet supported for",$,"...",T,u);return}return j=u.root.$.get(O),setTimeout.each(Object.keys($).sort(),function(i){i=="_"||d===(G=k($,i))||u.on("in",{$:j,put:{"#":O,".":i,"=":$[i],">":G},VIA:T})})}u.on("in",{$:D.back.$,put:{"#":O=D.back.soul,".":C=D.has||D.get,"=":$,">":k(D.back.put,C)},via:T});return}(T.seen||"")[u.id]||((T.seen||(T.seen=function(){}))[u.id]=u,u!==D&&(Object.keys(T).forEach(function(i){$[i]=T[i]},$={}),$.get=u.get||$.get,!u.soul&&!u.has?$.$$$=$.$$$||u.$:D.soul&&($.$=u.$,$.$$=$.$$||D.$),T=$),h(T,u),(u.soul||T.$$)&&G>=k(y.graph[O],C)&&(($=y.$.get(O)._).put=N($.put,C,G,E,O)),!D.soul&&G>=k(y.graph[O],C)&&(v=(y.$.get(O)._.next||"")[C])&&(v.put=E,typeof($=m(E))=="string"&&(v.put=y.$.get($)._.put||E)),this.to&&this.to.next(T),u.any&&setTimeout.each(Object.keys(u.any),function(i){(i=u.any[i])&&i(T)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(i){(i=u.echo[i])&&i.on("in",T)},0,99),((T.$$||"")._||D).soul&&(v=u.next)&&(v=v[C])&&($={},Object.keys(T).forEach(function(i){$[i]=T[i]}),$.$=(T.$$||T.$).get($.get=C),delete $.$$,delete $.$$$,v.on("in",$)),f(T,u))}r.on.in=a;function f(T,u){if(u=u||this.as||T.$._,!(T.$$&&this!==r.on)&&!(!T.put||u.soul)){var y=T.put||"",j=y["="]||y[":"],C,D=u.root,$=D.$.get(y["#"]).get(y["."])._;if(typeof(j=m(j))!="string"){this===r.on&&(($.echo||($.echo={}))[u.id]=u);return}if(!(($.echo||($.echo={}))[u.id]&&!(D.pass||"")[u.id])){if(C=D.pass){if(C[j+u.id])return;C[j+u.id]=1}($.echo||($.echo={}))[u.id]=u,u.has&&(u.link=j);var O=D.$.get($.link=j)._;(O.echo||(O.echo={}))[$.id]=$;var C=u.ask||"";(C[""]||u.lex)&&O.on("out",{get:{"#":j}}),setTimeout.each(Object.keys(C),function(E,G){!E||!(G=C[E])||G.on("out",{get:{"#":j,".":E}})},0,99)}}}r.on.link=f;function h(T,u){var y=T.put||"",j=d!==y["="]?y["="]:y[":"],D=u.root,$,O;if(d===j){if(u.soul&&d!==u.put||(O=(T.$$||T.$||"")._||"",T["@"]&&(d!==O.put||d!==u.put)))return;($=u.link||T.linked)&&delete(D.$.get($)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(C,E){(E=u.next[C])&&($&&delete(D.$.get($).get(C)._.echo||"")[E.id],E.on("in",{get:C,put:d,$:E.$}))},0,99);return}u.soul||T.$$||($=m(j),O=T.$._||"",!(($===O.link||u.has&&!O.link)&&!((D.pass||"")[u.id]&&typeof $!="string"))&&(delete(O.echo||"")[u.id],h({get:u.get,put:d,$:T.$,linked:T.linked=T.linked||O.link},u)))}r.on.unlink=h;function l(T,u){var y=this.as,j=y.$._;j.root;var D=y.get||"",$=(T.put||"")[D["#"]]||"";if(!T.put||typeof D["."]=="string"&&d===$[D["."]]){if(d!==j.put||!j.soul&&!j.has)return;j.ack=(j.ack||0)+1,j.on("in",{get:j.get,put:j.put=d,$:j.$,"@":T["@"]});return}(T._||{}).miss=1,r.on.put(T)}var s={},d,b=String.random,m=r.valid,p=function(T,u){return T&&Object.prototype.hasOwnProperty.call(T,u)},g=r.state,k=g.is,N=g.ify})(e,"./chain"),e(function(o){var r=e("./root");r.chain.get=function(d,b,m){var p,g;if(typeof d=="string"){if(d.length==0)return(p=this.chain())._.err={err:r.log("0 length key!",d)},b&&b.call(p,p._.err),p;var k=this,N=k._,T=N.next||h;(p=T[d])||(p=d&&c(d,k)),p=p&&p.$}else if(typeof d=="function"){let C=function(E,G,v){if(!C.stun&&!((S=y.pass)&&!S[j])){var i=E.$._,_=(E.$$||"")._,w=(_||i).put,x=!i.has&&!i.soul,A={},S;if((x||s===w)&&(w=s===((S=E.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=r.valid(w))=="string"&&(w=s===(S=y.$.get(S)._.put)?u.not?s:w:S),!(u.not&&s===w)){if(s===u.stun){if((S=y.stun)&&S.on&&(N.$.back(function(H){if(S.on(""+H.id,A={}),(A.run||0)<C.id)return A}),!A.run&&S.on(""+i.id,A={}),!A.run&&_&&S.on(""+_.id,A={}),C.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=S.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[j]=function(){C(E,G,1)};return}if(s===w&&(v=0),(S=y.hatch)&&!S.end&&s===u.hatch&&!v){if(D[i.$._.id])return;D[i.$._.id]=1,S.push(function(){C(E,G,1)});return}D={}}if(y.pass){if(y.pass[j+i.id])return;y.pass[j+i.id]=1}if(u.on){u.ok.call(i.$,w,i.get,E,G||C);return}if(u.v2020){u.ok(E,G||C);return}Object.keys(E).forEach(function(H){S[H]=E[H]},S={}),E=S,E.put=w,u.ok.call(u.as,E,G||C)}}};var $=C;if(b===!0)return a(this,d,b,m),this;p=this;var N=p._,u=b||{},y=N.root,j;u.at=N,u.ok=d;var D={};return C.at=N,(N.any||(N.any={}))[j=String.random(7)]=C,C.off=function(){C.stun=1,N.any&&delete N.any[j]},C.rid=f,C.id=u.run||++y.once,g=y.pass,(y.pass={})[j]=1,u.out=u.out||{get:{}},N.on("out",u.out),y.pass=g,p}else{if(typeof d=="number")return this.get(""+d,b,m);if(typeof(g=l(d))=="string")return this.get(g,b,m);(g=this.get.next)&&(p=g(this,d))}return p?(b&&typeof b=="function"&&p.get(b,m),p):((p=this.chain())._.err={err:r.log("Invalid get request!",d)},b&&b.call(p,p._.err),p)};function c(d,b){var m=b._,p=m.next,g=b.chain(),k=g._;return p||(p=m.next={}),p[k.get=d]=k,b===m.root.$?k.soul=d:(m.soul||m.has)&&(k.has=d),k}function a(d,b,m,p){var g=d._,k=0,N;return(N=g.soul||g.link)?b(N,p,g):g.jam?g.jam.push([b,p]):(g.jam=[[b,p]],d.get(function(u,y){if(!(s===u.put&&!g.root.opt.super&&(N=Object.keys(g.root.opt.peers).length)&&++k<=N)){y.rid(u);var j=(j=u.$)&&j._||{},D=0,$;for(N=g.jam,delete g.jam;$=N[D++];){var O=$[0];$=$[1],O&&O(j.link||j.soul||r.valid(u.put)||((u.put||{})._||{})["#"],$,u,y)}}},{out:{get:{".":!0}}}),d)}function f(d){var b=this.at||this.on;if(!d||b.soul||b.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){b.map;var m;if((m=this.seen||(this.seen={}))[d])return!0;m[d]=!0}}var h={},l=r.valid,s})(e,"./get"),e(function(o){var r=e("./root");r.chain.put=function(p,g,k){var N=this,T=N._,u=T.root;k=k||{},k.root=T.root,k.run||(k.run=u.once),c(k,T.id),k.ack=k.ack||g,k.via=k.via||N,k.data=k.data||p,k.soul||(k.soul=T.soul||typeof g=="string"&&g);var y=k.state=k.state||r.state();return typeof p=="function"?(p(function(j){k.data=j,N.put(l,l,k)}),N):k.soul?(k.$=u.$.get(k.soul),k.todo=[{it:k.data,ref:k.$}],k.turn=k.turn||d,k.ran=k.ran||a,function j(){var D=k.todo,$=D.pop(),O=$.it;$.ref&&$.ref._.id;var C,E,G,v,i;if(c(k,$.ref),(v=$.todo)&&(E=v.pop(),O=O[E],v.length&&D.push($)),E&&(D.path||(D.path=[])).push(E),!(C=b(O))&&!(i=r.is(O))){if(!Object.plain(O)){a.err(k,"Invalid data: "+h(O)+" at "+(k.via.back(function(S){S.get&&v.push(S.get)},v=[])||v.join("."))+"."+(D.path||[]).join("."));return}for(var _=k.seen||(k.seen=[]),w=_.length;w--;)if(O===(v=_[w]).it){C=O=v.link;break}}if(E&&C)$.node=m($.node,E,y,O);else{let S=function(H,F){var q=G.link["#"];F&&(F.off(),F.rid(H));var L=q||H.soul||(v=(H.$$||H.$)._||"").soul||v.link||((v=v.put||"")._||"")["#"]||v["#"]||((v=H.put||"")&&H.$$?v["#"]:(v["="]||v[":"]||"")["#"]);if(!q&&c(k,H.$),!L&&!$.link["#"]){($.wait||($.wait=[])).push(function(){S(H,F)});return}L||(L=[],(H.$$||H.$).back(function(J){if(v=J.soul||J.link)return L.push(v);L.push(J.get)}),L=L.reverse().join("/")),G.link["#"]=L,!i&&(((k.graph||(k.graph={}))[L]=G.node||(G.node={_:{}}))._["#"]=L),delete k.wait[x],G.wait&&setTimeout.each(G.wait,function(J){J&&J()}),k.ran(k)};var A=S;if(!k.seen){a.err(k,"Data at root of graph must be a node (an object).");return}k.seen.push(G={it:O,link:{},todo:i?[]:Object.keys(O).sort().reverse(),path:(D.path||[]).slice(),up:$}),$.node=m($.node,E,y,G.link),!i&&G.todo.length&&D.push(G);var x=k.seen.length;(k.wait||(k.wait={}))[x]="",v=(G.ref=i?O:E?$.ref.get(E):$.ref)._,(v=O&&(O._||"")["#"]||v.soul||v.link)?S({soul:v}):G.ref.get(S,{run:k.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return k.ran(k);k.turn(j)}(),N):(f(k),N)};function c(p,g){if(g){g=(g._||"").id||g;var k=p.root.stun||(p.root.stun={on:r.on}),N={},T;p.stun||(p.stun=k.on("stun",function(){})),(T=k.on(""+g))&&T.the.last.next(N),!(N.run>=p.run)&&k.on(""+g,function(u){if(p.stun.end){this.off(),this.to.next(u);return}u.run=u.run||p.run,u.stun=u.stun||p.stun})}}function a(p){if(p.err){a.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,k=g.root,N=g.ask(function(j){k.on("ack",j),j.err&&!j.lack&&r.log(j),++T>(p.acks||0)&&this.off(),p.ack&&p.ack(j,this)},p.opt),T=0,u=p.stun,y;(y=function(){u&&(a.end(u,k),setTimeout.each(Object.keys(u=u.add||""),function(j){(j=u[j])&&j()}))}).hatch=y,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":N,_:y})}}a.end=function(p,g){p.end=s,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()},a.err=function(p,g){(p.ack||s).call(p,p.out={err:p.err=r.log(g)}),p.ran(p)};function f(p){var g=p.via._,k;p.via=p.via.back(function(N){if(N.soul||!N.get)return N.$;k=p.data,(p.data={})[N.get]=k}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function h(p,g){return p&&(g=p.constructor)&&g.name||typeof p}var l,s=function(){},d=setTimeout.turn,b=r.valid,m=r.state.ify})(e,"./put"),e(function(o){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),o.exports=r})(e,"./index"),e(function(o){var r=e("./index");r.chain.on=function(f,h,l,s){var d=this,b=d._;b.root;var m;if(typeof f=="string")return h?(m=b.on(f,h,l||b,s),l&&l.$&&(l.subs||(l.subs=[])).push(m),d):b.on(f);var p=h;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,d.get(f,p),d},r.chain.once=function(f,h){if(h=h||{},!f)return c(this);var l=this,s=l._,d=s.root;s.put;var b=String.random(7),m;return l.get(function(p,g,k,N){var T=this,u=T._,y=u.one||(u.one={});if(N.stun||y[b]==="")return;if((m=r.valid(p))===!0){j();return}if(typeof m=="string")return;clearTimeout((s.one||"")[b]),clearTimeout(y[b]),y[b]=setTimeout(j,h.wait||99);function j(D){if(!u.has&&!u.soul&&(u={put:p,get:g}),a===(m=u.put)&&(m=((k.$$||"")._||"").put),typeof r.valid(m)=="string"&&(m=d.$.get(m)._.put,m===a&&!D)){y[b]=setTimeout(function(){j(1)},h.wait||99);return}N.stun||y[b]!==""&&(y[b]="",(s.soul||s.has)&&N.off(),f.call(T,m,u.get),clearTimeout(y[b]))}},{on:1}),l};function c(f,h,l){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=f.chain())._.nix=f.once(function(s,d){l._.on("in",this._)}),l._.lex=f._.lex,l}r.chain.off=function(){var f=this,h=f._,l,s=h.back;if(s)return h.ack=0,(l=s.next)&&l[h.get]&&delete l[h.get],(l=s.any)&&(delete s.any,s.any={}),(l=s.ask)&&delete l[h.get],(l=s.put)&&delete l[h.get],(l=h.soul)&&delete s.root.graph[l],(l=h.map)&&Object.keys(l).forEach(function(d,b){b=l[d],b.link&&s.root.$.get(b.link).off()}),(l=h.next)&&Object.keys(l).forEach(function(d,b){b=l[d],b.$.off()}),h.on("off",{}),f};var a})(e,"./on"),e(function(o){var r=e("./index"),c=r.chain.get.next;r.chain.get.next=function(l,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?l.get(d):((d=l.chain()._).lex=s,l.on("in",function(b){String.match(b.get||(b.put||"")["."],s["."]||s["#"]||s)&&d.on("in",b),this.to.next(b)}),d.$):(c||f)(l,s)},r.chain.map=function(l,s,d){var b=this,m=b._,p,g;return Object.plain(l)&&(p=l["."]?l:{".":l},l=h),l?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=b.chain(),b.map().on(function(k,N,T,u){var y=(l||f).call(this,k,N,T,u);if(h!==y){if(k===y)return g._.on("in",T);if(r.is(y))return g._.on("in",y._);var j={};Object.keys(T.put).forEach(function(D){j[D]=T.put[D]},j),j["="]=y,g._.on("in",{get:N,put:j})}}),g):((g=m.each)||((m.each=g=b.chain())._.lex=p||g._.lex||m.lex,g._.nix=b.back("nix"),b.on("in",a,g._)),g)};function a(l){this.to.next(l);var s=this.as,d=l.$,b=d._,m=l.put,p;!b.soul&&!l.$$||(p=s.lex)&&!String.match(l.get||(m||"")["."],p["."]||p["#"]||p)||r.on.link(l,s)}var f=function(){},h})(e,"./map"),e(function(o){var r=e("./index");r.chain.set=function(c,a,f){var h=this,l=h.back(-1),s,d;return a=a||function(){},f=f||{},f.item=f.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=r.valid(c))=="string"?h.get(s=d).put(c,a,f):r.is(c)?(h.put(function(b){c.get(function(m,p,g){if(!m)return a.call(h,{err:r.log('Only a node can be linked! Not "'+g.put+'"!')});(d={})[m]={"#":m},b(d)},!0)}),c):(Object.plain(c)&&(c=l.get(s=h.back("opt.uuid")()).put(c)),h.get(s||l.back("opt.uuid")(7)).put(c,a,f))}})(e,"./set"),e(function(o){e("./shim");var r=function(){},c=JSON.parseAsync||function(l,s,d){var b,m=+new Date;try{s(b,JSON.parse(l,d),a.sucks(+new Date-m))}catch(p){s(p)}},a=JSON.stringifyAsync||function(l,s,d,b){var m,p=+new Date;try{s(m,JSON.stringify(l,d,b),a.sucks(+new Date-p))}catch(g){s(g)}};a.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),a.sucks=r)};function f(l){var s=function(){},d=l.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var b=setTimeout.turn||setTimeout,m=l.dup,p=m.check,g=m.track,k=s.hear=function(u,y){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},y);s===this&&(k.d+=u.length||0,++k.c);var j=y.SH=+new Date,D=u[0],$;if(D==="["){c(u,function(O,C){if(O||!C)return s.say({dam:"!",err:"DAM JSON parse error."},y);console.STAT&&console.STAT(+new Date,C.length,"# on hear batch");var E=d.puff;(function G(){for(var v=+new Date,i=0,_;i<E&&(_=C[i++]);)s.hear(_,y);C=C.slice(i),console.STAT&&console.STAT(v,+new Date-v,"hear loop"),N(y),C.length&&b(G,0)})()}),u="";return}if(D==="{"||(u["#"]||Object.plain(u))&&($=u)){if($)return k.one($,y,j);c(u,function(O,C){if(O||!C)return s.say({dam:"!",err:"DAM JSON parse error."},y);k.one(C,y,j)});return}}};k.one=function(u,y,G){var D,$,O,C,E;if(u.DBG&&(u.DBG=E={DBG:u.DBG}),E&&(E.h=G),E&&(E.hp=+new Date),(D=u["#"])||(D=u["#"]=String.random(9)),!(O=p(D))&&($=u["##"],!($&&(O=u["@"]||u.get&&D)&&m.check(C=O+$)))){if((u._=function(){}).via=s.leap=y,(O=u["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(v){this[v]=1},u._.yo={}),O=u.dam){(O=s.hear[O])&&O(u,y,l),g(D);return}(O=u.ok)&&(u._.near=O["/"]);var G=+new Date;E&&(E.is=G),y.SI=D,g.ed=function(v){D===v&&(g.ed=0,(v=m.s[D])&&(v.via=y,u.get&&(v.it=u)))},l.on("in",s.last=u),E&&(E.hd=+new Date),console.STAT&&console.STAT(G,+new Date-G,u.get?"msg get":u.put?"msg put":"msg"),g(D),C&&g(C),s.leap=s.last=null}},k.c=k.d=0,function(){var u=0,y;s.hash=function($,O){var C,E,G,v=+new Date;a($.put,function i(_,w){var x=(E||(E=G=w||"")).slice(0,32768);if(C=String.hash(x,C),E=E.slice(32768),E){b(i,0);return}console.STAT&&console.STAT(v,+new Date-v,"say json+hash"),$._.$put=G,$["##"]=C,s.say($,O),delete $._.$put},j)};function j($,O){var C;return O instanceof Object?(Object.keys(O).sort().forEach(D,{to:C={},on:O}),C):O}function D($){this.to[$]=this.on[$]}s.say=function($,O){var C;if((C=this)&&(C=C.to)&&C.next&&C.next($),!$)return!1;var E,G,v,i=$["@"],_=$._||($._=function(){}),w=$.DBG,x=+new Date;if(_.y=_.y||x,O||w&&(w.y=x),(E=$["#"])||(E=$["#"]=String.random(9)),!y&&g(E),!(G=$["##"])&&h!==$.put&&!_.via&&i){s.hash($,O);return}if(!O&&i&&(O=(C=m.s[i])&&(C.via||(C=C.it)&&(C=C._)&&C.via)||(C=s.last)&&i===C["#"]&&s.leap),!O&&i)return m.s[i]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(i&&!$.put&&!G&&((m.s[i]||"").it||"")["##"])return!1;if(!O&&s.way)return s.way($);if(w&&(w.yh=+new Date),!(v=_.raw)){s.raw($,O);return}if(w&&(w.yr=+new Date),!O||!O.id){if(!Object.plain(O||d.peers))return!1;var x=+new Date;d.puff;var A=d.peers,S=Object.keys(O||d.peers||{});console.STAT&&console.STAT(x,+new Date-x,"peer keys"),function q(){var L=+new Date;y=1;var J=_.raw;_.raw=v;for(var Q=0,I;Q<9&&(I=(S||"")[Q++]);)(I=A[I]||(O||"")[I])&&s.say($,I);_.raw=J,y=0,S=S.slice(Q),console.STAT&&console.STAT(L,+new Date-L,"say loop"),S.length&&(b(q,0),i&&g(i))}();return}if(!O.wire&&s.wire&&s.wire(O),E!==O.last){if(O.last=E,O===_.via||(C=_.yo)&&(C[O.url]||C[O.pid]||C[O.id]))return!1;if(console.STAT&&console.STAT(x,((w||_).yp=+new Date)-(_.y||x),"say prep"),!y&&i&&g(i),O.batch){if(O.tail=(C=O.tail||0)+v.length,O.tail<=d.pack){O.batch+=(C?",":"")+v;return}N(O)}O.batch="[";var H=+new Date;setTimeout(function(){console.STAT&&console.STAT(H,+new Date-H,"0ms TO"),N(O)},d.gap),T(v,O),console.STAT&&i===O.SI&&console.STAT(x,+new Date-O.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function($,O){if(!$)return"";var C=$._||{},E,G;if(G=C.raw)return G;if(typeof $=="string")return $;var v=$["##"],i=$["@"];if(v&&i){if(!C.via&&p(i+v))return!1;if(G=(m.s[i]||"").it){if(v===G["##"])return!1;G["##"]||(G["##"]=v)}}if(!$.dam&&!$["@"]){var _=0,w=[];G=d.peers;for(var x in G){var A=G[x];if(w.push(A.url||A.pid||A.id),++_>6)break}_>1&&($["><"]=w.join())}if($.put&&(G=$.ok)&&($.ok={"@":(G["@"]||1)-1,"/":G["/"]==$._.near?s.near:G["/"]}),E=C.$put){G={},Object.keys($).forEach(function(H){G[H]=$[H]}),G.put=":])([:",a(G,function(H,F){if(!H){var q=+new Date;G=F.indexOf('"put":":])([:"'),S(h,F=F.slice(0,G+6)+E+F.slice(G+14)),console.STAT&&console.STAT(q,+new Date-q,"say slice")}});return}a($,S);function S(H,F){H||(C.raw=F,s.say($,O))}}}();function N(u){var y=u.batch,j=typeof y=="string";if(j&&(y+="]"),u.batch=u.tail=null,!!y&&!(j?3>y.length:!y.length)){if(!j)try{y=y.length===1?y[0]:JSON.stringify(y)}catch(D){return d.log("DAM JSON stringify error",D)}y&&T(y,u)}}function T(u,y){try{var j=y.wire;y.say?y.say(u):j.send&&j.send(u),s.say.d+=u.length||0,++s.say.c}catch{(y.queue=y.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var y=u.wire,j;if(!y){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(j=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:l.opt.pid},d.peers[j]=u),delete m.s[u.last]),u.met||(s.near++,u.met=+new Date,l.on("hi",u)),j=u.queue,u.queue=[],setTimeout.each(j||[],function(D){T(D,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,l.on("bye",u);var y=+new Date;y=y-(u.met||y),s.bye.time=((s.bye.time||y)+y)/2},s.hear["!"]=function(u,y){d.log("Error:",u.err)},s.hear["?"]=function(u,y){u.pid&&(y.pid||(y.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},y),delete m.s[y.last])},s.hear.mob=function(u,y){if(u.peers){var j=Object.keys(u.peers),D=j[Math.random()*j.length>>0];D&&(s.bye(y),s.hi(D))}},l.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),l.on("bye",function(u,y){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(y=u.wire)&&y.close&&y.close(),delete d.peers[u.id],u.wire=null}),l.on("bye",function(u,y){this.to.next(u),(y=console.STAT)&&(y.peers=s.near),(y=u.url)&&setTimeout(function(){},d.lack||9e3)}),l.on("hi",function(u,y){if(this.to.next(u),(y=console.STAT)&&(y.peers=s.near),!d.super){var j=Object.keys(l.next||"");j.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(j,function(D){var $=l.next[D];if(d.super||($.ask||"")[""]){s.say({get:{"#":D}},u);return}setTimeout.each(Object.keys($.ask||""),function(O){O&&s.say({"##":String.hash((l.graph[D]||"")[O]),get:{"#":D,".":O}},u)})})}}),s}var h;try{o.exports=f}catch{}})(e,"./mesh"),e(function(o){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(a){if(this.to.next(a),a.once)return;var f=a.opt;if(f.WebSocket===!1)return;var h=r.window||{},l=f.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!l)return;f.WebSocket=l;var s=f.mesh=f.mesh||r.Mesh(a);s.wire||f.wire,s.wire=f.wire=d;function d(g){try{if(!g||!g.url)return N&&N(g);var k=g.url.replace(/^http/,"ws"),N=g.wire=new f.WebSocket(k);return N.onclose=function(){m(g),f.mesh.bye(g)},N.onerror=function(T){m(g)},N.onopen=function(){f.mesh.hi(g)},N.onmessage=function(T){T&&f.mesh.hear(T.data||T,g)},N}catch{f.mesh.bye(g)}}setTimeout(function(){!f.super&&a.on("out",{dam:"hi"})},1);var b=2*999;function m(g){clearTimeout(g.defer),f.peers[g.url]&&(p&&g.retry<=0||(g.retry=(g.retry||f.retry+1||60)-(-g.tried+(g.tried=+new Date)<b*4?1:0),g.defer=setTimeout(function k(){if(p&&p.hidden)return setTimeout(k,b);d(g)},b)))}var p=""+c!=typeof document&&document});var c})(e,"./websocket"),e(function(o){if(!(typeof Gun>"u")){var r=function(){},c;try{c=(Gun.window||r).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(f,h){this[f]=h},removeItem:function(f){delete this[f]},getItem:function(f){return this[f]}});var a=JSON.stringifyAsync||function(f,h,l,s){var d;try{h(d,JSON.stringify(f,l,s))}catch(b){h(b)}};Gun.on("create",function f(h){this.to.next(h);var l=h.opt;h.graph;var s=[],d,b,m,p;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{d=f[l.prefix]=f[l.prefix]||JSON.parse(m=c.getItem(l.prefix))||{}}catch{d=f[l.prefix]={}}m=(m||"").length,h.on("get",function(k){this.to.next(k);var N=k.get,T,u,y,j;!N||!(T=N["#"])||(u=d[T]||j,u&&(y=N["."])&&!Object.plain(y)&&(u=Gun.state.ify({},y,Gun.state.is(u,y),u[y],T)),Gun.on.get.ack(k,u))}),h.on("put",function(k){this.to.next(k);var N=k.put,T=N["#"],u=N["."],y=k["#"],j=k.ok||"";if(d[T]=Gun.state.ify(d[T],u,N[">"],N[":"],T),p&&m>4999880){h.on("in",{"@":y,err:"localStorage max!"});return}!k["@"]&&(!k._.via||Math.random()<j["@"]/j["/"])&&s.push(y),!b&&(b=setTimeout(g,9+m/333))});function g(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var k=s;clearTimeout(b),b=!1,s=[],a(d,function(N,T){try{!N&&c.setItem(l.prefix,T)}catch(u){N=p=u||"localStorage failure"}N&&(Gun.log(N+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:N,get:l.prefix,put:d})),m=T.length,setTimeout.each(k,function(u){h.on("in",{"@":u,err:N,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var G;if(""+G!=typeof Gun){var e=function(v){console.warn("Warning! Deprecated internal utility will break in next version:",v)},t=Gun;t.fn=t.fn||{is:function(v){return e("fn"),!!v&&typeof v=="function"}},t.bi=t.bi||{is:function(v){return e("bi"),v instanceof Boolean||typeof v=="boolean"}},t.num=t.num||{is:function(v){return e("num"),!o(v)&&(v-parseFloat(v)+1>=0||v===1/0||v===-1/0)}},t.text=t.text||{is:function(v){return e("text"),typeof v=="string"}},t.text.ify=t.text.ify||function(v){return e("text.ify"),t.text.is(v)?v:typeof JSON<"u"?JSON.stringify(v):v&&v.toString?v.toString():v},t.text.random=t.text.random||function(v,i){e("text.random");var _="";for(v=v||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";v>0;)_+=i.charAt(Math.floor(Math.random()*i.length)),v--;return _},t.text.match=t.text.match||function(v,i){var _,w;return e("text.match"),typeof v!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},_=i["="]||i["*"]||i[">"]||i["<"],v===_?!0:w!==i["="]?!1:(_=i["*"]||i[">"]||i["<"],v.slice(0,(_||"").length)===_?!0:w!==i["*"]?!1:w!==i[">"]&&w!==i["<"]?v>=i[">"]&&v<=i["<"]:w!==i[">"]&&v>=i[">"]||w!==i["<"]&&v<=i["<"]))},t.text.hash=t.text.hash||function(v,i){if(e("text.hash"),typeof v=="string"){if(i=i||0,!v.length)return i;for(var _=0,w=v.length,x;_<w;++_)x=v.charCodeAt(_),i=(i<<5)-i+x,i|=0;return i}},t.list=t.list||{is:function(v){return e("list"),v instanceof Array}},t.list.slit=t.list.slit||Array.prototype.slice,t.list.sort=t.list.sort||function(v){return e("list.sort"),function(i,_){return!i||!_?0:(i=i[v],_=_[v],i<_?-1:i>_?1:0)}},t.list.map=t.list.map||function(v,i,_){return e("list.map"),C(v,i,_)},t.list.index=1,t.obj=t.boj||{is:function(v){return e("obj"),v?v instanceof Object&&v.constructor===Object||Object.prototype.toString.call(v).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},t.obj.put=t.obj.put||function(v,i,_){return e("obj.put"),(v||{})[i]=_,v},t.obj.has=t.obj.has||function(v,i){return e("obj.has"),v&&Object.prototype.hasOwnProperty.call(v,i)},t.obj.del=t.obj.del||function(v,i){if(e("obj.del"),!!v)return v[i]=null,delete v[i],v},t.obj.as=t.obj.as||function(v,i,_,w){return e("obj.as"),v[i]=v[i]||(w===_?{}:_)},t.obj.ify=t.obj.ify||function(v){if(e("obj.ify"),y(v))return v;try{v=JSON.parse(v)}catch{v={}}return v},function(){var v;function i(_,w){D(this,w)&&v!==this[w]||(this[w]=_)}t.obj.to=t.obj.to||function(_,w){return e("obj.to"),w=w||{},C(_,i,w),w}}(),t.obj.copy=t.obj.copy||function(v){return e("obj.copy"),v&&JSON.parse(JSON.stringify(v))},function(){function v(i,_){var w=this.n,x;if(!(w&&(_===w||y(w)&&D(w,_)))&&x!==_)return!0}t.obj.empty=t.obj.empty||function(i,_){return e("obj.empty"),i?!C(i,v,{n:_}):!0}}(),function(){function v(w,x){if(arguments.length===2){v.r=v.r||{},v.r[w]=x;return}v.r=v.r||[],v.r.push(w)}var i=Object.keys,_;Object.keys=Object.keys||function(w){return _(w,function(x,A,S){S(A)})},t.obj.map=_=t.obj.map||function(w,x,A){e("obj.map");var S,H=0,F,q,L,J,Q=typeof x=="function";if(v.r=S,i&&y(w)&&(L=i(w),J=!0),A=A||{},o(w)||L)for(F=(L||w).length;H<F;H++){var I=H+t.list.index;if(Q){if(q=J?x.call(A,w[L[H]],L[H],v):x.call(A,w[H],I,v),q!==S)return q}else if(x===w[J?L[H]:H])return L?L[H]:I}else for(H in w)if(Q){if(D(w,H)&&(q=A?x.call(A,w[H],H,v):x(w[H],H,v),q!==S))return q}else if(x===w[H])return H;return Q?v.r:t.list.index?0:-1}}(),t.time=t.time||{},t.time.is=t.time.is||function(v){return e("time"),v?v instanceof Date:+new Date().getTime()};var T=t.fn.is,o=t.list.is,u=t.obj,y=u.is,D=u.has,C=u.map,r={};r.is=function(v){return e("val.is"),v===G?!1:v===null?!0:v===1/0?!1:f(v)||a(v)||p(v)?!0:r.link.is(v)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(i){if(e("val.link.is"),i&&i[c]&&!i._&&y(i)){var _={};if(C(i,v,_),_.id)return _.id}return!1};function v(i,_){var w=this;if(w.id)return w.id=!1;if(_==c&&f(i))w.id=i;else return w.id=!1}}(),r.link.ify=function(v){return e("val.link.ify"),O({},c,v)},t.obj.has._=".";var c=r.link._,G,a=t.bi.is,p=t.num.is,f=t.text.is,u=t.obj,y=u.is,O=u.put,C=u.map;t.val=t.val||r;var h={_:"_"};h.soul=function(v,i){return e("node.soul"),v&&v._&&v._[i||d]},h.soul.ify=function(v,i){return e("node.soul.ify"),i=typeof i=="string"?{soul:i}:i||{},v=v||{},v._=v._||{},v._[d]=i.soul||v._[d]||s(),v},h.soul._=r.link._,function(){h.is=function(i,_,w){e("node.is");var x;return y(i)&&(x=h.soul(i))?!C(i,v,{as:w,cb:_,s:x,n:i}):!1};function v(i,_){if(_!==h._){if(!r.is(i))return!0;this.cb&&this.cb.call(this.as,i,_,this.n,this.s)}}}(),function(){h.ify=function(i,_,w){return e("node.ify"),_?typeof _=="string"?_={soul:_}:typeof _=="function"&&(_={map:_}):_={},_.map&&(_.node=_.map.call(w,i,G,_.node||{})),(_.node=h.soul.ify(_.node||{},_))&&C(i,v,{o:_,as:w}),_.node};function v(i,_){var w=this.o,x,A;if(w.map){x=w.map.call(this.as,i,""+_,w.node),A===x?j(w.node,_):w.node&&(w.node[_]=x);return}r.is(i)&&(w.node[_]=i)}}();var u=t.obj,y=u.is,j=u.del,C=u.map,l=t.text,s=l.random,d=h.soul._,G;t.node=t.node||h;var b=t.state;b.lex=function(){return e("state.lex"),b().toString(36).replace(".","")},b.to=function(v,i,_){e("state.to");var w=(v||{})[i];return y(w)&&(w=E(w)),b.ify(_,i,b.is(v,i),w,h.soul(v))},function(){b.map=function(i,_,w){e("state.map");var x,A=y(A=i||_)?A:null;return i=T(i=i||_)?i:null,A&&!i?(_=p(_)?_:b(),A[k]=A[k]||{},C(A,v,{o:A,s:_}),A):(w=w||y(_)?_:x,_=p(_)?_:b(),function(S,H,F,q){if(!i)return v.call({o:F,s:_},S,H),S;i.call(w||this||{},S,H,F,q),!(D(F,H)&&x===F[H])&&v.call({o:F,s:_},S,H)})};function v(i,_){k!==_&&b.ify(this.o,_,this.s)}}();var u=t.obj;u.as;var D=u.has,y=u.is,C=u.map,E=u.copy,m=t.num,p=m.is,g=t.fn,T=g.is,k=h._,G,N={};(function(){N.is=function(_,w,x,A){return e("graph.is"),!_||!y(_)||$(_)?!1:!C(_,v,{cb:w,fn:x,as:A})};function v(_,w){if(!_||w!==h.soul(_)||!h.is(_,this.fn,this.as))return!0;this.cb&&(i.n=_,i.as=this.as,this.cb.call(i.as,_,w,i))}function i(_){_&&h.is(i.n,_,i.as)}})(),function(){N.ify=function(A,S,H){e("graph.ify");var F={path:[],obj:A};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof H=="string"&&(S.soul=S.soul||H,H=G),S.soul&&(F.link=r.link.ify(S.soul)),S.shell=(H||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||H,v(S,F),S.root=F.node,S.graph};function v(A,S){var H;return(H=x(A,S))?H:(S.env=A,S.soul=_,h.ify(S.obj,i,S)&&(S.link=S.link||r.link.ify(h.soul(S.node)),S.obj!==A.shell&&(A.graph[r.link.is(S.link)]=S.node)),S)}function i(A,S,H){var F=this,q=F.env,L,J;if(h._===S&&D(A,r.link._))return H._;if(L=w(A,S,H,F,q)){if(S||(F.node=F.node||H||{},D(A,h._)&&h.soul(A)&&(F.node._=E(A._)),F.node=h.soul.ify(F.node,r.link.is(F.link)),F.link=F.link||r.link.ify(h.soul(F.node))),(J=q.map)&&(J.call(q.as||{},A,S,H,F),D(H,S))){if(A=H[S],G===A){j(H,S);return}if(!(L=w(A,S,H,F,q)))return}if(!S)return F.node;if(L===!0)return A;if(J=v(q,{obj:A,path:F.path.concat(S)}),!!J.node)return J.link}}function _(A){var S=this,H=r.link.is(S.link),F=S.env.graph;S.link=S.link||r.link.ify(A),S.link[r.link._]=A,S.node&&S.node[h._]&&(S.node[h._][r.link._]=A),D(F,H)&&(F[A]=F[H],j(F,H))}function w(A,S,H,F,q){var L;if(r.is(A))return!0;if(y(A))return 1;if(L=q.invalid)return A=L.call(q.as||{},A,S,H),w(A,S,H,F,q);q.err="Invalid value at '"+F.path.concat(S).join(".")+"'!",t.list.is(A)&&(q.err+=" Use `.set(item)` instead of an Array.")}function x(A,S){for(var H=A.seen,F=H.length,q;F--;)if(q=H[F],S.obj===q.obj)return q;H.push(S)}}(),N.node=function(v){e("graph.node");var i=h.soul(v);if(i)return O({},i,v)},function(){N.to=function(i,_,w){if(e("graph.to"),!!i){var x={};return w=w||{seen:{}},C(i[_],v,{obj:x,graph:i,opt:w}),x}};function v(i,_){var w,x;if(h._===_){if($(i,r.link._))return;this.obj[_]=E(i);return}if(!(w=r.link.is(i))){this.obj[_]=i;return}if(x=this.opt.seen[w]){this.obj[_]=x;return}this.obj[_]=this.opt.seen[w]=N.to(this.graph,w,this.opt)}}();var T=t.fn.is,u=t.obj,y=u.is,j=u.del,D=u.has,$=u.empty,O=u.put,C=u.map,E=u.copy,G;t.graph=t.graph||N}}()})(Xe);var bn=Xe.exports,gn=bn;const kn=vn(gn),mn=kn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),At=mn.get("cards"),We=document.createElement("a"),Le=document.createElement("input");Le.type="file";Le.accept=".json";Le.onchange=async n=>{var t;if(!n||!n.target)return;const e=(t=n.target.files)==null?void 0:t[0];if(e){const o=await e.text();Ve(JSON.parse(o))}};const ke=Dt([]),Ve=n=>{At.put({data:JSON.stringify(n)})};At.on(n=>{ke.set(JSON.parse(n.data))});const $n=()=>{We.href=URL.createObjectURL(new Blob([JSON.stringify(Et(ke))],{type:"application/json"})),We.download="cards.json",We.click()},wn=()=>{Le.click()};function st(n,e,t){const o=n.slice();return o[3]=e[t],o}function dt(n,e,t){const o=n.slice();return o[6]=e[t],o}function ht(n,e,t){const o=n.slice();return o[6]=e[t],o}function pt(n){let e,t;return e=new Qe({props:{card:n[6]}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&2&&(c.card=o[6]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function _t(n){let e,t;return e=new Qe({props:{card:n[6],back:!0}}),{c(){Z(e.$$.fragment)},m(o,r){X(e,o,r),t=!0},p(o,r){const c={};r&2&&(c.card=o[6]),e.$set(c)},i(o){t||(W(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function vt(n){let e,t,o,r,c,a=oe(n[3]),f=[];for(let b=0;b<a.length;b+=1)f[b]=pt(ht(n,a,b));const h=b=>K(f[b],1,1,()=>{f[b]=null});let l=oe(n[3]),s=[];for(let b=0;b<l.length;b+=1)s[b]=_t(dt(n,l,b));const d=b=>K(s[b],1,1,()=>{s[b]=null});return{c(){e=R("div");for(let b=0;b<f.length;b+=1)f[b].c();t=V(),o=R("div");for(let b=0;b<s.length;b+=1)s[b].c();r=V(),M(e,"class","page svelte-1bs53cn"),M(o,"class","page svelte-1bs53cn")},m(b,m){P(b,e,m);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(e,null);P(b,t,m),P(b,o,m);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(o,null);U(o,r),c=!0},p(b,m){if(m&2){a=oe(b[3]);let p;for(p=0;p<a.length;p+=1){const g=ht(b,a,p);f[p]?(f[p].p(g,m),W(f[p],1)):(f[p]=pt(g),f[p].c(),W(f[p],1),f[p].m(e,null))}for(pe(),p=a.length;p<f.length;p+=1)h(p);_e()}if(m&2){l=oe(b[3]);let p;for(p=0;p<l.length;p+=1){const g=dt(b,l,p);s[p]?(s[p].p(g,m),W(s[p],1)):(s[p]=_t(g),s[p].c(),W(s[p],1),s[p].m(o,r))}for(pe(),p=l.length;p<s.length;p+=1)d(p);_e()}},i(b){if(!c){for(let m=0;m<a.length;m+=1)W(f[m]);for(let m=0;m<l.length;m+=1)W(s[m]);c=!0}},o(b){f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)K(f[m]);s=s.filter(Boolean);for(let m=0;m<s.length;m+=1)K(s[m]);c=!1},d(b){b&&(B(e),B(t),B(o)),Se(f,b),Se(s,b)}}}function Tn(n){let e,t,o,r=oe(ct(n[1])),c=[];for(let f=0;f<r.length;f+=1)c[f]=vt(st(n,r,f));const a=f=>K(c[f],1,1,()=>{c[f]=null});return{c(){e=R("div"),t=R("section");for(let f=0;f<c.length;f+=1)c[f].c();M(t,"class","print")},m(f,h){P(f,e,h),U(e,t);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(t,null);n[2](t),o=!0},p(f,[h]){if(h&2){r=oe(ct(f[1]));let l;for(l=0;l<r.length;l+=1){const s=st(f,r,l);c[l]?(c[l].p(s,h),W(c[l],1)):(c[l]=vt(s),c[l].c(),W(c[l],1),c[l].m(t,null))}for(pe(),l=r.length;l<c.length;l+=1)a(l);_e()}},i(f){if(!o){for(let h=0;h<r.length;h+=1)W(c[h]);o=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)K(c[h]);o=!1},d(f){f&&B(e),Se(c,f),n[2](null)}}}function jn(n,e,t){let o;Pe(n,ke,a=>t(1,o=a));let r;function c(a){xe[a?"unshift":"push"](()=>{r=a,t(0,r)})}return[r,o,c]}class Sn extends se{constructor(e){super(),ce(this,e,jn,Tn,ue,{})}}function On(n){let e,t,o,r,c;const a=n[2].default,f=Ft(a,n,n[1],null);return{c(){e=R("button"),f&&f.c(),M(e,"class",t="button "+n[0]+" svelte-zqnkwt")},m(h,l){P(h,e,l),f&&f.m(e,null),o=!0,r||(c=le(e,"click",n[3]),r=!0)},p(h,[l]){f&&f.p&&(!o||l&2)&&Mt(f,a,h,h[1],o?It(a,h[1],l,null):Bt(h[1]),null),(!o||l&1&&t!==(t="button "+h[0]+" svelte-zqnkwt"))&&M(e,"class",t)},i(h){o||(W(f,h),o=!0)},o(h){K(f,h),o=!1},d(h){h&&B(e),f&&f.d(h),r=!1,c()}}}function Dn(n,e,t){let{$$slots:o={},$$scope:r}=e,{colour:c="green"}=e;function a(f){zt.call(this,n,f)}return n.$$set=f=>{"colour"in f&&t(0,c=f.colour),"$$scope"in f&&t(1,r=f.$$scope)},[c,r,o,a]}class de extends se{constructor(e){super(),ce(this,e,Dn,On,ue,{colour:0})}}function An(n){let e,t,o;return t=new Be({props:{cardType:n[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),t.$on("type",n[2]),{c(){e=R("div"),Z(t.$$.fragment),M(e,"class","select-wrapper svelte-1wgwrdq"),ie(e,"background-color",n[1])},m(r,c){P(r,e,c),X(t,e,null),o=!0},p(r,[c]){const a={};c&1&&(a.cardType=r[0]),t.$set(a),(!o||c&2)&&ie(e,"background-color",r[1])},i(r){o||(W(t.$$.fragment,r),o=!0)},o(r){K(t.$$.fragment,r),o=!1},d(r){r&&B(e),Y(t)}}}function Nn(n,e,t){let o,{currentFilter:r="None"}=e;const c=({detail:a})=>t(0,r=a);return n.$$set=a=>{"currentFilter"in a&&t(0,r=a.currentFilter)},n.$$.update=()=>{n.$$.dirty&1&&t(1,o=De(r))},[r,o,c]}class Nt extends se{constructor(e){super(),ce(this,e,Nn,An,ue,{currentFilter:0})}}function yt(n,e,t){const o=n.slice();return o[10]=e[t],o}function Cn(n){let e;return{c(){e=ee("home")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function bt(n){let e,t=n[10].cardType.passive?"passive":"",o,r,c=n[10].cardType.type+"",a,f,h,l,s;return h=new Ke({props:{card:n[10],editable:!1}}),{c(){e=R("div"),o=ee(t),r=V(),a=ee(c),f=V(),Z(h.$$.fragment),l=V()},m(d,b){P(d,e,b),U(e,o),U(e,r),U(e,a),U(e,f),X(h,e,null),U(e,l),s=!0},p(d,b){(!s||b&8)&&t!==(t=d[10].cardType.passive?"passive":"")&&Oe(o,t),(!s||b&8)&&c!==(c=d[10].cardType.type+"")&&Oe(a,c);const m={};b&8&&(m.card=d[10]),h.$set(m)},i(d){s||(W(h.$$.fragment,d),s=!0)},o(d){K(h.$$.fragment,d),s=!1},d(d){d&&B(e),Y(h)}}}function Gn(n){let e,t,o,r,c,a,f,h,l=n[3].length+"",s,d,b,m,p,g,k,N,T,u,y,j,D,$;t=new de({props:{$$slots:{default:[Cn]},$$scope:{ctx:n}}}),t.$on("click",n[5]);function O(i){n[6](i)}let C={};n[0]!==void 0&&(C.currentFilter=n[0]),r=new Nt({props:C}),xe.push(()=>Ot(r,"currentFilter",O));let E=oe(n[3]),G=[];for(let i=0;i<E.length;i+=1)G[i]=bt(yt(n,E,i));const v=i=>K(G[i],1,1,()=>{G[i]=null});return{c(){e=R("header"),Z(t.$$.fragment),o=V(),Z(r.$$.fragment),a=V(),f=ee(n[0]),h=ee(": "),s=ee(l),d=V(),b=R("div"),m=ee("search filter: "),p=R("input"),g=V(),k=R("label"),k.textContent="filter passive:",N=V(),T=R("input"),u=V(),y=R("section");for(let i=0;i<G.length;i+=1)G[i].c();M(e,"class","svelte-1fxk8fu"),M(p,"type","text"),M(k,"for","filter-passive"),M(T,"type","checkbox"),M(T,"name","filter-passive"),M(T,"id","filter-passive"),M(b,"class","filter"),M(y,"class","container svelte-1fxk8fu")},m(i,_){P(i,e,_),X(t,e,null),U(e,o),X(r,e,null),P(i,a,_),P(i,f,_),P(i,h,_),P(i,s,_),P(i,d,_),P(i,b,_),U(b,m),U(b,p),Ie(p,n[1]),U(b,g),U(b,k),U(b,N),U(b,T),T.checked=n[2],P(i,u,_),P(i,y,_);for(let w=0;w<G.length;w+=1)G[w]&&G[w].m(y,null);j=!0,D||($=[le(p,"input",n[7]),le(T,"change",n[8])],D=!0)},p(i,[_]){const w={};_&8192&&(w.$$scope={dirty:_,ctx:i}),t.$set(w);const x={};if(!c&&_&1&&(c=!0,x.currentFilter=i[0],jt(()=>c=!1)),r.$set(x),(!j||_&1)&&Oe(f,i[0]),(!j||_&8)&&l!==(l=i[3].length+"")&&Oe(s,l),_&2&&p.value!==i[1]&&Ie(p,i[1]),_&4&&(T.checked=i[2]),_&8){E=oe(i[3]);let A;for(A=0;A<E.length;A+=1){const S=yt(i,E,A);G[A]?(G[A].p(S,_),W(G[A],1)):(G[A]=bt(S),G[A].c(),W(G[A],1),G[A].m(y,null))}for(pe(),A=E.length;A<G.length;A+=1)v(A);_e()}},i(i){if(!j){W(t.$$.fragment,i),W(r.$$.fragment,i);for(let _=0;_<E.length;_+=1)W(G[_]);j=!0}},o(i){K(t.$$.fragment,i),K(r.$$.fragment,i),G=G.filter(Boolean);for(let _=0;_<G.length;_+=1)K(G[_]);j=!1},d(i){i&&(B(e),B(a),B(f),B(h),B(s),B(d),B(b),B(u),B(y)),Y(t),Y(r),Se(G,i),D=!1,me($)}}}function xn(n,e,t){let o,r;Pe(n,ke,m=>t(4,r=m));let c="None",a="",f=!1;const h=(m,p)=>!p||m.cardType.passive,l=()=>{Me.set("")};function s(m){c=m,t(0,c)}function d(){a=this.value,t(1,a)}function b(){f=this.checked,t(2,f)}return n.$$.update=()=>{n.$$.dirty&23&&t(3,o=r.map(m=>{const p=[m.cardHalf1];return m.cardHalf2&&p.push(m.cardHalf2),p}).flat().filter(m=>(console.log(m.text.toLocaleLowerCase().includes(a.toLocaleLowerCase()),(c==="None"||m.cardType.type===c)&&m.text.toLocaleLowerCase().includes(a.toLocaleLowerCase())&&h(m,f)),(c==="None"||m.cardType.type===c)&&m.text.toLocaleLowerCase().includes(a.toLocaleLowerCase())&&h(m,f))))},[c,a,f,o,r,l,s,d,b]}class Hn extends se{constructor(e){super(),ce(this,e,xn,Gn,ue,{})}}function gt(n,e,t){const o=n.slice();return o[15]=e[t],o}function En(n){let e;return{c(){e=ee("add two sided")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Fn(n){let e;return{c(){e=ee("add one sided")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function In(n){let e;return{c(){e=ee("save")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Mn(n){let e;return{c(){e=ee("import JSON")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Bn(n){let e;return{c(){e=ee("export JSON")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Pn(n){let e;return{c(){e=ee("Download")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Jn(n){let e;return{c(){e=ee("view halves")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function Ln(n){let e;return{c(){e=ee("remove")},m(t,o){P(t,e,o)},d(t){t&&B(e)}}}function kt(n){let e,t,o,r,c,a;t=new Qe({props:{card:n[15],readable:!0}});function f(){return n[13](n[15])}return r=new de({props:{colour:"red",$$slots:{default:[Ln]},$$scope:{ctx:n}}}),r.$on("click",f),{c(){e=R("div"),Z(t.$$.fragment),o=V(),Z(r.$$.fragment),c=V(),M(e,"class","wrapper svelte-m1wwdp")},m(h,l){P(h,e,l),X(t,e,null),U(e,o),X(r,e,null),U(e,c),a=!0},p(h,l){n=h;const s={};l&16&&(s.card=n[15]),t.$set(s);const d={};l&262144&&(d.$$scope={dirty:l,ctx:n}),r.$set(d)},i(h){a||(W(t.$$.fragment,h),W(r.$$.fragment,h),a=!0)},o(h){K(t.$$.fragment,h),K(r.$$.fragment,h),a=!1},d(h){h&&B(e),Y(t),Y(r)}}}function qn(n){let e,t,o,r,c,a,f,h,l,s,d,b,m,p,g,k,N,T,u,y,j=n[4].length+"",D,$,O,C,E,G,v,i,_,w,x,A,S,H;function F(I){n[5](I)}let q={};n[0]!==void 0&&(q.currentFilter=n[0]),t=new Nt({props:q}),xe.push(()=>Ot(t,"currentFilter",F)),c=new de({props:{colour:"blue",$$slots:{default:[En]},$$scope:{ctx:n}}}),c.$on("click",n[6]),f=new de({props:{colour:"blue",$$slots:{default:[Fn]},$$scope:{ctx:n}}}),f.$on("click",n[7]),l=new de({props:{$$slots:{default:[In]},$$scope:{ctx:n}}}),l.$on("click",n[8]),d=new de({props:{$$slots:{default:[Mn]},$$scope:{ctx:n}}}),d.$on("click",wn),m=new de({props:{$$slots:{default:[Bn]},$$scope:{ctx:n}}}),m.$on("click",$n),g=new de({props:{$$slots:{default:[Pn]},$$scope:{ctx:n}}}),g.$on("click",n[9]),N=new de({props:{$$slots:{default:[Jn]},$$scope:{ctx:n}}}),N.$on("click",n[10]);let L=oe(n[4]),J=[];for(let I=0;I<L.length;I+=1)J[I]=kt(gt(n,L,I));const Q=I=>K(J[I],1,1,()=>{J[I]=null});return{c(){e=R("section"),Z(t.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),Z(f.$$.fragment),h=V(),Z(l.$$.fragment),s=V(),Z(d.$$.fragment),b=V(),Z(m.$$.fragment),p=V(),Z(g.$$.fragment),k=V(),Z(N.$$.fragment),T=V(),u=R("h1"),y=ee("cards "),D=ee(j),$=V(),O=R("div"),C=ee("search filter: "),E=R("input"),G=V(),v=R("label"),v.textContent="filter passive:",i=V(),_=R("input"),w=V(),x=R("section");for(let I=0;I<J.length;I+=1)J[I].c();M(e,"class","button-container svelte-m1wwdp"),M(E,"type","text"),M(v,"for","filter-passive"),M(_,"type","checkbox"),M(_,"name","filter-passive"),M(_,"id","filter-passive"),M(O,"class","filter svelte-m1wwdp"),M(x,"class","container svelte-m1wwdp")},m(I,z){P(I,e,z),X(t,e,null),U(e,r),X(c,e,null),U(e,a),X(f,e,null),U(e,h),X(l,e,null),U(e,s),X(d,e,null),U(e,b),X(m,e,null),U(e,p),X(g,e,null),U(e,k),X(N,e,null),P(I,T,z),P(I,u,z),U(u,y),U(u,D),P(I,$,z),P(I,O,z),U(O,C),U(O,E),Ie(E,n[1]),U(O,G),U(O,v),U(O,i),U(O,_),_.checked=n[2],P(I,w,z),P(I,x,z);for(let ne=0;ne<J.length;ne+=1)J[ne]&&J[ne].m(x,null);A=!0,S||(H=[le(E,"input",n[11]),le(_,"change",n[12])],S=!0)},p(I,[z]){const ne={};!o&&z&1&&(o=!0,ne.currentFilter=I[0],jt(()=>o=!1)),t.$set(ne);const fe={};z&262144&&(fe.$$scope={dirty:z,ctx:I}),c.$set(fe);const ye={};z&262144&&(ye.$$scope={dirty:z,ctx:I}),f.$set(ye);const Ae={};z&262144&&(Ae.$$scope={dirty:z,ctx:I}),l.$set(Ae);const ae={};z&262144&&(ae.$$scope={dirty:z,ctx:I}),d.$set(ae);const be={};z&262144&&(be.$$scope={dirty:z,ctx:I}),m.$set(be);const Ne={};z&262144&&(Ne.$$scope={dirty:z,ctx:I}),g.$set(Ne);const Ye={};if(z&262144&&(Ye.$$scope={dirty:z,ctx:I}),N.$set(Ye),(!A||z&16)&&j!==(j=I[4].length+"")&&Oe(D,j),z&2&&E.value!==I[1]&&Ie(E,I[1]),z&4&&(_.checked=I[2]),z&24){L=oe(I[4]);let te;for(te=0;te<L.length;te+=1){const Ze=gt(I,L,te);J[te]?(J[te].p(Ze,z),W(J[te],1)):(J[te]=kt(Ze),J[te].c(),W(J[te],1),J[te].m(x,null))}for(pe(),te=L.length;te<J.length;te+=1)Q(te);_e()}},i(I){if(!A){W(t.$$.fragment,I),W(c.$$.fragment,I),W(f.$$.fragment,I),W(l.$$.fragment,I),W(d.$$.fragment,I),W(m.$$.fragment,I),W(g.$$.fragment,I),W(N.$$.fragment,I);for(let z=0;z<L.length;z+=1)W(J[z]);A=!0}},o(I){K(t.$$.fragment,I),K(c.$$.fragment,I),K(f.$$.fragment,I),K(l.$$.fragment,I),K(d.$$.fragment,I),K(m.$$.fragment,I),K(g.$$.fragment,I),K(N.$$.fragment,I),J=J.filter(Boolean);for(let z=0;z<J.length;z+=1)K(J[z]);A=!1},d(I){I&&(B(e),B(T),B(u),B($),B(O),B(w),B(x)),Y(t),Y(c),Y(f),Y(l),Y(d),Y(m),Y(g),Y(N),Se(J,I),S=!1,me(H)}}}function zn(n,e,t){let o,r;Pe(n,ke,T=>t(3,r=T));let c="None",a="",f=!1;const h=(T,u,y,j)=>T.filter(D=>(u==="None"||D.cardHalf1.cardType.type===u||D.cardHalf2&&D.cardHalf2.cardType.type===u)&&pn(D,y)&&_n(D,j));function l(T){c=T,t(0,c)}const s=()=>{ke.set([...r,rt(2)])},d=()=>{ke.set([...r,rt(1)]),console.log(r.length)},b=()=>{Ve(r)},m=()=>{Me.set("download")},p=()=>{Me.set("half")};function g(){a=this.value,t(1,a)}function k(){f=this.checked,t(2,f)}const N=T=>{Ve(r.filter(u=>u.id!==T.id))};return n.$$.update=()=>{n.$$.dirty&15&&t(4,o=h(r,c,a,f))},[c,a,f,r,o,l,s,d,b,m,p,g,k,N]}class Wn extends se{constructor(e){super(),ce(this,e,zn,qn,ue,{})}}function Rn(n){let e,t,o;var r=n[0];function c(a,f){return{}}return r&&(e=nt(r,c())),{c(){e&&Z(e.$$.fragment),t=Je()},m(a,f){e&&X(e,a,f),P(a,t,f),o=!0},p(a,[f]){if(f&1&&r!==(r=a[0])){if(e){pe();const h=e;K(h.$$.fragment,1,0,()=>{Y(h,1)}),_e()}r?(e=nt(r,c()),Z(e.$$.fragment),W(e.$$.fragment,1),X(e,t.parentNode,t)):e=null}},i(a){o||(e&&W(e.$$.fragment,a),o=!0)},o(a){e&&K(e.$$.fragment,a),o=!1},d(a){a&&B(t),e&&Y(e,a)}}}function Un(n,e,t){let o,r;Pe(n,Me,a=>t(1,r=a));const c={"":Wn,download:Sn,half:Hn};return n.$$.update=()=>{n.$$.dirty&2&&t(0,o=c[r])},[o,r]}class Kn extends se{constructor(e){super(),ce(this,e,Un,Rn,ue,{})}}new Kn({target:document.getElementById("app")});
