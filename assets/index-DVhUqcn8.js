var Oe=Object.defineProperty;var De=(r,t,e)=>t in r?Oe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Mt=(r,t,e)=>De(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function et(){}function Ae(r,t){for(const e in t)r[e]=t[e];return r}function ye(r){return r()}function Qt(){return Object.create(null)}function Dt(r){r.forEach(ye)}function be(r){return typeof r=="function"}function it(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function at(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function Ne(r){return Object.keys(r).length===0}function ge(r,...t){if(r==null){for(const i of t)i(void 0);return et}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function xe(r){let t;return ge(r,e=>t=e)(),t}function Ft(r,t,e){r.$$.on_destroy.push(ge(t,e))}function Ge(r,t,e,i){if(r){const n=me(r,t,e,i);return r[0](n)}}function me(r,t,e,i){return r[1]&&i?Ae(e.ctx.slice(),r[1](i(t))):e.ctx}function Ce(r,t,e,i){if(r[2]&&i){const n=r[2](i(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const c=[],l=Math.max(t.dirty.length,n.length);for(let a=0;a<l;a+=1)c[a]=t.dirty[a]|n[a];return c}return t.dirty|n}return t.dirty}function Ee(r,t,e,i,n,c){if(n){const l=me(t,e,i,c);r.p(l,n)}}function Fe(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function Xt(r){return r??""}function L(r,t){r.appendChild(t)}function B(r,t,e){r.insertBefore(t,e||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function kt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function R(r){return document.createElement(r)}function Z(r){return document.createTextNode(r)}function V(){return Z(" ")}function It(){return Z("")}function vt(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function H(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Ie(r){return Array.from(r.childNodes)}function Ct(r,t){t=""+t,r.data!==t&&(r.data=t)}function nt(r,t,e,i){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function He(r,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:i})}function Yt(r,t){return new r(t)}let jt;function Tt(r){jt=r}function Me(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Be(){const r=Me();return(t,e,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[t];if(n){const c=He(t,e,{cancelable:i});return n.slice().forEach(l=>{l.call(r,c)}),!c.defaultPrevented}return!0}}function Pe(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const gt=[],St=[];let mt=[];const Jt=[],Je=Promise.resolve();let qt=!1;function qe(){qt||(qt=!0,Je.then($e))}function Ot(r){mt.push(r)}function ke(r){Jt.push(r)}const Bt=new Set;let yt=0;function $e(){if(yt!==0)return;const r=jt;do{try{for(;yt<gt.length;){const t=gt[yt];yt++,Tt(t),ze(t.$$)}}catch(t){throw gt.length=0,yt=0,t}for(Tt(null),gt.length=0,yt=0;St.length;)St.pop()();for(let t=0;t<mt.length;t+=1){const e=mt[t];Bt.has(e)||(Bt.add(e),e())}mt.length=0}while(gt.length);for(;Jt.length;)Jt.pop()();qt=!1,Bt.clear(),Tt(r)}function ze(r){if(r.fragment!==null){r.update(),Dt(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Ot)}}function We(r){const t=[],e=[];mt.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),mt=t}const Gt=new Set;let pt;function lt(){pt={r:0,c:[],p:pt}}function ct(){pt.r||Dt(pt.c),pt=pt.p}function q(r,t){r&&r.i&&(Gt.delete(r),r.i(t))}function W(r,t,e,i){if(r&&r.o){if(Gt.has(r))return;Gt.add(r),pt.c.push(()=>{Gt.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}function rt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function we(r,t,e){const i=r.$$.props[t];i!==void 0&&(r.$$.bound[i]=e,e(r.$$.ctx[i]))}function Y(r){r&&r.c()}function Q(r,t,e){const{fragment:i,after_update:n}=r.$$;i&&i.m(t,e),Ot(()=>{const c=r.$$.on_mount.map(ye).filter(be);r.$$.on_destroy?r.$$.on_destroy.push(...c):Dt(c),r.$$.on_mount=[]}),n.forEach(Ot)}function X(r,t){const e=r.$$;e.fragment!==null&&(We(e.after_update),Dt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Re(r,t){r.$$.dirty[0]===-1&&(gt.push(r),qe(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function ot(r,t,e,i,n,c,l=null,a=[-1]){const h=jt;Tt(r);const f=r.$$={fragment:null,ctx:[],props:c,update:et,not_equal:n,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Qt(),dirty:a,skip_bound:!1,root:t.target||h.$$.root};l&&l(f.root);let s=!1;if(f.ctx=e?e(r,t.props||{},(d,m,...j)=>{const p=j.length?j[0]:m;return f.ctx&&n(f.ctx[d],f.ctx[d]=p)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](p),s&&Re(r,d)),m}):[],f.update(),s=!0,Dt(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){const d=Ie(t.target);f.fragment&&f.fragment.l(d),d.forEach(M)}else f.fragment&&f.fragment.c();t.intro&&q(r.$$.fragment),Q(r,t.target,t.anchor),$e()}Tt(h)}class ut{constructor(){Mt(this,"$$");Mt(this,"$$set")}$destroy(){X(this,1),this.$destroy=et}$on(t,e){if(!be(e))return et;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ue);const bt=[];function Te(r,t=et){let e;const i=new Set;function n(a){if(it(r,a)&&(r=a,e)){const h=!bt.length;for(const f of i)f[1](),bt.push(f,r);if(h){for(let f=0;f<bt.length;f+=2)bt[f][0](bt[f+1]);bt.length=0}}}function c(a){n(a(r))}function l(a,h=et){const f=[a,h];return i.add(f),i.size===1&&(e=t(n,c)||et),a(r),()=>{i.delete(f),i.size===0&&e&&(e(),e=null)}}return{set:n,update:c,subscribe:l}}const zt=Te(""),$t=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},st=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,Zt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Le(r){let t,e=r[0].text+"",i;return{c(){t=R("div"),i=Z(e),H(t,"class","cardText svelte-13kvtzw")},m(n,c){B(n,t,c),L(t,i)},p(n,c){c&1&&e!==(e=n[0].text+"")&&Ct(i,e)},d(n){n&&M(t)}}}function Ke(r){let t,e,i;return{c(){t=R("div"),H(t,"contenteditable","true"),H(t,"class","cardText svelte-13kvtzw"),r[0].text===void 0&&Ot(()=>r[5].call(t))},m(n,c){B(n,t,c),r[0].text!==void 0&&(t.innerText=r[0].text),e||(i=vt(t,"input",r[5]),e=!0)},p(n,c){c&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&M(t),e=!1,i()}}}function Ve(r){let t,e,i,n,c=r[0].cardType.passive&&te();return{c(){t=R("img"),i=V(),c&&c.c(),n=It(),at(t.src,e=st(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-13kvtzw")},m(l,a){B(l,t,a),B(l,i,a),c&&c.m(l,a),B(l,n,a)},p(l,a){a&1&&!at(t.src,e=st(l[0].cardType.type))&&H(t,"src",e),l[0].cardType.passive?c||(c=te(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(l){l&&(M(t),M(i),M(n)),c&&c.d(l)}}}function te(r){let t;return{c(){t=R("p"),t.textContent="Passive",H(t,"class","mirrored svelte-13kvtzw")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Qe(r){let t,e;function i(l,a){return l[2]?Ve:l[3]?Ke:Le}let n=i(r),c=n(r);return{c(){t=R("div"),e=R("div"),c.c(),H(e,"class","card svelte-13kvtzw"),nt(e,"--colour",r[4]),H(t,"class","wrapper svelte-13kvtzw"),nt(t,"--rotation",r[1]+"deg")},m(l,a){B(l,t,a),L(t,e),c.m(e,null)},p(l,[a]){n===(n=i(l))&&c?c.p(l,a):(c.d(1),c=n(l),c&&(c.c(),c.m(e,null))),a&16&&nt(e,"--colour",l[4]),a&2&&nt(t,"--rotation",l[1]+"deg")},i:et,o:et,d(l){l&&M(t),c.d()}}}function Xe(r,t,e){let i,{card:n}=t,{rotation:c=0}=t,{back:l=!1}=t,{editable:a=!0}=t;function h(){n.text=this.innerText,e(0,n)}return r.$$set=f=>{"card"in f&&e(0,n=f.card),"rotation"in f&&e(1,c=f.rotation),"back"in f&&e(2,l=f.back),"editable"in f&&e(3,a=f.editable)},r.$$.update=()=>{r.$$.dirty&1&&e(4,i=$t(n.cardType.type))},[n,c,l,a,i,h]}class Wt extends ut{constructor(t){super(),ot(this,t,Xe,Qe,it,{card:0,rotation:1,back:2,editable:3})}}function ee(r,t,e){const i=r.slice();return i[12]=t[e],i}function ne(r){let t,e,i,n,c,l,a,h,f=r[5]&&re(r),s=!r[3]&&oe(r);return{c(){t=R("div"),e=R("img"),n=V(),f&&f.c(),c=V(),s&&s.c(),l=It(),at(e.src,i=st(r[0]))||H(e,"src",i),H(e,"alt","My Icon"),H(e,"class","cardIcon svelte-lm5vvd"),H(t,"class","select svelte-lm5vvd")},m(d,m){B(d,t,m),L(t,e),L(t,n),f&&f.m(t,null),B(d,c,m),s&&s.m(d,m),B(d,l,m),a||(h=vt(e,"click",r[8]),a=!0)},p(d,m){m&1&&!at(e.src,i=st(d[0]))&&H(e,"src",i),d[5]?f?f.p(d,m):(f=re(d),f.c(),f.m(t,null)):f&&(f.d(1),f=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,m):(s=oe(d),s.c(),s.m(l.parentNode,l))},d(d){d&&(M(t),M(c),M(l)),f&&f.d(),s&&s.d(d),a=!1,h()}}}function re(r){let t,e=rt(r[4]),i=[];for(let n=0;n<e.length;n+=1)i[n]=ie(ee(r,e,n));return{c(){t=R("div");for(let n=0;n<i.length;n+=1)i[n].c();H(t,"class","options svelte-lm5vvd"),nt(t,"--colour",r[6])},m(n,c){B(n,t,c);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(t,null)},p(n,c){if(c&49){e=rt(n[4]);let l;for(l=0;l<e.length;l+=1){const a=ee(n,e,l);i[l]?i[l].p(a,c):(i[l]=ie(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}c&64&&nt(t,"--colour",n[6])},d(n){n&&M(t),kt(i,n)}}}function ie(r){let t,e,i,n,c;function l(){return r[9](r[12])}return{c(){t=R("img"),at(t.src,e=st(r[12]))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class",i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(a,h){B(a,t,h),n||(c=vt(t,"click",l),n=!0)},p(a,h){r=a,h&16&&!at(t.src,e=st(r[12]))&&H(t,"src",e),h&17&&i!==(i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&H(t,"class",i)},d(a){a&&M(t),n=!1,c()}}}function oe(r){let t,e,i,n,c,l,a;return{c(){t=R("input"),e=V(),i=R("label"),n=Z("Passive"),H(t,"type","checkbox"),H(t,"id",r[7]),H(t,"class","hidden"),H(i,"for",r[7]),H(i,"class",c="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(h,f){B(h,t,f),t.checked=r[1],B(h,e,f),B(h,i,f),L(i,n),l||(a=vt(t,"change",r[10]),l=!0)},p(h,f){f&2&&(t.checked=h[1]),f&2&&c!==(c="passive no-select "+(h[1]?"":"invisible")+" svelte-lm5vvd")&&H(i,"class",c)},d(h){h&&(M(t),M(e),M(i)),l=!1,a()}}}function Ye(r){let t,e=!r[2]&&ne(r);return{c(){e&&e.c(),t=It()},m(i,n){e&&e.m(i,n),B(i,t,n)},p(i,[n]){i[2]?e&&(e.d(1),e=null):e?e.p(i,n):(e=ne(i),e.c(),e.m(t.parentNode,t))},i:et,o:et,d(i){i&&M(t),e&&e.d(i)}}}function Ze(r,t,e){let i,{cardType:n}=t,{passive:c=!1}=t,{back:l=!1}=t,{noPassive:a=!1}=t;const h=Math.random().toString(36).substring(7),f=Be();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const m=()=>e(5,s=!s),j=b=>{e(0,n=b),e(5,s=!1)};function p(){c=this.checked,e(1,c)}return r.$$set=b=>{"cardType"in b&&e(0,n=b.cardType),"passive"in b&&e(1,c=b.passive),"back"in b&&e(2,l=b.back),"noPassive"in b&&e(3,a=b.noPassive),"names"in b&&e(4,d=b.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,i=$t(n)),r.$$.dirty&1&&f("type",n),r.$$.dirty&2&&f("passive",c)},[n,c,l,a,d,s,i,h,m,j,p]}class Et extends ut{constructor(t){super(),ot(this,t,Ze,Ye,it,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function tn(r){let t,e;return{c(){t=R("img"),at(t.src,e=st(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-15hk4fg")},m(i,n){B(i,t,n)},p(i,n){n&1&&!at(t.src,e=st(i[0].cardType.type))&&H(t,"src",e)},i:et,o:et,d(i){i&&M(t)}}}function en(r){let t,e,i,n,c,l,a;return e=new Et({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=R("p"),Y(e.$$.fragment),i=V(),n=R("div"),H(t,"class","svelte-15hk4fg"),H(n,"contenteditable","true"),H(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&Ot(()=>r[3].call(n))},m(h,f){B(h,t,f),Q(e,t,null),B(h,i,f),B(h,n,f),r[0].text!==void 0&&(n.innerText=r[0].text),c=!0,l||(a=vt(n,"input",r[3]),l=!0)},p(h,f){const s={};f&1&&(s.cardType=h[0].cardType.type),f&1&&(s.passive=h[0].cardType.passive),e.$set(s),f&1&&h[0].text!==n.innerText&&(n.innerText=h[0].text)},i(h){c||(q(e.$$.fragment,h),c=!0)},o(h){W(e.$$.fragment,h),c=!1},d(h){h&&(M(t),M(i),M(n)),X(e),l=!1,a()}}}function nn(r){let t,e,i,n;const c=[en,tn],l=[];function a(h,f){return h[1]?1:0}return e=a(r),i=l[e]=c[e](r),{c(){t=R("div"),i.c(),H(t,"class","card svelte-15hk4fg"),nt(t,"--colour",$t(r[0].cardType.type))},m(h,f){B(h,t,f),l[e].m(t,null),n=!0},p(h,[f]){let s=e;e=a(h),e===s?l[e].p(h,f):(lt(),W(l[s],1,1,()=>{l[s]=null}),ct(),i=l[e],i?i.p(h,f):(i=l[e]=c[e](h),i.c()),q(i,1),i.m(t,null)),(!n||f&1)&&nt(t,"--colour",$t(h[0].cardType.type))},i(h){n||(q(i),n=!0)},o(h){W(i),n=!1},d(h){h&&M(t),l[e].d()}}}function rn(r,t,e){let{card:i}=t,{back:n=!1}=t;const c=({detail:a})=>e(0,i.cardType.type=a,i);function l(){i.text=this.innerText,e(0,i)}return r.$$set=a=>{"card"in a&&e(0,i=a.card),"back"in a&&e(1,n=a.back)},[i,n,c,l]}class on extends ut{constructor(t){super(),ot(this,t,rn,nn,it,{card:0,back:1})}}function un(r){let t,e;return t=new on({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&1&&(c.card=i[0].cardHalf1),n&2&&(c.back=i[1]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function fn(r){let t,e,i,n,c,l,a,h,f,s,d,m,j,p;return i=new Et({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),i.$on("type",r[4]),i.$on("passive",r[5]),c=new Wt({props:{card:r[0].cardHalf1,back:r[1]}}),h=new Wt({props:{card:r[0].cardHalf2,rotation:r[2]?0:180,back:r[1]}}),d=new Et({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),d.$on("type",r[6]),d.$on("passive",r[7]),{c(){t=R("div"),e=R("p"),Y(i.$$.fragment),n=V(),Y(c.$$.fragment),l=V(),a=R("div"),Y(h.$$.fragment),f=V(),s=R("p"),Y(d.$$.fragment),m=V(),j=R("div"),H(e,"class","first svelte-1ubeuca"),H(t,"class","first-half half"),H(s,"class","second svelte-1ubeuca"),H(a,"class","second-half half svelte-1ubeuca"),H(j,"class","fill svelte-1ubeuca")},m(b,g){B(b,t,g),L(t,e),Q(i,e,null),L(t,n),Q(c,t,null),B(b,l,g),B(b,a,g),Q(h,a,null),L(a,f),L(a,s),Q(d,s,null),B(b,m,g),B(b,j,g),p=!0},p(b,g){const N={};g&1&&(N.cardType=b[0].cardHalf1.cardType.type),g&1&&(N.passive=b[0].cardHalf1.cardType.passive),g&2&&(N.back=b[1]),i.$set(N);const $={};g&1&&($.card=b[0].cardHalf1),g&2&&($.back=b[1]),c.$set($);const u={};g&1&&(u.card=b[0].cardHalf2),g&4&&(u.rotation=b[2]?0:180),g&2&&(u.back=b[1]),h.$set(u);const v={};g&1&&(v.cardType=b[0].cardHalf2.cardType.type),g&1&&(v.passive=b[0].cardHalf2.cardType.passive),g&2&&(v.back=b[1]),d.$set(v)},i(b){p||(q(i.$$.fragment,b),q(c.$$.fragment,b),q(h.$$.fragment,b),q(d.$$.fragment,b),p=!0)},o(b){W(i.$$.fragment,b),W(c.$$.fragment,b),W(h.$$.fragment,b),W(d.$$.fragment,b),p=!1},d(b){b&&(M(t),M(l),M(a),M(m),M(j)),X(i),X(c),X(h),X(d)}}}function an(r){let t,e,i,n,c;const l=[fn,un],a=[];function h(f,s){return f[0].cardHalf2?0:1}return e=h(r),i=a[e]=l[e](r),{c(){t=R("div"),i.c(),H(t,"class",n=Xt(`card ${r[1]&&"back"}`)+" svelte-1ubeuca"),nt(t,"--colour",r[3])},m(f,s){B(f,t,s),a[e].m(t,null),c=!0},p(f,[s]){let d=e;e=h(f),e===d?a[e].p(f,s):(lt(),W(a[d],1,1,()=>{a[d]=null}),ct(),i=a[e],i?i.p(f,s):(i=a[e]=l[e](f),i.c()),q(i,1),i.m(t,null)),(!c||s&2&&n!==(n=Xt(`card ${f[1]&&"back"}`)+" svelte-1ubeuca"))&&H(t,"class",n),(!c||s&8)&&nt(t,"--colour",f[3])},i(f){c||(q(i),c=!0)},o(f){W(i),c=!1},d(f){f&&M(t),a[e].d()}}}function ln(r,t,e){let i,{card:n}=t,{back:c=!1}=t,{readable:l=!1}=t;const a=({detail:d})=>e(0,n.cardHalf1.cardType.type=d,n),h=({detail:d})=>e(0,n.cardHalf1.cardType.passive=d,n),f=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.type=d,n)},s=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.passive=d,n)};return r.$$set=d=>{"card"in d&&e(0,n=d.card),"back"in d&&e(1,c=d.back),"readable"in d&&e(2,l=d.readable)},r.$$.update=()=>{r.$$.dirty&1&&e(3,i=$t(n.cardHalf1.cardType.type))},[n,c,l,i,a,h,f,s]}class Ut extends ut{constructor(t){super(),ot(this,t,ln,an,it,{card:0,back:1,readable:2})}}const ue=(r,t=9)=>{const e=[];let i=0;for(;i<r.length;)e.push(r.slice(i,t+i)),i+=t;return e};function cn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function sn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}};Lt.exports;(function(r){(function(){function t(i,n){return n?sn(i):i.slice?t[c(i)]:function(l,a){i(l={exports:{}}),t[c(a)]=l.exports};function c(l){return l.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(i){String.random=function(c,l){var a="";for(c=c||24,l=l||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)a+=l.charAt(Math.floor(Math.random()*l.length));return a},String.match=function(c,l){var a,h;return typeof c!="string"?!1:(typeof l=="string"&&(l={"=":l}),l=l||{},a=l["="]||l["*"]||l[">"]||l["<"],c===a?!0:h!==l["="]?!1:(a=l["*"]||l[">"],c.slice(0,(a||"").length)===a?!0:h!==l["*"]?!1:h!==l[">"]&&h!==l["<"]?c>=l[">"]&&c<=l["<"]:h!==l[">"]&&c>=l[">"]||h!==l["<"]&&c<=l["<"]))},String.hash=function(c,l){if(typeof c=="string"){if(l=l||0,!c.length)return l;for(var a=0,h=c.length,f;a<h;++a)f=c.charCodeAt(a),l=(l<<5)-l+f,l|=0;return l}};var n=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,l){for(var a in c)if(n.call(c,a)&&(!l||l.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var l=[];for(var a in c)n.call(c,a)&&l.push(a);return l},function(){var c,l=setTimeout,a=0,h=0,f=typeof setImmediate!=""+c&&setImmediate||function(d,m){return typeof MessageChannel==""+c?l:((d=new MessageChannel).port1.onmessage=function(j){j.data==""&&m()},function(j){m=j,d.port2.postMessage("")})}(),s=l.check=l.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};l.hold=l.hold||9,l.poll=l.poll||function(d){if(l.hold>=s.now()-a&&h++<3333){d();return}f(function(){a=s.now(),d()},h=0)}}(),function(){var c=setTimeout,l=c.turn=c.turn||function(m){a.push(m)==1&&h(d)},a=l.s=[],h=c.poll,f=0,s,d=function(){(s=a[f++])&&s(),(f==a.length||f==99)&&(a=l.s=a.slice(f),f=0),a.length&&h(d)}}(),function(){var c,l=setTimeout,a=l.turn;(l.each=l.each||function(h,f,s,d){d=d||9,function m(j,p,b){if(p=(j=(h||[]).splice(0,d)).length){for(var g=0;g<p&&c===(b=f(j[g]));g++);if(c===b){a(m);return}}s&&s(b)}()})()}()})(t,"./shim"),t(function(i){i.exports=function n(s,l,a){if(!s)return{to:n};var h,f=typeof l=="function",s=(this.tag||(this.tag={}))[s]||f&&(this.tag[s]={tag:s,to:n._={next:function(m){var j;(j=this.to)&&j.next(m)}}});if(f){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:l,the:s,on:this,as:a};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&h!==l&&s.next(l),s}})(t,"./onto"),t(function(i){i.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(i){t("./shim");function n(){var s=+new Date;return h<s?(l=0,h=s+n.drift):h=s+(l+=1)/a+n.drift}n.drift=0;var c=-1/0,l=0,a=999,h=c,f;n.is=function(s,d,m){var j=d&&s&&s._&&s._[">"]||m;if(j)return typeof(j=j[d])=="number"?j:c},n.ify=function(s,d,m,j,p){(s=s||{})._=s._||{},p&&(s._["#"]=p);var b=s._[">"]||(s._[">"]={});return f!==d&&d!=="_"&&(typeof m=="number"&&(b[d]=m),f!==j&&(s[d]=j)),s},i.exports=n})(t,"./state"),t(function(i){t("./shim");function n(c){var l={s:{}},a=l.s;c=c||{max:999,age:1e3*9},l.check=function(f){return a[f]?h(f):!1};var h=l.track=function(f){var s=a[f]||(a[f]={});return s.was=l.now=+new Date,l.to||(l.to=setTimeout(l.drop,c.age+9)),h.ed&&h.ed(f),s};return l.drop=function(f){l.to=null,l.now=+new Date;var s=Object.keys(a);console.STAT&&console.STAT(l.now,+new Date-l.now,"dup drop keys"),setTimeout.each(s,function(d){var m=a[d];m&&(f||c.age)>l.now-m.was||delete a[d]},0,99)},l}i.exports=n})(t,"./dup"),t(function(i){t("./onto"),i.exports=function(l,a){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof l!="function"){if(!l)return;var s=l["#"]||l,f=(this.tag||"")[s];return f?(a&&(f=this.on(s,a),clearTimeout(f.err),f.err=setTimeout(function(){f.off()},h)),!0):void 0}var s=a&&a["#"]||n(9);if(!l)return s;var d=this.on(s,l,a);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(i){function n(p){return p instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:p}):new n(p)}n.is=function(p){return p instanceof n||p&&p._&&p===p._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||n.on,o.ask=o.ask||n.ask,o.dup=o.dup||n.dup();var k=o.$.opt(o.opt);return o.once||(o.on("in",p,o),o.on("out",p,o),o.on("put",N,o),n.on("create",o),o.on("create",o)),o.once=1,k};function p(o){if(o){if(o.out===p){this.to.next(o);return}var k=this,y=k.as,A=y.at||y,G=A.$,S=A.dup,C,F=o.DBG;if((C=o["#"])||(C=o["#"]=l(9)),!S.check(C)){if(S.track(C),C=o._,o._=typeof C=="function"?C:function(){},o.$&&o.$===(o.$._||"").$||(o.$=G),o["@"]&&!o.put&&u(o),!A.ask(o["@"],o))if(F&&(F.u=+new Date),o.put){b(o);return}else o.get&&n.on.get(o,G);F&&(F.uc=+new Date),k.to.next(o),F&&(F.ua=+new Date),!(o.nts||o.NTS)&&(o.out=p,A.on("out",o),F&&(F.ue=+new Date))}}}function b(o){if(o){var k=o._||"",y=k.root=((k.$=o.$||"")._||"").root;if(o["@"]&&k.faith&&!k.miss){o.out=p,y.on("out",o);return}k.latch=y.hatch,k.match=y.hatch=[];var A=o.put,G=k.DBG=o.DBG,S=+new Date;if(E=E||S,!(A["#"]&&A["."])){G&&(G.p=S),k["#"]=o["#"],k.msg=o,k.all=0,k.stun=1;var C=Object.keys(A);console.STAT&&console.STAT(S,((G||k).pk=+new Date)-S,"put sort");var F=0,P,J,z,K,U,tt,wt;(function dt(At){if(P!=F){if(P=F,!(z=C[F])){console.STAT&&console.STAT(S,((G||k).pd=+new Date)-S,"put"),$(k);return}(K=A[z])?(wt=K._)?z!==wt["#"]?tt=w+D(z)+"soul not same.":(U=wt[">"])||(tt=w+D(z)+"no state."):tt=w+D(z)+"no meta.":tt=w+D(z)+"no node.",J=Object.keys(K||{})}if(tt){o.err=k.err=tt,$(k);return}var Kt=0,ht;for(At=At||0;At++<9&&(ht=J[Kt++]);)if(ht!=="_"){var Nt=K[ht],Vt=U[ht];if(d===Vt){tt=w+D(ht)+"on"+D(z)+"no state.";break}if(!h(Nt)){tt=w+D(ht)+"on"+D(z)+"bad "+typeof Nt+D(Nt);break}g(Nt,ht,z,Vt,o),++I}if((J=J.slice(Kt)).length){a(dt);return}++F,J=null,dt(At)})()}}}n.on.put=b;function g(o,k,y,A,G){var S=G._||"",C=S.root,F=C.graph,P,J=F[y]||m,z=f(J,k,1),K=J[k],U=S.DBG;(P=console.STAT)&&(!F[y]||!K)&&(P.has=(P.has||0)+1);var tt=x();if(A>tt){setTimeout(function(){g(o,k,y,A,G)},(P=A-tt)>O?O:P),console.STAT&&console.STAT((U||S).Hf=+new Date,P,"future");return}if(!(A<z)&&!(!S.faith&&A===z&&(o===K||T(o)<=T(K))&&!S.miss)){S.stun++;var wt=G["#"]+S.all++,dt={toString:function(){return wt},_:S};dt.toJSON=dt.toString,C.dup.track(dt)["#"]=G["#"],U&&(U.ph=U.ph||+new Date),C.on("put",{"#":dt,"@":G["@"],put:{"#":y,".":k,":":o,">":A},ok:G.ok,_:S})}}function N(o){var k;(k=(o._||"").DBG)&&(k.pa=+new Date,k.pm=k.pm||+new Date);var y=this,A=y.as,G=A.graph,S=o._,C=o.put,F=C["#"],P=C["."],J=C[":"],z=C[">"];o["#"];var K;(K=S.msg)&&(K=K.put)&&(K=K[F])&&s(K,P,z,J,F),G[F]=s(G[F],P,z,J,F),(K=(A.next||"")[F])&&K.on("in",o),$(S),y.to.next(o)}function $(o,k){var y;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(y=o.root))){var A=o.match;A.end=1,A===y.hatch&&(!(A=o.latch)||A.end?delete y.hatch:y.hatch=A),o.hatch&&o.hatch(),setTimeout.each(o.match,function(G){G&&G()}),!(!(k=o.msg)||o.err||k.err)&&(k.out=p,o.root.on("out",k),_())}}function u(o){var k=o["@"]||"",y;if(!(y=k._)){var A=(A=o.$)&&(A=A._)&&(A=A.root)&&(A=A.dup);if(!(A=A.check(k)))return;o["@"]=A["#"]||o["@"];return}y.acks=(y.acks||0)+1,(y.err=o.err)&&(o["@"]=y["#"],$(y)),y.ok=o.ok||y.ok,!y.stop&&!y.crack&&(y.crack=y.match&&y.match.push(function(){v(y)})),v(y)}function v(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?d:o.ok||{"":1}})}var w="Error: Invalid graph!",D=function(o){return" '"+(""+o).slice(0,9)+"...' "},T=JSON.stringify,O=2147483647,x=n.state,I=0,E,_=function(){I>999&&I/-(E-(E=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){I=0})}}(),function(){n.on.get=function(b,g){var N=g._,$=b.get,u=$["#"],v=N.graph[u],w=$["."],D=N.next||(N.next={}),T=D[u],O=b._||{},x=O.DBG=b.DBG;if(x&&(x.g=+new Date),!v)return N.on("get",b);if(w){if((typeof w!="string"||d===v[w])&&!((T||"").next||"")[w]){N.on("get",b);return}v=s({},w,f(v,w),v[w],u)}v&&p(b,v),N.on("get",b)};function p(b,g){var N=+new Date,$=b._||{},u=$.DBG=b.DBG,v=b["#"],w=l(9),D=Object.keys(g||"").sort(),T=((g||"")._||"")["#"];D.length;var O=b.$._.root,x=g===O.graph[T];console.STAT&&console.STAT(N,((u||$).gk=+new Date)-N,"got keys"),g&&function I(){N=+new Date;for(var E=0,_,o={},k;E<9&&(_=D[E++]);)s(o,_,f(g,_),g[_],T);D=D.slice(E),(k={})[T]=o,o=k;var y;x&&(y=function(){},y.ram=y.faith=!0),k=D.length,console.STAT&&console.STAT(N,-(N-(N=+new Date)),"got copied some"),u&&(u.ga=+new Date),O.on("in",{"@":v,"#":w,put:o,"%":k?w=l(9):d,$:O.$,_:y,DBG:u,FOO:1}),console.STAT&&console.STAT(N,+new Date-N,"got in"),k&&setTimeout.turn(I)}(),g||O.on("in",{"@":b["#"]})}n.on.get.ack=p}(),function(){n.chain.opt=function(p){p=p||{};var b=this,g=b._,N=p.peers||p;return Object.plain(p)||(p={}),Object.plain(g.opt)||(g.opt=p),typeof N=="string"&&(N=[N]),Object.plain(g.opt.peers)||(g.opt.peers={}),N instanceof Array&&(p.peers={},N.forEach(function($){var u={};u.id=u.url=$,p.peers[$]=g.opt.peers[$]=g.opt.peers[$]||u})),c(p,function $(u){var v=this[u];if(this&&this.hasOwnProperty(u)||typeof v=="string"||Object.empty(v)){this[u]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||c(v,$)}),g.opt.from=p,n.on("opt",g),g.opt.uuid=g.opt.uuid||function(u){return n.state().toString(36).replace(".","")+String.random(u||12)},b}}();var c=function(p,b){Object.keys(p).forEach(b,p)},l=String.random,a=setTimeout.turn,h=n.valid,f=n.state.is,s=n.state.ify,d,m={},j;n.log=function(){return!n.log.off&&j.log.apply(j,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(p,b,g){return(g=n.log.once)[p]=g[p]||0,g[p]++||n.log(b)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}i.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(j=console).only=function(p,b){return j.only.i&&p===j.only.i&&j.only.i++&&(j.log.apply(j,arguments)||b)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(i){var n=t("./root");n.chain.back=function(a,h){var f;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var m=0,j=a.length,f=d;for(m;m<j;m++)f=(f||c)[a[m]];return l!==f?h?s:f:(f=d.back)?f.$.back(a,h):void 0}if(typeof a=="function"){for(var p,f={back:d};(f=f.back)&&l===(p=a(f,h)););return p}return typeof a=="number"?(d.back||d).$.back(a-1):this};var c={},l})(t,"./back"),t(function(i){var n=t("./root");n.chain.chain=function($){var u=this,v=u._,w=new($||u).constructor(u),D=w._,T;return D.root=T=v.root,D.id=++T.once,D.back=u._,D.on=n.on,D.on("in",n.on.in,D),D.on("out",n.on.out,D),w};function c($){var u,v=this.as,w=v.back,D=v.root,T;if($.$||($.$=v.$),this.to.next($),v.err){v.on("in",{put:v.put=d,$:v.$});return}if(u=$.get){if(D.pass&&(D.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(O){T[O]=v.lex[O]},T=$.get=$.get||{}),u["#"]||v.soul){if(u["#"]=u["#"]||v.soul,$["#"]||($["#"]=m(9)),w=D.$.get(u["#"])._,u=u["."]){if(p(w.put,u)&&(T=w.ask&&w.ask[u],(w.ask||(w.ask={}))[u]=w.$.get(u)._,w.on("in",{get:u,put:{"#":w.soul,".":u,":":w.put[u],">":g(D.graph[w.soul],u)}}),T))return}else{if(T=w.ask&&w.ask[""],(w.ask||(w.ask={}))[""]=w,d!==w.put&&(w.on("in",w),T))return;$.$=w.$}return D.ask(f,$),D.on("in",$)}if(u["."])return v.get?($={get:{".":v.get},$:v.$},(w.ask||(w.ask={}))[v.get]=$.$._,w.on("out",$)):($={get:v.lex?$.get:{},$:v.$},w.on("out",$));if((v.ask||(v.ask={}))[""]=v,v.get)return u["."]=v.get,(w.ask||(w.ask={}))[v.get]=$.$._,w.on("out",$)}return w.on("out",$)}n.on.out=c;function l($,u){u=u||this.as;var v=u.root,w=$.$||($.$=u.$),D=(w||"")._||s,T=$.put||"",O=T["#"],x=T["."],I=d!==T["="]?T["="]:T[":"],E=T[">"]||-1/0,_;if(d!==$.put&&(d===T["#"]||d===T["."]||d===T[":"]&&d===T["="]||d===T[">"])){if(!j(T)){if(!(O=((T||"")._||"")["#"])){console.log("chain not yet supported for",T,"...",$,u);return}return w=u.root.$.get(O),setTimeout.each(Object.keys(T).sort(),function(o){o=="_"||d===(E=g(T,o))||u.on("in",{$:w,put:{"#":O,".":o,"=":T[o],">":E},VIA:$})})}u.on("in",{$:D.back.$,put:{"#":O=D.back.soul,".":x=D.has||D.get,"=":T,">":g(D.back.put,x)},via:$});return}($.seen||"")[u.id]||(($.seen||($.seen=function(){}))[u.id]=u,u!==D&&(Object.keys($).forEach(function(o){T[o]=$[o]},T={}),T.get=u.get||T.get,!u.soul&&!u.has?T.$$$=T.$$$||u.$:D.soul&&(T.$=u.$,T.$$=T.$$||D.$),$=T),h($,u),(u.soul||$.$$)&&E>=g(v.graph[O],x)&&((T=v.$.get(O)._).put=N(T.put,x,E,I,O)),!D.soul&&E>=g(v.graph[O],x)&&(_=(v.$.get(O)._.next||"")[x])&&(_.put=I,typeof(T=j(I))=="string"&&(_.put=v.$.get(T)._.put||I)),this.to&&this.to.next($),u.any&&setTimeout.each(Object.keys(u.any),function(o){(o=u.any[o])&&o($)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(o){(o=u.echo[o])&&o.on("in",$)},0,99),(($.$$||"")._||D).soul&&(_=u.next)&&(_=_[x])&&(T={},Object.keys($).forEach(function(o){T[o]=$[o]}),T.$=($.$$||$.$).get(T.get=x),delete T.$$,delete T.$$$,_.on("in",T)),a($,u))}n.on.in=l;function a($,u){if(u=u||this.as||$.$._,!($.$$&&this!==n.on)&&!(!$.put||u.soul)){var v=$.put||"",w=v["="]||v[":"],x,D=u.root,T=D.$.get(v["#"]).get(v["."])._;if(typeof(w=j(w))!="string"){this===n.on&&((T.echo||(T.echo={}))[u.id]=u);return}if(!((T.echo||(T.echo={}))[u.id]&&!(D.pass||"")[u.id])){if(x=D.pass){if(x[w+u.id])return;x[w+u.id]=1}(T.echo||(T.echo={}))[u.id]=u,u.has&&(u.link=w);var O=D.$.get(T.link=w)._;(O.echo||(O.echo={}))[T.id]=T;var x=u.ask||"";(x[""]||u.lex)&&O.on("out",{get:{"#":w}}),setTimeout.each(Object.keys(x),function(I,E){!I||!(E=x[I])||E.on("out",{get:{"#":w,".":I}})},0,99)}}}n.on.link=a;function h($,u){var v=$.put||"",w=d!==v["="]?v["="]:v[":"],D=u.root,T,O;if(d===w){if(u.soul&&d!==u.put||(O=($.$$||$.$||"")._||"",$["@"]&&(d!==O.put||d!==u.put)))return;(T=u.link||$.linked)&&delete(D.$.get(T)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(x,I){(I=u.next[x])&&(T&&delete(D.$.get(T).get(x)._.echo||"")[I.id],I.on("in",{get:x,put:d,$:I.$}))},0,99);return}u.soul||$.$$||(T=j(w),O=$.$._||"",!((T===O.link||u.has&&!O.link)&&!((D.pass||"")[u.id]&&typeof T!="string"))&&(delete(O.echo||"")[u.id],h({get:u.get,put:d,$:$.$,linked:$.linked=$.linked||O.link},u)))}n.on.unlink=h;function f($,u){var v=this.as,w=v.$._;w.root;var D=v.get||"",T=($.put||"")[D["#"]]||"";if(!$.put||typeof D["."]=="string"&&d===T[D["."]]){if(d!==w.put||!w.soul&&!w.has)return;w.ack=(w.ack||0)+1,w.on("in",{get:w.get,put:w.put=d,$:w.$,"@":$["@"]});return}($._||{}).miss=1,n.on.put($)}var s={},d,m=String.random,j=n.valid,p=function($,u){return $&&Object.prototype.hasOwnProperty.call($,u)},b=n.state,g=b.is,N=b.ify})(t,"./chain"),t(function(i){var n=t("./root");n.chain.get=function(d,m,j){var p,b;if(typeof d=="string"){if(d.length==0)return(p=this.chain())._.err={err:n.log("0 length key!",d)},m&&m.call(p,p._.err),p;var g=this,N=g._,$=N.next||h;(p=$[d])||(p=d&&c(d,g)),p=p&&p.$}else if(typeof d=="function"){let x=function(I,E,_){if(!x.stun&&!((S=v.pass)&&!S[w])){var o=I.$._,k=(I.$$||"")._,y=(k||o).put,A=!o.has&&!o.soul,G={},S;if((A||s===y)&&(y=s===((S=I.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=n.valid(y))=="string"&&(y=s===(S=v.$.get(S)._.put)?u.not?s:y:S),!(u.not&&s===y)){if(s===u.stun){if((S=v.stun)&&S.on&&(N.$.back(function(C){if(S.on(""+C.id,G={}),(G.run||0)<x.id)return G}),!G.run&&S.on(""+o.id,G={}),!G.run&&k&&S.on(""+k.id,G={}),x.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=S.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[w]=function(){x(I,E,1)};return}if(s===y&&(_=0),(S=v.hatch)&&!S.end&&s===u.hatch&&!_){if(D[o.$._.id])return;D[o.$._.id]=1,S.push(function(){x(I,E,1)});return}D={}}if(v.pass){if(v.pass[w+o.id])return;v.pass[w+o.id]=1}if(u.on){u.ok.call(o.$,y,o.get,I,E||x);return}if(u.v2020){u.ok(I,E||x);return}Object.keys(I).forEach(function(C){S[C]=I[C]},S={}),I=S,I.put=y,u.ok.call(u.as,I,E||x)}}};var T=x;if(m===!0)return l(this,d,m,j),this;p=this;var N=p._,u=m||{},v=N.root,w;u.at=N,u.ok=d;var D={};return x.at=N,(N.any||(N.any={}))[w=String.random(7)]=x,x.off=function(){x.stun=1,N.any&&delete N.any[w]},x.rid=a,x.id=u.run||++v.once,b=v.pass,(v.pass={})[w]=1,u.out=u.out||{get:{}},N.on("out",u.out),v.pass=b,p}else{if(typeof d=="number")return this.get(""+d,m,j);if(typeof(b=f(d))=="string")return this.get(b,m,j);(b=this.get.next)&&(p=b(this,d))}return p?(m&&typeof m=="function"&&p.get(m,j),p):((p=this.chain())._.err={err:n.log("Invalid get request!",d)},m&&m.call(p,p._.err),p)};function c(d,m){var j=m._,p=j.next,b=m.chain(),g=b._;return p||(p=j.next={}),p[g.get=d]=g,m===j.root.$?g.soul=d:(j.soul||j.has)&&(g.has=d),g}function l(d,m,j,p){var b=d._,g=0,N;return(N=b.soul||b.link)?m(N,p,b):b.jam?b.jam.push([m,p]):(b.jam=[[m,p]],d.get(function(u,v){if(!(s===u.put&&!b.root.opt.super&&(N=Object.keys(b.root.opt.peers).length)&&++g<=N)){v.rid(u);var w=(w=u.$)&&w._||{},D=0,T;for(N=b.jam,delete b.jam;T=N[D++];){var O=T[0];T=T[1],O&&O(w.link||w.soul||n.valid(u.put)||((u.put||{})._||{})["#"],T,u,v)}}},{out:{get:{".":!0}}}),d)}function a(d){var m=this.at||this.on;if(!d||m.soul||m.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){m.map;var j;if((j=this.seen||(this.seen={}))[d])return!0;j[d]=!0}}var h={},f=n.valid,s})(t,"./get"),t(function(i){var n=t("./root");n.chain.put=function(p,b,g){var N=this,$=N._,u=$.root;g=g||{},g.root=$.root,g.run||(g.run=u.once),c(g,$.id),g.ack=g.ack||b,g.via=g.via||N,g.data=g.data||p,g.soul||(g.soul=$.soul||typeof b=="string"&&b);var v=g.state=g.state||n.state();return typeof p=="function"?(p(function(w){g.data=w,N.put(f,f,g)}),N):g.soul?(g.$=u.$.get(g.soul),g.todo=[{it:g.data,ref:g.$}],g.turn=g.turn||d,g.ran=g.ran||l,function w(){var D=g.todo,T=D.pop(),O=T.it;T.ref&&T.ref._.id;var x,I,E,_,o;if(c(g,T.ref),(_=T.todo)&&(I=_.pop(),O=O[I],_.length&&D.push(T)),I&&(D.path||(D.path=[])).push(I),!(x=m(O))&&!(o=n.is(O))){if(!Object.plain(O)){l.err(g,"Invalid data: "+h(O)+" at "+(g.via.back(function(S){S.get&&_.push(S.get)},_=[])||_.join("."))+"."+(D.path||[]).join("."));return}for(var k=g.seen||(g.seen=[]),y=k.length;y--;)if(O===(_=k[y]).it){x=O=_.link;break}}if(I&&x)T.node=j(T.node,I,v,O);else{let S=function(C,F){var P=E.link["#"];F&&(F.off(),F.rid(C));var J=P||C.soul||(_=(C.$$||C.$)._||"").soul||_.link||((_=_.put||"")._||"")["#"]||_["#"]||((_=C.put||"")&&C.$$?_["#"]:(_["="]||_[":"]||"")["#"]);if(!P&&c(g,C.$),!J&&!T.link["#"]){(T.wait||(T.wait=[])).push(function(){S(C,F)});return}J||(J=[],(C.$$||C.$).back(function(z){if(_=z.soul||z.link)return J.push(_);J.push(z.get)}),J=J.reverse().join("/")),E.link["#"]=J,!o&&(((g.graph||(g.graph={}))[J]=E.node||(E.node={_:{}}))._["#"]=J),delete g.wait[A],E.wait&&setTimeout.each(E.wait,function(z){z&&z()}),g.ran(g)};var G=S;if(!g.seen){l.err(g,"Data at root of graph must be a node (an object).");return}g.seen.push(E={it:O,link:{},todo:o?[]:Object.keys(O).sort().reverse(),path:(D.path||[]).slice(),up:T}),T.node=j(T.node,I,v,E.link),!o&&E.todo.length&&D.push(E);var A=g.seen.length;(g.wait||(g.wait={}))[A]="",_=(E.ref=o?O:I?T.ref.get(I):T.ref)._,(_=O&&(O._||"")["#"]||_.soul||_.link)?S({soul:_}):E.ref.get(S,{run:g.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return g.ran(g);g.turn(w)}(),N):(a(g),N)};function c(p,b){if(b){b=(b._||"").id||b;var g=p.root.stun||(p.root.stun={on:n.on}),N={},$;p.stun||(p.stun=g.on("stun",function(){})),($=g.on(""+b))&&$.the.last.next(N),!(N.run>=p.run)&&g.on(""+b,function(u){if(p.stun.end){this.off(),this.to.next(u);return}u.run=u.run||p.run,u.stun=u.stun||p.stun})}}function l(p){if(p.err){l.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var b=p.$.back(-1)._,g=b.root,N=b.ask(function(w){g.on("ack",w),w.err&&!w.lack&&n.log(w),++$>(p.acks||0)&&this.off(),p.ack&&p.ack(w,this)},p.opt),$=0,u=p.stun,v;(v=function(){u&&(l.end(u,g),setTimeout.each(Object.keys(u=u.add||""),function(w){(w=u[w])&&w()}))}).hatch=v,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":N,_:v})}}l.end=function(p,b){p.end=s,p.the.to===p&&p===p.the.last&&delete b.stun,p.off()},l.err=function(p,b){(p.ack||s).call(p,p.out={err:p.err=n.log(b)}),p.ran(p)};function a(p){var b=p.via._,g;p.via=p.via.back(function(N){if(N.soul||!N.get)return N.$;g=p.data,(p.data={})[N.get]=g}),(!p.via||!p.via._.soul)&&(p.via=b.root.$.get(((p.data||"")._||"")["#"]||b.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function h(p,b){return p&&(b=p.constructor)&&b.name||typeof p}var f,s=function(){},d=setTimeout.turn,m=n.valid,j=n.state.ify})(t,"./put"),t(function(i){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),i.exports=n})(t,"./index"),t(function(i){var n=t("./index");n.chain.on=function(a,h,f,s){var d=this,m=d._;m.root;var j;if(typeof a=="string")return h?(j=m.on(a,h,f||m,s),f&&f.$&&(f.subs||(f.subs=[])).push(j),d):m.on(a);var p=h;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,d.get(a,p),d},n.chain.once=function(a,h){if(h=h||{},!a)return c(this);var f=this,s=f._,d=s.root;s.put;var m=String.random(7),j;return f.get(function(p,b,g,N){var $=this,u=$._,v=u.one||(u.one={});if(N.stun||v[m]==="")return;if((j=n.valid(p))===!0){w();return}if(typeof j=="string")return;clearTimeout((s.one||"")[m]),clearTimeout(v[m]),v[m]=setTimeout(w,h.wait||99);function w(D){if(!u.has&&!u.soul&&(u={put:p,get:b}),l===(j=u.put)&&(j=((g.$$||"")._||"").put),typeof n.valid(j)=="string"&&(j=d.$.get(j)._.put,j===l&&!D)){v[m]=setTimeout(function(){w(1)},h.wait||99);return}N.stun||v[m]!==""&&(v[m]="",(s.soul||s.has)&&N.off(),a.call($,j,u.get),clearTimeout(v[m]))}},{on:1}),f};function c(a,h,f){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(f=a.chain())._.nix=a.once(function(s,d){f._.on("in",this._)}),f._.lex=a._.lex,f}n.chain.off=function(){var a=this,h=a._,f,s=h.back;if(s)return h.ack=0,(f=s.next)&&f[h.get]&&delete f[h.get],(f=s.any)&&(delete s.any,s.any={}),(f=s.ask)&&delete f[h.get],(f=s.put)&&delete f[h.get],(f=h.soul)&&delete s.root.graph[f],(f=h.map)&&Object.keys(f).forEach(function(d,m){m=f[d],m.link&&s.root.$.get(m.link).off()}),(f=h.next)&&Object.keys(f).forEach(function(d,m){m=f[d],m.$.off()}),h.on("off",{}),a};var l})(t,"./on"),t(function(i){var n=t("./index"),c=n.chain.get.next;n.chain.get.next=function(f,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?f.get(d):((d=f.chain()._).lex=s,f.on("in",function(m){String.match(m.get||(m.put||"")["."],s["."]||s["#"]||s)&&d.on("in",m),this.to.next(m)}),d.$):(c||a)(f,s)},n.chain.map=function(f,s,d){var m=this,j=m._,p,b;return Object.plain(f)&&(p=f["."]?f:{".":f},f=h),f?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=m.chain(),m.map().on(function(g,N,$,u){var v=(f||a).call(this,g,N,$,u);if(h!==v){if(g===v)return b._.on("in",$);if(n.is(v))return b._.on("in",v._);var w={};Object.keys($.put).forEach(function(D){w[D]=$.put[D]},w),w["="]=v,b._.on("in",{get:N,put:w})}}),b):((b=j.each)||((j.each=b=m.chain())._.lex=p||b._.lex||j.lex,b._.nix=m.back("nix"),m.on("in",l,b._)),b)};function l(f){this.to.next(f);var s=this.as,d=f.$,m=d._,j=f.put,p;!m.soul&&!f.$$||(p=s.lex)&&!String.match(f.get||(j||"")["."],p["."]||p["#"]||p)||n.on.link(f,s)}var a=function(){},h})(t,"./map"),t(function(i){var n=t("./index");n.chain.set=function(c,l,a){var h=this,f=h.back(-1),s,d;return l=l||function(){},a=a||{},a.item=a.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=n.valid(c))=="string"?h.get(s=d).put(c,l,a):n.is(c)?(h.put(function(m){c.get(function(j,p,b){if(!j)return l.call(h,{err:n.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[j]={"#":j},m(d)},!0)}),c):(Object.plain(c)&&(c=f.get(s=h.back("opt.uuid")()).put(c)),h.get(s||f.back("opt.uuid")(7)).put(c,l,a))}})(t,"./set"),t(function(i){t("./shim");var n=function(){},c=JSON.parseAsync||function(f,s,d){var m,j=+new Date;try{s(m,JSON.parse(f,d),l.sucks(+new Date-j))}catch(p){s(p)}},l=JSON.stringifyAsync||function(f,s,d,m){var j,p=+new Date;try{s(j,JSON.stringify(f,d,m),l.sucks(+new Date-p))}catch(b){s(b)}};l.sucks=function(f){f>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),l.sucks=n)};function a(f){var s=function(){},d=f.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var m=setTimeout.turn||setTimeout,j=f.dup,p=j.check,b=j.track,g=s.hear=function(u,v){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},v);s===this&&(g.d+=u.length||0,++g.c);var w=v.SH=+new Date,D=u[0],T;if(D==="["){c(u,function(O,x){if(O||!x)return s.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,x.length,"# on hear batch");var I=d.puff;(function E(){for(var _=+new Date,o=0,k;o<I&&(k=x[o++]);)s.hear(k,v);x=x.slice(o),console.STAT&&console.STAT(_,+new Date-_,"hear loop"),N(v),x.length&&m(E,0)})()}),u="";return}if(D==="{"||(u["#"]||Object.plain(u))&&(T=u)){if(T)return g.one(T,v,w);c(u,function(O,x){if(O||!x)return s.say({dam:"!",err:"DAM JSON parse error."},v);g.one(x,v,w)});return}}};g.one=function(u,v,E){var D,T,O,x,I;if(u.DBG&&(u.DBG=I={DBG:u.DBG}),I&&(I.h=E),I&&(I.hp=+new Date),(D=u["#"])||(D=u["#"]=String.random(9)),!(O=p(D))&&(T=u["##"],!(T&&(O=u["@"]||u.get&&D)&&j.check(x=O+T)))){if((u._=function(){}).via=s.leap=v,(O=u["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(_){this[_]=1},u._.yo={}),O=u.dam){(O=s.hear[O])&&O(u,v,f),b(D);return}(O=u.ok)&&(u._.near=O["/"]);var E=+new Date;I&&(I.is=E),v.SI=D,b.ed=function(_){D===_&&(b.ed=0,(_=j.s[D])&&(_.via=v,u.get&&(_.it=u)))},f.on("in",s.last=u),I&&(I.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,u.get?"msg get":u.put?"msg put":"msg"),b(D),x&&b(x),s.leap=s.last=null}},g.c=g.d=0,function(){var u=0,v;s.hash=function(T,O){var x,I,E,_=+new Date;l(T.put,function o(k,y){var A=(I||(I=E=y||"")).slice(0,32768);if(x=String.hash(A,x),I=I.slice(32768),I){m(o,0);return}console.STAT&&console.STAT(_,+new Date-_,"say json+hash"),T._.$put=E,T["##"]=x,s.say(T,O),delete T._.$put},w)};function w(T,O){var x;return O instanceof Object?(Object.keys(O).sort().forEach(D,{to:x={},on:O}),x):O}function D(T){this.to[T]=this.on[T]}s.say=function(T,O){var x;if((x=this)&&(x=x.to)&&x.next&&x.next(T),!T)return!1;var I,E,_,o=T["@"],k=T._||(T._=function(){}),y=T.DBG,A=+new Date;if(k.y=k.y||A,O||y&&(y.y=A),(I=T["#"])||(I=T["#"]=String.random(9)),!v&&b(I),!(E=T["##"])&&h!==T.put&&!k.via&&o){s.hash(T,O);return}if(!O&&o&&(O=(x=j.s[o])&&(x.via||(x=x.it)&&(x=x._)&&x.via)||(x=s.last)&&o===x["#"]&&s.leap),!O&&o)return j.s[o]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(o&&!T.put&&!E&&((j.s[o]||"").it||"")["##"])return!1;if(!O&&s.way)return s.way(T);if(y&&(y.yh=+new Date),!(_=k.raw)){s.raw(T,O);return}if(y&&(y.yr=+new Date),!O||!O.id){if(!Object.plain(O||d.peers))return!1;var A=+new Date;d.puff;var G=d.peers,S=Object.keys(O||d.peers||{});console.STAT&&console.STAT(A,+new Date-A,"peer keys"),function P(){var J=+new Date;v=1;var z=k.raw;k.raw=_;for(var K=0,U;K<9&&(U=(S||"")[K++]);)(U=G[U]||(O||"")[U])&&s.say(T,U);k.raw=z,v=0,S=S.slice(K),console.STAT&&console.STAT(J,+new Date-J,"say loop"),S.length&&(m(P,0),o&&b(o))}();return}if(!O.wire&&s.wire&&s.wire(O),I!==O.last){if(O.last=I,O===k.via||(x=k.yo)&&(x[O.url]||x[O.pid]||x[O.id]))return!1;if(console.STAT&&console.STAT(A,((y||k).yp=+new Date)-(k.y||A),"say prep"),!v&&o&&b(o),O.batch){if(O.tail=(x=O.tail||0)+_.length,O.tail<=d.pack){O.batch+=(x?",":"")+_;return}N(O)}O.batch="[";var C=+new Date;setTimeout(function(){console.STAT&&console.STAT(C,+new Date-C,"0ms TO"),N(O)},d.gap),$(_,O),console.STAT&&o===O.SI&&console.STAT(A,+new Date-O.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(T,O){if(!T)return"";var x=T._||{},I,E;if(E=x.raw)return E;if(typeof T=="string")return T;var _=T["##"],o=T["@"];if(_&&o){if(!x.via&&p(o+_))return!1;if(E=(j.s[o]||"").it){if(_===E["##"])return!1;E["##"]||(E["##"]=_)}}if(!T.dam&&!T["@"]){var k=0,y=[];E=d.peers;for(var A in E){var G=E[A];if(y.push(G.url||G.pid||G.id),++k>6)break}k>1&&(T["><"]=y.join())}if(T.put&&(E=T.ok)&&(T.ok={"@":(E["@"]||1)-1,"/":E["/"]==T._.near?s.near:E["/"]}),I=x.$put){E={},Object.keys(T).forEach(function(C){E[C]=T[C]}),E.put=":])([:",l(E,function(C,F){if(!C){var P=+new Date;E=F.indexOf('"put":":])([:"'),S(h,F=F.slice(0,E+6)+I+F.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}l(T,S);function S(C,F){C||(x.raw=F,s.say(T,O))}}}();function N(u){var v=u.batch,w=typeof v=="string";if(w&&(v+="]"),u.batch=u.tail=null,!!v&&!(w?3>v.length:!v.length)){if(!w)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(D){return d.log("DAM JSON stringify error",D)}v&&$(v,u)}}function $(u,v){try{var w=v.wire;v.say?v.say(u):w.send&&w.send(u),s.say.d+=u.length||0,++s.say.c}catch{(v.queue=v.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var v=u.wire,w;if(!v){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(w=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:f.opt.pid},d.peers[w]=u),delete j.s[u.last]),u.met||(s.near++,u.met=+new Date,f.on("hi",u)),w=u.queue,u.queue=[],setTimeout.each(w||[],function(D){$(D,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,f.on("bye",u);var v=+new Date;v=v-(u.met||v),s.bye.time=((s.bye.time||v)+v)/2},s.hear["!"]=function(u,v){d.log("Error:",u.err)},s.hear["?"]=function(u,v){u.pid&&(v.pid||(v.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},v),delete j.s[v.last])},s.hear.mob=function(u,v){if(u.peers){var w=Object.keys(u.peers),D=w[Math.random()*w.length>>0];D&&(s.bye(v),s.hi(D))}},f.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),f.on("bye",function(u,v){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(v=u.wire)&&v.close&&v.close(),delete d.peers[u.id],u.wire=null}),f.on("bye",function(u,v){this.to.next(u),(v=console.STAT)&&(v.peers=s.near),(v=u.url)&&setTimeout(function(){},d.lack||9e3)}),f.on("hi",function(u,v){if(this.to.next(u),(v=console.STAT)&&(v.peers=s.near),!d.super){var w=Object.keys(f.next||"");w.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(w,function(D){var T=f.next[D];if(d.super||(T.ask||"")[""]){s.say({get:{"#":D}},u);return}setTimeout.each(Object.keys(T.ask||""),function(O){O&&s.say({"##":String.hash((f.graph[D]||"")[O]),get:{"#":D,".":O}},u)})})}}),s}var h;try{i.exports=a}catch{}})(t,"./mesh"),t(function(i){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(l){if(this.to.next(l),l.once)return;var a=l.opt;if(a.WebSocket===!1)return;var h=n.window||{},f=a.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!f)return;a.WebSocket=f;var s=a.mesh=a.mesh||n.Mesh(l);s.wire||a.wire,s.wire=a.wire=d;function d(b){try{if(!b||!b.url)return N&&N(b);var g=b.url.replace(/^http/,"ws"),N=b.wire=new a.WebSocket(g);return N.onclose=function(){j(b),a.mesh.bye(b)},N.onerror=function($){j(b)},N.onopen=function(){a.mesh.hi(b)},N.onmessage=function($){$&&a.mesh.hear($.data||$,b)},N}catch{a.mesh.bye(b)}}setTimeout(function(){!a.super&&l.on("out",{dam:"hi"})},1);var m=2*999;function j(b){clearTimeout(b.defer),a.peers[b.url]&&(p&&b.retry<=0||(b.retry=(b.retry||a.retry+1||60)-(-b.tried+(b.tried=+new Date)<m*4?1:0),b.defer=setTimeout(function g(){if(p&&p.hidden)return setTimeout(g,m);d(b)},m)))}var p=""+c!=typeof document&&document});var c})(t,"./websocket"),t(function(i){if(!(typeof Gun>"u")){var n=function(){},c;try{c=(Gun.window||n).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(a,h){this[a]=h},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var l=JSON.stringifyAsync||function(a,h,f,s){var d;try{h(d,JSON.stringify(a,f,s))}catch(m){h(m)}};Gun.on("create",function a(h){this.to.next(h);var f=h.opt;h.graph;var s=[],d,m,j,p;if(f.localStorage===!1)return;f.prefix=f.file||"gun/";try{d=a[f.prefix]=a[f.prefix]||JSON.parse(j=c.getItem(f.prefix))||{}}catch{d=a[f.prefix]={}}j=(j||"").length,h.on("get",function(g){this.to.next(g);var N=g.get,$,u,v,w;!N||!($=N["#"])||(u=d[$]||w,u&&(v=N["."])&&!Object.plain(v)&&(u=Gun.state.ify({},v,Gun.state.is(u,v),u[v],$)),Gun.on.get.ack(g,u))}),h.on("put",function(g){this.to.next(g);var N=g.put,$=N["#"],u=N["."],v=g["#"],w=g.ok||"";if(d[$]=Gun.state.ify(d[$],u,N[">"],N[":"],$),p&&j>4999880){h.on("in",{"@":v,err:"localStorage max!"});return}!g["@"]&&(!g._.via||Math.random()<w["@"]/w["/"])&&s.push(v),!m&&(m=setTimeout(b,9+j/333))});function b(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var g=s;clearTimeout(m),m=!1,s=[],l(d,function(N,$){try{!N&&c.setItem(f.prefix,$)}catch(u){N=p=u||"localStorage failure"}N&&(Gun.log(N+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:N,get:f.prefix,put:d})),j=$.length,setTimeout.each(g,function(u){h.on("in",{"@":u,err:N,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var t=function(_){console.warn("Warning! Deprecated internal utility will break in next version:",_)},e=Gun;e.fn=e.fn||{is:function(_){return t("fn"),!!_&&typeof _=="function"}},e.bi=e.bi||{is:function(_){return t("bi"),_ instanceof Boolean||typeof _=="boolean"}},e.num=e.num||{is:function(_){return t("num"),!i(_)&&(_-parseFloat(_)+1>=0||_===1/0||_===-1/0)}},e.text=e.text||{is:function(_){return t("text"),typeof _=="string"}},e.text.ify=e.text.ify||function(_){return t("text.ify"),e.text.is(_)?_:typeof JSON<"u"?JSON.stringify(_):_&&_.toString?_.toString():_},e.text.random=e.text.random||function(_,o){t("text.random");var k="";for(_=_||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";_>0;)k+=o.charAt(Math.floor(Math.random()*o.length)),_--;return k},e.text.match=e.text.match||function(_,o){var k,y;return t("text.match"),typeof _!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},k=o["="]||o["*"]||o[">"]||o["<"],_===k?!0:y!==o["="]?!1:(k=o["*"]||o[">"]||o["<"],_.slice(0,(k||"").length)===k?!0:y!==o["*"]?!1:y!==o[">"]&&y!==o["<"]?_>=o[">"]&&_<=o["<"]:y!==o[">"]&&_>=o[">"]||y!==o["<"]&&_<=o["<"]))},e.text.hash=e.text.hash||function(_,o){if(t("text.hash"),typeof _=="string"){if(o=o||0,!_.length)return o;for(var k=0,y=_.length,A;k<y;++k)A=_.charCodeAt(k),o=(o<<5)-o+A,o|=0;return o}},e.list=e.list||{is:function(_){return t("list"),_ instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(_){return t("list.sort"),function(o,k){return!o||!k?0:(o=o[_],k=k[_],o<k?-1:o>k?1:0)}},e.list.map=e.list.map||function(_,o,k){return t("list.map"),x(_,o,k)},e.list.index=1,e.obj=e.boj||{is:function(_){return t("obj"),_?_ instanceof Object&&_.constructor===Object||Object.prototype.toString.call(_).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(_,o,k){return t("obj.put"),(_||{})[o]=k,_},e.obj.has=e.obj.has||function(_,o){return t("obj.has"),_&&Object.prototype.hasOwnProperty.call(_,o)},e.obj.del=e.obj.del||function(_,o){if(t("obj.del"),!!_)return _[o]=null,delete _[o],_},e.obj.as=e.obj.as||function(_,o,k,y){return t("obj.as"),_[o]=_[o]||(y===k?{}:k)},e.obj.ify=e.obj.ify||function(_){if(t("obj.ify"),v(_))return _;try{_=JSON.parse(_)}catch{_={}}return _},function(){var _;function o(k,y){D(this,y)&&_!==this[y]||(this[y]=k)}e.obj.to=e.obj.to||function(k,y){return t("obj.to"),y=y||{},x(k,o,y),y}}(),e.obj.copy=e.obj.copy||function(_){return t("obj.copy"),_&&JSON.parse(JSON.stringify(_))},function(){function _(o,k){var y=this.n,A;if(!(y&&(k===y||v(y)&&D(y,k)))&&A!==k)return!0}e.obj.empty=e.obj.empty||function(o,k){return t("obj.empty"),o?!x(o,_,{n:k}):!0}}(),function(){function _(y,A){if(arguments.length===2){_.r=_.r||{},_.r[y]=A;return}_.r=_.r||[],_.r.push(y)}var o=Object.keys,k;Object.keys=Object.keys||function(y){return k(y,function(A,G,S){S(G)})},e.obj.map=k=e.obj.map||function(y,A,G){t("obj.map");var S,C=0,F,P,J,z,K=typeof A=="function";if(_.r=S,o&&v(y)&&(J=o(y),z=!0),G=G||{},i(y)||J)for(F=(J||y).length;C<F;C++){var U=C+e.list.index;if(K){if(P=z?A.call(G,y[J[C]],J[C],_):A.call(G,y[C],U,_),P!==S)return P}else if(A===y[z?J[C]:C])return J?J[C]:U}else for(C in y)if(K){if(D(y,C)&&(P=G?A.call(G,y[C],C,_):A(y[C],C,_),P!==S))return P}else if(A===y[C])return C;return K?_.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(_){return t("time"),_?_ instanceof Date:+new Date().getTime()};var $=e.fn.is,i=e.list.is,u=e.obj,v=u.is,D=u.has,x=u.map,n={};n.is=function(_){return t("val.is"),_===E?!1:_===null?!0:_===1/0?!1:a(_)||l(_)||p(_)?!0:n.link.is(_)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(o){if(t("val.link.is"),o&&o[c]&&!o._&&v(o)){var k={};if(x(o,_,k),k.id)return k.id}return!1};function _(o,k){var y=this;if(y.id)return y.id=!1;if(k==c&&a(o))y.id=o;else return y.id=!1}}(),n.link.ify=function(_){return t("val.link.ify"),O({},c,_)},e.obj.has._=".";var c=n.link._,E,l=e.bi.is,p=e.num.is,a=e.text.is,u=e.obj,v=u.is,O=u.put,x=u.map;e.val=e.val||n;var h={_:"_"};h.soul=function(_,o){return t("node.soul"),_&&_._&&_._[o||d]},h.soul.ify=function(_,o){return t("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},_=_||{},_._=_._||{},_._[d]=o.soul||_._[d]||s(),_},h.soul._=n.link._,function(){h.is=function(o,k,y){t("node.is");var A;return v(o)&&(A=h.soul(o))?!x(o,_,{as:y,cb:k,s:A,n:o}):!1};function _(o,k){if(k!==h._){if(!n.is(o))return!0;this.cb&&this.cb.call(this.as,o,k,this.n,this.s)}}}(),function(){h.ify=function(o,k,y){return t("node.ify"),k?typeof k=="string"?k={soul:k}:typeof k=="function"&&(k={map:k}):k={},k.map&&(k.node=k.map.call(y,o,E,k.node||{})),(k.node=h.soul.ify(k.node||{},k))&&x(o,_,{o:k,as:y}),k.node};function _(o,k){var y=this.o,A,G;if(y.map){A=y.map.call(this.as,o,""+k,y.node),G===A?w(y.node,k):y.node&&(y.node[k]=A);return}n.is(o)&&(y.node[k]=o)}}();var u=e.obj,v=u.is,w=u.del,x=u.map,f=e.text,s=f.random,d=h.soul._,E;e.node=e.node||h;var m=e.state;m.lex=function(){return t("state.lex"),m().toString(36).replace(".","")},m.to=function(_,o,k){t("state.to");var y=(_||{})[o];return v(y)&&(y=I(y)),m.ify(k,o,m.is(_,o),y,h.soul(_))},function(){m.map=function(o,k,y){t("state.map");var A,G=v(G=o||k)?G:null;return o=$(o=o||k)?o:null,G&&!o?(k=p(k)?k:m(),G[g]=G[g]||{},x(G,_,{o:G,s:k}),G):(y=y||v(k)?k:A,k=p(k)?k:m(),function(S,C,F,P){if(!o)return _.call({o:F,s:k},S,C),S;o.call(y||this||{},S,C,F,P),!(D(F,C)&&A===F[C])&&_.call({o:F,s:k},S,C)})};function _(o,k){g!==k&&m.ify(this.o,k,this.s)}}();var u=e.obj;u.as;var D=u.has,v=u.is,x=u.map,I=u.copy,j=e.num,p=j.is,b=e.fn,$=b.is,g=h._,E,N={};(function(){N.is=function(k,y,A,G){return t("graph.is"),!k||!v(k)||T(k)?!1:!x(k,_,{cb:y,fn:A,as:G})};function _(k,y){if(!k||y!==h.soul(k)||!h.is(k,this.fn,this.as))return!0;this.cb&&(o.n=k,o.as=this.as,this.cb.call(o.as,k,y,o))}function o(k){k&&h.is(o.n,k,o.as)}})(),function(){N.ify=function(G,S,C){t("graph.ify");var F={path:[],obj:G};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof C=="string"&&(S.soul=S.soul||C,C=E),S.soul&&(F.link=n.link.ify(S.soul)),S.shell=(C||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||C,_(S,F),S.root=F.node,S.graph};function _(G,S){var C;return(C=A(G,S))?C:(S.env=G,S.soul=k,h.ify(S.obj,o,S)&&(S.link=S.link||n.link.ify(h.soul(S.node)),S.obj!==G.shell&&(G.graph[n.link.is(S.link)]=S.node)),S)}function o(G,S,C){var F=this,P=F.env,J,z;if(h._===S&&D(G,n.link._))return C._;if(J=y(G,S,C,F,P)){if(S||(F.node=F.node||C||{},D(G,h._)&&h.soul(G)&&(F.node._=I(G._)),F.node=h.soul.ify(F.node,n.link.is(F.link)),F.link=F.link||n.link.ify(h.soul(F.node))),(z=P.map)&&(z.call(P.as||{},G,S,C,F),D(C,S))){if(G=C[S],E===G){w(C,S);return}if(!(J=y(G,S,C,F,P)))return}if(!S)return F.node;if(J===!0)return G;if(z=_(P,{obj:G,path:F.path.concat(S)}),!!z.node)return z.link}}function k(G){var S=this,C=n.link.is(S.link),F=S.env.graph;S.link=S.link||n.link.ify(G),S.link[n.link._]=G,S.node&&S.node[h._]&&(S.node[h._][n.link._]=G),D(F,C)&&(F[G]=F[C],w(F,C))}function y(G,S,C,F,P){var J;if(n.is(G))return!0;if(v(G))return 1;if(J=P.invalid)return G=J.call(P.as||{},G,S,C),y(G,S,C,F,P);P.err="Invalid value at '"+F.path.concat(S).join(".")+"'!",e.list.is(G)&&(P.err+=" Use `.set(item)` instead of an Array.")}function A(G,S){for(var C=G.seen,F=C.length,P;F--;)if(P=C[F],S.obj===P.obj)return P;C.push(S)}}(),N.node=function(_){t("graph.node");var o=h.soul(_);if(o)return O({},o,_)},function(){N.to=function(o,k,y){if(t("graph.to"),!!o){var A={};return y=y||{seen:{}},x(o[k],_,{obj:A,graph:o,opt:y}),A}};function _(o,k){var y,A;if(h._===k){if(T(o,n.link._))return;this.obj[k]=I(o);return}if(!(y=n.link.is(o))){this.obj[k]=o;return}if(A=this.opt.seen[y]){this.obj[k]=A;return}this.obj[k]=this.opt.seen[y]=N.to(this.graph,y,this.opt)}}();var $=e.fn.is,u=e.obj,v=u.is,w=u.del,D=u.has,T=u.empty,O=u.put,x=u.map,I=u.copy,E;e.graph=e.graph||N}}()})(Lt);var dn=Lt.exports,hn=dn;const pn=cn(hn),_n=pn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),je=_n.get("cards"),Pt=document.createElement("a"),Ht=document.createElement("input");Ht.type="file";Ht.accept=".json";Ht.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const i=await t.text();Rt(JSON.parse(i))}};const _t=Te([]),Rt=r=>{je.put({data:JSON.stringify(r)})};je.on(r=>{_t.set(JSON.parse(r.data))});const vn=()=>{Pt.href=URL.createObjectURL(new Blob([JSON.stringify(xe(_t))],{type:"application/json"})),Pt.download="cards.json",Pt.click()},yn=()=>{Ht.click()};function fe(r,t,e){const i=r.slice();return i[3]=t[e],i}function ae(r,t,e){const i=r.slice();return i[6]=t[e],i}function le(r,t,e){const i=r.slice();return i[6]=t[e],i}function ce(r){let t,e;return t=new Ut({props:{card:r[6]}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function se(r){let t,e;return t=new Ut({props:{card:r[6],back:!0}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(q(t.$$.fragment,i),e=!0)},o(i){W(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function de(r){let t,e,i,n,c,l=rt(r[3]),a=[];for(let m=0;m<l.length;m+=1)a[m]=ce(le(r,l,m));const h=m=>W(a[m],1,1,()=>{a[m]=null});let f=rt(r[3]),s=[];for(let m=0;m<f.length;m+=1)s[m]=se(ae(r,f,m));const d=m=>W(s[m],1,1,()=>{s[m]=null});return{c(){t=R("div");for(let m=0;m<a.length;m+=1)a[m].c();e=V(),i=R("div");for(let m=0;m<s.length;m+=1)s[m].c();n=V(),H(t,"class","page svelte-1bs53cn"),H(i,"class","page svelte-1bs53cn")},m(m,j){B(m,t,j);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);B(m,e,j),B(m,i,j);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(i,null);L(i,n),c=!0},p(m,j){if(j&2){l=rt(m[3]);let p;for(p=0;p<l.length;p+=1){const b=le(m,l,p);a[p]?(a[p].p(b,j),q(a[p],1)):(a[p]=ce(b),a[p].c(),q(a[p],1),a[p].m(t,null))}for(lt(),p=l.length;p<a.length;p+=1)h(p);ct()}if(j&2){f=rt(m[3]);let p;for(p=0;p<f.length;p+=1){const b=ae(m,f,p);s[p]?(s[p].p(b,j),q(s[p],1)):(s[p]=se(b),s[p].c(),q(s[p],1),s[p].m(i,n))}for(lt(),p=f.length;p<s.length;p+=1)d(p);ct()}},i(m){if(!c){for(let j=0;j<l.length;j+=1)q(a[j]);for(let j=0;j<f.length;j+=1)q(s[j]);c=!0}},o(m){a=a.filter(Boolean);for(let j=0;j<a.length;j+=1)W(a[j]);s=s.filter(Boolean);for(let j=0;j<s.length;j+=1)W(s[j]);c=!1},d(m){m&&(M(t),M(e),M(i)),kt(a,m),kt(s,m)}}}function bn(r){let t,e,i,n=rt(ue(r[1])),c=[];for(let a=0;a<n.length;a+=1)c[a]=de(fe(r,n,a));const l=a=>W(c[a],1,1,()=>{c[a]=null});return{c(){t=R("div"),e=R("section");for(let a=0;a<c.length;a+=1)c[a].c();H(e,"class","print")},m(a,h){B(a,t,h),L(t,e);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);r[2](e),i=!0},p(a,[h]){if(h&2){n=rt(ue(a[1]));let f;for(f=0;f<n.length;f+=1){const s=fe(a,n,f);c[f]?(c[f].p(s,h),q(c[f],1)):(c[f]=de(s),c[f].c(),q(c[f],1),c[f].m(e,null))}for(lt(),f=n.length;f<c.length;f+=1)l(f);ct()}},i(a){if(!i){for(let h=0;h<n.length;h+=1)q(c[h]);i=!0}},o(a){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)W(c[h]);i=!1},d(a){a&&M(t),kt(c,a),r[2](null)}}}function gn(r,t,e){let i;Ft(r,_t,l=>e(1,i=l));let n;function c(l){St[l?"unshift":"push"](()=>{n=l,e(0,n)})}return[n,i,c]}class mn extends ut{constructor(t){super(),ot(this,t,gn,bn,it,{})}}function kn(r){let t,e,i;return e=new Et({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),e.$on("type",r[2]),{c(){t=R("div"),Y(e.$$.fragment),H(t,"class","select-wrapper svelte-1wgwrdq"),nt(t,"background-color",r[1])},m(n,c){B(n,t,c),Q(e,t,null),i=!0},p(n,[c]){const l={};c&1&&(l.cardType=n[0]),e.$set(l),(!i||c&2)&&nt(t,"background-color",n[1])},i(n){i||(q(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){n&&M(t),X(e)}}}function $n(r,t,e){let i,{currentFilter:n="None"}=t;const c=({detail:l})=>e(0,n=l);return r.$$set=l=>{"currentFilter"in l&&e(0,n=l.currentFilter)},r.$$.update=()=>{r.$$.dirty&1&&e(1,i=$t(n))},[n,i,c]}class Se extends ut{constructor(t){super(),ot(this,t,$n,kn,it,{currentFilter:0})}}function he(r,t,e){const i=r.slice();return i[6]=t[e],i}function pe(r){let t,e=r[6].cardType.passive?"passive":"",i,n,c=r[6].cardType.type+"",l,a,h,f,s;return h=new Wt({props:{card:r[6],editable:!1}}),{c(){t=R("div"),i=Z(e),n=V(),l=Z(c),a=V(),Y(h.$$.fragment),f=V()},m(d,m){B(d,t,m),L(t,i),L(t,n),L(t,l),L(t,a),Q(h,t,null),L(t,f),s=!0},p(d,m){(!s||m&4)&&e!==(e=d[6].cardType.passive?"passive":"")&&Ct(i,e),(!s||m&4)&&c!==(c=d[6].cardType.type+"")&&Ct(l,c);const j={};m&4&&(j.card=d[6]),h.$set(j)},i(d){s||(q(h.$$.fragment,d),s=!0)},o(d){W(h.$$.fragment,d),s=!1},d(d){d&&M(t),X(h)}}}function wn(r){let t,e,i,n,c,l,a,h,f,s,d,m;function j($){r[4]($)}let p={};r[0]!==void 0&&(p.currentFilter=r[0]),e=new Se({props:p}),St.push(()=>we(e,"currentFilter",j));let b=rt(r[2]),g=[];for(let $=0;$<b.length;$+=1)g[$]=pe(he(r,b,$));const N=$=>W(g[$],1,1,()=>{g[$]=null});return{c(){t=R("section"),Y(e.$$.fragment),n=V(),c=R("label"),c.textContent="sort passive",l=V(),a=R("input"),h=V(),f=R("section");for(let $=0;$<g.length;$+=1)g[$].c();H(c,"for","passive"),H(a,"type","checkbox"),H(a,"name","passive"),H(a,"id","passive"),H(a,"class","svelte-12mur4n"),H(f,"class","container svelte-12mur4n")},m($,u){B($,t,u),Q(e,t,null),L(t,n),L(t,c),L(t,l),L(t,a),a.checked=r[1],B($,h,u),B($,f,u);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(f,null);s=!0,d||(m=vt(a,"change",r[5]),d=!0)},p($,[u]){const v={};if(!i&&u&1&&(i=!0,v.currentFilter=$[0],ke(()=>i=!1)),e.$set(v),u&2&&(a.checked=$[1]),u&4){b=rt($[2]);let w;for(w=0;w<b.length;w+=1){const D=he($,b,w);g[w]?(g[w].p(D,u),q(g[w],1)):(g[w]=pe(D),g[w].c(),q(g[w],1),g[w].m(f,null))}for(lt(),w=b.length;w<g.length;w+=1)N(w);ct()}},i($){if(!s){q(e.$$.fragment,$);for(let u=0;u<b.length;u+=1)q(g[u]);s=!0}},o($){W(e.$$.fragment,$),g=g.filter(Boolean);for(let u=0;u<g.length;u+=1)W(g[u]);s=!1},d($){$&&(M(t),M(h),M(f)),X(e),kt(g,$),d=!1,m()}}}function Tn(r,t,e){let i,n;Ft(r,_t,f=>e(3,n=f));let c="None",l=!1;function a(f){c=f,e(0,c)}function h(){l=this.checked,e(1,l)}return r.$$.update=()=>{r.$$.dirty&11&&e(2,i=n.map(f=>{const s=[f.cardHalf1];return f.cardHalf2&&s.push(f.cardHalf2),s}).flat().filter(f=>{if(c==="None"||f.cardType.type===c)return f}).sort((f,s)=>l?Number(f.cardType.passive)-Number(s.cardType.passive):0))},[c,l,i,n,a,h]}class jn extends ut{constructor(t){super(),ot(this,t,Tn,wn,it,{})}}function Sn(r){let t,e,i,n,c;const l=r[2].default,a=Ge(l,r,r[1],null);return{c(){t=R("button"),a&&a.c(),H(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(h,f){B(h,t,f),a&&a.m(t,null),i=!0,n||(c=vt(t,"click",r[3]),n=!0)},p(h,[f]){a&&a.p&&(!i||f&2)&&Ee(a,l,h,h[1],i?Ce(l,h[1],f,null):Fe(h[1]),null),(!i||f&1&&e!==(e="button "+h[0]+" svelte-zqnkwt"))&&H(t,"class",e)},i(h){i||(q(a,h),i=!0)},o(h){W(a,h),i=!1},d(h){h&&M(t),a&&a.d(h),n=!1,c()}}}function On(r,t,e){let{$$slots:i={},$$scope:n}=t,{colour:c="green"}=t;function l(a){Pe.call(this,r,a)}return r.$$set=a=>{"colour"in a&&e(0,c=a.colour),"$$scope"in a&&e(1,n=a.$$scope)},[c,n,i,l]}class ft extends ut{constructor(t){super(),ot(this,t,On,Sn,it,{colour:0})}}function _e(r,t,e){const i=r.slice();return i[11]=t[e],i}function Dn(r){let t;return{c(){t=Z("add two sided")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function An(r){let t;return{c(){t=Z("add one sided")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Nn(r){let t;return{c(){t=Z("save")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function xn(r){let t;return{c(){t=Z("import JSON")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Gn(r){let t;return{c(){t=Z("export JSON")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Cn(r){let t;return{c(){t=Z("Download")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function En(r){let t;return{c(){t=Z("view halves")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Fn(r){let t;return{c(){t=Z("remove")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function ve(r){let t,e,i,n,c,l;e=new Ut({props:{card:r[11],readable:!0}});function a(){return r[9](r[11])}return n=new ft({props:{colour:"red",$$slots:{default:[Fn]},$$scope:{ctx:r}}}),n.$on("click",a),{c(){t=R("div"),Y(e.$$.fragment),i=V(),Y(n.$$.fragment),c=V(),H(t,"class","wrapper svelte-z9e1s4")},m(h,f){B(h,t,f),Q(e,t,null),L(t,i),Q(n,t,null),L(t,c),l=!0},p(h,f){r=h;const s={};f&4&&(s.card=r[11]),e.$set(s);const d={};f&16384&&(d.$$scope={dirty:f,ctx:r}),n.$set(d)},i(h){l||(q(e.$$.fragment,h),q(n.$$.fragment,h),l=!0)},o(h){W(e.$$.fragment,h),W(n.$$.fragment,h),l=!1},d(h){h&&M(t),X(e),X(n)}}}function In(r){let t,e,i,n,c,l,a,h,f,s,d,m,j,p,b,g,N,$,u,v,w=r[2].length+"",D,T,O,x;function I(y){r[3](y)}let E={};r[0]!==void 0&&(E.currentFilter=r[0]),e=new Se({props:E}),St.push(()=>we(e,"currentFilter",I)),c=new ft({props:{colour:"blue",$$slots:{default:[Dn]},$$scope:{ctx:r}}}),c.$on("click",r[4]),a=new ft({props:{colour:"blue",$$slots:{default:[An]},$$scope:{ctx:r}}}),a.$on("click",r[5]),f=new ft({props:{$$slots:{default:[Nn]},$$scope:{ctx:r}}}),f.$on("click",r[6]),d=new ft({props:{$$slots:{default:[xn]},$$scope:{ctx:r}}}),d.$on("click",yn),j=new ft({props:{$$slots:{default:[Gn]},$$scope:{ctx:r}}}),j.$on("click",vn),b=new ft({props:{$$slots:{default:[Cn]},$$scope:{ctx:r}}}),b.$on("click",r[7]),N=new ft({props:{$$slots:{default:[En]},$$scope:{ctx:r}}}),N.$on("click",r[8]);let _=rt(r[2]),o=[];for(let y=0;y<_.length;y+=1)o[y]=ve(_e(r,_,y));const k=y=>W(o[y],1,1,()=>{o[y]=null});return{c(){t=R("section"),Y(e.$$.fragment),n=V(),Y(c.$$.fragment),l=V(),Y(a.$$.fragment),h=V(),Y(f.$$.fragment),s=V(),Y(d.$$.fragment),m=V(),Y(j.$$.fragment),p=V(),Y(b.$$.fragment),g=V(),Y(N.$$.fragment),$=V(),u=R("h1"),v=Z("cards "),D=Z(w),T=V(),O=R("section");for(let y=0;y<o.length;y+=1)o[y].c();H(t,"class","button-container svelte-z9e1s4"),H(O,"class","container svelte-z9e1s4")},m(y,A){B(y,t,A),Q(e,t,null),L(t,n),Q(c,t,null),L(t,l),Q(a,t,null),L(t,h),Q(f,t,null),L(t,s),Q(d,t,null),L(t,m),Q(j,t,null),L(t,p),Q(b,t,null),L(t,g),Q(N,t,null),B(y,$,A),B(y,u,A),L(u,v),L(u,D),B(y,T,A),B(y,O,A);for(let G=0;G<o.length;G+=1)o[G]&&o[G].m(O,null);x=!0},p(y,[A]){const G={};!i&&A&1&&(i=!0,G.currentFilter=y[0],ke(()=>i=!1)),e.$set(G);const S={};A&16384&&(S.$$scope={dirty:A,ctx:y}),c.$set(S);const C={};A&16384&&(C.$$scope={dirty:A,ctx:y}),a.$set(C);const F={};A&16384&&(F.$$scope={dirty:A,ctx:y}),f.$set(F);const P={};A&16384&&(P.$$scope={dirty:A,ctx:y}),d.$set(P);const J={};A&16384&&(J.$$scope={dirty:A,ctx:y}),j.$set(J);const z={};A&16384&&(z.$$scope={dirty:A,ctx:y}),b.$set(z);const K={};if(A&16384&&(K.$$scope={dirty:A,ctx:y}),N.$set(K),(!x||A&4)&&w!==(w=y[2].length+"")&&Ct(D,w),A&6){_=rt(y[2]);let U;for(U=0;U<_.length;U+=1){const tt=_e(y,_,U);o[U]?(o[U].p(tt,A),q(o[U],1)):(o[U]=ve(tt),o[U].c(),q(o[U],1),o[U].m(O,null))}for(lt(),U=_.length;U<o.length;U+=1)k(U);ct()}},i(y){if(!x){q(e.$$.fragment,y),q(c.$$.fragment,y),q(a.$$.fragment,y),q(f.$$.fragment,y),q(d.$$.fragment,y),q(j.$$.fragment,y),q(b.$$.fragment,y),q(N.$$.fragment,y);for(let A=0;A<_.length;A+=1)q(o[A]);x=!0}},o(y){W(e.$$.fragment,y),W(c.$$.fragment,y),W(a.$$.fragment,y),W(f.$$.fragment,y),W(d.$$.fragment,y),W(j.$$.fragment,y),W(b.$$.fragment,y),W(N.$$.fragment,y),o=o.filter(Boolean);for(let A=0;A<o.length;A+=1)W(o[A]);x=!1},d(y){y&&(M(t),M($),M(u),M(T),M(O)),X(e),X(c),X(a),X(f),X(d),X(j),X(b),X(N),kt(o,y)}}}function Hn(r,t,e){let i,n;Ft(r,_t,p=>e(1,n=p));let c="None";const l=(p,b)=>b==="None"?p:p.filter(g=>g.cardHalf1.cardType.type===b||g.cardHalf2&&g.cardHalf2.cardType.type===b);function a(p){c=p,e(0,c)}const h=()=>{_t.set([...n,Zt(2)])},f=()=>{_t.set([...n,Zt(1)]),console.log(n.length)},s=()=>{Rt(n)},d=()=>{zt.set("download")},m=()=>{zt.set("half")},j=p=>{Rt(n.filter(b=>b.id!==p.id))};return r.$$.update=()=>{r.$$.dirty&3&&e(2,i=l(n,c))},[c,n,i,a,h,f,s,d,m,j]}class Mn extends ut{constructor(t){super(),ot(this,t,Hn,In,it,{})}}function Bn(r){let t,e,i;var n=r[0];function c(l,a){return{}}return n&&(t=Yt(n,c())),{c(){t&&Y(t.$$.fragment),e=It()},m(l,a){t&&Q(t,l,a),B(l,e,a),i=!0},p(l,[a]){if(a&1&&n!==(n=l[0])){if(t){lt();const h=t;W(h.$$.fragment,1,0,()=>{X(h,1)}),ct()}n?(t=Yt(n,c()),Y(t.$$.fragment),q(t.$$.fragment,1),Q(t,e.parentNode,e)):t=null}},i(l){i||(t&&q(t.$$.fragment,l),i=!0)},o(l){t&&W(t.$$.fragment,l),i=!1},d(l){l&&M(e),t&&X(t,l)}}}function Pn(r,t,e){let i,n;Ft(r,zt,l=>e(1,n=l));const c={"":Mn,download:mn,half:jn};return r.$$.update=()=>{r.$$.dirty&2&&e(0,i=c[n])},[i,n]}class Jn extends ut{constructor(t){super(),ot(this,t,Pn,Bn,it,{})}}new Jn({target:document.getElementById("app")});
