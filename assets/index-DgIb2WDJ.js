var Gt=Object.defineProperty;var Ct=(n,e,t)=>e in n?Gt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var qe=(n,e,t)=>Ct(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}})();function re(){}function Ht(n,e){for(const t in e)n[t]=e[t];return n}function kt(n){return n()}function Ze(){return Object.create(null)}function De(n){n.forEach(kt)}function $t(n){return typeof n=="function"}function ue(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ee;function he(n,e){return n===e?!0:(Ee||(Ee=document.createElement("a")),Ee.href=e,n===Ee.href)}function xt(n){return Object.keys(n).length===0}function wt(n,...e){if(n==null){for(const i of e)i(void 0);return re}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Et(n){let e;return wt(n,t=>e=t)(),e}function Be(n,e,t){n.$$.on_destroy.push(wt(e,t))}function It(n,e,t,i){if(n){const r=Tt(n,e,t,i);return n[0](r)}}function Tt(n,e,t,i){return n[1]&&i?Ht(t.ctx.slice(),n[1](i(e))):t.ctx}function Ft(n,e,t,i){if(n[2]&&i){const r=n[2](i(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const c=[],a=Math.max(e.dirty.length,r.length);for(let f=0;f<a;f+=1)c[f]=e.dirty[f]|r[f];return c}return e.dirty|r}return e.dirty}function Mt(n,e,t,i,r,c){if(r){const a=Tt(e,t,i,c);n.p(a,r)}}function Bt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function et(n){return n??""}function K(n,e){n.appendChild(e)}function P(n,e,t){n.insertBefore(e,t||null)}function B(n){n.parentNode&&n.parentNode.removeChild(n)}function Se(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function R(n){return document.createElement(n)}function ee(n){return document.createTextNode(n)}function V(){return ee(" ")}function Pe(){return ee("")}function de(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function M(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Pt(n){return Array.from(n.childNodes)}function me(n,e){e=""+e,n.data!==e&&(n.data=e)}function tt(n,e){n.value=e??""}function ie(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Jt(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function nt(n,e){return new n(e)}let Ce;function Ge(n){Ce=n}function qt(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Lt(){const n=qt();return(e,t,{cancelable:i=!1}={})=>{const r=n.$$.callbacks[e];if(r){const c=Jt(e,t,{cancelable:i});return r.slice().forEach(a=>{a.call(n,c)}),!c.defaultPrevented}return!0}}function zt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const Te=[],He=[];let je=[];const We=[],Wt=Promise.resolve();let Re=!1;function Rt(){Re||(Re=!0,Wt.then(St))}function xe(n){je.push(n)}function jt(n){We.push(n)}const Le=new Set;let $e=0;function St(){if($e!==0)return;const n=Ce;do{try{for(;$e<Te.length;){const e=Te[$e];$e++,Ge(e),Ut(e.$$)}}catch(e){throw Te.length=0,$e=0,e}for(Ge(null),Te.length=0,$e=0;He.length;)He.pop()();for(let e=0;e<je.length;e+=1){const t=je[e];Le.has(t)||(Le.add(t),t())}je.length=0}while(Te.length);for(;We.length;)We.pop()();Re=!1,Le.clear(),Ge(n)}function Ut(n){if(n.fragment!==null){n.update(),De(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(xe)}}function Kt(n){const e=[],t=[];je.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),je=e}const Ie=new Set;let ge;function pe(){ge={r:0,c:[],p:ge}}function _e(){ge.r||De(ge.c),ge=ge.p}function W(n,e){n&&n.i&&(Ie.delete(n),n.i(e))}function U(n,e,t,i){if(n&&n.o){if(Ie.has(n))return;Ie.add(n),ge.c.push(()=>{Ie.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function oe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ot(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function Z(n){n&&n.c()}function X(n,e,t){const{fragment:i,after_update:r}=n.$$;i&&i.m(e,t),xe(()=>{const c=n.$$.on_mount.map(kt).filter($t);n.$$.on_destroy?n.$$.on_destroy.push(...c):De(c),n.$$.on_mount=[]}),r.forEach(xe)}function Y(n,e){const t=n.$$;t.fragment!==null&&(Kt(t.after_update),De(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vt(n,e){n.$$.dirty[0]===-1&&(Te.push(n),Rt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function le(n,e,t,i,r,c,a=null,f=[-1]){const p=Ce;Ge(n);const l=n.$$={fragment:null,ctx:[],props:c,update:re,not_equal:r,bound:Ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:Ze(),dirty:f,skip_bound:!1,root:e.target||p.$$.root};a&&a(l.root);let s=!1;if(l.ctx=t?t(n,e.props||{},(d,g,...T)=>{const _=T.length?T[0]:g;return l.ctx&&r(l.ctx[d],l.ctx[d]=_)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](_),s&&Vt(n,d)),g}):[],l.update(),s=!0,De(l.before_update),l.fragment=i?i(l.ctx):!1,e.target){if(e.hydrate){const d=Pt(e.target);l.fragment&&l.fragment.l(d),d.forEach(B)}else l.fragment&&l.fragment.c();e.intro&&W(n.$$.fragment),X(n,e.target,e.anchor),St()}Ge(p)}class ce{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){Y(this,1),this.$destroy=re}$on(e,t){if(!$t(t))return re;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!xt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qt);const we=[];function Dt(n,e=re){let t;const i=new Set;function r(f){if(ue(n,f)&&(n=f,t)){const p=!we.length;for(const l of i)l[1](),we.push(l,n);if(p){for(let l=0;l<we.length;l+=2)we[l][0](we[l+1]);we.length=0}}}function c(f){r(f(n))}function a(f,p=re){const l=[f,p];return i.add(l),i.size===1&&(t=e(r,c)||re),f(n),()=>{i.delete(l),i.size===0&&t&&(t(),t=null)}}return{set:r,update:c,subscribe:a}}const Fe=Dt(""),Oe=n=>{switch(n){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},ve=n=>window.location.href.includes("localhost")?`${window.location.href}/${n}.svg`:`${n}.svg`,rt=n=>{const e=Math.random().toString(36);return n===1?{id:e,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:e,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Xt(n){let e,t=n[0].text+"",i;return{c(){e=R("div"),i=ee(t),M(e,"class","cardText svelte-13kvtzw")},m(r,c){P(r,e,c),K(e,i)},p(r,c){c&1&&t!==(t=r[0].text+"")&&me(i,t)},d(r){r&&B(e)}}}function Yt(n){let e,t,i;return{c(){e=R("div"),M(e,"contenteditable","true"),M(e,"class","cardText svelte-13kvtzw"),n[0].text===void 0&&xe(()=>n[5].call(e))},m(r,c){P(r,e,c),n[0].text!==void 0&&(e.innerText=n[0].text),t||(i=de(e,"input",n[5]),t=!0)},p(r,c){c&1&&r[0].text!==e.innerText&&(e.innerText=r[0].text)},d(r){r&&B(e),t=!1,i()}}}function Zt(n){let e,t,i,r,c=n[0].cardType.passive&&it();return{c(){e=R("img"),i=V(),c&&c.c(),r=Pe(),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-13kvtzw")},m(a,f){P(a,e,f),P(a,i,f),c&&c.m(a,f),P(a,r,f)},p(a,f){f&1&&!he(e.src,t=ve(a[0].cardType.type))&&M(e,"src",t),a[0].cardType.passive?c||(c=it(),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},d(a){a&&(B(e),B(i),B(r)),c&&c.d(a)}}}function it(n){let e;return{c(){e=R("p"),e.textContent="Passive",M(e,"class","mirrored svelte-13kvtzw")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function en(n){let e,t;function i(a,f){return a[2]?Zt:a[3]?Yt:Xt}let r=i(n),c=r(n);return{c(){e=R("div"),t=R("div"),c.c(),M(t,"class","card svelte-13kvtzw"),ie(t,"--colour",n[4]),M(e,"class","wrapper svelte-13kvtzw"),ie(e,"--rotation",n[1]+"deg")},m(a,f){P(a,e,f),K(e,t),c.m(t,null)},p(a,[f]){r===(r=i(a))&&c?c.p(a,f):(c.d(1),c=r(a),c&&(c.c(),c.m(t,null))),f&16&&ie(t,"--colour",a[4]),f&2&&ie(e,"--rotation",a[1]+"deg")},i:re,o:re,d(a){a&&B(e),c.d()}}}function tn(n,e,t){let i,{card:r}=e,{rotation:c=0}=e,{back:a=!1}=e,{editable:f=!0}=e;function p(){r.text=this.innerText,t(0,r)}return n.$$set=l=>{"card"in l&&t(0,r=l.card),"rotation"in l&&t(1,c=l.rotation),"back"in l&&t(2,a=l.back),"editable"in l&&t(3,f=l.editable)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=Oe(r.cardType.type))},[r,c,a,f,i,p]}class Ue extends ce{constructor(e){super(),le(this,e,tn,en,ue,{card:0,rotation:1,back:2,editable:3})}}function ot(n,e,t){const i=n.slice();return i[12]=e[t],i}function ut(n){let e,t,i,r,c,a,f,p,l=n[5]&&ft(n),s=!n[3]&&lt(n);return{c(){e=R("div"),t=R("img"),r=V(),l&&l.c(),c=V(),s&&s.c(),a=Pe(),he(t.src,i=ve(n[0]))||M(t,"src",i),M(t,"alt","My Icon"),M(t,"class","cardIcon svelte-lm5vvd"),M(e,"class","select svelte-lm5vvd")},m(d,g){P(d,e,g),K(e,t),K(e,r),l&&l.m(e,null),P(d,c,g),s&&s.m(d,g),P(d,a,g),f||(p=de(t,"click",n[8]),f=!0)},p(d,g){g&1&&!he(t.src,i=ve(d[0]))&&M(t,"src",i),d[5]?l?l.p(d,g):(l=ft(d),l.c(),l.m(e,null)):l&&(l.d(1),l=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,g):(s=lt(d),s.c(),s.m(a.parentNode,a))},d(d){d&&(B(e),B(c),B(a)),l&&l.d(),s&&s.d(d),f=!1,p()}}}function ft(n){let e,t=oe(n[4]),i=[];for(let r=0;r<t.length;r+=1)i[r]=at(ot(n,t,r));return{c(){e=R("div");for(let r=0;r<i.length;r+=1)i[r].c();M(e,"class","options svelte-lm5vvd"),ie(e,"--colour",n[6])},m(r,c){P(r,e,c);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null)},p(r,c){if(c&49){t=oe(r[4]);let a;for(a=0;a<t.length;a+=1){const f=ot(r,t,a);i[a]?i[a].p(f,c):(i[a]=at(f),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}c&64&&ie(e,"--colour",r[6])},d(r){r&&B(e),Se(i,r)}}}function at(n){let e,t,i,r,c;function a(){return n[9](n[12])}return{c(){e=R("img"),he(e.src,t=ve(n[12]))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class",i="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")},m(f,p){P(f,e,p),r||(c=de(e,"click",a),r=!0)},p(f,p){n=f,p&16&&!he(e.src,t=ve(n[12]))&&M(e,"src",t),p&17&&i!==(i="cardIcon "+(n[0]===n[12]?"hidden":"")+" svelte-lm5vvd")&&M(e,"class",i)},d(f){f&&B(e),r=!1,c()}}}function lt(n){let e,t,i,r,c,a,f;return{c(){e=R("input"),t=V(),i=R("label"),r=ee("Passive"),M(e,"type","checkbox"),M(e,"id",n[7]),M(e,"class","hidden"),M(i,"for",n[7]),M(i,"class",c="passive no-select "+(n[1]?"":"invisible")+" svelte-lm5vvd")},m(p,l){P(p,e,l),e.checked=n[1],P(p,t,l),P(p,i,l),K(i,r),a||(f=de(e,"change",n[10]),a=!0)},p(p,l){l&2&&(e.checked=p[1]),l&2&&c!==(c="passive no-select "+(p[1]?"":"invisible")+" svelte-lm5vvd")&&M(i,"class",c)},d(p){p&&(B(e),B(t),B(i)),a=!1,f()}}}function nn(n){let e,t=!n[2]&&ut(n);return{c(){t&&t.c(),e=Pe()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[2]?t&&(t.d(1),t=null):t?t.p(i,r):(t=ut(i),t.c(),t.m(e.parentNode,e))},i:re,o:re,d(i){i&&B(e),t&&t.d(i)}}}function rn(n,e,t){let i,{cardType:r}=e,{passive:c=!1}=e,{back:a=!1}=e,{noPassive:f=!1}=e;const p=Math.random().toString(36).substring(7),l=Lt();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=e;const g=()=>t(5,s=!s),T=b=>{t(0,r=b),t(5,s=!1)};function _(){c=this.checked,t(1,c)}return n.$$set=b=>{"cardType"in b&&t(0,r=b.cardType),"passive"in b&&t(1,c=b.passive),"back"in b&&t(2,a=b.back),"noPassive"in b&&t(3,f=b.noPassive),"names"in b&&t(4,d=b.names)},n.$$.update=()=>{n.$$.dirty&1&&t(6,i=Oe(r)),n.$$.dirty&1&&l("type",r),n.$$.dirty&2&&l("passive",c)},[r,c,a,f,d,s,i,p,g,T,_]}class Me extends ce{constructor(e){super(),le(this,e,rn,nn,ue,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function on(n){let e,t;return{c(){e=R("img"),he(e.src,t=ve(n[0].cardType.type))||M(e,"src",t),M(e,"alt","My Icon"),M(e,"class","cardIcon svelte-15hk4fg")},m(i,r){P(i,e,r)},p(i,r){r&1&&!he(e.src,t=ve(i[0].cardType.type))&&M(e,"src",t)},i:re,o:re,d(i){i&&B(e)}}}function un(n){let e,t,i,r,c,a,f;return t=new Me({props:{cardType:n[0].cardType.type,passive:n[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),t.$on("type",n[2]),{c(){e=R("p"),Z(t.$$.fragment),i=V(),r=R("div"),M(e,"class","svelte-15hk4fg"),M(r,"contenteditable","true"),M(r,"class","cardText svelte-15hk4fg"),n[0].text===void 0&&xe(()=>n[3].call(r))},m(p,l){P(p,e,l),X(t,e,null),P(p,i,l),P(p,r,l),n[0].text!==void 0&&(r.innerText=n[0].text),c=!0,a||(f=de(r,"input",n[3]),a=!0)},p(p,l){const s={};l&1&&(s.cardType=p[0].cardType.type),l&1&&(s.passive=p[0].cardType.passive),t.$set(s),l&1&&p[0].text!==r.innerText&&(r.innerText=p[0].text)},i(p){c||(W(t.$$.fragment,p),c=!0)},o(p){U(t.$$.fragment,p),c=!1},d(p){p&&(B(e),B(i),B(r)),Y(t),a=!1,f()}}}function fn(n){let e,t,i,r;const c=[un,on],a=[];function f(p,l){return p[1]?1:0}return t=f(n),i=a[t]=c[t](n),{c(){e=R("div"),i.c(),M(e,"class","card svelte-15hk4fg"),ie(e,"--colour",Oe(n[0].cardType.type))},m(p,l){P(p,e,l),a[t].m(e,null),r=!0},p(p,[l]){let s=t;t=f(p),t===s?a[t].p(p,l):(pe(),U(a[s],1,1,()=>{a[s]=null}),_e(),i=a[t],i?i.p(p,l):(i=a[t]=c[t](p),i.c()),W(i,1),i.m(e,null)),(!r||l&1)&&ie(e,"--colour",Oe(p[0].cardType.type))},i(p){r||(W(i),r=!0)},o(p){U(i),r=!1},d(p){p&&B(e),a[t].d()}}}function an(n,e,t){let{card:i}=e,{back:r=!1}=e;const c=({detail:f})=>t(0,i.cardType.type=f,i);function a(){i.text=this.innerText,t(0,i)}return n.$$set=f=>{"card"in f&&t(0,i=f.card),"back"in f&&t(1,r=f.back)},[i,r,c,a]}class ln extends ce{constructor(e){super(),le(this,e,an,fn,ue,{card:0,back:1})}}function cn(n){let e,t;return e=new ln({props:{card:n[0].cardHalf1,back:n[1]}}),{c(){Z(e.$$.fragment)},m(i,r){X(e,i,r),t=!0},p(i,r){const c={};r&1&&(c.card=i[0].cardHalf1),r&2&&(c.back=i[1]),e.$set(c)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function sn(n){let e,t,i,r,c,a,f,p,l,s,d,g,T,_;return i=new Me({props:{cardType:n[0].cardHalf1.cardType.type,passive:n[0].cardHalf1.cardType.passive,back:n[1]}}),i.$on("type",n[4]),i.$on("passive",n[5]),c=new Ue({props:{card:n[0].cardHalf1,back:n[1]}}),p=new Ue({props:{card:n[0].cardHalf2,rotation:n[2]?0:180,back:n[1]}}),d=new Me({props:{cardType:n[0].cardHalf2.cardType.type,passive:n[0].cardHalf2.cardType.passive,back:n[1]}}),d.$on("type",n[6]),d.$on("passive",n[7]),{c(){e=R("div"),t=R("p"),Z(i.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),f=R("div"),Z(p.$$.fragment),l=V(),s=R("p"),Z(d.$$.fragment),g=V(),T=R("div"),M(t,"class","first svelte-1ubeuca"),M(e,"class","first-half half"),M(s,"class","second svelte-1ubeuca"),M(f,"class","second-half half svelte-1ubeuca"),M(T,"class","fill svelte-1ubeuca")},m(b,m){P(b,e,m),K(e,t),X(i,t,null),K(e,r),X(c,e,null),P(b,a,m),P(b,f,m),X(p,f,null),K(f,l),K(f,s),X(d,s,null),P(b,g,m),P(b,T,m),_=!0},p(b,m){const D={};m&1&&(D.cardType=b[0].cardHalf1.cardType.type),m&1&&(D.passive=b[0].cardHalf1.cardType.passive),m&2&&(D.back=b[1]),i.$set(D);const j={};m&1&&(j.card=b[0].cardHalf1),m&2&&(j.back=b[1]),c.$set(j);const u={};m&1&&(u.card=b[0].cardHalf2),m&4&&(u.rotation=b[2]?0:180),m&2&&(u.back=b[1]),p.$set(u);const v={};m&1&&(v.cardType=b[0].cardHalf2.cardType.type),m&1&&(v.passive=b[0].cardHalf2.cardType.passive),m&2&&(v.back=b[1]),d.$set(v)},i(b){_||(W(i.$$.fragment,b),W(c.$$.fragment,b),W(p.$$.fragment,b),W(d.$$.fragment,b),_=!0)},o(b){U(i.$$.fragment,b),U(c.$$.fragment,b),U(p.$$.fragment,b),U(d.$$.fragment,b),_=!1},d(b){b&&(B(e),B(a),B(f),B(g),B(T)),Y(i),Y(c),Y(p),Y(d)}}}function dn(n){let e,t,i,r,c;const a=[sn,cn],f=[];function p(l,s){return l[0].cardHalf2?0:1}return t=p(n),i=f[t]=a[t](n),{c(){e=R("div"),i.c(),M(e,"class",r=et(`card ${n[1]&&"back"}`)+" svelte-1ubeuca"),ie(e,"--colour",n[3])},m(l,s){P(l,e,s),f[t].m(e,null),c=!0},p(l,[s]){let d=t;t=p(l),t===d?f[t].p(l,s):(pe(),U(f[d],1,1,()=>{f[d]=null}),_e(),i=f[t],i?i.p(l,s):(i=f[t]=a[t](l),i.c()),W(i,1),i.m(e,null)),(!c||s&2&&r!==(r=et(`card ${l[1]&&"back"}`)+" svelte-1ubeuca"))&&M(e,"class",r),(!c||s&8)&&ie(e,"--colour",l[3])},i(l){c||(W(i),c=!0)},o(l){U(i),c=!1},d(l){l&&B(e),f[t].d()}}}function hn(n,e,t){let i,{card:r}=e,{back:c=!1}=e,{readable:a=!1}=e;const f=({detail:d})=>t(0,r.cardHalf1.cardType.type=d,r),p=({detail:d})=>t(0,r.cardHalf1.cardType.passive=d,r),l=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.type=d,r)},s=({detail:d})=>{r.cardHalf2&&t(0,r.cardHalf2.cardType.passive=d,r)};return n.$$set=d=>{"card"in d&&t(0,r=d.card),"back"in d&&t(1,c=d.back),"readable"in d&&t(2,a=d.readable)},n.$$.update=()=>{n.$$.dirty&1&&t(3,i=Oe(r.cardHalf1.cardType.type))},[r,c,a,i,f,p,l,s]}class Ve extends ce{constructor(e){super(),le(this,e,hn,dn,ue,{card:0,back:1,readable:2})}}const ct=(n,e=9)=>{const t=[];let i=0;for(;i<n.length;)t.push(n.slice(i,e+i)),i+=e;return t};function pn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _n(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qe={exports:{}};Qe.exports;(function(n){(function(){function e(i,r){return r?_n(i):i.slice?e[c(i)]:function(a,f){i(a={exports:{}}),e[c(f)]=a.exports};function c(a){return a.split("/").slice(-1).toString().replace(".js","")}}var t=n;e(function(i){String.random=function(c,a){var f="";for(c=c||24,a=a||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)f+=a.charAt(Math.floor(Math.random()*a.length));return f},String.match=function(c,a){var f,p;return typeof c!="string"?!1:(typeof a=="string"&&(a={"=":a}),a=a||{},f=a["="]||a["*"]||a[">"]||a["<"],c===f?!0:p!==a["="]?!1:(f=a["*"]||a[">"],c.slice(0,(f||"").length)===f?!0:p!==a["*"]?!1:p!==a[">"]&&p!==a["<"]?c>=a[">"]&&c<=a["<"]:p!==a[">"]&&c>=a[">"]||p!==a["<"]&&c<=a["<"]))},String.hash=function(c,a){if(typeof c=="string"){if(a=a||0,!c.length)return a;for(var f=0,p=c.length,l;f<p;++f)l=c.charCodeAt(f),a=(a<<5)-a+l,a|=0;return a}};var r=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,a){for(var f in c)if(r.call(c,f)&&(!a||a.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var a=[];for(var f in c)r.call(c,f)&&a.push(f);return a},function(){var c,a=setTimeout,f=0,p=0,l=typeof setImmediate!=""+c&&setImmediate||function(d,g){return typeof MessageChannel==""+c?a:((d=new MessageChannel).port1.onmessage=function(T){T.data==""&&g()},function(T){g=T,d.port2.postMessage("")})}(),s=a.check=a.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};a.hold=a.hold||9,a.poll=a.poll||function(d){if(a.hold>=s.now()-f&&p++<3333){d();return}l(function(){f=s.now(),d()},p=0)}}(),function(){var c=setTimeout,a=c.turn=c.turn||function(g){f.push(g)==1&&p(d)},f=a.s=[],p=c.poll,l=0,s,d=function(){(s=f[l++])&&s(),(l==f.length||l==99)&&(f=a.s=f.slice(l),l=0),f.length&&p(d)}}(),function(){var c,a=setTimeout,f=a.turn;(a.each=a.each||function(p,l,s,d){d=d||9,function g(T,_,b){if(_=(T=(p||[]).splice(0,d)).length){for(var m=0;m<_&&c===(b=l(T[m]));m++);if(c===b){f(g);return}}s&&s(b)}()})()}()})(e,"./shim"),e(function(i){i.exports=function r(s,a,f){if(!s)return{to:r};var p,l=typeof a=="function",s=(this.tag||(this.tag={}))[s]||l&&(this.tag[s]={tag:s,to:r._={next:function(g){var T;(T=this.to)&&T.next(g)}}});if(l){var d={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:a,the:s,on:this,as:f};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&p!==a&&s.next(a),s}})(e,"./onto"),e(function(i){i.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(i){e("./shim");function r(){var s=+new Date;return p<s?(a=0,p=s+r.drift):p=s+(a+=1)/f+r.drift}r.drift=0;var c=-1/0,a=0,f=999,p=c,l;r.is=function(s,d,g){var T=d&&s&&s._&&s._[">"]||g;if(T)return typeof(T=T[d])=="number"?T:c},r.ify=function(s,d,g,T,_){(s=s||{})._=s._||{},_&&(s._["#"]=_);var b=s._[">"]||(s._[">"]={});return l!==d&&d!=="_"&&(typeof g=="number"&&(b[d]=g),l!==T&&(s[d]=T)),s},i.exports=r})(e,"./state"),e(function(i){e("./shim");function r(c){var a={s:{}},f=a.s;c=c||{max:999,age:1e3*9},a.check=function(l){return f[l]?p(l):!1};var p=a.track=function(l){var s=f[l]||(f[l]={});return s.was=a.now=+new Date,a.to||(a.to=setTimeout(a.drop,c.age+9)),p.ed&&p.ed(l),s};return a.drop=function(l){a.to=null,a.now=+new Date;var s=Object.keys(f);console.STAT&&console.STAT(a.now,+new Date-a.now,"dup drop keys"),setTimeout.each(s,function(d){var g=f[d];g&&(l||c.age)>a.now-g.was||delete f[d]},0,99)},a}i.exports=r})(e,"./dup"),e(function(i){e("./onto"),i.exports=function(a,f){if(this.on){var p=(this.opt||{}).lack||9e3;if(typeof a!="function"){if(!a)return;var s=a["#"]||a,l=(this.tag||"")[s];return l?(f&&(l=this.on(s,f),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},p)),!0):void 0}var s=f&&f["#"]||r(9);if(!a)return s;var d=this.on(s,a,f);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},p),s}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(i){function r(_){return _ instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:_}):new r(_)}r.is=function(_){return _ instanceof r||_&&_._&&_===_._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||r.on,o.ask=o.ask||r.ask,o.dup=o.dup||r.dup();var y=o.$.opt(o.opt);return o.once||(o.on("in",_,o),o.on("out",_,o),o.on("put",D,o),r.on("create",o),o.on("create",o)),o.once=1,y};function _(o){if(o){if(o.out===_){this.to.next(o);return}var y=this,w=y.as,G=w.at||w,C=G.$,S=G.dup,x,I=o.DBG;if((x=o["#"])||(x=o["#"]=a(9)),!S.check(x)){if(S.track(x),x=o._,o._=typeof x=="function"?x:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&u(o),!G.ask(o["@"],o))if(I&&(I.u=+new Date),o.put){b(o);return}else o.get&&r.on.get(o,C);I&&(I.uc=+new Date),y.to.next(o),I&&(I.ua=+new Date),!(o.nts||o.NTS)&&(o.out=_,G.on("out",o),I&&(I.ue=+new Date))}}}function b(o){if(o){var y=o._||"",w=y.root=((y.$=o.$||"")._||"").root;if(o["@"]&&y.faith&&!y.miss){o.out=_,w.on("out",o);return}y.latch=w.hatch,y.match=w.hatch=[];var G=o.put,C=y.DBG=o.DBG,S=+new Date;if(E=E||S,!(G["#"]&&G["."])){C&&(C.p=S),y["#"]=o["#"],y.msg=o,y.all=0,y.stun=1;var x=Object.keys(G);console.STAT&&console.STAT(S,((C||y).pk=+new Date)-S,"put sort");var I=0,L,q,J,Q,F,z,ne;(function fe(ye){if(L!=I){if(L=I,!(J=x[I])){console.STAT&&console.STAT(S,((C||y).pd=+new Date)-S,"put"),j(y);return}(Q=G[J])?(ne=Q._)?J!==ne["#"]?z=k+A(J)+"soul not same.":(F=ne[">"])||(z=k+A(J)+"no state."):z=k+A(J)+"no meta.":z=k+A(J)+"no node.",q=Object.keys(Q||{})}if(z){o.err=y.err=z,j(y);return}var Ae=0,ae;for(ye=ye||0;ye++<9&&(ae=q[Ae++]);)if(ae!=="_"){var be=Q[ae],Ne=F[ae];if(d===Ne){z=k+A(ae)+"on"+A(J)+"no state.";break}if(!p(be)){z=k+A(ae)+"on"+A(J)+"bad "+typeof be+A(be);break}m(be,ae,J,Ne,o),++H}if((q=q.slice(Ae)).length){f(fe);return}++I,q=null,fe(ye)})()}}}r.on.put=b;function m(o,y,w,G,C){var S=C._||"",x=S.root,I=x.graph,L,q=I[w]||g,J=l(q,y,1),Q=q[y],F=S.DBG;(L=console.STAT)&&(!I[w]||!Q)&&(L.has=(L.has||0)+1);var z=N();if(G>z){setTimeout(function(){m(o,y,w,G,C)},(L=G-z)>O?O:L),console.STAT&&console.STAT((F||S).Hf=+new Date,L,"future");return}if(!(G<J)&&!(!S.faith&&G===J&&(o===Q||$(o)<=$(Q))&&!S.miss)){S.stun++;var ne=C["#"]+S.all++,fe={toString:function(){return ne},_:S};fe.toJSON=fe.toString,x.dup.track(fe)["#"]=C["#"],F&&(F.ph=F.ph||+new Date),x.on("put",{"#":fe,"@":C["@"],put:{"#":w,".":y,":":o,">":G},ok:C.ok,_:S})}}function D(o){var y;(y=(o._||"").DBG)&&(y.pa=+new Date,y.pm=y.pm||+new Date);var w=this,G=w.as,C=G.graph,S=o._,x=o.put,I=x["#"],L=x["."],q=x[":"],J=x[">"];o["#"];var Q;(Q=S.msg)&&(Q=Q.put)&&(Q=Q[I])&&s(Q,L,J,q,I),C[I]=s(C[I],L,J,q,I),(Q=(G.next||"")[I])&&Q.on("in",o),j(S),w.to.next(o)}function j(o,y){var w;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(w=o.root))){var G=o.match;G.end=1,G===w.hatch&&(!(G=o.latch)||G.end?delete w.hatch:w.hatch=G),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(y=o.msg)||o.err||y.err)&&(y.out=_,o.root.on("out",y),h())}}function u(o){var y=o["@"]||"",w;if(!(w=y._)){var G=(G=o.$)&&(G=G._)&&(G=G.root)&&(G=G.dup);if(!(G=G.check(y)))return;o["@"]=G["#"]||o["@"];return}w.acks=(w.acks||0)+1,(w.err=o.err)&&(o["@"]=w["#"],j(w)),w.ok=o.ok||w.ok,!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){v(w)})),v(w)}function v(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?d:o.ok||{"":1}})}var k="Error: Invalid graph!",A=function(o){return" '"+(""+o).slice(0,9)+"...' "},$=JSON.stringify,O=2147483647,N=r.state,H=0,E,h=function(){H>999&&H/-(E-(E=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),h=function(){H=0})}}(),function(){r.on.get=function(b,m){var D=m._,j=b.get,u=j["#"],v=D.graph[u],k=j["."],A=D.next||(D.next={}),$=A[u],O=b._||{},N=O.DBG=b.DBG;if(N&&(N.g=+new Date),!v)return D.on("get",b);if(k){if((typeof k!="string"||d===v[k])&&!(($||"").next||"")[k]){D.on("get",b);return}v=s({},k,l(v,k),v[k],u)}v&&_(b,v),D.on("get",b)};function _(b,m){var D=+new Date,j=b._||{},u=j.DBG=b.DBG,v=b["#"],k=a(9),A=Object.keys(m||"").sort(),$=((m||"")._||"")["#"];A.length;var O=b.$._.root,N=m===O.graph[$];console.STAT&&console.STAT(D,((u||j).gk=+new Date)-D,"got keys"),m&&function H(){D=+new Date;for(var E=0,h,o={},y;E<9&&(h=A[E++]);)s(o,h,l(m,h),m[h],$);A=A.slice(E),(y={})[$]=o,o=y;var w;N&&(w=function(){},w.ram=w.faith=!0),y=A.length,console.STAT&&console.STAT(D,-(D-(D=+new Date)),"got copied some"),u&&(u.ga=+new Date),O.on("in",{"@":v,"#":k,put:o,"%":y?k=a(9):d,$:O.$,_:w,DBG:u,FOO:1}),console.STAT&&console.STAT(D,+new Date-D,"got in"),y&&setTimeout.turn(H)}(),m||O.on("in",{"@":b["#"]})}r.on.get.ack=_}(),function(){r.chain.opt=function(_){_=_||{};var b=this,m=b._,D=_.peers||_;return Object.plain(_)||(_={}),Object.plain(m.opt)||(m.opt=_),typeof D=="string"&&(D=[D]),Object.plain(m.opt.peers)||(m.opt.peers={}),D instanceof Array&&(_.peers={},D.forEach(function(j){var u={};u.id=u.url=j,_.peers[j]=m.opt.peers[j]=m.opt.peers[j]||u})),c(_,function j(u){var v=this[u];if(this&&this.hasOwnProperty(u)||typeof v=="string"||Object.empty(v)){this[u]=v;return}v&&v.constructor!==Object&&!(v instanceof Array)||c(v,j)}),m.opt.from=_,r.on("opt",m),m.opt.uuid=m.opt.uuid||function(u){return r.state().toString(36).replace(".","")+String.random(u||12)},b}}();var c=function(_,b){Object.keys(_).forEach(b,_)},a=String.random,f=setTimeout.turn,p=r.valid,l=r.state.is,s=r.state.ify,d,g={},T;r.log=function(){return!r.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(_,b,m){return(m=r.log.once)[_]=m[_]||0,m[_]++||r.log(b)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof t<"u"&&(t.exports=r)}catch{}i.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(T=console).only=function(_,b){return T.only.i&&_===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||b)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(i){var r=e("./root");r.chain.back=function(f,p){var l;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var g=0,T=f.length,l=d;for(g;g<T;g++)l=(l||c)[f[g]];return a!==l?p?s:l:(l=d.back)?l.$.back(f,p):void 0}if(typeof f=="function"){for(var _,l={back:d};(l=l.back)&&a===(_=f(l,p)););return _}return typeof f=="number"?(d.back||d).$.back(f-1):this};var c={},a})(e,"./back"),e(function(i){var r=e("./root");r.chain.chain=function(j){var u=this,v=u._,k=new(j||u).constructor(u),A=k._,$;return A.root=$=v.root,A.id=++$.once,A.back=u._,A.on=r.on,A.on("in",r.on.in,A),A.on("out",r.on.out,A),k};function c(j){var u,v=this.as,k=v.back,A=v.root,$;if(j.$||(j.$=v.$),this.to.next(j),v.err){v.on("in",{put:v.put=d,$:v.$});return}if(u=j.get){if(A.pass&&(A.pass[v.id]=v),v.lex&&Object.keys(v.lex).forEach(function(O){$[O]=v.lex[O]},$=j.get=j.get||{}),u["#"]||v.soul){if(u["#"]=u["#"]||v.soul,j["#"]||(j["#"]=g(9)),k=A.$.get(u["#"])._,u=u["."]){if(_(k.put,u)&&($=k.ask&&k.ask[u],(k.ask||(k.ask={}))[u]=k.$.get(u)._,k.on("in",{get:u,put:{"#":k.soul,".":u,":":k.put[u],">":m(A.graph[k.soul],u)}}),$))return}else{if($=k.ask&&k.ask[""],(k.ask||(k.ask={}))[""]=k,d!==k.put&&(k.on("in",k),$))return;j.$=k.$}return A.ask(l,j),A.on("in",j)}if(u["."])return v.get?(j={get:{".":v.get},$:v.$},(k.ask||(k.ask={}))[v.get]=j.$._,k.on("out",j)):(j={get:v.lex?j.get:{},$:v.$},k.on("out",j));if((v.ask||(v.ask={}))[""]=v,v.get)return u["."]=v.get,(k.ask||(k.ask={}))[v.get]=j.$._,k.on("out",j)}return k.on("out",j)}r.on.out=c;function a(j,u){u=u||this.as;var v=u.root,k=j.$||(j.$=u.$),A=(k||"")._||s,$=j.put||"",O=$["#"],N=$["."],H=d!==$["="]?$["="]:$[":"],E=$[">"]||-1/0,h;if(d!==j.put&&(d===$["#"]||d===$["."]||d===$[":"]&&d===$["="]||d===$[">"])){if(!T($)){if(!(O=(($||"")._||"")["#"])){console.log("chain not yet supported for",$,"...",j,u);return}return k=u.root.$.get(O),setTimeout.each(Object.keys($).sort(),function(o){o=="_"||d===(E=m($,o))||u.on("in",{$:k,put:{"#":O,".":o,"=":$[o],">":E},VIA:j})})}u.on("in",{$:A.back.$,put:{"#":O=A.back.soul,".":N=A.has||A.get,"=":$,">":m(A.back.put,N)},via:j});return}(j.seen||"")[u.id]||((j.seen||(j.seen=function(){}))[u.id]=u,u!==A&&(Object.keys(j).forEach(function(o){$[o]=j[o]},$={}),$.get=u.get||$.get,!u.soul&&!u.has?$.$$$=$.$$$||u.$:A.soul&&($.$=u.$,$.$$=$.$$||A.$),j=$),p(j,u),(u.soul||j.$$)&&E>=m(v.graph[O],N)&&(($=v.$.get(O)._).put=D($.put,N,E,H,O)),!A.soul&&E>=m(v.graph[O],N)&&(h=(v.$.get(O)._.next||"")[N])&&(h.put=H,typeof($=T(H))=="string"&&(h.put=v.$.get($)._.put||H)),this.to&&this.to.next(j),u.any&&setTimeout.each(Object.keys(u.any),function(o){(o=u.any[o])&&o(j)},0,99),u.echo&&setTimeout.each(Object.keys(u.echo),function(o){(o=u.echo[o])&&o.on("in",j)},0,99),((j.$$||"")._||A).soul&&(h=u.next)&&(h=h[N])&&($={},Object.keys(j).forEach(function(o){$[o]=j[o]}),$.$=(j.$$||j.$).get($.get=N),delete $.$$,delete $.$$$,h.on("in",$)),f(j,u))}r.on.in=a;function f(j,u){if(u=u||this.as||j.$._,!(j.$$&&this!==r.on)&&!(!j.put||u.soul)){var v=j.put||"",k=v["="]||v[":"],N,A=u.root,$=A.$.get(v["#"]).get(v["."])._;if(typeof(k=T(k))!="string"){this===r.on&&(($.echo||($.echo={}))[u.id]=u);return}if(!(($.echo||($.echo={}))[u.id]&&!(A.pass||"")[u.id])){if(N=A.pass){if(N[k+u.id])return;N[k+u.id]=1}($.echo||($.echo={}))[u.id]=u,u.has&&(u.link=k);var O=A.$.get($.link=k)._;(O.echo||(O.echo={}))[$.id]=$;var N=u.ask||"";(N[""]||u.lex)&&O.on("out",{get:{"#":k}}),setTimeout.each(Object.keys(N),function(H,E){!H||!(E=N[H])||E.on("out",{get:{"#":k,".":H}})},0,99)}}}r.on.link=f;function p(j,u){var v=j.put||"",k=d!==v["="]?v["="]:v[":"],A=u.root,$,O;if(d===k){if(u.soul&&d!==u.put||(O=(j.$$||j.$||"")._||"",j["@"]&&(d!==O.put||d!==u.put)))return;($=u.link||j.linked)&&delete(A.$.get($)._.echo||"")[u.id],u.has&&(u.link=null),u.put=d,setTimeout.each(Object.keys(u.next||""),function(N,H){(H=u.next[N])&&($&&delete(A.$.get($).get(N)._.echo||"")[H.id],H.on("in",{get:N,put:d,$:H.$}))},0,99);return}u.soul||j.$$||($=T(k),O=j.$._||"",!(($===O.link||u.has&&!O.link)&&!((A.pass||"")[u.id]&&typeof $!="string"))&&(delete(O.echo||"")[u.id],p({get:u.get,put:d,$:j.$,linked:j.linked=j.linked||O.link},u)))}r.on.unlink=p;function l(j,u){var v=this.as,k=v.$._;k.root;var A=v.get||"",$=(j.put||"")[A["#"]]||"";if(!j.put||typeof A["."]=="string"&&d===$[A["."]]){if(d!==k.put||!k.soul&&!k.has)return;k.ack=(k.ack||0)+1,k.on("in",{get:k.get,put:k.put=d,$:k.$,"@":j["@"]});return}(j._||{}).miss=1,r.on.put(j)}var s={},d,g=String.random,T=r.valid,_=function(j,u){return j&&Object.prototype.hasOwnProperty.call(j,u)},b=r.state,m=b.is,D=b.ify})(e,"./chain"),e(function(i){var r=e("./root");r.chain.get=function(d,g,T){var _,b;if(typeof d=="string"){if(d.length==0)return(_=this.chain())._.err={err:r.log("0 length key!",d)},g&&g.call(_,_._.err),_;var m=this,D=m._,j=D.next||p;(_=j[d])||(_=d&&c(d,m)),_=_&&_.$}else if(typeof d=="function"){let N=function(H,E,h){if(!N.stun&&!((S=v.pass)&&!S[k])){var o=H.$._,y=(H.$$||"")._,w=(y||o).put,G=!o.has&&!o.soul,C={},S;if((G||s===w)&&(w=s===((S=H.put)||"")["="]?s===(S||"")[":"]?S:S[":"]:S["="]),typeof(S=r.valid(w))=="string"&&(w=s===(S=v.$.get(S)._.put)?u.not?s:w:S),!(u.not&&s===w)){if(s===u.stun){if((S=v.stun)&&S.on&&(D.$.back(function(x){if(S.on(""+x.id,C={}),(C.run||0)<N.id)return C}),!C.run&&S.on(""+o.id,C={}),!C.run&&y&&S.on(""+y.id,C={}),N.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=S.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[k]=function(){N(H,E,1)};return}if(s===w&&(h=0),(S=v.hatch)&&!S.end&&s===u.hatch&&!h){if(A[o.$._.id])return;A[o.$._.id]=1,S.push(function(){N(H,E,1)});return}A={}}if(v.pass){if(v.pass[k+o.id])return;v.pass[k+o.id]=1}if(u.on){u.ok.call(o.$,w,o.get,H,E||N);return}if(u.v2020){u.ok(H,E||N);return}Object.keys(H).forEach(function(x){S[x]=H[x]},S={}),H=S,H.put=w,u.ok.call(u.as,H,E||N)}}};var $=N;if(g===!0)return a(this,d,g,T),this;_=this;var D=_._,u=g||{},v=D.root,k;u.at=D,u.ok=d;var A={};return N.at=D,(D.any||(D.any={}))[k=String.random(7)]=N,N.off=function(){N.stun=1,D.any&&delete D.any[k]},N.rid=f,N.id=u.run||++v.once,b=v.pass,(v.pass={})[k]=1,u.out=u.out||{get:{}},D.on("out",u.out),v.pass=b,_}else{if(typeof d=="number")return this.get(""+d,g,T);if(typeof(b=l(d))=="string")return this.get(b,g,T);(b=this.get.next)&&(_=b(this,d))}return _?(g&&typeof g=="function"&&_.get(g,T),_):((_=this.chain())._.err={err:r.log("Invalid get request!",d)},g&&g.call(_,_._.err),_)};function c(d,g){var T=g._,_=T.next,b=g.chain(),m=b._;return _||(_=T.next={}),_[m.get=d]=m,g===T.root.$?m.soul=d:(T.soul||T.has)&&(m.has=d),m}function a(d,g,T,_){var b=d._,m=0,D;return(D=b.soul||b.link)?g(D,_,b):b.jam?b.jam.push([g,_]):(b.jam=[[g,_]],d.get(function(u,v){if(!(s===u.put&&!b.root.opt.super&&(D=Object.keys(b.root.opt.peers).length)&&++m<=D)){v.rid(u);var k=(k=u.$)&&k._||{},A=0,$;for(D=b.jam,delete b.jam;$=D[A++];){var O=$[0];$=$[1],O&&O(k.link||k.soul||r.valid(u.put)||((u.put||{})._||{})["#"],$,u,v)}}},{out:{get:{".":!0}}}),d)}function f(d){var g=this.at||this.on;if(!d||g.soul||g.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){g.map;var T;if((T=this.seen||(this.seen={}))[d])return!0;T[d]=!0}}var p={},l=r.valid,s})(e,"./get"),e(function(i){var r=e("./root");r.chain.put=function(_,b,m){var D=this,j=D._,u=j.root;m=m||{},m.root=j.root,m.run||(m.run=u.once),c(m,j.id),m.ack=m.ack||b,m.via=m.via||D,m.data=m.data||_,m.soul||(m.soul=j.soul||typeof b=="string"&&b);var v=m.state=m.state||r.state();return typeof _=="function"?(_(function(k){m.data=k,D.put(l,l,m)}),D):m.soul?(m.$=u.$.get(m.soul),m.todo=[{it:m.data,ref:m.$}],m.turn=m.turn||d,m.ran=m.ran||a,function k(){var A=m.todo,$=A.pop(),O=$.it;$.ref&&$.ref._.id;var N,H,E,h,o;if(c(m,$.ref),(h=$.todo)&&(H=h.pop(),O=O[H],h.length&&A.push($)),H&&(A.path||(A.path=[])).push(H),!(N=g(O))&&!(o=r.is(O))){if(!Object.plain(O)){a.err(m,"Invalid data: "+p(O)+" at "+(m.via.back(function(S){S.get&&h.push(S.get)},h=[])||h.join("."))+"."+(A.path||[]).join("."));return}for(var y=m.seen||(m.seen=[]),w=y.length;w--;)if(O===(h=y[w]).it){N=O=h.link;break}}if(H&&N)$.node=T($.node,H,v,O);else{let S=function(x,I){var L=E.link["#"];I&&(I.off(),I.rid(x));var q=L||x.soul||(h=(x.$$||x.$)._||"").soul||h.link||((h=h.put||"")._||"")["#"]||h["#"]||((h=x.put||"")&&x.$$?h["#"]:(h["="]||h[":"]||"")["#"]);if(!L&&c(m,x.$),!q&&!$.link["#"]){($.wait||($.wait=[])).push(function(){S(x,I)});return}q||(q=[],(x.$$||x.$).back(function(J){if(h=J.soul||J.link)return q.push(h);q.push(J.get)}),q=q.reverse().join("/")),E.link["#"]=q,!o&&(((m.graph||(m.graph={}))[q]=E.node||(E.node={_:{}}))._["#"]=q),delete m.wait[G],E.wait&&setTimeout.each(E.wait,function(J){J&&J()}),m.ran(m)};var C=S;if(!m.seen){a.err(m,"Data at root of graph must be a node (an object).");return}m.seen.push(E={it:O,link:{},todo:o?[]:Object.keys(O).sort().reverse(),path:(A.path||[]).slice(),up:$}),$.node=T($.node,H,v,E.link),!o&&E.todo.length&&A.push(E);var G=m.seen.length;(m.wait||(m.wait={}))[G]="",h=(E.ref=o?O:H?$.ref.get(H):$.ref)._,(h=O&&(O._||"")["#"]||h.soul||h.link)?S({soul:h}):E.ref.get(S,{run:m.run,v2020:1,out:{get:{".":" "}}})}if(!A.length)return m.ran(m);m.turn(k)}(),D):(f(m),D)};function c(_,b){if(b){b=(b._||"").id||b;var m=_.root.stun||(_.root.stun={on:r.on}),D={},j;_.stun||(_.stun=m.on("stun",function(){})),(j=m.on(""+b))&&j.the.last.next(D),!(D.run>=_.run)&&m.on(""+b,function(u){if(_.stun.end){this.off(),this.to.next(u);return}u.run=u.run||_.run,u.stun=u.stun||_.stun})}}function a(_){if(_.err){a.end(_.stun,_.root);return}if(!(_.todo.length||_.end||!Object.empty(_.wait))){_.end=1;var b=_.$.back(-1)._,m=b.root,D=b.ask(function(k){m.on("ack",k),k.err&&!k.lack&&r.log(k),++j>(_.acks||0)&&this.off(),_.ack&&_.ack(k,this)},_.opt),j=0,u=_.stun,v;(v=function(){u&&(a.end(u,m),setTimeout.each(Object.keys(u=u.add||""),function(k){(k=u[k])&&k()}))}).hatch=v,_.ack&&!_.ok&&(_.ok=_.acks||9),_.via._.on("out",{put:_.out=_.graph,ok:_.ok&&{"@":_.ok+1},opt:_.opt,"#":D,_:v})}}a.end=function(_,b){_.end=s,_.the.to===_&&_===_.the.last&&delete b.stun,_.off()},a.err=function(_,b){(_.ack||s).call(_,_.out={err:_.err=r.log(b)}),_.ran(_)};function f(_){var b=_.via._,m;_.via=_.via.back(function(D){if(D.soul||!D.get)return D.$;m=_.data,(_.data={})[D.get]=m}),(!_.via||!_.via._.soul)&&(_.via=b.root.$.get(((_.data||"")._||"")["#"]||b.$.back("opt.uuid")())),_.via.put(_.data,_.ack,_)}function p(_,b){return _&&(b=_.constructor)&&b.name||typeof _}var l,s=function(){},d=setTimeout.turn,g=r.valid,T=r.state.ify})(e,"./put"),e(function(i){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),i.exports=r})(e,"./index"),e(function(i){var r=e("./index");r.chain.on=function(f,p,l,s){var d=this,g=d._;g.root;var T;if(typeof f=="string")return p?(T=g.on(f,p,l||g,s),l&&l.$&&(l.subs||(l.subs=[])).push(T),d):g.on(f);var _=p;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,d.get(f,_),d},r.chain.once=function(f,p){if(p=p||{},!f)return c(this);var l=this,s=l._,d=s.root;s.put;var g=String.random(7),T;return l.get(function(_,b,m,D){var j=this,u=j._,v=u.one||(u.one={});if(D.stun||v[g]==="")return;if((T=r.valid(_))===!0){k();return}if(typeof T=="string")return;clearTimeout((s.one||"")[g]),clearTimeout(v[g]),v[g]=setTimeout(k,p.wait||99);function k(A){if(!u.has&&!u.soul&&(u={put:_,get:b}),a===(T=u.put)&&(T=((m.$$||"")._||"").put),typeof r.valid(T)=="string"&&(T=d.$.get(T)._.put,T===a&&!A)){v[g]=setTimeout(function(){k(1)},p.wait||99);return}D.stun||v[g]!==""&&(v[g]="",(s.soul||s.has)&&D.off(),f.call(j,T,u.get),clearTimeout(v[g]))}},{on:1}),l};function c(f,p,l){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=f.chain())._.nix=f.once(function(s,d){l._.on("in",this._)}),l._.lex=f._.lex,l}r.chain.off=function(){var f=this,p=f._,l,s=p.back;if(s)return p.ack=0,(l=s.next)&&l[p.get]&&delete l[p.get],(l=s.any)&&(delete s.any,s.any={}),(l=s.ask)&&delete l[p.get],(l=s.put)&&delete l[p.get],(l=p.soul)&&delete s.root.graph[l],(l=p.map)&&Object.keys(l).forEach(function(d,g){g=l[d],g.link&&s.root.$.get(g.link).off()}),(l=p.next)&&Object.keys(l).forEach(function(d,g){g=l[d],g.$.off()}),p.on("off",{}),f};var a})(e,"./on"),e(function(i){var r=e("./index"),c=r.chain.get.next;r.chain.get.next=function(l,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?l.get(d):((d=l.chain()._).lex=s,l.on("in",function(g){String.match(g.get||(g.put||"")["."],s["."]||s["#"]||s)&&d.on("in",g),this.to.next(g)}),d.$):(c||f)(l,s)},r.chain.map=function(l,s,d){var g=this,T=g._,_,b;return Object.plain(l)&&(_=l["."]?l:{".":l},l=p),l?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=g.chain(),g.map().on(function(m,D,j,u){var v=(l||f).call(this,m,D,j,u);if(p!==v){if(m===v)return b._.on("in",j);if(r.is(v))return b._.on("in",v._);var k={};Object.keys(j.put).forEach(function(A){k[A]=j.put[A]},k),k["="]=v,b._.on("in",{get:D,put:k})}}),b):((b=T.each)||((T.each=b=g.chain())._.lex=_||b._.lex||T.lex,b._.nix=g.back("nix"),g.on("in",a,b._)),b)};function a(l){this.to.next(l);var s=this.as,d=l.$,g=d._,T=l.put,_;!g.soul&&!l.$$||(_=s.lex)&&!String.match(l.get||(T||"")["."],_["."]||_["#"]||_)||r.on.link(l,s)}var f=function(){},p})(e,"./map"),e(function(i){var r=e("./index");r.chain.set=function(c,a,f){var p=this,l=p.back(-1),s,d;return a=a||function(){},f=f||{},f.item=f.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=r.valid(c))=="string"?p.get(s=d).put(c,a,f):r.is(c)?(p.put(function(g){c.get(function(T,_,b){if(!T)return a.call(p,{err:r.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[T]={"#":T},g(d)},!0)}),c):(Object.plain(c)&&(c=l.get(s=p.back("opt.uuid")()).put(c)),p.get(s||l.back("opt.uuid")(7)).put(c,a,f))}})(e,"./set"),e(function(i){e("./shim");var r=function(){},c=JSON.parseAsync||function(l,s,d){var g,T=+new Date;try{s(g,JSON.parse(l,d),a.sucks(+new Date-T))}catch(_){s(_)}},a=JSON.stringifyAsync||function(l,s,d,g){var T,_=+new Date;try{s(T,JSON.stringify(l,d,g),a.sucks(+new Date-_))}catch(b){s(b)}};a.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),a.sucks=r)};function f(l){var s=function(){},d=l.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var g=setTimeout.turn||setTimeout,T=l.dup,_=T.check,b=T.track,m=s.hear=function(u,v){if(u){if(d.max<=u.length)return s.say({dam:"!",err:"Message too big!"},v);s===this&&(m.d+=u.length||0,++m.c);var k=v.SH=+new Date,A=u[0],$;if(A==="["){c(u,function(O,N){if(O||!N)return s.say({dam:"!",err:"DAM JSON parse error."},v);console.STAT&&console.STAT(+new Date,N.length,"# on hear batch");var H=d.puff;(function E(){for(var h=+new Date,o=0,y;o<H&&(y=N[o++]);)s.hear(y,v);N=N.slice(o),console.STAT&&console.STAT(h,+new Date-h,"hear loop"),D(v),N.length&&g(E,0)})()}),u="";return}if(A==="{"||(u["#"]||Object.plain(u))&&($=u)){if($)return m.one($,v,k);c(u,function(O,N){if(O||!N)return s.say({dam:"!",err:"DAM JSON parse error."},v);m.one(N,v,k)});return}}};m.one=function(u,v,E){var A,$,O,N,H;if(u.DBG&&(u.DBG=H={DBG:u.DBG}),H&&(H.h=E),H&&(H.hp=+new Date),(A=u["#"])||(A=u["#"]=String.random(9)),!(O=_(A))&&($=u["##"],!($&&(O=u["@"]||u.get&&A)&&T.check(N=O+$)))){if((u._=function(){}).via=s.leap=v,(O=u["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(h){this[h]=1},u._.yo={}),O=u.dam){(O=s.hear[O])&&O(u,v,l),b(A);return}(O=u.ok)&&(u._.near=O["/"]);var E=+new Date;H&&(H.is=E),v.SI=A,b.ed=function(h){A===h&&(b.ed=0,(h=T.s[A])&&(h.via=v,u.get&&(h.it=u)))},l.on("in",s.last=u),H&&(H.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,u.get?"msg get":u.put?"msg put":"msg"),b(A),N&&b(N),s.leap=s.last=null}},m.c=m.d=0,function(){var u=0,v;s.hash=function($,O){var N,H,E,h=+new Date;a($.put,function o(y,w){var G=(H||(H=E=w||"")).slice(0,32768);if(N=String.hash(G,N),H=H.slice(32768),H){g(o,0);return}console.STAT&&console.STAT(h,+new Date-h,"say json+hash"),$._.$put=E,$["##"]=N,s.say($,O),delete $._.$put},k)};function k($,O){var N;return O instanceof Object?(Object.keys(O).sort().forEach(A,{to:N={},on:O}),N):O}function A($){this.to[$]=this.on[$]}s.say=function($,O){var N;if((N=this)&&(N=N.to)&&N.next&&N.next($),!$)return!1;var H,E,h,o=$["@"],y=$._||($._=function(){}),w=$.DBG,G=+new Date;if(y.y=y.y||G,O||w&&(w.y=G),(H=$["#"])||(H=$["#"]=String.random(9)),!v&&b(H),!(E=$["##"])&&p!==$.put&&!y.via&&o){s.hash($,O);return}if(!O&&o&&(O=(N=T.s[o])&&(N.via||(N=N.it)&&(N=N._)&&N.via)||(N=s.last)&&o===N["#"]&&s.leap),!O&&o)return T.s[o]?void 0:(console.STAT&&console.STAT(+new Date,++u,"total no peer to ack to"),!1);if(o&&!$.put&&!E&&((T.s[o]||"").it||"")["##"])return!1;if(!O&&s.way)return s.way($);if(w&&(w.yh=+new Date),!(h=y.raw)){s.raw($,O);return}if(w&&(w.yr=+new Date),!O||!O.id){if(!Object.plain(O||d.peers))return!1;var G=+new Date;d.puff;var C=d.peers,S=Object.keys(O||d.peers||{});console.STAT&&console.STAT(G,+new Date-G,"peer keys"),function L(){var q=+new Date;v=1;var J=y.raw;y.raw=h;for(var Q=0,F;Q<9&&(F=(S||"")[Q++]);)(F=C[F]||(O||"")[F])&&s.say($,F);y.raw=J,v=0,S=S.slice(Q),console.STAT&&console.STAT(q,+new Date-q,"say loop"),S.length&&(g(L,0),o&&b(o))}();return}if(!O.wire&&s.wire&&s.wire(O),H!==O.last){if(O.last=H,O===y.via||(N=y.yo)&&(N[O.url]||N[O.pid]||N[O.id]))return!1;if(console.STAT&&console.STAT(G,((w||y).yp=+new Date)-(y.y||G),"say prep"),!v&&o&&b(o),O.batch){if(O.tail=(N=O.tail||0)+h.length,O.tail<=d.pack){O.batch+=(N?",":"")+h;return}D(O)}O.batch="[";var x=+new Date;setTimeout(function(){console.STAT&&console.STAT(x,+new Date-x,"0ms TO"),D(O)},d.gap),j(h,O),console.STAT&&o===O.SI&&console.STAT(G,+new Date-O.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function($,O){if(!$)return"";var N=$._||{},H,E;if(E=N.raw)return E;if(typeof $=="string")return $;var h=$["##"],o=$["@"];if(h&&o){if(!N.via&&_(o+h))return!1;if(E=(T.s[o]||"").it){if(h===E["##"])return!1;E["##"]||(E["##"]=h)}}if(!$.dam&&!$["@"]){var y=0,w=[];E=d.peers;for(var G in E){var C=E[G];if(w.push(C.url||C.pid||C.id),++y>6)break}y>1&&($["><"]=w.join())}if($.put&&(E=$.ok)&&($.ok={"@":(E["@"]||1)-1,"/":E["/"]==$._.near?s.near:E["/"]}),H=N.$put){E={},Object.keys($).forEach(function(x){E[x]=$[x]}),E.put=":])([:",a(E,function(x,I){if(!x){var L=+new Date;E=I.indexOf('"put":":])([:"'),S(p,I=I.slice(0,E+6)+H+I.slice(E+14)),console.STAT&&console.STAT(L,+new Date-L,"say slice")}});return}a($,S);function S(x,I){x||(N.raw=I,s.say($,O))}}}();function D(u){var v=u.batch,k=typeof v=="string";if(k&&(v+="]"),u.batch=u.tail=null,!!v&&!(k?3>v.length:!v.length)){if(!k)try{v=v.length===1?v[0]:JSON.stringify(v)}catch(A){return d.log("DAM JSON stringify error",A)}v&&j(v,u)}}function j(u,v){try{var k=v.wire;v.say?v.say(u):k.send&&k.send(u),s.say.d+=u.length||0,++s.say.c}catch{(v.queue=v.queue||[]).push(u)}}return s.near=0,s.hi=function(u){var v=u.wire,k;if(!v){s.wire(u.length&&{url:u,id:u}||u);return}u.id?d.peers[u.url||u.id]=u:(k=u.id=u.id||u.url||String.random(9),s.say({dam:"?",pid:l.opt.pid},d.peers[k]=u),delete T.s[u.last]),u.met||(s.near++,u.met=+new Date,l.on("hi",u)),k=u.queue,u.queue=[],setTimeout.each(k||[],function(A){j(A,u)},0,9)},s.bye=function(u){u.met&&--s.near,delete u.met,l.on("bye",u);var v=+new Date;v=v-(u.met||v),s.bye.time=((s.bye.time||v)+v)/2},s.hear["!"]=function(u,v){d.log("Error:",u.err)},s.hear["?"]=function(u,v){u.pid&&(v.pid||(v.pid=u.pid),u["@"])||(s.say({dam:"?",pid:d.pid,"@":u["#"]},v),delete T.s[v.last])},s.hear.mob=function(u,v){if(u.peers){var k=Object.keys(u.peers),A=k[Math.random()*k.length>>0];A&&(s.bye(v),s.hi(A))}},l.on("create",function(u){u.opt.pid=u.opt.pid||String.random(9),this.to.next(u),u.on("out",s.say)}),l.on("bye",function(u,v){u=d.peers[u.id||u]||u,this.to.next(u),u.bye?u.bye():(v=u.wire)&&v.close&&v.close(),delete d.peers[u.id],u.wire=null}),l.on("bye",function(u,v){this.to.next(u),(v=console.STAT)&&(v.peers=s.near),(v=u.url)&&setTimeout(function(){},d.lack||9e3)}),l.on("hi",function(u,v){if(this.to.next(u),(v=console.STAT)&&(v.peers=s.near),!d.super){var k=Object.keys(l.next||"");k.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(k,function(A){var $=l.next[A];if(d.super||($.ask||"")[""]){s.say({get:{"#":A}},u);return}setTimeout.each(Object.keys($.ask||""),function(O){O&&s.say({"##":String.hash((l.graph[A]||"")[O]),get:{"#":A,".":O}},u)})})}}),s}var p;try{i.exports=f}catch{}})(e,"./mesh"),e(function(i){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(a){if(this.to.next(a),a.once)return;var f=a.opt;if(f.WebSocket===!1)return;var p=r.window||{},l=f.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!l)return;f.WebSocket=l;var s=f.mesh=f.mesh||r.Mesh(a);s.wire||f.wire,s.wire=f.wire=d;function d(b){try{if(!b||!b.url)return D&&D(b);var m=b.url.replace(/^http/,"ws"),D=b.wire=new f.WebSocket(m);return D.onclose=function(){T(b),f.mesh.bye(b)},D.onerror=function(j){T(b)},D.onopen=function(){f.mesh.hi(b)},D.onmessage=function(j){j&&f.mesh.hear(j.data||j,b)},D}catch{f.mesh.bye(b)}}setTimeout(function(){!f.super&&a.on("out",{dam:"hi"})},1);var g=2*999;function T(b){clearTimeout(b.defer),f.peers[b.url]&&(_&&b.retry<=0||(b.retry=(b.retry||f.retry+1||60)-(-b.tried+(b.tried=+new Date)<g*4?1:0),b.defer=setTimeout(function m(){if(_&&_.hidden)return setTimeout(m,g);d(b)},g)))}var _=""+c!=typeof document&&document});var c})(e,"./websocket"),e(function(i){if(!(typeof Gun>"u")){var r=function(){},c;try{c=(Gun.window||r).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(f,p){this[f]=p},removeItem:function(f){delete this[f]},getItem:function(f){return this[f]}});var a=JSON.stringifyAsync||function(f,p,l,s){var d;try{p(d,JSON.stringify(f,l,s))}catch(g){p(g)}};Gun.on("create",function f(p){this.to.next(p);var l=p.opt;p.graph;var s=[],d,g,T,_;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{d=f[l.prefix]=f[l.prefix]||JSON.parse(T=c.getItem(l.prefix))||{}}catch{d=f[l.prefix]={}}T=(T||"").length,p.on("get",function(m){this.to.next(m);var D=m.get,j,u,v,k;!D||!(j=D["#"])||(u=d[j]||k,u&&(v=D["."])&&!Object.plain(v)&&(u=Gun.state.ify({},v,Gun.state.is(u,v),u[v],j)),Gun.on.get.ack(m,u))}),p.on("put",function(m){this.to.next(m);var D=m.put,j=D["#"],u=D["."],v=m["#"],k=m.ok||"";if(d[j]=Gun.state.ify(d[j],u,D[">"],D[":"],j),_&&T>4999880){p.on("in",{"@":v,err:"localStorage max!"});return}!m["@"]&&(!m._.via||Math.random()<k["@"]/k["/"])&&s.push(v),!g&&(g=setTimeout(b,9+T/333))});function b(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var m=s;clearTimeout(g),g=!1,s=[],a(d,function(D,j){try{!D&&c.setItem(l.prefix,j)}catch(u){D=_=u||"localStorage failure"}D&&(Gun.log(D+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:D,get:l.prefix,put:d})),T=j.length,setTimeout.each(m,function(u){p.on("in",{"@":u,err:D,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(h){console.warn("Warning! Deprecated internal utility will break in next version:",h)},t=Gun;t.fn=t.fn||{is:function(h){return e("fn"),!!h&&typeof h=="function"}},t.bi=t.bi||{is:function(h){return e("bi"),h instanceof Boolean||typeof h=="boolean"}},t.num=t.num||{is:function(h){return e("num"),!i(h)&&(h-parseFloat(h)+1>=0||h===1/0||h===-1/0)}},t.text=t.text||{is:function(h){return e("text"),typeof h=="string"}},t.text.ify=t.text.ify||function(h){return e("text.ify"),t.text.is(h)?h:typeof JSON<"u"?JSON.stringify(h):h&&h.toString?h.toString():h},t.text.random=t.text.random||function(h,o){e("text.random");var y="";for(h=h||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";h>0;)y+=o.charAt(Math.floor(Math.random()*o.length)),h--;return y},t.text.match=t.text.match||function(h,o){var y,w;return e("text.match"),typeof h!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},y=o["="]||o["*"]||o[">"]||o["<"],h===y?!0:w!==o["="]?!1:(y=o["*"]||o[">"]||o["<"],h.slice(0,(y||"").length)===y?!0:w!==o["*"]?!1:w!==o[">"]&&w!==o["<"]?h>=o[">"]&&h<=o["<"]:w!==o[">"]&&h>=o[">"]||w!==o["<"]&&h<=o["<"]))},t.text.hash=t.text.hash||function(h,o){if(e("text.hash"),typeof h=="string"){if(o=o||0,!h.length)return o;for(var y=0,w=h.length,G;y<w;++y)G=h.charCodeAt(y),o=(o<<5)-o+G,o|=0;return o}},t.list=t.list||{is:function(h){return e("list"),h instanceof Array}},t.list.slit=t.list.slit||Array.prototype.slice,t.list.sort=t.list.sort||function(h){return e("list.sort"),function(o,y){return!o||!y?0:(o=o[h],y=y[h],o<y?-1:o>y?1:0)}},t.list.map=t.list.map||function(h,o,y){return e("list.map"),N(h,o,y)},t.list.index=1,t.obj=t.boj||{is:function(h){return e("obj"),h?h instanceof Object&&h.constructor===Object||Object.prototype.toString.call(h).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},t.obj.put=t.obj.put||function(h,o,y){return e("obj.put"),(h||{})[o]=y,h},t.obj.has=t.obj.has||function(h,o){return e("obj.has"),h&&Object.prototype.hasOwnProperty.call(h,o)},t.obj.del=t.obj.del||function(h,o){if(e("obj.del"),!!h)return h[o]=null,delete h[o],h},t.obj.as=t.obj.as||function(h,o,y,w){return e("obj.as"),h[o]=h[o]||(w===y?{}:y)},t.obj.ify=t.obj.ify||function(h){if(e("obj.ify"),v(h))return h;try{h=JSON.parse(h)}catch{h={}}return h},function(){var h;function o(y,w){A(this,w)&&h!==this[w]||(this[w]=y)}t.obj.to=t.obj.to||function(y,w){return e("obj.to"),w=w||{},N(y,o,w),w}}(),t.obj.copy=t.obj.copy||function(h){return e("obj.copy"),h&&JSON.parse(JSON.stringify(h))},function(){function h(o,y){var w=this.n,G;if(!(w&&(y===w||v(w)&&A(w,y)))&&G!==y)return!0}t.obj.empty=t.obj.empty||function(o,y){return e("obj.empty"),o?!N(o,h,{n:y}):!0}}(),function(){function h(w,G){if(arguments.length===2){h.r=h.r||{},h.r[w]=G;return}h.r=h.r||[],h.r.push(w)}var o=Object.keys,y;Object.keys=Object.keys||function(w){return y(w,function(G,C,S){S(C)})},t.obj.map=y=t.obj.map||function(w,G,C){e("obj.map");var S,x=0,I,L,q,J,Q=typeof G=="function";if(h.r=S,o&&v(w)&&(q=o(w),J=!0),C=C||{},i(w)||q)for(I=(q||w).length;x<I;x++){var F=x+t.list.index;if(Q){if(L=J?G.call(C,w[q[x]],q[x],h):G.call(C,w[x],F,h),L!==S)return L}else if(G===w[J?q[x]:x])return q?q[x]:F}else for(x in w)if(Q){if(A(w,x)&&(L=C?G.call(C,w[x],x,h):G(w[x],x,h),L!==S))return L}else if(G===w[x])return x;return Q?h.r:t.list.index?0:-1}}(),t.time=t.time||{},t.time.is=t.time.is||function(h){return e("time"),h?h instanceof Date:+new Date().getTime()};var j=t.fn.is,i=t.list.is,u=t.obj,v=u.is,A=u.has,N=u.map,r={};r.is=function(h){return e("val.is"),h===E?!1:h===null?!0:h===1/0?!1:f(h)||a(h)||_(h)?!0:r.link.is(h)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(o){if(e("val.link.is"),o&&o[c]&&!o._&&v(o)){var y={};if(N(o,h,y),y.id)return y.id}return!1};function h(o,y){var w=this;if(w.id)return w.id=!1;if(y==c&&f(o))w.id=o;else return w.id=!1}}(),r.link.ify=function(h){return e("val.link.ify"),O({},c,h)},t.obj.has._=".";var c=r.link._,E,a=t.bi.is,_=t.num.is,f=t.text.is,u=t.obj,v=u.is,O=u.put,N=u.map;t.val=t.val||r;var p={_:"_"};p.soul=function(h,o){return e("node.soul"),h&&h._&&h._[o||d]},p.soul.ify=function(h,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},h=h||{},h._=h._||{},h._[d]=o.soul||h._[d]||s(),h},p.soul._=r.link._,function(){p.is=function(o,y,w){e("node.is");var G;return v(o)&&(G=p.soul(o))?!N(o,h,{as:w,cb:y,s:G,n:o}):!1};function h(o,y){if(y!==p._){if(!r.is(o))return!0;this.cb&&this.cb.call(this.as,o,y,this.n,this.s)}}}(),function(){p.ify=function(o,y,w){return e("node.ify"),y?typeof y=="string"?y={soul:y}:typeof y=="function"&&(y={map:y}):y={},y.map&&(y.node=y.map.call(w,o,E,y.node||{})),(y.node=p.soul.ify(y.node||{},y))&&N(o,h,{o:y,as:w}),y.node};function h(o,y){var w=this.o,G,C;if(w.map){G=w.map.call(this.as,o,""+y,w.node),C===G?k(w.node,y):w.node&&(w.node[y]=G);return}r.is(o)&&(w.node[y]=o)}}();var u=t.obj,v=u.is,k=u.del,N=u.map,l=t.text,s=l.random,d=p.soul._,E;t.node=t.node||p;var g=t.state;g.lex=function(){return e("state.lex"),g().toString(36).replace(".","")},g.to=function(h,o,y){e("state.to");var w=(h||{})[o];return v(w)&&(w=H(w)),g.ify(y,o,g.is(h,o),w,p.soul(h))},function(){g.map=function(o,y,w){e("state.map");var G,C=v(C=o||y)?C:null;return o=j(o=o||y)?o:null,C&&!o?(y=_(y)?y:g(),C[m]=C[m]||{},N(C,h,{o:C,s:y}),C):(w=w||v(y)?y:G,y=_(y)?y:g(),function(S,x,I,L){if(!o)return h.call({o:I,s:y},S,x),S;o.call(w||this||{},S,x,I,L),!(A(I,x)&&G===I[x])&&h.call({o:I,s:y},S,x)})};function h(o,y){m!==y&&g.ify(this.o,y,this.s)}}();var u=t.obj;u.as;var A=u.has,v=u.is,N=u.map,H=u.copy,T=t.num,_=T.is,b=t.fn,j=b.is,m=p._,E,D={};(function(){D.is=function(y,w,G,C){return e("graph.is"),!y||!v(y)||$(y)?!1:!N(y,h,{cb:w,fn:G,as:C})};function h(y,w){if(!y||w!==p.soul(y)||!p.is(y,this.fn,this.as))return!0;this.cb&&(o.n=y,o.as=this.as,this.cb.call(o.as,y,w,o))}function o(y){y&&p.is(o.n,y,o.as)}})(),function(){D.ify=function(C,S,x){e("graph.ify");var I={path:[],obj:C};return S?typeof S=="string"?S={soul:S}:typeof S=="function"&&(S.map=S):S={},typeof x=="string"&&(S.soul=S.soul||x,x=E),S.soul&&(I.link=r.link.ify(S.soul)),S.shell=(x||{}).shell,S.graph=S.graph||{},S.seen=S.seen||[],S.as=S.as||x,h(S,I),S.root=I.node,S.graph};function h(C,S){var x;return(x=G(C,S))?x:(S.env=C,S.soul=y,p.ify(S.obj,o,S)&&(S.link=S.link||r.link.ify(p.soul(S.node)),S.obj!==C.shell&&(C.graph[r.link.is(S.link)]=S.node)),S)}function o(C,S,x){var I=this,L=I.env,q,J;if(p._===S&&A(C,r.link._))return x._;if(q=w(C,S,x,I,L)){if(S||(I.node=I.node||x||{},A(C,p._)&&p.soul(C)&&(I.node._=H(C._)),I.node=p.soul.ify(I.node,r.link.is(I.link)),I.link=I.link||r.link.ify(p.soul(I.node))),(J=L.map)&&(J.call(L.as||{},C,S,x,I),A(x,S))){if(C=x[S],E===C){k(x,S);return}if(!(q=w(C,S,x,I,L)))return}if(!S)return I.node;if(q===!0)return C;if(J=h(L,{obj:C,path:I.path.concat(S)}),!!J.node)return J.link}}function y(C){var S=this,x=r.link.is(S.link),I=S.env.graph;S.link=S.link||r.link.ify(C),S.link[r.link._]=C,S.node&&S.node[p._]&&(S.node[p._][r.link._]=C),A(I,x)&&(I[C]=I[x],k(I,x))}function w(C,S,x,I,L){var q;if(r.is(C))return!0;if(v(C))return 1;if(q=L.invalid)return C=q.call(L.as||{},C,S,x),w(C,S,x,I,L);L.err="Invalid value at '"+I.path.concat(S).join(".")+"'!",t.list.is(C)&&(L.err+=" Use `.set(item)` instead of an Array.")}function G(C,S){for(var x=C.seen,I=x.length,L;I--;)if(L=x[I],S.obj===L.obj)return L;x.push(S)}}(),D.node=function(h){e("graph.node");var o=p.soul(h);if(o)return O({},o,h)},function(){D.to=function(o,y,w){if(e("graph.to"),!!o){var G={};return w=w||{seen:{}},N(o[y],h,{obj:G,graph:o,opt:w}),G}};function h(o,y){var w,G;if(p._===y){if($(o,r.link._))return;this.obj[y]=H(o);return}if(!(w=r.link.is(o))){this.obj[y]=o;return}if(G=this.opt.seen[w]){this.obj[y]=G;return}this.obj[y]=this.opt.seen[w]=D.to(this.graph,w,this.opt)}}();var j=t.fn.is,u=t.obj,v=u.is,k=u.del,A=u.has,$=u.empty,O=u.put,N=u.map,H=u.copy,E;t.graph=t.graph||D}}()})(Qe);var vn=Qe.exports,yn=vn;const bn=pn(yn),gn=bn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),At=gn.get("cards"),ze=document.createElement("a"),Je=document.createElement("input");Je.type="file";Je.accept=".json";Je.onchange=async n=>{var t;if(!n||!n.target)return;const e=(t=n.target.files)==null?void 0:t[0];if(e){const i=await e.text();Ke(JSON.parse(i))}};const ke=Dt([]),Ke=n=>{At.put({data:JSON.stringify(n)})};At.on(n=>{ke.set(JSON.parse(n.data))});const mn=()=>{ze.href=URL.createObjectURL(new Blob([JSON.stringify(Et(ke))],{type:"application/json"})),ze.download="cards.json",ze.click()},kn=()=>{Je.click()};function st(n,e,t){const i=n.slice();return i[3]=e[t],i}function dt(n,e,t){const i=n.slice();return i[6]=e[t],i}function ht(n,e,t){const i=n.slice();return i[6]=e[t],i}function pt(n){let e,t;return e=new Ve({props:{card:n[6]}}),{c(){Z(e.$$.fragment)},m(i,r){X(e,i,r),t=!0},p(i,r){const c={};r&2&&(c.card=i[6]),e.$set(c)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function _t(n){let e,t;return e=new Ve({props:{card:n[6],back:!0}}),{c(){Z(e.$$.fragment)},m(i,r){X(e,i,r),t=!0},p(i,r){const c={};r&2&&(c.card=i[6]),e.$set(c)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function vt(n){let e,t,i,r,c,a=oe(n[3]),f=[];for(let g=0;g<a.length;g+=1)f[g]=pt(ht(n,a,g));const p=g=>U(f[g],1,1,()=>{f[g]=null});let l=oe(n[3]),s=[];for(let g=0;g<l.length;g+=1)s[g]=_t(dt(n,l,g));const d=g=>U(s[g],1,1,()=>{s[g]=null});return{c(){e=R("div");for(let g=0;g<f.length;g+=1)f[g].c();t=V(),i=R("div");for(let g=0;g<s.length;g+=1)s[g].c();r=V(),M(e,"class","page svelte-1bs53cn"),M(i,"class","page svelte-1bs53cn")},m(g,T){P(g,e,T);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);P(g,t,T),P(g,i,T);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(i,null);K(i,r),c=!0},p(g,T){if(T&2){a=oe(g[3]);let _;for(_=0;_<a.length;_+=1){const b=ht(g,a,_);f[_]?(f[_].p(b,T),W(f[_],1)):(f[_]=pt(b),f[_].c(),W(f[_],1),f[_].m(e,null))}for(pe(),_=a.length;_<f.length;_+=1)p(_);_e()}if(T&2){l=oe(g[3]);let _;for(_=0;_<l.length;_+=1){const b=dt(g,l,_);s[_]?(s[_].p(b,T),W(s[_],1)):(s[_]=_t(b),s[_].c(),W(s[_],1),s[_].m(i,r))}for(pe(),_=l.length;_<s.length;_+=1)d(_);_e()}},i(g){if(!c){for(let T=0;T<a.length;T+=1)W(f[T]);for(let T=0;T<l.length;T+=1)W(s[T]);c=!0}},o(g){f=f.filter(Boolean);for(let T=0;T<f.length;T+=1)U(f[T]);s=s.filter(Boolean);for(let T=0;T<s.length;T+=1)U(s[T]);c=!1},d(g){g&&(B(e),B(t),B(i)),Se(f,g),Se(s,g)}}}function $n(n){let e,t,i,r=oe(ct(n[1])),c=[];for(let f=0;f<r.length;f+=1)c[f]=vt(st(n,r,f));const a=f=>U(c[f],1,1,()=>{c[f]=null});return{c(){e=R("div"),t=R("section");for(let f=0;f<c.length;f+=1)c[f].c();M(t,"class","print")},m(f,p){P(f,e,p),K(e,t);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(t,null);n[2](t),i=!0},p(f,[p]){if(p&2){r=oe(ct(f[1]));let l;for(l=0;l<r.length;l+=1){const s=st(f,r,l);c[l]?(c[l].p(s,p),W(c[l],1)):(c[l]=vt(s),c[l].c(),W(c[l],1),c[l].m(t,null))}for(pe(),l=r.length;l<c.length;l+=1)a(l);_e()}},i(f){if(!i){for(let p=0;p<r.length;p+=1)W(c[p]);i=!0}},o(f){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)U(c[p]);i=!1},d(f){f&&B(e),Se(c,f),n[2](null)}}}function wn(n,e,t){let i;Be(n,ke,a=>t(1,i=a));let r;function c(a){He[a?"unshift":"push"](()=>{r=a,t(0,r)})}return[r,i,c]}class Tn extends ce{constructor(e){super(),le(this,e,wn,$n,ue,{})}}function jn(n){let e,t,i,r,c;const a=n[2].default,f=It(a,n,n[1],null);return{c(){e=R("button"),f&&f.c(),M(e,"class",t="button "+n[0]+" svelte-zqnkwt")},m(p,l){P(p,e,l),f&&f.m(e,null),i=!0,r||(c=de(e,"click",n[3]),r=!0)},p(p,[l]){f&&f.p&&(!i||l&2)&&Mt(f,a,p,p[1],i?Ft(a,p[1],l,null):Bt(p[1]),null),(!i||l&1&&t!==(t="button "+p[0]+" svelte-zqnkwt"))&&M(e,"class",t)},i(p){i||(W(f,p),i=!0)},o(p){U(f,p),i=!1},d(p){p&&B(e),f&&f.d(p),r=!1,c()}}}function Sn(n,e,t){let{$$slots:i={},$$scope:r}=e,{colour:c="green"}=e;function a(f){zt.call(this,n,f)}return n.$$set=f=>{"colour"in f&&t(0,c=f.colour),"$$scope"in f&&t(1,r=f.$$scope)},[c,r,i,a]}class se extends ce{constructor(e){super(),le(this,e,Sn,jn,ue,{colour:0})}}function On(n){let e,t,i;return t=new Me({props:{cardType:n[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),t.$on("type",n[2]),{c(){e=R("div"),Z(t.$$.fragment),M(e,"class","select-wrapper svelte-1wgwrdq"),ie(e,"background-color",n[1])},m(r,c){P(r,e,c),X(t,e,null),i=!0},p(r,[c]){const a={};c&1&&(a.cardType=r[0]),t.$set(a),(!i||c&2)&&ie(e,"background-color",r[1])},i(r){i||(W(t.$$.fragment,r),i=!0)},o(r){U(t.$$.fragment,r),i=!1},d(r){r&&B(e),Y(t)}}}function Dn(n,e,t){let i,{currentFilter:r="None"}=e;const c=({detail:a})=>t(0,r=a);return n.$$set=a=>{"currentFilter"in a&&t(0,r=a.currentFilter)},n.$$.update=()=>{n.$$.dirty&1&&t(1,i=Oe(r))},[r,i,c]}class Nt extends ce{constructor(e){super(),le(this,e,Dn,On,ue,{currentFilter:0})}}function yt(n,e,t){const i=n.slice();return i[7]=e[t],i}function An(n){let e;return{c(){e=ee("home")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function bt(n){let e,t=n[7].cardType.passive?"passive":"",i,r,c=n[7].cardType.type+"",a,f,p,l,s;return p=new Ue({props:{card:n[7],editable:!1}}),{c(){e=R("div"),i=ee(t),r=V(),a=ee(c),f=V(),Z(p.$$.fragment),l=V()},m(d,g){P(d,e,g),K(e,i),K(e,r),K(e,a),K(e,f),X(p,e,null),K(e,l),s=!0},p(d,g){(!s||g&4)&&t!==(t=d[7].cardType.passive?"passive":"")&&me(i,t),(!s||g&4)&&c!==(c=d[7].cardType.type+"")&&me(a,c);const T={};g&4&&(T.card=d[7]),p.$set(T)},i(d){s||(W(p.$$.fragment,d),s=!0)},o(d){U(p.$$.fragment,d),s=!1},d(d){d&&B(e),Y(p)}}}function Nn(n){let e,t,i,r,c,a,f,p,l=n[2].length+"",s,d,g,T,_=n[1]?"stop sorting passive":"sort passive",b,m,D,j,u,v,k,A;t=new se({props:{$$slots:{default:[An]},$$scope:{ctx:n}}}),t.$on("click",n[4]);function $(h){n[5](h)}let O={};n[0]!==void 0&&(O.currentFilter=n[0]),r=new Nt({props:O}),He.push(()=>Ot(r,"currentFilter",$));let N=oe(n[2]),H=[];for(let h=0;h<N.length;h+=1)H[h]=bt(yt(n,N,h));const E=h=>U(H[h],1,1,()=>{H[h]=null});return{c(){e=R("header"),Z(t.$$.fragment),i=V(),Z(r.$$.fragment),a=V(),f=ee(n[0]),p=ee(": "),s=ee(l),d=V(),g=R("section"),T=R("label"),b=ee(_),m=V(),D=R("input"),j=V(),u=R("section");for(let h=0;h<H.length;h+=1)H[h].c();M(e,"class","svelte-hn041v"),M(T,"for","passive"),M(D,"type","checkbox"),M(D,"name","passive"),M(D,"id","passive"),M(D,"class","svelte-hn041v"),M(u,"class","container svelte-hn041v")},m(h,o){P(h,e,o),X(t,e,null),K(e,i),X(r,e,null),P(h,a,o),P(h,f,o),P(h,p,o),P(h,s,o),P(h,d,o),P(h,g,o),K(g,T),K(T,b),K(g,m),K(g,D),D.checked=n[1],P(h,j,o),P(h,u,o);for(let y=0;y<H.length;y+=1)H[y]&&H[y].m(u,null);v=!0,k||(A=de(D,"change",n[6]),k=!0)},p(h,[o]){const y={};o&1024&&(y.$$scope={dirty:o,ctx:h}),t.$set(y);const w={};if(!c&&o&1&&(c=!0,w.currentFilter=h[0],jt(()=>c=!1)),r.$set(w),(!v||o&1)&&me(f,h[0]),(!v||o&4)&&l!==(l=h[2].length+"")&&me(s,l),(!v||o&2)&&_!==(_=h[1]?"stop sorting passive":"sort passive")&&me(b,_),o&2&&(D.checked=h[1]),o&4){N=oe(h[2]);let G;for(G=0;G<N.length;G+=1){const C=yt(h,N,G);H[G]?(H[G].p(C,o),W(H[G],1)):(H[G]=bt(C),H[G].c(),W(H[G],1),H[G].m(u,null))}for(pe(),G=N.length;G<H.length;G+=1)E(G);_e()}},i(h){if(!v){W(t.$$.fragment,h),W(r.$$.fragment,h);for(let o=0;o<N.length;o+=1)W(H[o]);v=!0}},o(h){U(t.$$.fragment,h),U(r.$$.fragment,h),H=H.filter(Boolean);for(let o=0;o<H.length;o+=1)U(H[o]);v=!1},d(h){h&&(B(e),B(a),B(f),B(p),B(s),B(d),B(g),B(j),B(u)),Y(t),Y(r),Se(H,h),k=!1,A()}}}function Gn(n,e,t){let i,r;Be(n,ke,s=>t(3,r=s));let c="None",a=!1;const f=()=>{Fe.set("")};function p(s){c=s,t(0,c)}function l(){a=this.checked,t(1,a)}return n.$$.update=()=>{n.$$.dirty&11&&t(2,i=r.map(s=>{const d=[s.cardHalf1];return s.cardHalf2&&d.push(s.cardHalf2),d}).flat().filter(s=>{if(c==="None"||s.cardType.type===c)return s}).sort((s,d)=>a?-Number(s.cardType.passive)-Number(d.cardType.passive):0))},[c,a,i,r,f,p,l]}class Cn extends ce{constructor(e){super(),le(this,e,Gn,Nn,ue,{})}}function gt(n,e,t){const i=n.slice();return i[17]=e[t],i}function Hn(n){let e;return{c(){e=ee("add two sided")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function xn(n){let e;return{c(){e=ee("add one sided")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function En(n){let e;return{c(){e=ee("save")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function In(n){let e;return{c(){e=ee("import JSON")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function Fn(n){let e;return{c(){e=ee("export JSON")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function Mn(n){let e;return{c(){e=ee("Download")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function Bn(n){let e;return{c(){e=ee("view halves")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function Pn(n){let e;return{c(){e=ee("remove")},m(t,i){P(t,e,i)},d(t){t&&B(e)}}}function mt(n){let e,t,i,r,c,a;t=new Ve({props:{card:n[17],readable:!0}});function f(){return n[13](n[17])}return r=new se({props:{colour:"red",$$slots:{default:[Pn]},$$scope:{ctx:n}}}),r.$on("click",f),{c(){e=R("div"),Z(t.$$.fragment),i=V(),Z(r.$$.fragment),c=V(),M(e,"class","wrapper svelte-m1wwdp")},m(p,l){P(p,e,l),X(t,e,null),K(e,i),X(r,e,null),K(e,c),a=!0},p(p,l){n=p;const s={};l&16&&(s.card=n[17]),t.$set(s);const d={};l&1048576&&(d.$$scope={dirty:l,ctx:n}),r.$set(d)},i(p){a||(W(t.$$.fragment,p),W(r.$$.fragment,p),a=!0)},o(p){U(t.$$.fragment,p),U(r.$$.fragment,p),a=!1},d(p){p&&B(e),Y(t),Y(r)}}}function Jn(n){let e,t,i,r,c,a,f,p,l,s,d,g,T,_,b,m,D,j,u,v,k=n[4].length+"",A,$,O,N,H,E,h,o,y,w,G,C,S,x;function I(F){n[5](F)}let L={};n[0]!==void 0&&(L.currentFilter=n[0]),t=new Nt({props:L}),He.push(()=>Ot(t,"currentFilter",I)),c=new se({props:{colour:"blue",$$slots:{default:[Hn]},$$scope:{ctx:n}}}),c.$on("click",n[6]),f=new se({props:{colour:"blue",$$slots:{default:[xn]},$$scope:{ctx:n}}}),f.$on("click",n[7]),l=new se({props:{$$slots:{default:[En]},$$scope:{ctx:n}}}),l.$on("click",n[8]),d=new se({props:{$$slots:{default:[In]},$$scope:{ctx:n}}}),d.$on("click",kn),T=new se({props:{$$slots:{default:[Fn]},$$scope:{ctx:n}}}),T.$on("click",mn),b=new se({props:{$$slots:{default:[Mn]},$$scope:{ctx:n}}}),b.$on("click",n[9]),D=new se({props:{$$slots:{default:[Bn]},$$scope:{ctx:n}}}),D.$on("click",n[10]);let q=oe(n[4]),J=[];for(let F=0;F<q.length;F+=1)J[F]=mt(gt(n,q,F));const Q=F=>U(J[F],1,1,()=>{J[F]=null});return{c(){e=R("section"),Z(t.$$.fragment),r=V(),Z(c.$$.fragment),a=V(),Z(f.$$.fragment),p=V(),Z(l.$$.fragment),s=V(),Z(d.$$.fragment),g=V(),Z(T.$$.fragment),_=V(),Z(b.$$.fragment),m=V(),Z(D.$$.fragment),j=V(),u=R("h1"),v=ee("cards "),A=ee(k),$=V(),O=R("div"),N=ee("search filter: "),H=R("input"),E=V(),h=R("label"),h.textContent="filter passive:",o=V(),y=R("input"),w=V(),G=R("section");for(let F=0;F<J.length;F+=1)J[F].c();M(e,"class","button-container svelte-m1wwdp"),M(H,"type","text"),M(h,"for","filter-passive"),M(y,"type","checkbox"),M(y,"name","filter-passive"),M(y,"id","filter-passive"),M(O,"class","filter svelte-m1wwdp"),M(G,"class","container svelte-m1wwdp")},m(F,z){P(F,e,z),X(t,e,null),K(e,r),X(c,e,null),K(e,a),X(f,e,null),K(e,p),X(l,e,null),K(e,s),X(d,e,null),K(e,g),X(T,e,null),K(e,_),X(b,e,null),K(e,m),X(D,e,null),P(F,j,z),P(F,u,z),K(u,v),K(u,A),P(F,$,z),P(F,O,z),K(O,N),K(O,H),tt(H,n[1]),K(O,E),K(O,h),K(O,o),K(O,y),y.checked=n[2],P(F,w,z),P(F,G,z);for(let ne=0;ne<J.length;ne+=1)J[ne]&&J[ne].m(G,null);C=!0,S||(x=[de(H,"input",n[11]),de(y,"change",n[12])],S=!0)},p(F,[z]){const ne={};!i&&z&1&&(i=!0,ne.currentFilter=F[0],jt(()=>i=!1)),t.$set(ne);const fe={};z&1048576&&(fe.$$scope={dirty:z,ctx:F}),c.$set(fe);const ye={};z&1048576&&(ye.$$scope={dirty:z,ctx:F}),f.$set(ye);const Ae={};z&1048576&&(Ae.$$scope={dirty:z,ctx:F}),l.$set(Ae);const ae={};z&1048576&&(ae.$$scope={dirty:z,ctx:F}),d.$set(ae);const be={};z&1048576&&(be.$$scope={dirty:z,ctx:F}),T.$set(be);const Ne={};z&1048576&&(Ne.$$scope={dirty:z,ctx:F}),b.$set(Ne);const Xe={};if(z&1048576&&(Xe.$$scope={dirty:z,ctx:F}),D.$set(Xe),(!C||z&16)&&k!==(k=F[4].length+"")&&me(A,k),z&2&&H.value!==F[1]&&tt(H,F[1]),z&4&&(y.checked=F[2]),z&24){q=oe(F[4]);let te;for(te=0;te<q.length;te+=1){const Ye=gt(F,q,te);J[te]?(J[te].p(Ye,z),W(J[te],1)):(J[te]=mt(Ye),J[te].c(),W(J[te],1),J[te].m(G,null))}for(pe(),te=q.length;te<J.length;te+=1)Q(te);_e()}},i(F){if(!C){W(t.$$.fragment,F),W(c.$$.fragment,F),W(f.$$.fragment,F),W(l.$$.fragment,F),W(d.$$.fragment,F),W(T.$$.fragment,F),W(b.$$.fragment,F),W(D.$$.fragment,F);for(let z=0;z<q.length;z+=1)W(J[z]);C=!0}},o(F){U(t.$$.fragment,F),U(c.$$.fragment,F),U(f.$$.fragment,F),U(l.$$.fragment,F),U(d.$$.fragment,F),U(T.$$.fragment,F),U(b.$$.fragment,F),U(D.$$.fragment,F),J=J.filter(Boolean);for(let z=0;z<J.length;z+=1)U(J[z]);C=!1},d(F){F&&(B(e),B(j),B(u),B($),B(O),B(w),B(G)),Y(t),Y(c),Y(f),Y(l),Y(d),Y(T),Y(b),Y(D),Se(J,F),S=!1,De(x)}}}function qn(n,e,t){let i,r;Be(n,ke,v=>t(3,r=v));let c="None",a="",f=!1;const p=(v,k)=>(k=k.toLocaleLowerCase(),!k||v.cardHalf1.text.toLocaleLowerCase().includes(k)||v.cardHalf2&&v.cardHalf2.text.toLocaleLowerCase().includes(k)),l=(v,k)=>(console.log("filtering passive: ",k),!k||v.cardHalf1.cardType.passive||v.cardHalf2&&v.cardHalf2.cardType.passive),s=(v,k,A,$)=>v.filter(O=>(O.cardHalf1.cardType.type===k||k==="None"||O.cardHalf2&&O.cardHalf2.cardType.type===k)&&p(O,A)&&l(O,$));function d(v){c=v,t(0,c)}const g=()=>{ke.set([...r,rt(2)])},T=()=>{ke.set([...r,rt(1)]),console.log(r.length)},_=()=>{Ke(r)},b=()=>{Fe.set("download")},m=()=>{Fe.set("half")};function D(){a=this.value,t(1,a)}function j(){f=this.checked,t(2,f)}const u=v=>{Ke(r.filter(k=>k.id!==v.id))};return n.$$.update=()=>{n.$$.dirty&15&&t(4,i=s(r,c,a,f)),n.$$.dirty&4&&console.log(f)},[c,a,f,r,i,d,g,T,_,b,m,D,j,u]}class Ln extends ce{constructor(e){super(),le(this,e,qn,Jn,ue,{})}}function zn(n){let e,t,i;var r=n[0];function c(a,f){return{}}return r&&(e=nt(r,c())),{c(){e&&Z(e.$$.fragment),t=Pe()},m(a,f){e&&X(e,a,f),P(a,t,f),i=!0},p(a,[f]){if(f&1&&r!==(r=a[0])){if(e){pe();const p=e;U(p.$$.fragment,1,0,()=>{Y(p,1)}),_e()}r?(e=nt(r,c()),Z(e.$$.fragment),W(e.$$.fragment,1),X(e,t.parentNode,t)):e=null}},i(a){i||(e&&W(e.$$.fragment,a),i=!0)},o(a){e&&U(e.$$.fragment,a),i=!1},d(a){a&&B(t),e&&Y(e,a)}}}function Wn(n,e,t){let i,r;Be(n,Fe,a=>t(1,r=a));const c={"":Ln,download:Tn,half:Cn};return n.$$.update=()=>{n.$$.dirty&2&&t(0,i=c[r])},[i,r]}class Rn extends ce{constructor(e){super(),le(this,e,Wn,zn,ue,{})}}new Rn({target:document.getElementById("app")});
