var Oe=Object.defineProperty;var De=(r,t,e)=>t in r?Oe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Bt=(r,t,e)=>De(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function et(){}function Ae(r,t){for(const e in t)r[e]=t[e];return r}function ye(r){return r()}function Qt(){return Object.create(null)}function Dt(r){r.forEach(ye)}function be(r){return typeof r=="function"}function it(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}let xt;function at(r,t){return r===t?!0:(xt||(xt=document.createElement("a")),xt.href=t,r===xt.href)}function Ne(r){return Object.keys(r).length===0}function ge(r,...t){if(r==null){for(const i of t)i(void 0);return et}const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function xe(r){let t;return ge(r,e=>t=e)(),t}function It(r,t,e){r.$$.on_destroy.push(ge(t,e))}function Ge(r,t,e,i){if(r){const n=me(r,t,e,i);return r[0](n)}}function me(r,t,e,i){return r[1]&&i?Ae(e.ctx.slice(),r[1](i(t))):e.ctx}function Ce(r,t,e,i){if(r[2]&&i){const n=r[2](i(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const c=[],a=Math.max(t.dirty.length,n.length);for(let f=0;f<a;f+=1)c[f]=t.dirty[f]|n[f];return c}return t.dirty|n}return t.dirty}function Ee(r,t,e,i,n,c){if(n){const a=me(t,e,i,c);r.p(a,n)}}function Fe(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function Xt(r){return r??""}function L(r,t){r.appendChild(t)}function B(r,t,e){r.insertBefore(t,e||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function kt(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function R(r){return document.createElement(r)}function Z(r){return document.createTextNode(r)}function K(){return Z(" ")}function Ht(){return Z("")}function vt(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function H(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Ie(r){return Array.from(r.childNodes)}function Ct(r,t){t=""+t,r.data!==t&&(r.data=t)}function nt(r,t,e,i){e==null?r.style.removeProperty(t):r.style.setProperty(t,e,"")}function He(r,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:i})}function Yt(r,t){return new r(t)}let jt;function Tt(r){jt=r}function Me(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Be(){const r=Me();return(t,e,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[t];if(n){const c=He(t,e,{cancelable:i});return n.slice().forEach(a=>{a.call(r,c)}),!c.defaultPrevented}return!0}}function Pe(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const gt=[],St=[];let mt=[];const qt=[],Je=Promise.resolve();let zt=!1;function qe(){zt||(zt=!0,Je.then($e))}function Ot(r){mt.push(r)}function ke(r){qt.push(r)}const Pt=new Set;let yt=0;function $e(){if(yt!==0)return;const r=jt;do{try{for(;yt<gt.length;){const t=gt[yt];yt++,Tt(t),ze(t.$$)}}catch(t){throw gt.length=0,yt=0,t}for(Tt(null),gt.length=0,yt=0;St.length;)St.pop()();for(let t=0;t<mt.length;t+=1){const e=mt[t];Pt.has(e)||(Pt.add(e),e())}mt.length=0}while(gt.length);for(;qt.length;)qt.pop()();zt=!1,Pt.clear(),Tt(r)}function ze(r){if(r.fragment!==null){r.update(),Dt(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Ot)}}function We(r){const t=[],e=[];mt.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),mt=t}const Gt=new Set;let pt;function lt(){pt={r:0,c:[],p:pt}}function ct(){pt.r||Dt(pt.c),pt=pt.p}function J(r,t){r&&r.i&&(Gt.delete(r),r.i(t))}function z(r,t,e,i){if(r&&r.o){if(Gt.has(r))return;Gt.add(r),pt.c.push(()=>{Gt.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}function rt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function we(r,t,e){const i=r.$$.props[t];i!==void 0&&(r.$$.bound[i]=e,e(r.$$.ctx[i]))}function Y(r){r&&r.c()}function Q(r,t,e){const{fragment:i,after_update:n}=r.$$;i&&i.m(t,e),Ot(()=>{const c=r.$$.on_mount.map(ye).filter(be);r.$$.on_destroy?r.$$.on_destroy.push(...c):Dt(c),r.$$.on_mount=[]}),n.forEach(Ot)}function X(r,t){const e=r.$$;e.fragment!==null&&(We(e.after_update),Dt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Re(r,t){r.$$.dirty[0]===-1&&(gt.push(r),qe(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function ot(r,t,e,i,n,c,a=null,f=[-1]){const h=jt;Tt(r);const l=r.$$={fragment:null,ctx:[],props:c,update:et,not_equal:n,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Qt(),dirty:f,skip_bound:!1,root:t.target||h.$$.root};a&&a(l.root);let s=!1;if(l.ctx=e?e(r,t.props||{},(d,g,...T)=>{const p=T.length?T[0]:g;return l.ctx&&n(l.ctx[d],l.ctx[d]=p)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](p),s&&Re(r,d)),g}):[],l.update(),s=!0,Dt(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const d=Ie(t.target);l.fragment&&l.fragment.l(d),d.forEach(M)}else l.fragment&&l.fragment.c();t.intro&&J(r.$$.fragment),Q(r,t.target,t.anchor),$e()}Tt(h)}class ut{constructor(){Bt(this,"$$");Bt(this,"$$set")}$destroy(){X(this,1),this.$destroy=et}$on(t,e){if(!be(e))return et;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ue);const bt=[];function Te(r,t=et){let e;const i=new Set;function n(f){if(it(r,f)&&(r=f,e)){const h=!bt.length;for(const l of i)l[1](),bt.push(l,r);if(h){for(let l=0;l<bt.length;l+=2)bt[l][0](bt[l+1]);bt.length=0}}}function c(f){n(f(r))}function a(f,h=et){const l=[f,h];return i.add(l),i.size===1&&(e=t(n,c)||et),f(r),()=>{i.delete(l),i.size===0&&e&&(e(),e=null)}}return{set:n,update:c,subscribe:a}}const Et=Te(""),$t=r=>{switch(r){case"Curse":return"#DC77FF";case"Deck":return"#8995D5";case"Movement":return"#FDFF84";case"Change":return"#FFA944";case"Mystery":return"#F35555";case"Board":return"#88F355";case"Starter":return"#AFE2EA";default:return"#FFFFFF"}},st=r=>window.location.href.includes("localhost")?`${window.location.href}/${r}.svg`:`${r}.svg`,Zt=r=>{const t=Math.random().toString(36);return r===1?{id:t,cardHalf1:{cardType:{passive:!1,type:"Mystery"},text:"placeholder"},cardHalf2:void 0}:{id:t,cardHalf1:{cardType:{passive:!0,type:"Deck"},text:"placeholder"},cardHalf2:{cardType:{passive:!1,type:"Movement"},text:"placeholder"}}};function Le(r){let t,e=r[0].text+"",i;return{c(){t=R("div"),i=Z(e),H(t,"class","cardText svelte-13kvtzw")},m(n,c){B(n,t,c),L(t,i)},p(n,c){c&1&&e!==(e=n[0].text+"")&&Ct(i,e)},d(n){n&&M(t)}}}function Ke(r){let t,e,i;return{c(){t=R("div"),H(t,"contenteditable","true"),H(t,"class","cardText svelte-13kvtzw"),r[0].text===void 0&&Ot(()=>r[5].call(t))},m(n,c){B(n,t,c),r[0].text!==void 0&&(t.innerText=r[0].text),e||(i=vt(t,"input",r[5]),e=!0)},p(n,c){c&1&&n[0].text!==t.innerText&&(t.innerText=n[0].text)},d(n){n&&M(t),e=!1,i()}}}function Ve(r){let t,e,i,n,c=r[0].cardType.passive&&te();return{c(){t=R("img"),i=K(),c&&c.c(),n=Ht(),at(t.src,e=st(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-13kvtzw")},m(a,f){B(a,t,f),B(a,i,f),c&&c.m(a,f),B(a,n,f)},p(a,f){f&1&&!at(t.src,e=st(a[0].cardType.type))&&H(t,"src",e),a[0].cardType.passive?c||(c=te(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(a){a&&(M(t),M(i),M(n)),c&&c.d(a)}}}function te(r){let t;return{c(){t=R("p"),t.textContent="Passive",H(t,"class","mirrored svelte-13kvtzw")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Qe(r){let t,e;function i(a,f){return a[2]?Ve:a[3]?Ke:Le}let n=i(r),c=n(r);return{c(){t=R("div"),e=R("div"),c.c(),H(e,"class","card svelte-13kvtzw"),nt(e,"--colour",r[4]),H(t,"class","wrapper svelte-13kvtzw"),nt(t,"--rotation",r[1]+"deg")},m(a,f){B(a,t,f),L(t,e),c.m(e,null)},p(a,[f]){n===(n=i(a))&&c?c.p(a,f):(c.d(1),c=n(a),c&&(c.c(),c.m(e,null))),f&16&&nt(e,"--colour",a[4]),f&2&&nt(t,"--rotation",a[1]+"deg")},i:et,o:et,d(a){a&&M(t),c.d()}}}function Xe(r,t,e){let i,{card:n}=t,{rotation:c=0}=t,{back:a=!1}=t,{editable:f=!0}=t;function h(){n.text=this.innerText,e(0,n)}return r.$$set=l=>{"card"in l&&e(0,n=l.card),"rotation"in l&&e(1,c=l.rotation),"back"in l&&e(2,a=l.back),"editable"in l&&e(3,f=l.editable)},r.$$.update=()=>{r.$$.dirty&1&&e(4,i=$t(n.cardType.type))},[n,c,a,f,i,h]}class Wt extends ut{constructor(t){super(),ot(this,t,Xe,Qe,it,{card:0,rotation:1,back:2,editable:3})}}function ee(r,t,e){const i=r.slice();return i[12]=t[e],i}function ne(r){let t,e,i,n,c,a,f,h,l=r[5]&&re(r),s=!r[3]&&oe(r);return{c(){t=R("div"),e=R("img"),n=K(),l&&l.c(),c=K(),s&&s.c(),a=Ht(),at(e.src,i=st(r[0]))||H(e,"src",i),H(e,"alt","My Icon"),H(e,"class","cardIcon svelte-lm5vvd"),H(t,"class","select svelte-lm5vvd")},m(d,g){B(d,t,g),L(t,e),L(t,n),l&&l.m(t,null),B(d,c,g),s&&s.m(d,g),B(d,a,g),f||(h=vt(e,"click",r[8]),f=!0)},p(d,g){g&1&&!at(e.src,i=st(d[0]))&&H(e,"src",i),d[5]?l?l.p(d,g):(l=re(d),l.c(),l.m(t,null)):l&&(l.d(1),l=null),d[3]?s&&(s.d(1),s=null):s?s.p(d,g):(s=oe(d),s.c(),s.m(a.parentNode,a))},d(d){d&&(M(t),M(c),M(a)),l&&l.d(),s&&s.d(d),f=!1,h()}}}function re(r){let t,e=rt(r[4]),i=[];for(let n=0;n<e.length;n+=1)i[n]=ie(ee(r,e,n));return{c(){t=R("div");for(let n=0;n<i.length;n+=1)i[n].c();H(t,"class","options svelte-lm5vvd"),nt(t,"--colour",r[6])},m(n,c){B(n,t,c);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(n,c){if(c&49){e=rt(n[4]);let a;for(a=0;a<e.length;a+=1){const f=ee(n,e,a);i[a]?i[a].p(f,c):(i[a]=ie(f),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=e.length}c&64&&nt(t,"--colour",n[6])},d(n){n&&M(t),kt(i,n)}}}function ie(r){let t,e,i,n,c;function a(){return r[9](r[12])}return{c(){t=R("img"),at(t.src,e=st(r[12]))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class",i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")},m(f,h){B(f,t,h),n||(c=vt(t,"click",a),n=!0)},p(f,h){r=f,h&16&&!at(t.src,e=st(r[12]))&&H(t,"src",e),h&17&&i!==(i="cardIcon "+(r[0]===r[12]?"hidden":"")+" svelte-lm5vvd")&&H(t,"class",i)},d(f){f&&M(t),n=!1,c()}}}function oe(r){let t,e,i,n,c,a,f;return{c(){t=R("input"),e=K(),i=R("label"),n=Z("Passive"),H(t,"type","checkbox"),H(t,"id",r[7]),H(t,"class","hidden"),H(i,"for",r[7]),H(i,"class",c="passive no-select "+(r[1]?"":"invisible")+" svelte-lm5vvd")},m(h,l){B(h,t,l),t.checked=r[1],B(h,e,l),B(h,i,l),L(i,n),a||(f=vt(t,"change",r[10]),a=!0)},p(h,l){l&2&&(t.checked=h[1]),l&2&&c!==(c="passive no-select "+(h[1]?"":"invisible")+" svelte-lm5vvd")&&H(i,"class",c)},d(h){h&&(M(t),M(e),M(i)),a=!1,f()}}}function Ye(r){let t,e=!r[2]&&ne(r);return{c(){e&&e.c(),t=Ht()},m(i,n){e&&e.m(i,n),B(i,t,n)},p(i,[n]){i[2]?e&&(e.d(1),e=null):e?e.p(i,n):(e=ne(i),e.c(),e.m(t.parentNode,t))},i:et,o:et,d(i){i&&M(t),e&&e.d(i)}}}function Ze(r,t,e){let i,{cardType:n}=t,{passive:c=!1}=t,{back:a=!1}=t,{noPassive:f=!1}=t;const h=Math.random().toString(36).substring(7),l=Be();let s=!1,{names:d=["Board","Change","Deck","Movement","Mystery","Curse","Starter"]}=t;const g=()=>e(5,s=!s),T=b=>{e(0,n=b),e(5,s=!1)};function p(){c=this.checked,e(1,c)}return r.$$set=b=>{"cardType"in b&&e(0,n=b.cardType),"passive"in b&&e(1,c=b.passive),"back"in b&&e(2,a=b.back),"noPassive"in b&&e(3,f=b.noPassive),"names"in b&&e(4,d=b.names)},r.$$.update=()=>{r.$$.dirty&1&&e(6,i=$t(n)),r.$$.dirty&1&&l("type",n),r.$$.dirty&2&&l("passive",c)},[n,c,a,f,d,s,i,h,g,T,p]}class Ft extends ut{constructor(t){super(),ot(this,t,Ze,Ye,it,{cardType:0,passive:1,back:2,noPassive:3,names:4})}}function tn(r){let t,e;return{c(){t=R("img"),at(t.src,e=st(r[0].cardType.type))||H(t,"src",e),H(t,"alt","My Icon"),H(t,"class","cardIcon svelte-15hk4fg")},m(i,n){B(i,t,n)},p(i,n){n&1&&!at(t.src,e=st(i[0].cardType.type))&&H(t,"src",e)},i:et,o:et,d(i){i&&M(t)}}}function en(r){let t,e,i,n,c,a,f;return e=new Ft({props:{cardType:r[0].cardType.type,passive:r[0].cardType.passive,names:["Mystery","Curse","Starter"]}}),e.$on("type",r[2]),{c(){t=R("p"),Y(e.$$.fragment),i=K(),n=R("div"),H(t,"class","svelte-15hk4fg"),H(n,"contenteditable","true"),H(n,"class","cardText svelte-15hk4fg"),r[0].text===void 0&&Ot(()=>r[3].call(n))},m(h,l){B(h,t,l),Q(e,t,null),B(h,i,l),B(h,n,l),r[0].text!==void 0&&(n.innerText=r[0].text),c=!0,a||(f=vt(n,"input",r[3]),a=!0)},p(h,l){const s={};l&1&&(s.cardType=h[0].cardType.type),l&1&&(s.passive=h[0].cardType.passive),e.$set(s),l&1&&h[0].text!==n.innerText&&(n.innerText=h[0].text)},i(h){c||(J(e.$$.fragment,h),c=!0)},o(h){z(e.$$.fragment,h),c=!1},d(h){h&&(M(t),M(i),M(n)),X(e),a=!1,f()}}}function nn(r){let t,e,i,n;const c=[en,tn],a=[];function f(h,l){return h[1]?1:0}return e=f(r),i=a[e]=c[e](r),{c(){t=R("div"),i.c(),H(t,"class","card svelte-15hk4fg"),nt(t,"--colour",$t(r[0].cardType.type))},m(h,l){B(h,t,l),a[e].m(t,null),n=!0},p(h,[l]){let s=e;e=f(h),e===s?a[e].p(h,l):(lt(),z(a[s],1,1,()=>{a[s]=null}),ct(),i=a[e],i?i.p(h,l):(i=a[e]=c[e](h),i.c()),J(i,1),i.m(t,null)),(!n||l&1)&&nt(t,"--colour",$t(h[0].cardType.type))},i(h){n||(J(i),n=!0)},o(h){z(i),n=!1},d(h){h&&M(t),a[e].d()}}}function rn(r,t,e){let{card:i}=t,{back:n=!1}=t;const c=({detail:f})=>e(0,i.cardType.type=f,i);function a(){i.text=this.innerText,e(0,i)}return r.$$set=f=>{"card"in f&&e(0,i=f.card),"back"in f&&e(1,n=f.back)},[i,n,c,a]}class on extends ut{constructor(t){super(),ot(this,t,rn,nn,it,{card:0,back:1})}}function un(r){let t,e;return t=new on({props:{card:r[0].cardHalf1,back:r[1]}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&1&&(c.card=i[0].cardHalf1),n&2&&(c.back=i[1]),t.$set(c)},i(i){e||(J(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function fn(r){let t,e,i,n,c,a,f,h,l,s,d,g,T,p;return i=new Ft({props:{cardType:r[0].cardHalf1.cardType.type,passive:r[0].cardHalf1.cardType.passive,back:r[1]}}),i.$on("type",r[4]),i.$on("passive",r[5]),c=new Wt({props:{card:r[0].cardHalf1,back:r[1]}}),h=new Wt({props:{card:r[0].cardHalf2,rotation:r[2]?0:180,back:r[1]}}),d=new Ft({props:{cardType:r[0].cardHalf2.cardType.type,passive:r[0].cardHalf2.cardType.passive,back:r[1]}}),d.$on("type",r[6]),d.$on("passive",r[7]),{c(){t=R("div"),e=R("p"),Y(i.$$.fragment),n=K(),Y(c.$$.fragment),a=K(),f=R("div"),Y(h.$$.fragment),l=K(),s=R("p"),Y(d.$$.fragment),g=K(),T=R("div"),H(e,"class","first svelte-1ubeuca"),H(t,"class","first-half half"),H(s,"class","second svelte-1ubeuca"),H(f,"class","second-half half svelte-1ubeuca"),H(T,"class","fill svelte-1ubeuca")},m(b,$){B(b,t,$),L(t,e),Q(i,e,null),L(t,n),Q(c,t,null),B(b,a,$),B(b,f,$),Q(h,f,null),L(f,l),L(f,s),Q(d,s,null),B(b,g,$),B(b,T,$),p=!0},p(b,$){const x={};$&1&&(x.cardType=b[0].cardHalf1.cardType.type),$&1&&(x.passive=b[0].cardHalf1.cardType.passive),$&2&&(x.back=b[1]),i.$set(x);const j={};$&1&&(j.card=b[0].cardHalf1),$&2&&(j.back=b[1]),c.$set(j);const o={};$&1&&(o.card=b[0].cardHalf2),$&4&&(o.rotation=b[2]?0:180),$&2&&(o.back=b[1]),h.$set(o);const y={};$&1&&(y.cardType=b[0].cardHalf2.cardType.type),$&1&&(y.passive=b[0].cardHalf2.cardType.passive),$&2&&(y.back=b[1]),d.$set(y)},i(b){p||(J(i.$$.fragment,b),J(c.$$.fragment,b),J(h.$$.fragment,b),J(d.$$.fragment,b),p=!0)},o(b){z(i.$$.fragment,b),z(c.$$.fragment,b),z(h.$$.fragment,b),z(d.$$.fragment,b),p=!1},d(b){b&&(M(t),M(a),M(f),M(g),M(T)),X(i),X(c),X(h),X(d)}}}function an(r){let t,e,i,n,c;const a=[fn,un],f=[];function h(l,s){return l[0].cardHalf2?0:1}return e=h(r),i=f[e]=a[e](r),{c(){t=R("div"),i.c(),H(t,"class",n=Xt(`card ${r[1]&&"back"}`)+" svelte-1ubeuca"),nt(t,"--colour",r[3])},m(l,s){B(l,t,s),f[e].m(t,null),c=!0},p(l,[s]){let d=e;e=h(l),e===d?f[e].p(l,s):(lt(),z(f[d],1,1,()=>{f[d]=null}),ct(),i=f[e],i?i.p(l,s):(i=f[e]=a[e](l),i.c()),J(i,1),i.m(t,null)),(!c||s&2&&n!==(n=Xt(`card ${l[1]&&"back"}`)+" svelte-1ubeuca"))&&H(t,"class",n),(!c||s&8)&&nt(t,"--colour",l[3])},i(l){c||(J(i),c=!0)},o(l){z(i),c=!1},d(l){l&&M(t),f[e].d()}}}function ln(r,t,e){let i,{card:n}=t,{back:c=!1}=t,{readable:a=!1}=t;const f=({detail:d})=>e(0,n.cardHalf1.cardType.type=d,n),h=({detail:d})=>e(0,n.cardHalf1.cardType.passive=d,n),l=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.type=d,n)},s=({detail:d})=>{n.cardHalf2&&e(0,n.cardHalf2.cardType.passive=d,n)};return r.$$set=d=>{"card"in d&&e(0,n=d.card),"back"in d&&e(1,c=d.back),"readable"in d&&e(2,a=d.readable)},r.$$.update=()=>{r.$$.dirty&1&&e(3,i=$t(n.cardHalf1.cardType.type))},[n,c,a,i,f,h,l,s]}class Ut extends ut{constructor(t){super(),ot(this,t,ln,an,it,{card:0,back:1,readable:2})}}const ue=(r,t=9)=>{const e=[];let i=0;for(;i<r.length;)e.push(r.slice(i,t+i)),i+=t;return e};function cn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function sn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}};Lt.exports;(function(r){(function(){function t(i,n){return n?sn(i):i.slice?t[c(i)]:function(a,f){i(a={exports:{}}),t[c(f)]=a.exports};function c(a){return a.split("/").slice(-1).toString().replace(".js","")}}var e=r;t(function(i){String.random=function(c,a){var f="";for(c=c||24,a=a||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";c-- >0;)f+=a.charAt(Math.floor(Math.random()*a.length));return f},String.match=function(c,a){var f,h;return typeof c!="string"?!1:(typeof a=="string"&&(a={"=":a}),a=a||{},f=a["="]||a["*"]||a[">"]||a["<"],c===f?!0:h!==a["="]?!1:(f=a["*"]||a[">"],c.slice(0,(f||"").length)===f?!0:h!==a["*"]?!1:h!==a[">"]&&h!==a["<"]?c>=a[">"]&&c<=a["<"]:h!==a[">"]&&c>=a[">"]||h!==a["<"]&&c<=a["<"]))},String.hash=function(c,a){if(typeof c=="string"){if(a=a||0,!c.length)return a;for(var f=0,h=c.length,l;f<h;++f)l=c.charCodeAt(f),a=(a<<5)-a+l,a|=0;return a}};var n=Object.prototype.hasOwnProperty;Object.plain=function(c){return c?c instanceof Object&&c.constructor===Object||Object.prototype.toString.call(c).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(c,a){for(var f in c)if(n.call(c,f)&&(!a||a.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(c){var a=[];for(var f in c)n.call(c,f)&&a.push(f);return a},function(){var c,a=setTimeout,f=0,h=0,l=typeof setImmediate!=""+c&&setImmediate||function(d,g){return typeof MessageChannel==""+c?a:((d=new MessageChannel).port1.onmessage=function(T){T.data==""&&g()},function(T){g=T,d.port2.postMessage("")})}(),s=a.check=a.check||typeof performance!=""+c&&performance||{now:function(){return+new Date}};a.hold=a.hold||9,a.poll=a.poll||function(d){if(a.hold>=s.now()-f&&h++<3333){d();return}l(function(){f=s.now(),d()},h=0)}}(),function(){var c=setTimeout,a=c.turn=c.turn||function(g){f.push(g)==1&&h(d)},f=a.s=[],h=c.poll,l=0,s,d=function(){(s=f[l++])&&s(),(l==f.length||l==99)&&(f=a.s=f.slice(l),l=0),f.length&&h(d)}}(),function(){var c,a=setTimeout,f=a.turn;(a.each=a.each||function(h,l,s,d){d=d||9,function g(T,p,b){if(p=(T=(h||[]).splice(0,d)).length){for(var $=0;$<p&&c===(b=l(T[$]));$++);if(c===b){f(g);return}}s&&s(b)}()})()}()})(t,"./shim"),t(function(i){i.exports=function n(s,a,f){if(!s)return{to:n};var h,l=typeof a=="function",s=(this.tag||(this.tag={}))[s]||l&&(this.tag[s]={tag:s,to:n._={next:function(g){var T;(T=this.to)&&T.next(g)}}});if(l){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:a,the:s,on:this,as:f};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&h!==a&&s.next(a),s}})(t,"./onto"),t(function(i){i.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(t,"./valid"),t(function(i){t("./shim");function n(){var s=+new Date;return h<s?(a=0,h=s+n.drift):h=s+(a+=1)/f+n.drift}n.drift=0;var c=-1/0,a=0,f=999,h=c,l;n.is=function(s,d,g){var T=d&&s&&s._&&s._[">"]||g;if(T)return typeof(T=T[d])=="number"?T:c},n.ify=function(s,d,g,T,p){(s=s||{})._=s._||{},p&&(s._["#"]=p);var b=s._[">"]||(s._[">"]={});return l!==d&&d!=="_"&&(typeof g=="number"&&(b[d]=g),l!==T&&(s[d]=T)),s},i.exports=n})(t,"./state"),t(function(i){t("./shim");function n(c){var a={s:{}},f=a.s;c=c||{max:999,age:1e3*9},a.check=function(l){return f[l]?h(l):!1};var h=a.track=function(l){var s=f[l]||(f[l]={});return s.was=a.now=+new Date,a.to||(a.to=setTimeout(a.drop,c.age+9)),h.ed&&h.ed(l),s};return a.drop=function(l){a.to=null,a.now=+new Date;var s=Object.keys(f);console.STAT&&console.STAT(a.now,+new Date-a.now,"dup drop keys"),setTimeout.each(s,function(d){var g=f[d];g&&(l||c.age)>a.now-g.was||delete f[d]},0,99)},a}i.exports=n})(t,"./dup"),t(function(i){t("./onto"),i.exports=function(a,f){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof a!="function"){if(!a)return;var s=a["#"]||a,l=(this.tag||"")[s];return l?(f&&(l=this.on(s,f),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},h)),!0):void 0}var s=f&&f["#"]||n(9);if(!a)return s;var d=this.on(s,a,f);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(i){function n(p){return p instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:p}):new n(p)}n.is=function(p){return p instanceof n||p&&p._&&p===p._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(u){u.root=u.root||u,u.graph=u.graph||{},u.on=u.on||n.on,u.ask=u.ask||n.ask,u.dup=u.dup||n.dup();var m=u.$.opt(u.opt);return u.once||(u.on("in",p,u),u.on("out",p,u),u.on("put",x,u),n.on("create",u),u.on("create",u)),u.once=1,m};function p(u){if(u){if(u.out===p){this.to.next(u);return}var m=this,v=m.as,N=v.at||v,G=N.$,O=N.dup,C,I=u.DBG;if((C=u["#"])||(C=u["#"]=a(9)),!O.check(C)){if(O.track(C),C=u._,u._=typeof C=="function"?C:function(){},u.$&&u.$===(u.$._||"").$||(u.$=G),u["@"]&&!u.put&&o(u),!N.ask(u["@"],u))if(I&&(I.u=+new Date),u.put){b(u);return}else u.get&&n.on.get(u,G);I&&(I.uc=+new Date),m.to.next(u),I&&(I.ua=+new Date),!(u.nts||u.NTS)&&(u.out=p,N.on("out",u),I&&(I.ue=+new Date))}}}function b(u){if(u){var m=u._||"",v=m.root=((m.$=u.$||"")._||"").root;if(u["@"]&&m.faith&&!m.miss){u.out=p,v.on("out",u);return}m.latch=v.hatch,m.match=v.hatch=[];var N=u.put,G=m.DBG=u.DBG,O=+new Date;if(E=E||O,!(N["#"]&&N["."])){G&&(G.p=O),m["#"]=u["#"],m.msg=u,m.all=0,m.stun=1;var C=Object.keys(N);console.STAT&&console.STAT(O,((G||m).pk=+new Date)-O,"put sort");var I=0,P,q,W,V,U,tt,wt;(function dt(At){if(P!=I){if(P=I,!(W=C[I])){console.STAT&&console.STAT(O,((G||m).pd=+new Date)-O,"put"),j(m);return}(V=N[W])?(wt=V._)?W!==wt["#"]?tt=k+S(W)+"soul not same.":(U=wt[">"])||(tt=k+S(W)+"no state."):tt=k+S(W)+"no meta.":tt=k+S(W)+"no node.",q=Object.keys(V||{})}if(tt){u.err=m.err=tt,j(m);return}var Kt=0,ht;for(At=At||0;At++<9&&(ht=q[Kt++]);)if(ht!=="_"){var Nt=V[ht],Vt=U[ht];if(d===Vt){tt=k+S(ht)+"on"+S(W)+"no state.";break}if(!h(Nt)){tt=k+S(ht)+"on"+S(W)+"bad "+typeof Nt+S(Nt);break}$(Nt,ht,W,Vt,u),++F}if((q=q.slice(Kt)).length){f(dt);return}++I,q=null,dt(At)})()}}}n.on.put=b;function $(u,m,v,N,G){var O=G._||"",C=O.root,I=C.graph,P,q=I[v]||g,W=l(q,m,1),V=q[m],U=O.DBG;(P=console.STAT)&&(!I[v]||!V)&&(P.has=(P.has||0)+1);var tt=D();if(N>tt){setTimeout(function(){$(u,m,v,N,G)},(P=N-tt)>A?A:P),console.STAT&&console.STAT((U||O).Hf=+new Date,P,"future");return}if(!(N<W)&&!(!O.faith&&N===W&&(u===V||w(u)<=w(V))&&!O.miss)){O.stun++;var wt=G["#"]+O.all++,dt={toString:function(){return wt},_:O};dt.toJSON=dt.toString,C.dup.track(dt)["#"]=G["#"],U&&(U.ph=U.ph||+new Date),C.on("put",{"#":dt,"@":G["@"],put:{"#":v,".":m,":":u,">":N},ok:G.ok,_:O})}}function x(u){var m;(m=(u._||"").DBG)&&(m.pa=+new Date,m.pm=m.pm||+new Date);var v=this,N=v.as,G=N.graph,O=u._,C=u.put,I=C["#"],P=C["."],q=C[":"],W=C[">"];u["#"];var V;(V=O.msg)&&(V=V.put)&&(V=V[I])&&s(V,P,W,q,I),G[I]=s(G[I],P,W,q,I),(V=(N.next||"")[I])&&V.on("in",u),j(O),v.to.next(u)}function j(u,m){var v;if(!u.stop&&!(!u.err&&0<--u.stun)&&(u.stop=1,!!(v=u.root))){var N=u.match;N.end=1,N===v.hatch&&(!(N=u.latch)||N.end?delete v.hatch:v.hatch=N),u.hatch&&u.hatch(),setTimeout.each(u.match,function(G){G&&G()}),!(!(m=u.msg)||u.err||m.err)&&(m.out=p,u.root.on("out",m),_())}}function o(u){var m=u["@"]||"",v;if(!(v=m._)){var N=(N=u.$)&&(N=N._)&&(N=N.root)&&(N=N.dup);if(!(N=N.check(m)))return;u["@"]=N["#"]||u["@"];return}v.acks=(v.acks||0)+1,(v.err=u.err)&&(u["@"]=v["#"],j(v)),v.ok=u.ok||v.ok,!v.stop&&!v.crack&&(v.crack=v.match&&v.match.push(function(){y(v)})),y(v)}function y(u){!u||!u.root||u.stun||u.acks!==u.all||u.root.on("in",{"@":u["#"],err:u.err,ok:u.err?d:u.ok||{"":1}})}var k="Error: Invalid graph!",S=function(u){return" '"+(""+u).slice(0,9)+"...' "},w=JSON.stringify,A=2147483647,D=n.state,F=0,E,_=function(){F>999&&F/-(E-(E=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){F=0})}}(),function(){n.on.get=function(b,$){var x=$._,j=b.get,o=j["#"],y=x.graph[o],k=j["."],S=x.next||(x.next={}),w=S[o],A=b._||{},D=A.DBG=b.DBG;if(D&&(D.g=+new Date),!y)return x.on("get",b);if(k){if((typeof k!="string"||d===y[k])&&!((w||"").next||"")[k]){x.on("get",b);return}y=s({},k,l(y,k),y[k],o)}y&&p(b,y),x.on("get",b)};function p(b,$){var x=+new Date,j=b._||{},o=j.DBG=b.DBG,y=b["#"],k=a(9),S=Object.keys($||"").sort(),w=(($||"")._||"")["#"];S.length;var A=b.$._.root,D=$===A.graph[w];console.STAT&&console.STAT(x,((o||j).gk=+new Date)-x,"got keys"),$&&function F(){x=+new Date;for(var E=0,_,u={},m;E<9&&(_=S[E++]);)s(u,_,l($,_),$[_],w);S=S.slice(E),(m={})[w]=u,u=m;var v;D&&(v=function(){},v.ram=v.faith=!0),m=S.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),o&&(o.ga=+new Date),A.on("in",{"@":y,"#":k,put:u,"%":m?k=a(9):d,$:A.$,_:v,DBG:o,FOO:1}),console.STAT&&console.STAT(x,+new Date-x,"got in"),m&&setTimeout.turn(F)}(),$||A.on("in",{"@":b["#"]})}n.on.get.ack=p}(),function(){n.chain.opt=function(p){p=p||{};var b=this,$=b._,x=p.peers||p;return Object.plain(p)||(p={}),Object.plain($.opt)||($.opt=p),typeof x=="string"&&(x=[x]),Object.plain($.opt.peers)||($.opt.peers={}),x instanceof Array&&(p.peers={},x.forEach(function(j){var o={};o.id=o.url=j,p.peers[j]=$.opt.peers[j]=$.opt.peers[j]||o})),c(p,function j(o){var y=this[o];if(this&&this.hasOwnProperty(o)||typeof y=="string"||Object.empty(y)){this[o]=y;return}y&&y.constructor!==Object&&!(y instanceof Array)||c(y,j)}),$.opt.from=p,n.on("opt",$),$.opt.uuid=$.opt.uuid||function(o){return n.state().toString(36).replace(".","")+String.random(o||12)},b}}();var c=function(p,b){Object.keys(p).forEach(b,p)},a=String.random,f=setTimeout.turn,h=n.valid,l=n.state.is,s=n.state.ify,d,g={},T;n.log=function(){return!n.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(p,b,$){return($=n.log.once)[p]=$[p]||0,$[p]++||n.log(b)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof e<"u"&&(e.exports=n)}catch{}i.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(T=console).only=function(p,b){return T.only.i&&p===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||b)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(i){var n=t("./root");n.chain.back=function(f,h){var l;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var g=0,T=f.length,l=d;for(g;g<T;g++)l=(l||c)[f[g]];return a!==l?h?s:l:(l=d.back)?l.$.back(f,h):void 0}if(typeof f=="function"){for(var p,l={back:d};(l=l.back)&&a===(p=f(l,h)););return p}return typeof f=="number"?(d.back||d).$.back(f-1):this};var c={},a})(t,"./back"),t(function(i){var n=t("./root");n.chain.chain=function(j){var o=this,y=o._,k=new(j||o).constructor(o),S=k._,w;return S.root=w=y.root,S.id=++w.once,S.back=o._,S.on=n.on,S.on("in",n.on.in,S),S.on("out",n.on.out,S),k};function c(j){var o,y=this.as,k=y.back,S=y.root,w;if(j.$||(j.$=y.$),this.to.next(j),y.err){y.on("in",{put:y.put=d,$:y.$});return}if(o=j.get){if(S.pass&&(S.pass[y.id]=y),y.lex&&Object.keys(y.lex).forEach(function(A){w[A]=y.lex[A]},w=j.get=j.get||{}),o["#"]||y.soul){if(o["#"]=o["#"]||y.soul,j["#"]||(j["#"]=g(9)),k=S.$.get(o["#"])._,o=o["."]){if(p(k.put,o)&&(w=k.ask&&k.ask[o],(k.ask||(k.ask={}))[o]=k.$.get(o)._,k.on("in",{get:o,put:{"#":k.soul,".":o,":":k.put[o],">":$(S.graph[k.soul],o)}}),w))return}else{if(w=k.ask&&k.ask[""],(k.ask||(k.ask={}))[""]=k,d!==k.put&&(k.on("in",k),w))return;j.$=k.$}return S.ask(l,j),S.on("in",j)}if(o["."])return y.get?(j={get:{".":y.get},$:y.$},(k.ask||(k.ask={}))[y.get]=j.$._,k.on("out",j)):(j={get:y.lex?j.get:{},$:y.$},k.on("out",j));if((y.ask||(y.ask={}))[""]=y,y.get)return o["."]=y.get,(k.ask||(k.ask={}))[y.get]=j.$._,k.on("out",j)}return k.on("out",j)}n.on.out=c;function a(j,o){o=o||this.as;var y=o.root,k=j.$||(j.$=o.$),S=(k||"")._||s,w=j.put||"",A=w["#"],D=w["."],F=d!==w["="]?w["="]:w[":"],E=w[">"]||-1/0,_;if(d!==j.put&&(d===w["#"]||d===w["."]||d===w[":"]&&d===w["="]||d===w[">"])){if(!T(w)){if(!(A=((w||"")._||"")["#"])){console.log("chain not yet supported for",w,"...",j,o);return}return k=o.root.$.get(A),setTimeout.each(Object.keys(w).sort(),function(u){u=="_"||d===(E=$(w,u))||o.on("in",{$:k,put:{"#":A,".":u,"=":w[u],">":E},VIA:j})})}o.on("in",{$:S.back.$,put:{"#":A=S.back.soul,".":D=S.has||S.get,"=":w,">":$(S.back.put,D)},via:j});return}(j.seen||"")[o.id]||((j.seen||(j.seen=function(){}))[o.id]=o,o!==S&&(Object.keys(j).forEach(function(u){w[u]=j[u]},w={}),w.get=o.get||w.get,!o.soul&&!o.has?w.$$$=w.$$$||o.$:S.soul&&(w.$=o.$,w.$$=w.$$||S.$),j=w),h(j,o),(o.soul||j.$$)&&E>=$(y.graph[A],D)&&((w=y.$.get(A)._).put=x(w.put,D,E,F,A)),!S.soul&&E>=$(y.graph[A],D)&&(_=(y.$.get(A)._.next||"")[D])&&(_.put=F,typeof(w=T(F))=="string"&&(_.put=y.$.get(w)._.put||F)),this.to&&this.to.next(j),o.any&&setTimeout.each(Object.keys(o.any),function(u){(u=o.any[u])&&u(j)},0,99),o.echo&&setTimeout.each(Object.keys(o.echo),function(u){(u=o.echo[u])&&u.on("in",j)},0,99),((j.$$||"")._||S).soul&&(_=o.next)&&(_=_[D])&&(w={},Object.keys(j).forEach(function(u){w[u]=j[u]}),w.$=(j.$$||j.$).get(w.get=D),delete w.$$,delete w.$$$,_.on("in",w)),f(j,o))}n.on.in=a;function f(j,o){if(o=o||this.as||j.$._,!(j.$$&&this!==n.on)&&!(!j.put||o.soul)){var y=j.put||"",k=y["="]||y[":"],D,S=o.root,w=S.$.get(y["#"]).get(y["."])._;if(typeof(k=T(k))!="string"){this===n.on&&((w.echo||(w.echo={}))[o.id]=o);return}if(!((w.echo||(w.echo={}))[o.id]&&!(S.pass||"")[o.id])){if(D=S.pass){if(D[k+o.id])return;D[k+o.id]=1}(w.echo||(w.echo={}))[o.id]=o,o.has&&(o.link=k);var A=S.$.get(w.link=k)._;(A.echo||(A.echo={}))[w.id]=w;var D=o.ask||"";(D[""]||o.lex)&&A.on("out",{get:{"#":k}}),setTimeout.each(Object.keys(D),function(F,E){!F||!(E=D[F])||E.on("out",{get:{"#":k,".":F}})},0,99)}}}n.on.link=f;function h(j,o){var y=j.put||"",k=d!==y["="]?y["="]:y[":"],S=o.root,w,A;if(d===k){if(o.soul&&d!==o.put||(A=(j.$$||j.$||"")._||"",j["@"]&&(d!==A.put||d!==o.put)))return;(w=o.link||j.linked)&&delete(S.$.get(w)._.echo||"")[o.id],o.has&&(o.link=null),o.put=d,setTimeout.each(Object.keys(o.next||""),function(D,F){(F=o.next[D])&&(w&&delete(S.$.get(w).get(D)._.echo||"")[F.id],F.on("in",{get:D,put:d,$:F.$}))},0,99);return}o.soul||j.$$||(w=T(k),A=j.$._||"",!((w===A.link||o.has&&!A.link)&&!((S.pass||"")[o.id]&&typeof w!="string"))&&(delete(A.echo||"")[o.id],h({get:o.get,put:d,$:j.$,linked:j.linked=j.linked||A.link},o)))}n.on.unlink=h;function l(j,o){var y=this.as,k=y.$._;k.root;var S=y.get||"",w=(j.put||"")[S["#"]]||"";if(!j.put||typeof S["."]=="string"&&d===w[S["."]]){if(d!==k.put||!k.soul&&!k.has)return;k.ack=(k.ack||0)+1,k.on("in",{get:k.get,put:k.put=d,$:k.$,"@":j["@"]});return}(j._||{}).miss=1,n.on.put(j)}var s={},d,g=String.random,T=n.valid,p=function(j,o){return j&&Object.prototype.hasOwnProperty.call(j,o)},b=n.state,$=b.is,x=b.ify})(t,"./chain"),t(function(i){var n=t("./root");n.chain.get=function(d,g,T){var p,b;if(typeof d=="string"){if(d.length==0)return(p=this.chain())._.err={err:n.log("0 length key!",d)},g&&g.call(p,p._.err),p;var $=this,x=$._,j=x.next||h;(p=j[d])||(p=d&&c(d,$)),p=p&&p.$}else if(typeof d=="function"){let D=function(F,E,_){if(!D.stun&&!((O=y.pass)&&!O[k])){var u=F.$._,m=(F.$$||"")._,v=(m||u).put,N=!u.has&&!u.soul,G={},O;if((N||s===v)&&(v=s===((O=F.put)||"")["="]?s===(O||"")[":"]?O:O[":"]:O["="]),typeof(O=n.valid(v))=="string"&&(v=s===(O=y.$.get(O)._.put)?o.not?s:v:O),!(o.not&&s===v)){if(s===o.stun){if((O=y.stun)&&O.on&&(x.$.back(function(C){if(O.on(""+C.id,G={}),(G.run||0)<D.id)return G}),!G.run&&O.on(""+u.id,G={}),!G.run&&m&&O.on(""+m.id,G={}),D.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=O.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[k]=function(){D(F,E,1)};return}if(s===v&&(_=0),(O=y.hatch)&&!O.end&&s===o.hatch&&!_){if(S[u.$._.id])return;S[u.$._.id]=1,O.push(function(){D(F,E,1)});return}S={}}if(y.pass){if(y.pass[k+u.id])return;y.pass[k+u.id]=1}if(o.on){o.ok.call(u.$,v,u.get,F,E||D);return}if(o.v2020){o.ok(F,E||D);return}Object.keys(F).forEach(function(C){O[C]=F[C]},O={}),F=O,F.put=v,o.ok.call(o.as,F,E||D)}}};var w=D;if(g===!0)return a(this,d,g,T),this;p=this;var x=p._,o=g||{},y=x.root,k;o.at=x,o.ok=d;var S={};return D.at=x,(x.any||(x.any={}))[k=String.random(7)]=D,D.off=function(){D.stun=1,x.any&&delete x.any[k]},D.rid=f,D.id=o.run||++y.once,b=y.pass,(y.pass={})[k]=1,o.out=o.out||{get:{}},x.on("out",o.out),y.pass=b,p}else{if(typeof d=="number")return this.get(""+d,g,T);if(typeof(b=l(d))=="string")return this.get(b,g,T);(b=this.get.next)&&(p=b(this,d))}return p?(g&&typeof g=="function"&&p.get(g,T),p):((p=this.chain())._.err={err:n.log("Invalid get request!",d)},g&&g.call(p,p._.err),p)};function c(d,g){var T=g._,p=T.next,b=g.chain(),$=b._;return p||(p=T.next={}),p[$.get=d]=$,g===T.root.$?$.soul=d:(T.soul||T.has)&&($.has=d),$}function a(d,g,T,p){var b=d._,$=0,x;return(x=b.soul||b.link)?g(x,p,b):b.jam?b.jam.push([g,p]):(b.jam=[[g,p]],d.get(function(o,y){if(!(s===o.put&&!b.root.opt.super&&(x=Object.keys(b.root.opt.peers).length)&&++$<=x)){y.rid(o);var k=(k=o.$)&&k._||{},S=0,w;for(x=b.jam,delete b.jam;w=x[S++];){var A=w[0];w=w[1],A&&A(k.link||k.soul||n.valid(o.put)||((o.put||{})._||{})["#"],w,o,y)}}},{out:{get:{".":!0}}}),d)}function f(d){var g=this.at||this.on;if(!d||g.soul||g.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){g.map;var T;if((T=this.seen||(this.seen={}))[d])return!0;T[d]=!0}}var h={},l=n.valid,s})(t,"./get"),t(function(i){var n=t("./root");n.chain.put=function(p,b,$){var x=this,j=x._,o=j.root;$=$||{},$.root=j.root,$.run||($.run=o.once),c($,j.id),$.ack=$.ack||b,$.via=$.via||x,$.data=$.data||p,$.soul||($.soul=j.soul||typeof b=="string"&&b);var y=$.state=$.state||n.state();return typeof p=="function"?(p(function(k){$.data=k,x.put(l,l,$)}),x):$.soul?($.$=o.$.get($.soul),$.todo=[{it:$.data,ref:$.$}],$.turn=$.turn||d,$.ran=$.ran||a,function k(){var S=$.todo,w=S.pop(),A=w.it;w.ref&&w.ref._.id;var D,F,E,_,u;if(c($,w.ref),(_=w.todo)&&(F=_.pop(),A=A[F],_.length&&S.push(w)),F&&(S.path||(S.path=[])).push(F),!(D=g(A))&&!(u=n.is(A))){if(!Object.plain(A)){a.err($,"Invalid data: "+h(A)+" at "+($.via.back(function(O){O.get&&_.push(O.get)},_=[])||_.join("."))+"."+(S.path||[]).join("."));return}for(var m=$.seen||($.seen=[]),v=m.length;v--;)if(A===(_=m[v]).it){D=A=_.link;break}}if(F&&D)w.node=T(w.node,F,y,A);else{let O=function(C,I){var P=E.link["#"];I&&(I.off(),I.rid(C));var q=P||C.soul||(_=(C.$$||C.$)._||"").soul||_.link||((_=_.put||"")._||"")["#"]||_["#"]||((_=C.put||"")&&C.$$?_["#"]:(_["="]||_[":"]||"")["#"]);if(!P&&c($,C.$),!q&&!w.link["#"]){(w.wait||(w.wait=[])).push(function(){O(C,I)});return}q||(q=[],(C.$$||C.$).back(function(W){if(_=W.soul||W.link)return q.push(_);q.push(W.get)}),q=q.reverse().join("/")),E.link["#"]=q,!u&&((($.graph||($.graph={}))[q]=E.node||(E.node={_:{}}))._["#"]=q),delete $.wait[N],E.wait&&setTimeout.each(E.wait,function(W){W&&W()}),$.ran($)};var G=O;if(!$.seen){a.err($,"Data at root of graph must be a node (an object).");return}$.seen.push(E={it:A,link:{},todo:u?[]:Object.keys(A).sort().reverse(),path:(S.path||[]).slice(),up:w}),w.node=T(w.node,F,y,E.link),!u&&E.todo.length&&S.push(E);var N=$.seen.length;($.wait||($.wait={}))[N]="",_=(E.ref=u?A:F?w.ref.get(F):w.ref)._,(_=A&&(A._||"")["#"]||_.soul||_.link)?O({soul:_}):E.ref.get(O,{run:$.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return $.ran($);$.turn(k)}(),x):(f($),x)};function c(p,b){if(b){b=(b._||"").id||b;var $=p.root.stun||(p.root.stun={on:n.on}),x={},j;p.stun||(p.stun=$.on("stun",function(){})),(j=$.on(""+b))&&j.the.last.next(x),!(x.run>=p.run)&&$.on(""+b,function(o){if(p.stun.end){this.off(),this.to.next(o);return}o.run=o.run||p.run,o.stun=o.stun||p.stun})}}function a(p){if(p.err){a.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var b=p.$.back(-1)._,$=b.root,x=b.ask(function(k){$.on("ack",k),k.err&&!k.lack&&n.log(k),++j>(p.acks||0)&&this.off(),p.ack&&p.ack(k,this)},p.opt),j=0,o=p.stun,y;(y=function(){o&&(a.end(o,$),setTimeout.each(Object.keys(o=o.add||""),function(k){(k=o[k])&&k()}))}).hatch=y,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":x,_:y})}}a.end=function(p,b){p.end=s,p.the.to===p&&p===p.the.last&&delete b.stun,p.off()},a.err=function(p,b){(p.ack||s).call(p,p.out={err:p.err=n.log(b)}),p.ran(p)};function f(p){var b=p.via._,$;p.via=p.via.back(function(x){if(x.soul||!x.get)return x.$;$=p.data,(p.data={})[x.get]=$}),(!p.via||!p.via._.soul)&&(p.via=b.root.$.get(((p.data||"")._||"")["#"]||b.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function h(p,b){return p&&(b=p.constructor)&&b.name||typeof p}var l,s=function(){},d=setTimeout.turn,g=n.valid,T=n.state.ify})(t,"./put"),t(function(i){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),i.exports=n})(t,"./index"),t(function(i){var n=t("./index");n.chain.on=function(f,h,l,s){var d=this,g=d._;g.root;var T;if(typeof f=="string")return h?(T=g.on(f,h,l||g,s),l&&l.$&&(l.subs||(l.subs=[])).push(T),d):g.on(f);var p=h;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,d.get(f,p),d},n.chain.once=function(f,h){if(h=h||{},!f)return c(this);var l=this,s=l._,d=s.root;s.put;var g=String.random(7),T;return l.get(function(p,b,$,x){var j=this,o=j._,y=o.one||(o.one={});if(x.stun||y[g]==="")return;if((T=n.valid(p))===!0){k();return}if(typeof T=="string")return;clearTimeout((s.one||"")[g]),clearTimeout(y[g]),y[g]=setTimeout(k,h.wait||99);function k(S){if(!o.has&&!o.soul&&(o={put:p,get:b}),a===(T=o.put)&&(T=(($.$$||"")._||"").put),typeof n.valid(T)=="string"&&(T=d.$.get(T)._.put,T===a&&!S)){y[g]=setTimeout(function(){k(1)},h.wait||99);return}x.stun||y[g]!==""&&(y[g]="",(s.soul||s.has)&&x.off(),f.call(j,T,o.get),clearTimeout(y[g]))}},{on:1}),l};function c(f,h,l){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=f.chain())._.nix=f.once(function(s,d){l._.on("in",this._)}),l._.lex=f._.lex,l}n.chain.off=function(){var f=this,h=f._,l,s=h.back;if(s)return h.ack=0,(l=s.next)&&l[h.get]&&delete l[h.get],(l=s.any)&&(delete s.any,s.any={}),(l=s.ask)&&delete l[h.get],(l=s.put)&&delete l[h.get],(l=h.soul)&&delete s.root.graph[l],(l=h.map)&&Object.keys(l).forEach(function(d,g){g=l[d],g.link&&s.root.$.get(g.link).off()}),(l=h.next)&&Object.keys(l).forEach(function(d,g){g=l[d],g.$.off()}),h.on("off",{}),f};var a})(t,"./on"),t(function(i){var n=t("./index"),c=n.chain.get.next;n.chain.get.next=function(l,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?l.get(d):((d=l.chain()._).lex=s,l.on("in",function(g){String.match(g.get||(g.put||"")["."],s["."]||s["#"]||s)&&d.on("in",g),this.to.next(g)}),d.$):(c||f)(l,s)},n.chain.map=function(l,s,d){var g=this,T=g._,p,b;return Object.plain(l)&&(p=l["."]?l:{".":l},l=h),l?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=g.chain(),g.map().on(function($,x,j,o){var y=(l||f).call(this,$,x,j,o);if(h!==y){if($===y)return b._.on("in",j);if(n.is(y))return b._.on("in",y._);var k={};Object.keys(j.put).forEach(function(S){k[S]=j.put[S]},k),k["="]=y,b._.on("in",{get:x,put:k})}}),b):((b=T.each)||((T.each=b=g.chain())._.lex=p||b._.lex||T.lex,b._.nix=g.back("nix"),g.on("in",a,b._)),b)};function a(l){this.to.next(l);var s=this.as,d=l.$,g=d._,T=l.put,p;!g.soul&&!l.$$||(p=s.lex)&&!String.match(l.get||(T||"")["."],p["."]||p["#"]||p)||n.on.link(l,s)}var f=function(){},h})(t,"./map"),t(function(i){var n=t("./index");n.chain.set=function(c,a,f){var h=this,l=h.back(-1),s,d;return a=a||function(){},f=f||{},f.item=f.item||c,(s=((c||"")._||"")["#"])&&((c={})["#"]=s),typeof(d=n.valid(c))=="string"?h.get(s=d).put(c,a,f):n.is(c)?(h.put(function(g){c.get(function(T,p,b){if(!T)return a.call(h,{err:n.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[T]={"#":T},g(d)},!0)}),c):(Object.plain(c)&&(c=l.get(s=h.back("opt.uuid")()).put(c)),h.get(s||l.back("opt.uuid")(7)).put(c,a,f))}})(t,"./set"),t(function(i){t("./shim");var n=function(){},c=JSON.parseAsync||function(l,s,d){var g,T=+new Date;try{s(g,JSON.parse(l,d),a.sucks(+new Date-T))}catch(p){s(p)}},a=JSON.stringifyAsync||function(l,s,d,g){var T,p=+new Date;try{s(T,JSON.stringify(l,d,g),a.sucks(+new Date-p))}catch(b){s(b)}};a.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),a.sucks=n)};function f(l){var s=function(){},d=l.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var g=setTimeout.turn||setTimeout,T=l.dup,p=T.check,b=T.track,$=s.hear=function(o,y){if(o){if(d.max<=o.length)return s.say({dam:"!",err:"Message too big!"},y);s===this&&($.d+=o.length||0,++$.c);var k=y.SH=+new Date,S=o[0],w;if(S==="["){c(o,function(A,D){if(A||!D)return s.say({dam:"!",err:"DAM JSON parse error."},y);console.STAT&&console.STAT(+new Date,D.length,"# on hear batch");var F=d.puff;(function E(){for(var _=+new Date,u=0,m;u<F&&(m=D[u++]);)s.hear(m,y);D=D.slice(u),console.STAT&&console.STAT(_,+new Date-_,"hear loop"),x(y),D.length&&g(E,0)})()}),o="";return}if(S==="{"||(o["#"]||Object.plain(o))&&(w=o)){if(w)return $.one(w,y,k);c(o,function(A,D){if(A||!D)return s.say({dam:"!",err:"DAM JSON parse error."},y);$.one(D,y,k)});return}}};$.one=function(o,y,E){var S,w,A,D,F;if(o.DBG&&(o.DBG=F={DBG:o.DBG}),F&&(F.h=E),F&&(F.hp=+new Date),(S=o["#"])||(S=o["#"]=String.random(9)),!(A=p(S))&&(w=o["##"],!(w&&(A=o["@"]||o.get&&S)&&T.check(D=A+w)))){if((o._=function(){}).via=s.leap=y,(A=o["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(_){this[_]=1},o._.yo={}),A=o.dam){(A=s.hear[A])&&A(o,y,l),b(S);return}(A=o.ok)&&(o._.near=A["/"]);var E=+new Date;F&&(F.is=E),y.SI=S,b.ed=function(_){S===_&&(b.ed=0,(_=T.s[S])&&(_.via=y,o.get&&(_.it=o)))},l.on("in",s.last=o),F&&(F.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,o.get?"msg get":o.put?"msg put":"msg"),b(S),D&&b(D),s.leap=s.last=null}},$.c=$.d=0,function(){var o=0,y;s.hash=function(w,A){var D,F,E,_=+new Date;a(w.put,function u(m,v){var N=(F||(F=E=v||"")).slice(0,32768);if(D=String.hash(N,D),F=F.slice(32768),F){g(u,0);return}console.STAT&&console.STAT(_,+new Date-_,"say json+hash"),w._.$put=E,w["##"]=D,s.say(w,A),delete w._.$put},k)};function k(w,A){var D;return A instanceof Object?(Object.keys(A).sort().forEach(S,{to:D={},on:A}),D):A}function S(w){this.to[w]=this.on[w]}s.say=function(w,A){var D;if((D=this)&&(D=D.to)&&D.next&&D.next(w),!w)return!1;var F,E,_,u=w["@"],m=w._||(w._=function(){}),v=w.DBG,N=+new Date;if(m.y=m.y||N,A||v&&(v.y=N),(F=w["#"])||(F=w["#"]=String.random(9)),!y&&b(F),!(E=w["##"])&&h!==w.put&&!m.via&&u){s.hash(w,A);return}if(!A&&u&&(A=(D=T.s[u])&&(D.via||(D=D.it)&&(D=D._)&&D.via)||(D=s.last)&&u===D["#"]&&s.leap),!A&&u)return T.s[u]?void 0:(console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1);if(u&&!w.put&&!E&&((T.s[u]||"").it||"")["##"])return!1;if(!A&&s.way)return s.way(w);if(v&&(v.yh=+new Date),!(_=m.raw)){s.raw(w,A);return}if(v&&(v.yr=+new Date),!A||!A.id){if(!Object.plain(A||d.peers))return!1;var N=+new Date;d.puff;var G=d.peers,O=Object.keys(A||d.peers||{});console.STAT&&console.STAT(N,+new Date-N,"peer keys"),function P(){var q=+new Date;y=1;var W=m.raw;m.raw=_;for(var V=0,U;V<9&&(U=(O||"")[V++]);)(U=G[U]||(A||"")[U])&&s.say(w,U);m.raw=W,y=0,O=O.slice(V),console.STAT&&console.STAT(q,+new Date-q,"say loop"),O.length&&(g(P,0),u&&b(u))}();return}if(!A.wire&&s.wire&&s.wire(A),F!==A.last){if(A.last=F,A===m.via||(D=m.yo)&&(D[A.url]||D[A.pid]||D[A.id]))return!1;if(console.STAT&&console.STAT(N,((v||m).yp=+new Date)-(m.y||N),"say prep"),!y&&u&&b(u),A.batch){if(A.tail=(D=A.tail||0)+_.length,A.tail<=d.pack){A.batch+=(D?",":"")+_;return}x(A)}A.batch="[";var C=+new Date;setTimeout(function(){console.STAT&&console.STAT(C,+new Date-C,"0ms TO"),x(A)},d.gap),j(_,A),console.STAT&&u===A.SI&&console.STAT(N,+new Date-A.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(w,A){if(!w)return"";var D=w._||{},F,E;if(E=D.raw)return E;if(typeof w=="string")return w;var _=w["##"],u=w["@"];if(_&&u){if(!D.via&&p(u+_))return!1;if(E=(T.s[u]||"").it){if(_===E["##"])return!1;E["##"]||(E["##"]=_)}}if(!w.dam&&!w["@"]){var m=0,v=[];E=d.peers;for(var N in E){var G=E[N];if(v.push(G.url||G.pid||G.id),++m>6)break}m>1&&(w["><"]=v.join())}if(w.put&&(E=w.ok)&&(w.ok={"@":(E["@"]||1)-1,"/":E["/"]==w._.near?s.near:E["/"]}),F=D.$put){E={},Object.keys(w).forEach(function(C){E[C]=w[C]}),E.put=":])([:",a(E,function(C,I){if(!C){var P=+new Date;E=I.indexOf('"put":":])([:"'),O(h,I=I.slice(0,E+6)+F+I.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}a(w,O);function O(C,I){C||(D.raw=I,s.say(w,A))}}}();function x(o){var y=o.batch,k=typeof y=="string";if(k&&(y+="]"),o.batch=o.tail=null,!!y&&!(k?3>y.length:!y.length)){if(!k)try{y=y.length===1?y[0]:JSON.stringify(y)}catch(S){return d.log("DAM JSON stringify error",S)}y&&j(y,o)}}function j(o,y){try{var k=y.wire;y.say?y.say(o):k.send&&k.send(o),s.say.d+=o.length||0,++s.say.c}catch{(y.queue=y.queue||[]).push(o)}}return s.near=0,s.hi=function(o){var y=o.wire,k;if(!y){s.wire(o.length&&{url:o,id:o}||o);return}o.id?d.peers[o.url||o.id]=o:(k=o.id=o.id||o.url||String.random(9),s.say({dam:"?",pid:l.opt.pid},d.peers[k]=o),delete T.s[o.last]),o.met||(s.near++,o.met=+new Date,l.on("hi",o)),k=o.queue,o.queue=[],setTimeout.each(k||[],function(S){j(S,o)},0,9)},s.bye=function(o){o.met&&--s.near,delete o.met,l.on("bye",o);var y=+new Date;y=y-(o.met||y),s.bye.time=((s.bye.time||y)+y)/2},s.hear["!"]=function(o,y){d.log("Error:",o.err)},s.hear["?"]=function(o,y){o.pid&&(y.pid||(y.pid=o.pid),o["@"])||(s.say({dam:"?",pid:d.pid,"@":o["#"]},y),delete T.s[y.last])},s.hear.mob=function(o,y){if(o.peers){var k=Object.keys(o.peers),S=k[Math.random()*k.length>>0];S&&(s.bye(y),s.hi(S))}},l.on("create",function(o){o.opt.pid=o.opt.pid||String.random(9),this.to.next(o),o.on("out",s.say)}),l.on("bye",function(o,y){o=d.peers[o.id||o]||o,this.to.next(o),o.bye?o.bye():(y=o.wire)&&y.close&&y.close(),delete d.peers[o.id],o.wire=null}),l.on("bye",function(o,y){this.to.next(o),(y=console.STAT)&&(y.peers=s.near),(y=o.url)&&setTimeout(function(){},d.lack||9e3)}),l.on("hi",function(o,y){if(this.to.next(o),(y=console.STAT)&&(y.peers=s.near),!d.super){var k=Object.keys(l.next||"");k.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(k,function(S){var w=l.next[S];if(d.super||(w.ask||"")[""]){s.say({get:{"#":S}},o);return}setTimeout.each(Object.keys(w.ask||""),function(A){A&&s.say({"##":String.hash((l.graph[S]||"")[A]),get:{"#":S,".":A}},o)})})}}),s}var h;try{i.exports=f}catch{}})(t,"./mesh"),t(function(i){var n=t("./index");n.Mesh=t("./mesh"),n.on("opt",function(a){if(this.to.next(a),a.once)return;var f=a.opt;if(f.WebSocket===!1)return;var h=n.window||{},l=f.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!l)return;f.WebSocket=l;var s=f.mesh=f.mesh||n.Mesh(a);s.wire||f.wire,s.wire=f.wire=d;function d(b){try{if(!b||!b.url)return x&&x(b);var $=b.url.replace(/^http/,"ws"),x=b.wire=new f.WebSocket($);return x.onclose=function(){T(b),f.mesh.bye(b)},x.onerror=function(j){T(b)},x.onopen=function(){f.mesh.hi(b)},x.onmessage=function(j){j&&f.mesh.hear(j.data||j,b)},x}catch{f.mesh.bye(b)}}setTimeout(function(){!f.super&&a.on("out",{dam:"hi"})},1);var g=2*999;function T(b){clearTimeout(b.defer),f.peers[b.url]&&(p&&b.retry<=0||(b.retry=(b.retry||f.retry+1||60)-(-b.tried+(b.tried=+new Date)<g*4?1:0),b.defer=setTimeout(function $(){if(p&&p.hidden)return setTimeout($,g);d(b)},g)))}var p=""+c!=typeof document&&document});var c})(t,"./websocket"),t(function(i){if(!(typeof Gun>"u")){var n=function(){},c;try{c=(Gun.window||n).localStorage}catch{}c||(Gun.log("Warning: No localStorage exists to persist data to!"),c={setItem:function(f,h){this[f]=h},removeItem:function(f){delete this[f]},getItem:function(f){return this[f]}});var a=JSON.stringifyAsync||function(f,h,l,s){var d;try{h(d,JSON.stringify(f,l,s))}catch(g){h(g)}};Gun.on("create",function f(h){this.to.next(h);var l=h.opt;h.graph;var s=[],d,g,T,p;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{d=f[l.prefix]=f[l.prefix]||JSON.parse(T=c.getItem(l.prefix))||{}}catch{d=f[l.prefix]={}}T=(T||"").length,h.on("get",function($){this.to.next($);var x=$.get,j,o,y,k;!x||!(j=x["#"])||(o=d[j]||k,o&&(y=x["."])&&!Object.plain(y)&&(o=Gun.state.ify({},y,Gun.state.is(o,y),o[y],j)),Gun.on.get.ack($,o))}),h.on("put",function($){this.to.next($);var x=$.put,j=x["#"],o=x["."],y=$["#"],k=$.ok||"";if(d[j]=Gun.state.ify(d[j],o,x[">"],x[":"],j),p&&T>4999880){h.on("in",{"@":y,err:"localStorage max!"});return}!$["@"]&&(!$._.via||Math.random()<k["@"]/k["/"])&&s.push(y),!g&&(g=setTimeout(b,9+T/333))});function b(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var $=s;clearTimeout(g),g=!1,s=[],a(d,function(x,j){try{!x&&c.setItem(l.prefix,j)}catch(o){x=p=o||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:x,get:l.prefix,put:d})),T=j.length,setTimeout.each($,function(o){h.on("in",{"@":o,err:x,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var t=function(_){console.warn("Warning! Deprecated internal utility will break in next version:",_)},e=Gun;e.fn=e.fn||{is:function(_){return t("fn"),!!_&&typeof _=="function"}},e.bi=e.bi||{is:function(_){return t("bi"),_ instanceof Boolean||typeof _=="boolean"}},e.num=e.num||{is:function(_){return t("num"),!i(_)&&(_-parseFloat(_)+1>=0||_===1/0||_===-1/0)}},e.text=e.text||{is:function(_){return t("text"),typeof _=="string"}},e.text.ify=e.text.ify||function(_){return t("text.ify"),e.text.is(_)?_:typeof JSON<"u"?JSON.stringify(_):_&&_.toString?_.toString():_},e.text.random=e.text.random||function(_,u){t("text.random");var m="";for(_=_||24,u=u||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";_>0;)m+=u.charAt(Math.floor(Math.random()*u.length)),_--;return m},e.text.match=e.text.match||function(_,u){var m,v;return t("text.match"),typeof _!="string"?!1:(typeof u=="string"&&(u={"=":u}),u=u||{},m=u["="]||u["*"]||u[">"]||u["<"],_===m?!0:v!==u["="]?!1:(m=u["*"]||u[">"]||u["<"],_.slice(0,(m||"").length)===m?!0:v!==u["*"]?!1:v!==u[">"]&&v!==u["<"]?_>=u[">"]&&_<=u["<"]:v!==u[">"]&&_>=u[">"]||v!==u["<"]&&_<=u["<"]))},e.text.hash=e.text.hash||function(_,u){if(t("text.hash"),typeof _=="string"){if(u=u||0,!_.length)return u;for(var m=0,v=_.length,N;m<v;++m)N=_.charCodeAt(m),u=(u<<5)-u+N,u|=0;return u}},e.list=e.list||{is:function(_){return t("list"),_ instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(_){return t("list.sort"),function(u,m){return!u||!m?0:(u=u[_],m=m[_],u<m?-1:u>m?1:0)}},e.list.map=e.list.map||function(_,u,m){return t("list.map"),D(_,u,m)},e.list.index=1,e.obj=e.boj||{is:function(_){return t("obj"),_?_ instanceof Object&&_.constructor===Object||Object.prototype.toString.call(_).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(_,u,m){return t("obj.put"),(_||{})[u]=m,_},e.obj.has=e.obj.has||function(_,u){return t("obj.has"),_&&Object.prototype.hasOwnProperty.call(_,u)},e.obj.del=e.obj.del||function(_,u){if(t("obj.del"),!!_)return _[u]=null,delete _[u],_},e.obj.as=e.obj.as||function(_,u,m,v){return t("obj.as"),_[u]=_[u]||(v===m?{}:m)},e.obj.ify=e.obj.ify||function(_){if(t("obj.ify"),y(_))return _;try{_=JSON.parse(_)}catch{_={}}return _},function(){var _;function u(m,v){S(this,v)&&_!==this[v]||(this[v]=m)}e.obj.to=e.obj.to||function(m,v){return t("obj.to"),v=v||{},D(m,u,v),v}}(),e.obj.copy=e.obj.copy||function(_){return t("obj.copy"),_&&JSON.parse(JSON.stringify(_))},function(){function _(u,m){var v=this.n,N;if(!(v&&(m===v||y(v)&&S(v,m)))&&N!==m)return!0}e.obj.empty=e.obj.empty||function(u,m){return t("obj.empty"),u?!D(u,_,{n:m}):!0}}(),function(){function _(v,N){if(arguments.length===2){_.r=_.r||{},_.r[v]=N;return}_.r=_.r||[],_.r.push(v)}var u=Object.keys,m;Object.keys=Object.keys||function(v){return m(v,function(N,G,O){O(G)})},e.obj.map=m=e.obj.map||function(v,N,G){t("obj.map");var O,C=0,I,P,q,W,V=typeof N=="function";if(_.r=O,u&&y(v)&&(q=u(v),W=!0),G=G||{},i(v)||q)for(I=(q||v).length;C<I;C++){var U=C+e.list.index;if(V){if(P=W?N.call(G,v[q[C]],q[C],_):N.call(G,v[C],U,_),P!==O)return P}else if(N===v[W?q[C]:C])return q?q[C]:U}else for(C in v)if(V){if(S(v,C)&&(P=G?N.call(G,v[C],C,_):N(v[C],C,_),P!==O))return P}else if(N===v[C])return C;return V?_.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(_){return t("time"),_?_ instanceof Date:+new Date().getTime()};var j=e.fn.is,i=e.list.is,o=e.obj,y=o.is,S=o.has,D=o.map,n={};n.is=function(_){return t("val.is"),_===E?!1:_===null?!0:_===1/0?!1:f(_)||a(_)||p(_)?!0:n.link.is(_)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(u){if(t("val.link.is"),u&&u[c]&&!u._&&y(u)){var m={};if(D(u,_,m),m.id)return m.id}return!1};function _(u,m){var v=this;if(v.id)return v.id=!1;if(m==c&&f(u))v.id=u;else return v.id=!1}}(),n.link.ify=function(_){return t("val.link.ify"),A({},c,_)},e.obj.has._=".";var c=n.link._,E,a=e.bi.is,p=e.num.is,f=e.text.is,o=e.obj,y=o.is,A=o.put,D=o.map;e.val=e.val||n;var h={_:"_"};h.soul=function(_,u){return t("node.soul"),_&&_._&&_._[u||d]},h.soul.ify=function(_,u){return t("node.soul.ify"),u=typeof u=="string"?{soul:u}:u||{},_=_||{},_._=_._||{},_._[d]=u.soul||_._[d]||s(),_},h.soul._=n.link._,function(){h.is=function(u,m,v){t("node.is");var N;return y(u)&&(N=h.soul(u))?!D(u,_,{as:v,cb:m,s:N,n:u}):!1};function _(u,m){if(m!==h._){if(!n.is(u))return!0;this.cb&&this.cb.call(this.as,u,m,this.n,this.s)}}}(),function(){h.ify=function(u,m,v){return t("node.ify"),m?typeof m=="string"?m={soul:m}:typeof m=="function"&&(m={map:m}):m={},m.map&&(m.node=m.map.call(v,u,E,m.node||{})),(m.node=h.soul.ify(m.node||{},m))&&D(u,_,{o:m,as:v}),m.node};function _(u,m){var v=this.o,N,G;if(v.map){N=v.map.call(this.as,u,""+m,v.node),G===N?k(v.node,m):v.node&&(v.node[m]=N);return}n.is(u)&&(v.node[m]=u)}}();var o=e.obj,y=o.is,k=o.del,D=o.map,l=e.text,s=l.random,d=h.soul._,E;e.node=e.node||h;var g=e.state;g.lex=function(){return t("state.lex"),g().toString(36).replace(".","")},g.to=function(_,u,m){t("state.to");var v=(_||{})[u];return y(v)&&(v=F(v)),g.ify(m,u,g.is(_,u),v,h.soul(_))},function(){g.map=function(u,m,v){t("state.map");var N,G=y(G=u||m)?G:null;return u=j(u=u||m)?u:null,G&&!u?(m=p(m)?m:g(),G[$]=G[$]||{},D(G,_,{o:G,s:m}),G):(v=v||y(m)?m:N,m=p(m)?m:g(),function(O,C,I,P){if(!u)return _.call({o:I,s:m},O,C),O;u.call(v||this||{},O,C,I,P),!(S(I,C)&&N===I[C])&&_.call({o:I,s:m},O,C)})};function _(u,m){$!==m&&g.ify(this.o,m,this.s)}}();var o=e.obj;o.as;var S=o.has,y=o.is,D=o.map,F=o.copy,T=e.num,p=T.is,b=e.fn,j=b.is,$=h._,E,x={};(function(){x.is=function(m,v,N,G){return t("graph.is"),!m||!y(m)||w(m)?!1:!D(m,_,{cb:v,fn:N,as:G})};function _(m,v){if(!m||v!==h.soul(m)||!h.is(m,this.fn,this.as))return!0;this.cb&&(u.n=m,u.as=this.as,this.cb.call(u.as,m,v,u))}function u(m){m&&h.is(u.n,m,u.as)}})(),function(){x.ify=function(G,O,C){t("graph.ify");var I={path:[],obj:G};return O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O.map=O):O={},typeof C=="string"&&(O.soul=O.soul||C,C=E),O.soul&&(I.link=n.link.ify(O.soul)),O.shell=(C||{}).shell,O.graph=O.graph||{},O.seen=O.seen||[],O.as=O.as||C,_(O,I),O.root=I.node,O.graph};function _(G,O){var C;return(C=N(G,O))?C:(O.env=G,O.soul=m,h.ify(O.obj,u,O)&&(O.link=O.link||n.link.ify(h.soul(O.node)),O.obj!==G.shell&&(G.graph[n.link.is(O.link)]=O.node)),O)}function u(G,O,C){var I=this,P=I.env,q,W;if(h._===O&&S(G,n.link._))return C._;if(q=v(G,O,C,I,P)){if(O||(I.node=I.node||C||{},S(G,h._)&&h.soul(G)&&(I.node._=F(G._)),I.node=h.soul.ify(I.node,n.link.is(I.link)),I.link=I.link||n.link.ify(h.soul(I.node))),(W=P.map)&&(W.call(P.as||{},G,O,C,I),S(C,O))){if(G=C[O],E===G){k(C,O);return}if(!(q=v(G,O,C,I,P)))return}if(!O)return I.node;if(q===!0)return G;if(W=_(P,{obj:G,path:I.path.concat(O)}),!!W.node)return W.link}}function m(G){var O=this,C=n.link.is(O.link),I=O.env.graph;O.link=O.link||n.link.ify(G),O.link[n.link._]=G,O.node&&O.node[h._]&&(O.node[h._][n.link._]=G),S(I,C)&&(I[G]=I[C],k(I,C))}function v(G,O,C,I,P){var q;if(n.is(G))return!0;if(y(G))return 1;if(q=P.invalid)return G=q.call(P.as||{},G,O,C),v(G,O,C,I,P);P.err="Invalid value at '"+I.path.concat(O).join(".")+"'!",e.list.is(G)&&(P.err+=" Use `.set(item)` instead of an Array.")}function N(G,O){for(var C=G.seen,I=C.length,P;I--;)if(P=C[I],O.obj===P.obj)return P;C.push(O)}}(),x.node=function(_){t("graph.node");var u=h.soul(_);if(u)return A({},u,_)},function(){x.to=function(u,m,v){if(t("graph.to"),!!u){var N={};return v=v||{seen:{}},D(u[m],_,{obj:N,graph:u,opt:v}),N}};function _(u,m){var v,N;if(h._===m){if(w(u,n.link._))return;this.obj[m]=F(u);return}if(!(v=n.link.is(u))){this.obj[m]=u;return}if(N=this.opt.seen[v]){this.obj[m]=N;return}this.obj[m]=this.opt.seen[v]=x.to(this.graph,v,this.opt)}}();var j=e.fn.is,o=e.obj,y=o.is,k=o.del,S=o.has,w=o.empty,A=o.put,D=o.map,F=o.copy,E;e.graph=e.graph||x}}()})(Lt);var dn=Lt.exports,hn=dn;const pn=cn(hn),_n=pn({peers:["wss://gun-manhattan.herokuapp.com/gun"]}),je=_n.get("cards"),Jt=document.createElement("a"),Mt=document.createElement("input");Mt.type="file";Mt.accept=".json";Mt.onchange=async r=>{var e;if(!r||!r.target)return;const t=(e=r.target.files)==null?void 0:e[0];if(t){const i=await t.text();Rt(JSON.parse(i))}};const _t=Te([]),Rt=r=>{je.put({data:JSON.stringify(r)})};je.on(r=>{_t.set(JSON.parse(r.data))});const vn=()=>{Jt.href=URL.createObjectURL(new Blob([JSON.stringify(xe(_t))],{type:"application/json"})),Jt.download="cards.json",Jt.click()},yn=()=>{Mt.click()};function fe(r,t,e){const i=r.slice();return i[3]=t[e],i}function ae(r,t,e){const i=r.slice();return i[6]=t[e],i}function le(r,t,e){const i=r.slice();return i[6]=t[e],i}function ce(r){let t,e;return t=new Ut({props:{card:r[6]}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(J(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function se(r){let t,e;return t=new Ut({props:{card:r[6],back:!0}}),{c(){Y(t.$$.fragment)},m(i,n){Q(t,i,n),e=!0},p(i,n){const c={};n&2&&(c.card=i[6]),t.$set(c)},i(i){e||(J(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){X(t,i)}}}function de(r){let t,e,i,n,c,a=rt(r[3]),f=[];for(let g=0;g<a.length;g+=1)f[g]=ce(le(r,a,g));const h=g=>z(f[g],1,1,()=>{f[g]=null});let l=rt(r[3]),s=[];for(let g=0;g<l.length;g+=1)s[g]=se(ae(r,l,g));const d=g=>z(s[g],1,1,()=>{s[g]=null});return{c(){t=R("div");for(let g=0;g<f.length;g+=1)f[g].c();e=K(),i=R("div");for(let g=0;g<s.length;g+=1)s[g].c();n=K(),H(t,"class","page svelte-1bs53cn"),H(i,"class","page svelte-1bs53cn")},m(g,T){B(g,t,T);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(t,null);B(g,e,T),B(g,i,T);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(i,null);L(i,n),c=!0},p(g,T){if(T&2){a=rt(g[3]);let p;for(p=0;p<a.length;p+=1){const b=le(g,a,p);f[p]?(f[p].p(b,T),J(f[p],1)):(f[p]=ce(b),f[p].c(),J(f[p],1),f[p].m(t,null))}for(lt(),p=a.length;p<f.length;p+=1)h(p);ct()}if(T&2){l=rt(g[3]);let p;for(p=0;p<l.length;p+=1){const b=ae(g,l,p);s[p]?(s[p].p(b,T),J(s[p],1)):(s[p]=se(b),s[p].c(),J(s[p],1),s[p].m(i,n))}for(lt(),p=l.length;p<s.length;p+=1)d(p);ct()}},i(g){if(!c){for(let T=0;T<a.length;T+=1)J(f[T]);for(let T=0;T<l.length;T+=1)J(s[T]);c=!0}},o(g){f=f.filter(Boolean);for(let T=0;T<f.length;T+=1)z(f[T]);s=s.filter(Boolean);for(let T=0;T<s.length;T+=1)z(s[T]);c=!1},d(g){g&&(M(t),M(e),M(i)),kt(f,g),kt(s,g)}}}function bn(r){let t,e,i,n=rt(ue(r[1])),c=[];for(let f=0;f<n.length;f+=1)c[f]=de(fe(r,n,f));const a=f=>z(c[f],1,1,()=>{c[f]=null});return{c(){t=R("div"),e=R("section");for(let f=0;f<c.length;f+=1)c[f].c();H(e,"class","print")},m(f,h){B(f,t,h),L(t,e);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(e,null);r[2](e),i=!0},p(f,[h]){if(h&2){n=rt(ue(f[1]));let l;for(l=0;l<n.length;l+=1){const s=fe(f,n,l);c[l]?(c[l].p(s,h),J(c[l],1)):(c[l]=de(s),c[l].c(),J(c[l],1),c[l].m(e,null))}for(lt(),l=n.length;l<c.length;l+=1)a(l);ct()}},i(f){if(!i){for(let h=0;h<n.length;h+=1)J(c[h]);i=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)z(c[h]);i=!1},d(f){f&&M(t),kt(c,f),r[2](null)}}}function gn(r,t,e){let i;It(r,_t,a=>e(1,i=a));let n;function c(a){St[a?"unshift":"push"](()=>{n=a,e(0,n)})}return[n,i,c]}class mn extends ut{constructor(t){super(),ot(this,t,gn,bn,it,{})}}function kn(r){let t,e,i,n,c;const a=r[2].default,f=Ge(a,r,r[1],null);return{c(){t=R("button"),f&&f.c(),H(t,"class",e="button "+r[0]+" svelte-zqnkwt")},m(h,l){B(h,t,l),f&&f.m(t,null),i=!0,n||(c=vt(t,"click",r[3]),n=!0)},p(h,[l]){f&&f.p&&(!i||l&2)&&Ee(f,a,h,h[1],i?Ce(a,h[1],l,null):Fe(h[1]),null),(!i||l&1&&e!==(e="button "+h[0]+" svelte-zqnkwt"))&&H(t,"class",e)},i(h){i||(J(f,h),i=!0)},o(h){z(f,h),i=!1},d(h){h&&M(t),f&&f.d(h),n=!1,c()}}}function $n(r,t,e){let{$$slots:i={},$$scope:n}=t,{colour:c="green"}=t;function a(f){Pe.call(this,r,f)}return r.$$set=f=>{"colour"in f&&e(0,c=f.colour),"$$scope"in f&&e(1,n=f.$$scope)},[c,n,i,a]}class ft extends ut{constructor(t){super(),ot(this,t,$n,kn,it,{colour:0})}}function wn(r){let t,e,i;return e=new Ft({props:{cardType:r[0],names:["None","Movement","Mystery","Curse","Starter","Board","Change","Deck"],noPassive:!0}}),e.$on("type",r[2]),{c(){t=R("div"),Y(e.$$.fragment),H(t,"class","select-wrapper svelte-1wgwrdq"),nt(t,"background-color",r[1])},m(n,c){B(n,t,c),Q(e,t,null),i=!0},p(n,[c]){const a={};c&1&&(a.cardType=n[0]),e.$set(a),(!i||c&2)&&nt(t,"background-color",n[1])},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){z(e.$$.fragment,n),i=!1},d(n){n&&M(t),X(e)}}}function Tn(r,t,e){let i,{currentFilter:n="None"}=t;const c=({detail:a})=>e(0,n=a);return r.$$set=a=>{"currentFilter"in a&&e(0,n=a.currentFilter)},r.$$.update=()=>{r.$$.dirty&1&&e(1,i=$t(n))},[n,i,c]}class Se extends ut{constructor(t){super(),ot(this,t,Tn,wn,it,{currentFilter:0})}}function he(r,t,e){const i=r.slice();return i[7]=t[e],i}function jn(r){let t;return{c(){t=Z("home")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function pe(r){let t,e=r[7].cardType.passive?"passive":"",i,n,c=r[7].cardType.type+"",a,f,h,l,s;return h=new Wt({props:{card:r[7],editable:!1}}),{c(){t=R("div"),i=Z(e),n=K(),a=Z(c),f=K(),Y(h.$$.fragment),l=K()},m(d,g){B(d,t,g),L(t,i),L(t,n),L(t,a),L(t,f),Q(h,t,null),L(t,l),s=!0},p(d,g){(!s||g&4)&&e!==(e=d[7].cardType.passive?"passive":"")&&Ct(i,e),(!s||g&4)&&c!==(c=d[7].cardType.type+"")&&Ct(a,c);const T={};g&4&&(T.card=d[7]),h.$set(T)},i(d){s||(J(h.$$.fragment,d),s=!0)},o(d){z(h.$$.fragment,d),s=!1},d(d){d&&M(t),X(h)}}}function Sn(r){let t,e,i,n,c,a,f,h,l,s,d,g,T,p,b;e=new ft({props:{$$slots:{default:[jn]},$$scope:{ctx:r}}}),e.$on("click",r[4]);function $(k){r[5](k)}let x={};r[0]!==void 0&&(x.currentFilter=r[0]),n=new Se({props:x}),St.push(()=>we(n,"currentFilter",$));let j=rt(r[2]),o=[];for(let k=0;k<j.length;k+=1)o[k]=pe(he(r,j,k));const y=k=>z(o[k],1,1,()=>{o[k]=null});return{c(){t=R("header"),Y(e.$$.fragment),i=K(),Y(n.$$.fragment),a=K(),f=R("section"),h=R("label"),h.textContent="sort passive",l=K(),s=R("input"),d=K(),g=R("section");for(let k=0;k<o.length;k+=1)o[k].c();H(t,"class","svelte-hn041v"),H(h,"for","passive"),H(s,"type","checkbox"),H(s,"name","passive"),H(s,"id","passive"),H(s,"class","svelte-hn041v"),H(g,"class","container svelte-hn041v")},m(k,S){B(k,t,S),Q(e,t,null),L(t,i),Q(n,t,null),B(k,a,S),B(k,f,S),L(f,h),L(f,l),L(f,s),s.checked=r[1],B(k,d,S),B(k,g,S);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(g,null);T=!0,p||(b=vt(s,"change",r[6]),p=!0)},p(k,[S]){const w={};S&1024&&(w.$$scope={dirty:S,ctx:k}),e.$set(w);const A={};if(!c&&S&1&&(c=!0,A.currentFilter=k[0],ke(()=>c=!1)),n.$set(A),S&2&&(s.checked=k[1]),S&4){j=rt(k[2]);let D;for(D=0;D<j.length;D+=1){const F=he(k,j,D);o[D]?(o[D].p(F,S),J(o[D],1)):(o[D]=pe(F),o[D].c(),J(o[D],1),o[D].m(g,null))}for(lt(),D=j.length;D<o.length;D+=1)y(D);ct()}},i(k){if(!T){J(e.$$.fragment,k),J(n.$$.fragment,k);for(let S=0;S<j.length;S+=1)J(o[S]);T=!0}},o(k){z(e.$$.fragment,k),z(n.$$.fragment,k),o=o.filter(Boolean);for(let S=0;S<o.length;S+=1)z(o[S]);T=!1},d(k){k&&(M(t),M(a),M(f),M(d),M(g)),X(e),X(n),kt(o,k),p=!1,b()}}}function On(r,t,e){let i,n;It(r,_t,s=>e(3,n=s));let c="None",a=!1;const f=()=>{Et.set("")};function h(s){c=s,e(0,c)}function l(){a=this.checked,e(1,a)}return r.$$.update=()=>{r.$$.dirty&11&&e(2,i=n.map(s=>{const d=[s.cardHalf1];return s.cardHalf2&&d.push(s.cardHalf2),d}).flat().filter(s=>{if(c==="None"||s.cardType.type===c)return s}).sort((s,d)=>a?-Number(s.cardType.passive)-Number(d.cardType.passive):0))},[c,a,i,n,f,h,l]}class Dn extends ut{constructor(t){super(),ot(this,t,On,Sn,it,{})}}function _e(r,t,e){const i=r.slice();return i[11]=t[e],i}function An(r){let t;return{c(){t=Z("add two sided")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Nn(r){let t;return{c(){t=Z("add one sided")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function xn(r){let t;return{c(){t=Z("save")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Gn(r){let t;return{c(){t=Z("import JSON")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Cn(r){let t;return{c(){t=Z("export JSON")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function En(r){let t;return{c(){t=Z("Download")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function Fn(r){let t;return{c(){t=Z("view halves")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function In(r){let t;return{c(){t=Z("remove")},m(e,i){B(e,t,i)},d(e){e&&M(t)}}}function ve(r){let t,e,i,n,c,a;e=new Ut({props:{card:r[11],readable:!0}});function f(){return r[9](r[11])}return n=new ft({props:{colour:"red",$$slots:{default:[In]},$$scope:{ctx:r}}}),n.$on("click",f),{c(){t=R("div"),Y(e.$$.fragment),i=K(),Y(n.$$.fragment),c=K(),H(t,"class","wrapper svelte-z9e1s4")},m(h,l){B(h,t,l),Q(e,t,null),L(t,i),Q(n,t,null),L(t,c),a=!0},p(h,l){r=h;const s={};l&4&&(s.card=r[11]),e.$set(s);const d={};l&16384&&(d.$$scope={dirty:l,ctx:r}),n.$set(d)},i(h){a||(J(e.$$.fragment,h),J(n.$$.fragment,h),a=!0)},o(h){z(e.$$.fragment,h),z(n.$$.fragment,h),a=!1},d(h){h&&M(t),X(e),X(n)}}}function Hn(r){let t,e,i,n,c,a,f,h,l,s,d,g,T,p,b,$,x,j,o,y,k=r[2].length+"",S,w,A,D;function F(v){r[3](v)}let E={};r[0]!==void 0&&(E.currentFilter=r[0]),e=new Se({props:E}),St.push(()=>we(e,"currentFilter",F)),c=new ft({props:{colour:"blue",$$slots:{default:[An]},$$scope:{ctx:r}}}),c.$on("click",r[4]),f=new ft({props:{colour:"blue",$$slots:{default:[Nn]},$$scope:{ctx:r}}}),f.$on("click",r[5]),l=new ft({props:{$$slots:{default:[xn]},$$scope:{ctx:r}}}),l.$on("click",r[6]),d=new ft({props:{$$slots:{default:[Gn]},$$scope:{ctx:r}}}),d.$on("click",yn),T=new ft({props:{$$slots:{default:[Cn]},$$scope:{ctx:r}}}),T.$on("click",vn),b=new ft({props:{$$slots:{default:[En]},$$scope:{ctx:r}}}),b.$on("click",r[7]),x=new ft({props:{$$slots:{default:[Fn]},$$scope:{ctx:r}}}),x.$on("click",r[8]);let _=rt(r[2]),u=[];for(let v=0;v<_.length;v+=1)u[v]=ve(_e(r,_,v));const m=v=>z(u[v],1,1,()=>{u[v]=null});return{c(){t=R("section"),Y(e.$$.fragment),n=K(),Y(c.$$.fragment),a=K(),Y(f.$$.fragment),h=K(),Y(l.$$.fragment),s=K(),Y(d.$$.fragment),g=K(),Y(T.$$.fragment),p=K(),Y(b.$$.fragment),$=K(),Y(x.$$.fragment),j=K(),o=R("h1"),y=Z("cards "),S=Z(k),w=K(),A=R("section");for(let v=0;v<u.length;v+=1)u[v].c();H(t,"class","button-container svelte-z9e1s4"),H(A,"class","container svelte-z9e1s4")},m(v,N){B(v,t,N),Q(e,t,null),L(t,n),Q(c,t,null),L(t,a),Q(f,t,null),L(t,h),Q(l,t,null),L(t,s),Q(d,t,null),L(t,g),Q(T,t,null),L(t,p),Q(b,t,null),L(t,$),Q(x,t,null),B(v,j,N),B(v,o,N),L(o,y),L(o,S),B(v,w,N),B(v,A,N);for(let G=0;G<u.length;G+=1)u[G]&&u[G].m(A,null);D=!0},p(v,[N]){const G={};!i&&N&1&&(i=!0,G.currentFilter=v[0],ke(()=>i=!1)),e.$set(G);const O={};N&16384&&(O.$$scope={dirty:N,ctx:v}),c.$set(O);const C={};N&16384&&(C.$$scope={dirty:N,ctx:v}),f.$set(C);const I={};N&16384&&(I.$$scope={dirty:N,ctx:v}),l.$set(I);const P={};N&16384&&(P.$$scope={dirty:N,ctx:v}),d.$set(P);const q={};N&16384&&(q.$$scope={dirty:N,ctx:v}),T.$set(q);const W={};N&16384&&(W.$$scope={dirty:N,ctx:v}),b.$set(W);const V={};if(N&16384&&(V.$$scope={dirty:N,ctx:v}),x.$set(V),(!D||N&4)&&k!==(k=v[2].length+"")&&Ct(S,k),N&6){_=rt(v[2]);let U;for(U=0;U<_.length;U+=1){const tt=_e(v,_,U);u[U]?(u[U].p(tt,N),J(u[U],1)):(u[U]=ve(tt),u[U].c(),J(u[U],1),u[U].m(A,null))}for(lt(),U=_.length;U<u.length;U+=1)m(U);ct()}},i(v){if(!D){J(e.$$.fragment,v),J(c.$$.fragment,v),J(f.$$.fragment,v),J(l.$$.fragment,v),J(d.$$.fragment,v),J(T.$$.fragment,v),J(b.$$.fragment,v),J(x.$$.fragment,v);for(let N=0;N<_.length;N+=1)J(u[N]);D=!0}},o(v){z(e.$$.fragment,v),z(c.$$.fragment,v),z(f.$$.fragment,v),z(l.$$.fragment,v),z(d.$$.fragment,v),z(T.$$.fragment,v),z(b.$$.fragment,v),z(x.$$.fragment,v),u=u.filter(Boolean);for(let N=0;N<u.length;N+=1)z(u[N]);D=!1},d(v){v&&(M(t),M(j),M(o),M(w),M(A)),X(e),X(c),X(f),X(l),X(d),X(T),X(b),X(x),kt(u,v)}}}function Mn(r,t,e){let i,n;It(r,_t,p=>e(1,n=p));let c="None";const a=(p,b)=>b==="None"?p:p.filter($=>$.cardHalf1.cardType.type===b||$.cardHalf2&&$.cardHalf2.cardType.type===b);function f(p){c=p,e(0,c)}const h=()=>{_t.set([...n,Zt(2)])},l=()=>{_t.set([...n,Zt(1)]),console.log(n.length)},s=()=>{Rt(n)},d=()=>{Et.set("download")},g=()=>{Et.set("half")},T=p=>{Rt(n.filter(b=>b.id!==p.id))};return r.$$.update=()=>{r.$$.dirty&3&&e(2,i=a(n,c))},[c,n,i,f,h,l,s,d,g,T]}class Bn extends ut{constructor(t){super(),ot(this,t,Mn,Hn,it,{})}}function Pn(r){let t,e,i;var n=r[0];function c(a,f){return{}}return n&&(t=Yt(n,c())),{c(){t&&Y(t.$$.fragment),e=Ht()},m(a,f){t&&Q(t,a,f),B(a,e,f),i=!0},p(a,[f]){if(f&1&&n!==(n=a[0])){if(t){lt();const h=t;z(h.$$.fragment,1,0,()=>{X(h,1)}),ct()}n?(t=Yt(n,c()),Y(t.$$.fragment),J(t.$$.fragment,1),Q(t,e.parentNode,e)):t=null}},i(a){i||(t&&J(t.$$.fragment,a),i=!0)},o(a){t&&z(t.$$.fragment,a),i=!1},d(a){a&&M(e),t&&X(t,a)}}}function Jn(r,t,e){let i,n;It(r,Et,a=>e(1,n=a));const c={"":Bn,download:mn,half:Dn};return r.$$.update=()=>{r.$$.dirty&2&&e(0,i=c[n])},[i,n]}class qn extends ut{constructor(t){super(),ot(this,t,Jn,Pn,it,{})}}new qn({target:document.getElementById("app")});
